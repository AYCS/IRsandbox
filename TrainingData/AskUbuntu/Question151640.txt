[{"id":151640,"title":"Problem with Hibernation","body":"<p>I just upgraded my Ubuntu 11.10 to 12.04. I have problem with Hibernation in my new 12.04.</p>\n\n<p>I run the following command,</p>\n\n<pre><code>sudo pm-hibernate\n</code></pre>\n\n<p>but my system does not <strong>Hibernate</strong>, i.e. my system does not turn's off rather the screen just flashes out for few second's and resumes previous state.</p>\n\n<p>How do I fix this problem and enable Hibernation on my system?</p>\n","related_questions":[{"id":157629,"title":"How to prevent computer from automatically sleeping and/or hibernating?","body":"<p>I'm running Ubuntu 12.04, and my laptop* won't wake from sleep/suspend/hibernate. (Is sleep the same thing as suspend?) I'm not even sure which of these things it's doing. When I am done working for the day, I lock my screen (Control-Alt-L). When I come back the next day, the screen is in power saving mode, and no amount of typing or clicking (on the usb keyboard/mouse or the builtin keyboard/trackpad) nor tapping the power button will bring it back to life.</p>\n\n<p>The only way I can get my machine to work is to hold down the power button until it shuts off, then press the power button again to turn it back on. Obviously, anything I had open from the previous day is pretty much gone -- in particular, my VMs all get rudely shut down without any warning.</p>\n\n<p>This is driving me INSANE. I spend the first hour of every work day trying to figure out how to get my computer to stop locking up over night.</p>\n\n<p>What I've tried:</p>\n\n<ol>\n<li>Editing the org.freedesktop.upower.policy to disable suspend and hibernate.</li>\n<li>Setting power management options in \"Power\" section of \"System Settings\".</li>\n<li>Looking at all power management options in the BIOS (none appear to be relevant to sleep/suspend/hibernate).</li>\n<li>Reading every forum post/askubuntu post that I can find that's even tangentially related to the subject.</li>\n<li>Add acpi=off to kernel args. (Results in USB keyboard and mouse not working, so I didn't wait to see if it fixes the suspend.)</li>\n<li>Add apm=off to kernel args.</li>\n</ol>\n\n<p><strong>My question:</strong> how to disable the <strong>automatic</strong> sleep and/or hibernate (and/or anything similar) in Ubuntu 12.04. I don't care if it's still possible to sleep/suspend/hibernate/whatever by pushing buttons or running some command or reciting led zeppelin lyrics backwards. I just want my laptop to be ready for work in the morning.</p>\n\n<p>*The laptop is a Dell Latitude something or other. I don't want to get too specific because I've seen a lot of similar questions get closed for being too specific. I think my question is generic enough to stand -- it's a question about the latest, stable version of Ubuntu.</p>\n\n<p><strong>Link to</strong> <a href=\"http://pastebin.ca/2165604\">dmesg</a></p>\n\n<p><strong>Link to</strong> <a href=\"http://pastebin.ca/2165607\">/var/log/kern.log</a></p>\n\n<p>EDIT:</p>\n\n<p>Nothing I've tried so far has prevented Ubuntu from sleeping at night, and when it does sleep, nothing I have tried can reliably get it to wake back up. I've seen a few posts that say buggy video drivers can cause problems with waking.</p>\n\n<p>Last night, on a hunch, I tried switching to console (ctrl+alt+1) before leaving work, just to see what would happen. This morning when I woke up the computer, it instantly woke up back to the console. I switched over to Gnome (ctrl+alt+7) and although the screen looked frozen, I typed my password, pressed enter, and made some coffee. When I got back a few minutes later, my desktop was ready, just like I left it last night.</p>\n\n<p>I'm going to keep trying this to see if this is a reliable solution.</p>\n\n<p>EDIT 2:</p>\n\n<p>No dice. Switching to the console after logging out does nothing for me... still have to reboot my computer each morning. It's driving me nuts... I can't believe how erratic suspend is on Ubuntu. Or the fact that it can't simply be disabled. </p>\n"},{"id":95833,"title":"Problem with Hibernate on Ubuntu 11.10 slow","body":"<p>I installed Ubuntu 11.10 on my machine and I notice several problems with the Hibernate functionality. When I use s2disk/pm-hibernate, I see an embarrassingly slow wakeup from the hibernate state. I am talking on the order of 5-6 minutes when Windows 7 on the same system resumes within 1 minute even when I hibernate with a slightly loaded system. But this slow resume from hibernate is unacceptable and I would be glad if someone can help me repair it.\nI have a Core i5 processor with 8GB RAM. I have set about 6GB of hard disk space for swap.\nIt would be helpful if someone can help me identify and rectify the bottleneck in the resume process.</p>\n\n<p>Also with Windows 7 I was able to setup my system to wake up from hibernate state automatically at a specified time. But I am not able to get the same functionality running on linux. I am following this <a href=\"http://www.mythtv.org/wiki/ACPI_Wakeup\" rel=\"nofollow\">Automatic System Wakeup Guide</a>.</p>\n\n<p>Thanks for your help!</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Interesting observation from /var/log/kern.log</p>\n\n<p>During s2disk stage:\nI see the following log message:</p>\n\n<pre><code>Jan 16 01:38:00 pc kernel: [10682.575070] PM: Preallocating image memory... done (allocated 1902274 pages)\nJan 16 01:38:00 pc kernel: [10706.894027] PM: Allocated 7609096 kbytes in 24.33 seconds (312.74 MB/s)\n</code></pre>\n\n<p>This seems to be the bottleneck of s2disk stage.</p>\n\n<p>During resume the only time consuming steps as per kern.log are:</p>\n\n<pre><code>Jan 16 01:38:01 pc kernel: [10709.361876] video LNXVIDEO:00: Restoring backlight state\nJan 16 01:38:13 pc kernel: [10726.919537] wlan0: authenticate with c0:c1:c0:f0:68:6b (try 1)\n</code></pre>\n\n<p>This takes 12 seconds.</p>\n\n<pre><code>Jan 16 01:38:15 pc kernel: [10728.620666] [drm:drm_mode_getfb] *ERROR* invalid framebuffer id\nJan 16 01:38:17 pc kernel: [10730.903990] wlan0: deauthenticated from *:*:*:*:*:6b (Reason: 15)\n</code></pre>\n\n<p>This takes 2 seconds.</p>\n\n<pre><code>Jan 16 01:38:17 pc kernel: [10730.967287] cfg80211: Calling CRDA to update world regulatory domain\nJan 16 01:38:19 pc kernel: [10732.265611] wlan0: authenticate with *:*:*:*:*:6b (try 1)\n</code></pre>\n\n<p>This takes 2 seconds.</p>\n\n<pre><code>Jan 16 01:38:19 banga-pc kernel: [10732.271086] wlan0: associated\nJan 16 01:38:35 banga-pc kernel: [10748.866054] cfg80211: Ignoring regulatory request Set by core since the driver uses its own custom regulatory domain\nJan 16 01:38:35 banga-pc kernel: [10748.866063] cfg80211: World regulatory domain updated:\n</code></pre>\n\n<p>This takes 16 seconds.</p>\n\n<p>Rest all the log messages are closely spaced in time. This does not explain the 5-6 minute resume time. Also after about 2 minutes of power on I do see the windows and everything but the system takes about 3-4 minutes to become usable. Until then I do not see the mouse pointer and the keyboard does not work. The screen remains frozen until then as if waiting on <code>sudo s2disk</code> I had issued before hibernating the system.</p>\n\n<p>Strange but I do need help to fix this soon. I am used to &lt; 30 seconds resume time and restarting my computer &lt; once per week. I would be delighted if I could get the same with Ubuntu. I also need help to fix the ACPI Wakeup thing I mentioned above.</p>\n\n<p>In case it matters I have an integrated Intel graphics card on my laptop.</p>\n"},{"id":148690,"title":"How do I lock the screen after resuming from hibernation?","body":"<p>I've been able to successfully hibernate and resume my Ubuntu 12.04 Desktop PC using procedure that I've <a href=\"http://askubuntu.com/a/148686/10146\">documented in this answer</a>. However, I now have a problem that whenever the PC resumes, it <em>does not</em> locks the screen.</p>\n\n<p>How can I lock the screen after the system resumes back from hibernation?</p>\n"},{"id":174481,"title":"Resuming Hibernate from a Swapfile","body":"<p>I am rather sure that I set up hibernation correctly, and that the swap file I am using is being recognized and written to when I click hibernate. (/hibernate.img)\nIn the corner of the screen, it says system snapshot, compression ratio, etc.</p>\n\n<p>However, when I resume from hibernate, the top left corner reads \"resuming from hibernate.img\" but then the system just freezes. Every time.</p>\n\n<p>Some of the tutorials mentioned using a specially compiled kernel, and I have not done this. The kernel is simply 3.2.0-25-generic.</p>\n\n<p>I am using 12.04 64-bit. Any help would be great.</p>\n"},{"id":134683,"title":"Why hibernate command in 12.04 hibernates temporarily and restarts my PC?","body":"<p>Hibernate worked fine for my system in previous 10.10, 11.04 versions.\nI recently upgraded to 12.04. I did not see any hibernate command in the menu. I did the change proposed in another askubuntu question. I test hibernate using the pm-hibernate command but my system seemed to \"hibernate temporarily\" doing an immediate restart! The same behavior is experienced after implementing the <a href=\"http://askubuntu.com/questions/94754/how-to-enable-hibernation-in-12-04\">How to enable hibernation in 12.04?</a> guidelines. Do you know how can i fix that?</p>\n"},{"id":383084,"title":"a step away from hibernate!","body":"<p>I'm having trouble enabling my hibernate feature.\nI have installed Ubuntu 12.04 LTS 64bit using Wubi on my Asus N53SN hybrid laptop ( Intel + Nvidia). After Updating through ubuntu Update manager AND turning off my Nvidia card using Bumblebee, I no longer have an issue with suspending (aka standby, right?) my laptop and the laptop fan running at the full speed all the time. Oh and I also installed Jupiter and have set it on power saver ( CPU temp= 48 centigerades. is it ok?). any ways, I thought these were important to know in order for my problem to be solved.</p>\n\n<p>So when I tried to hibernate using uswsusp, it seemed like ubuntu was doing some things, the colorful screen went black with white texts, it didn't turn off; but everything went back to normal (but there were no sound/wireless problem). having a 8gb ram, I checked my swap size and I thought that I should increase it. I did that using this code that is available on the WubiGuide:</p>\n\n<pre><code>sudo su\nswapoff -a\ncd /host/ubuntu/disks/\nmv swap.disk swap.disk.bak\ndd if=/dev/zero of=swap.disk bs=1024 count=2097152\nmkswap swap.disk\nswapon -a\nfree -mrm swap.disk.bak\n</code></pre>\n\n<p>(I thought 2gbs is ok since I won't have 2gb of applications running to take ram memory. maybe I am wrong here.)\nthen, I try :\n<code>sudo s2disk</code>\nbut I get:</p>\n\n<blockquote>\n  <p>s2disk: Could not use the resume device (try swapon -a). Reason: No such device</p>\n</blockquote>\n\n<p>I do what he (!) asks, but nothing happens. I again try to run s2disk, but I get the same error.</p>\n\n<p>can you help me out? I think since I have no trouble with with suspend then I am just one step away from having hibernate.</p>\n\n<p>EDIT: I came across this question <a href=\"http://askubuntu.com/questions/144877/how-do-i-enable-hibernation-on-wubi\">How do I enable hibernation on Wubi?</a></p>\n\n<p>I didn't think that this would interfere. So there is no way to hibernate with a swab FILE? </p>\n"},{"id":181658,"title":"Can&#39;t restore from Hibernate (sudo pm-hibernate) on new Dell XPS 15z laptop in 12.04 LTS","body":"<p>I have a new Dell XPS 15z laptop and did a fresh install of 12.04 LTS on it. I've looked at several guides such as \"<a href=\"http://askubuntu.com/questions/94754/how-to-enable-hibernation-in-12-04\">How to enable hibernation in 12.04?</a>\" and \"<a href=\"http://hanynowsky.wordpress.com/2012/04/07/dell-xps-15-l502x-ubuntu-linux/\" rel=\"nofollow\">Dell XPS 15 L502X &amp; Ubuntu 12.04 Linux</a>\", which says to first try running <code>sudo pm-hibernate</code> to see if it works before adding the <strong>Hibernate</strong> option to the system menu.</p>\n\n<p>When running that command the screen switches to black, I see a little text cursor blink in the top left of the screen for a few seconds, then the system shuts off (as expected). When I power it up again, however, it starts up from scratch rather than resuming the suspended state. I have 7.7GB of RAM and 7.9GB of swap space, as was automatically set up during the Ubuntu installation.</p>\n\n<p>Looking at the main Ubuntu wiki <a href=\"https://wiki.ubuntu.com/HardwareSupport/Machines/Laptops/Dell/XPS/15z\" rel=\"nofollow\">page for this hardware</a>, it says \"To hibernate, on Ubuntu 12.04, laptop should be certified, but <strong>it is working fine with this type of laptop</strong>, so if you like to activate hibernate function, you have just to create this file...\", so because it works for others on this laptop I must be doing something wrong.</p>\n\n<p>I followed the steps in that guide to put <code>acpi=noirq</code> into the default Grub options in order to fix booting problems. I haven't done the other steps for Bumblebee NVIDIA support, but when I tried it earlier it didn't help things. I have a new laptop and a fresh install of 12.04 LTS, so I'm willing to try anything to get hibernate working. Does anyone have ideas?</p>\n\n<p>In case it's an issue with the swap space, here is the output of <code>sudo fdisk -l</code>. Could this problem have something to do with selecting the option of encrypting my home directory, which is asked on the Ubuntu installation screen? I see something about <code>/dev/mapper/cryptswap1</code> below:</p>\n\n<pre><code>Disk /dev/sda: 750.2 GB, 750156374016 bytes\n255 heads, 63 sectors/track, 91201 cylinders, total 1465149168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisk identifier: 0x0006a9e3\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048  1448589311   724293632   83  Linux\n/dev/sda2      1448591358  1465147391     8278017    5  Extended\nPartition 2 does not start on physical sector boundary.\n/dev/sda5      1448591360  1465147391     8278016   82  Linux swap / Solaris\n\nDisk /dev/mapper/cryptswap1: 8476 MB, 8476688384 bytes\n255 heads, 63 sectors/track, 1030 cylinders, total 16556032 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisk identifier: 0xd09077d5\n</code></pre>\n"},{"id":356271,"title":"Hibernate possible after 12.04?","body":"<p>I can't hibernate. I always thought it was, because my first system on the hdd was 11.04 and I updated to 12.04.</p>\n\n<p>After a couple of months i now decided to install 12.04 freshly, to be able to hibernate and I've realized now, that it still isn't possible.</p>\n\n<p>Could someone please tell me, if hibernate works with a newer version of ubuntu than 12.04?\nI rather prefer LTS, but if this problem is now addressed, i would change the distribution or eventually even change the OS, because i no longer want to work without hibernating.</p>\n\n<p>I have a Thinkpad x200s. Thanks!</p>\n\n<p>Edit: \nwhat i tried until now:\npm-hibernate and on my old 12.04 system: s2disk with uswsusp (this i haven't tried on my new installation yet, but all i rather wanted to know is, if hibernate works normally in newer ubuntu versions or if the same problems exist as with 12.04)</p>\n"},{"id":132094,"title":"Fix hibernate on Thinkpad X60 with 12.04 Precise Pangolin","body":"<p>I own a ThinkPad X60, hibernate used to work on 10.04 Lucid Lynx, but no longer works correctly on 12.04.</p>\n\n<p>I am aware of <a href=\"http://askubuntu.com/questions/94754/how-to-enable-hibernation-in-12-04\">how to enable hibernate in Power Manager</a>.</p>\n\n<p>The problem here is, in the default configuration, <code>pm-hibernate</code> works, but the system fails to resume correctly. There is no video glitch, black screen or other. The resume process just freezes on the Ubuntu splash boot after a few seconds of disk activity.</p>\n\n<p>Is there a way to fix the system configuration so hibernates works again?</p>\n"},{"id":98866,"title":"Hibernation stalls","body":"<p>To start, I installed Ubuntu 11.10, I disliked Unity and then installed the Xubuntu session on top of it. I only say this to make you understand that I have this problem in both sessions.</p>\n\n<p>Whenever I click on the hibernate option, or the suspend option, the screen goes black and then starts to hibernate/suspend.  The problem, though, is that it seems to hang when it hibernates.</p>\n\n<p>The first few times that I tried to hibernate, I got a blinking underscore in the top left of the screen. After awhile the underscore would stop blinking, and that's when it seemed to stop.</p>\n\n<p>I then followed the instructions in this post\n<a href=\"http://askubuntu.com/questions/66879/fix-hibernate-issue-in-ubuntu-11-10\">Fix Hibernation Issue in Ubuntu 11.10</a></p>\n\n<p>Now when I click on hibernate the hibernation begins, it seems to save the image, and then it seems to stop, the same thing I thought had happened originally.</p>\n\n<p>The screen goes all black and in the top left it says:</p>\n\n<blockquote>\n  <p>Looking for splash system... none <br/>\n  s2disk: Snapshotting system</p>\n</blockquote>\n\n<p>It stays on this forever and I end up having to just shut off my laptop.</p>\n\n<p>Here are two log files from pm-suspend.log\nOne from <a href=\"http://dl.dropbox.com/u/9564964/Before%20hibernation%20fix\" rel=\"nofollow\">Before Hibernation \"fix\"</a>\nand one from <a href=\"http://dl.dropbox.com/u/9564964/After%20hibernation%20fix\" rel=\"nofollow\">After Hibernation \"fix\"</a></p>\n\n<p>I hope the provided information helps, I'm not sure what the problem is, whether I'm just not waiting long enough for it to hibernate, or if it's something else. I'm quite new to Linux and just starting to get a slight grasp of things.</p>\n"}]}]
[{"id":703505,"title":"nslookup query not working in Ubuntu","body":"<p>I am trying to use the code <code>nslookup -q=mx gmail.com</code> to find the mail server of gmail.com, but its not working on my Ubuntu. I have tried it in windows and it works fine. I can't find out what the issue on Ubuntu. The command <code>nslookup gmail.com</code> works though. Here are the responses of both commands;</p>\n\n<p><strong>Response for</strong>: <code>nslookup gmail.com</code></p>\n\n<pre><code>thisisppn@thisisppn-HP-15-Notebook-PC:~$ nslookup gmail.com\nServer:     127.0.1.1\nAddress:    127.0.1.1#53\n\nNon-authoritative answer:\nName:   gmail.com\nAddress: 216.58.196.5\n</code></pre>\n\n<p><strong>Response for</strong>: <code>nslookup -q=mx gmail.com</code></p>\n\n<pre><code>thisisppn@thisisppn-HP-15-Notebook-PC:~$ nslookup -q=mx gmail.com\n;; connection timed out; no servers could be reached\n</code></pre>\n","related_questions":[{"id":639626,"title":"Can&#39;t reach SMTP server via telnet","body":"<ol>\n<li>Virtual Machine: Ubuntu 14.04.1 LTS </li>\n<li>I'm using putty to access Ubuntu from my Windows 7 PC.</li>\n<li>This Ubuntu machine does not have a registered domain name. </li>\n<li>Setting up a local SMTP server on this Ubuntu VM requires a full MTA which requires a registered domain name, which isn't going to happen. </li>\n<li>On the Ubuntu VM I'm using the Google name servers of 8.8.8.8 and 8.8.4.4.</li>\n<li>For old SMTPServer1, there is a limit if about 100 outgoing emails per day per account/username, and I'm the only one who uses this SMTP username and I don't generate 250 emails every day. I do about 25-30 max on certain days. </li>\n<li>I'm using Perl 5.18.2 to talk directly to the SMTP server, so I don't need an MTA. </li>\n<li>On my Ubuntu VM, doing <code>nslookup email.abc.com</code> gives me a non-authoritative IP address of the correct IP for the new SMTP server, which is, say 60.1.2.3.</li>\n</ol>\n\n<p>This Ubuntu VM runs on our network and I've been making reports and sending outbound email only via SMTPServer1 for a while now. SMTPServer1 has poor service so I'm changing SMTP servers to an SMTP server internal to our network, something our company runs. When I try to test my connection from Ubuntu to the new SMTP server, I telnet in to the name like this: <code>telnet email.abc.com 2525</code> because we use a non-standard port for SMTP. </p>\n\n<p>What I get every time is <code>\"Trying email.abc.com...\"</code> and it just hangs there until I get  a timeout error. The same thing happens when I try to telnet directly to the IP address. The other guy running the new (to me) SMTP server claims it's open for my IP of the Ubuntu server and his SMTP server is running.</p>\n\n<ol>\n<li>First, what do I need to check? I'm on my own here, IT doesn't know anything about Ubuntu. </li>\n<li>How do I set up my machine, and/or DNS, to access the new SMTP server? I already know how to set up my Perl program to do it, but my test is not working, hence my question. </li>\n</ol>\n\n<p>Thank you!</p>\n\n<hr>\n\n<p>EDIT: I just added our internal DNS servers to <code>/etc/network/interfaces</code>. The first 2 entries for <code>dns-nameservers</code> are 10.19.* and they are our internal DNS servers. The next 2 entries are Google DNS servers, the last is a OpenDNS server. It now looks like this: </p>\n\n<p><code>\n# This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\n# The loopback network interface\nauto lo\niface lo inet loopback\n# The primary network interface\nauto eth0\niface eth0 inet static\n    address 10.19.3.13\n    netmask 255.255.0.0\n    gateway 10.19.0.1\n        dns-nameservers 10.19.1.66 10.19.1.67 8.8.8.8 8.8.4.4 208.67.222.222\n# See /home/chuck/perl/stuff/setiptable.\npre-up iptables-restore &lt; /etc/iptables/rules.v4\n</code></p>\n\n<p>After the edit (using sudo nedit /etc/network/interfaces) I did: <code>sudo service network-manager restart</code>.\nI also edited <code>sudo /etc/resolvconf/resolv.conf.d/base</code> which now has our 2 internal DNS servers first, followed by 2 Google DNS servers, and it now looks like this: </p>\n\n<p><code>\nnameserver 10.19.1.66\nnameserver 10.19.1.67\nnameserver 8.8.8.8\nnameserver 8.8.4.4\n</code></p>\n\n<p>After editing I did <code>sudo resolvconf -u</code>.</p>\n\n<p>So then I did ping and nmap. Ping works. Nmap returns this. If someone could help me decipher the nmap output, then I can learn. I don't mind learning. \nBut I'm new at this part. Everyone is at one point. </p>\n\n<p><code>\nStarting Nmap 6.40 ( <a href=\"http://nmap.org\" rel=\"nofollow\">http://nmap.org</a> ) at 2015-06-23 06:39 EDT\nNmap scan report for email.abc.com (64.13.203.46)\nHost is up.\nrDNS record for 64.13.203.46: acmkokisco.gs01.gridserver.com\nPORT     STATE    SERVICE\n2525/tcp filtered ms-v-worlds</p>\n\n<p>Nmap done: 1 IP address (1 host up) scanned in 2.12 seconds\n</code></p>\n\n<p>If I'm doing nmap from my Ubuntu server to the SMTP server, why does it say \"filtered\"? Did the guy running the SMTP server not allow my Ubuntu IP correctly? I know when you make changes to Ubuntu you sometimes have to restart services. I wonder if he didn't restart the service correctly. I am trying to figure out what to tell him, i.e. if the problem is at my end or his. </p>\n\n<p>Output of <code>nslookup email.abc.com</code>:</p>\n\n<p><code>\nServer:         8.8.8.8\nAddress:        8.8.8.8#53</p>\n\n<p>Non-authoritative answer:\nName:   email.abc.com\nAddress: 64.13.203.46\n</code></p>\n\n<p>Doesn't this mean it used the 8.8.8.8 (Google) DNS server to get the IP?</p>\n\n<hr>\n\n<p>10.19.3.13 is the IP of my Ubuntu machine, and I'm trying to access the SMTP server from there. Output of <code>tcptraceroute</code>.</p>\n\n<p><code>\n$ tcptraceroute email.abc.com 2525\nSelected device eth0, address 10.19.3.13, port 57049 for outgoing packets\nTracing the path to email.abc.com (64.13.203.46) on TCP port 2525, 30 hops max\n 1  * * *\n 2  * * *\n 3  * * *\n 4  * * *\n 5  * * *\n 6  * * *\n 7  * * *\n 8  * * *\n 9  * * *\n10  * * *\n11  * * *\n12  * * *\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *\n21  * * *\n22  * * *\n23  * * *\n24  * * *\n25  * * *\n26  * * *\n27  * * *\n28  * * *\n29  * * *\n30  * * *\nDestination not reached\n</code></p>\n"},{"id":615505,"title":"How to configure postfix to not relay to local virtual domain?","body":"<p>I have set up a SMTP server with iRedMail on Ubuntu 14.04 LTS and everything is working smoothly. I can create new users and send e-mails.</p>\n\n<p>My situation however is a bit more complicated: I need this server to send e-mails on behalf of my domain name \"sampledomain.xxx\" but I'm using a hosted mail service to receive e-mails. My domain DNS's MX records are set to a different IP than the SMTP server I've just set up. Basically this should be an outgoing-only SMTP server. </p>\n\n<p>The problem arises when I need to use the SMTP server as user1@sampledomain.xxx to user2@sampledomain.xxx because Postfix thinks that mail should be relayed internally, but it doesn't find the address in the virtual domain's mailboxes and thus fail to send the e-mail.</p>\n\n<p>How can I configure Postfix to not relay internally such e-mails and instead resolve MX records and send them as classic e-mails?</p>\n\n<p>Many thanks!</p>\n"},{"id":627906,"title":"Why is my /etc/hosts file not queried when nslookup tries to resolve an address?","body":"<p>I have a couple of local domains resolved to <code>127.0.0.1</code> in my <code>/etc/hosts</code> file. And it was all alright for a period of time but now when I run:</p>\n\n<pre><code>nslookup test.local\n</code></pre>\n\n<p>It results in:</p>\n\n<pre><code>Server:     192.168.1.3\nAddress:    192.168.1.3#53\n\n** server can't find test.local: NXDOMAIN\n</code></pre>\n\n<p>The <code>192.168.1.3</code> is our network DNS and it's not supposed to know my local domain <code>test.local</code>. After a couple of searches I found that <code>/etc/nsswitch.conf</code> file holds information on the priority of the DNS sources to query by. But there was no problem there! Here's mine:</p>\n\n<pre><code># /etc/nsswitch.conf\n#\n# Example configuration of GNU Name Service Switch functionality.\n# If you have the `glibc-doc-reference' and `info' packages installed, try:\n# `info libc \"Name Service Switch\"' for information about this file.\n\npasswd:         compat\ngroup:          compat\nshadow:         compat\n\nhosts:          files mdns4_minimal [NOTFOUND=return] dns\nnetworks:       files\n\nprotocols:      db files\nservices:       db files\nethers:         db files\nrpc:            db files\n\nnetgroup:       nis\n</code></pre>\n\n<p>So does anyone know why my <code>hosts</code> file is not included in DNS look-up?</p>\n"},{"id":606342,"title":"Unable to receive mail through squirrelmail on ubuntu LTS 12.04 server","body":"<p>I've been setting up an ubuntu 12.04 LTS web server using the howtoforge guide <a href=\"http://tinyurl.com/o7mnn3w\" rel=\"nofollow\">here</a>. So far everything is working correctly except for receiving emails through Squirrelmail and Dovecot. None of my sites' mailboxes are able to receive.</p>\n\n<p>I'm able to send emails without issue and can receive them through localhost but anything sent from an external location (i.e. hotmail) isn't received. The external location receives the following undeliverable.</p>\n\n<hr>\n\n<p>This message was created automatically by mail delivery software.</p>\n\n<p>A message that you sent could not be delivered to one or more of\nits recipients. This is a permanent error. The following address\nfailed:</p>\n\n<p>\"sky@workhate.co.uk\":\ninvalid recipient address</p>\n\n<p>--- The header of the original message is following. ---</p>\n\n<p>Received: from DUB004-OMC4S12.hotmail.com ([157.55.2.87]) by\nmx.kundenserver.de (mxeue004) with ESMTPS (Nemesis) id\n0LdxuK-1ZDWSc0rOO-00pvuu for ; Tue, 07 Apr 2015 01:03:06\n+0200\nReceived: from DUB109-W72 ([157.55.2.71]) by DUB004-OMC4S12.hotmail.com over TLS secured channel with Microsoft SMTPSVC(7.5.7601.22751);\nMon, 6 Apr 2015 16:03:05 -0700\nX-TMN: [313lm0PkArMNY2aIQih/tK8QQFMgxORV]\nX-Originating-Email: [staples929@hotmail.co.uk]\nMessage-ID: \nReturn-Path: staples929@hotmail.co.uk\nContent-Type: multipart/alternative;\nboundary=\"<em>f5dee63f-4f1b-4942-bad9-09de88a43830</em>\"\nFrom: Matt Staples \nTo: \"sky@workhate.co.uk\" \nSubject: testting\nDate: Mon, 6 Apr 2015 23:03:05 +0000\nImportance: Normal\nMIME-Version: 1.0\nX-OriginalArrivalTime: 06 Apr 2015 23:03:05.0700 (UTC) FILETIME=[D74CAA40:01D070BD]\nX-UI-Out-Filterresults: notjunk:1;</p>\n\n<hr>\n\n<p>An NSLOOKUP gets me the following:</p>\n\n<p>Non-authoritative answer:\nworkhate.co.uk  MX preference = 10, mail exchanger = mail.workhate.co.uk</p>\n\n<p>An MX record check at mxtoolbox suggests there is no A record for the site's MX hostname.</p>\n\n<pre><code>Pref    Hostname             IP Address     TTL \n10      mail.workhate.co.uk {No A Record}   60 mil\n</code></pre>\n\n<p>But my dns records show up as follows:</p>\n\n<pre><code>A   mail                 212.48.70.57           0   3600    \nA   workhate.co.uk.      212.48.70.57           0   3600    \nA   www                  212.48.70.57           0   3600    \nMX  workhate.co.uk.      mail.workhate.co.uk.   10  3600    \nPTR mail.workhate.co.uk. 212.48.70.57           0   86400\n</code></pre>\n\n<p>Is this correct, or am i missing something?</p>\n"},{"id":584823,"title":"Nslookup resolves search domain but ping does not (14.10)","body":"<p>At my company, many of our configuration scripts, etc use just the server name. For example, <code>http://server</code> rather than <code>http://server.company.com</code>. I have configured the search domain in the GUI Network Connections tool. I have also configured it in <code>/etc/resolvconf/resolv.conf.d/head</code>, but it is not working correctly.</p>\n\n<p>The strange thing is certain tools like nslookup or host resolve to the correct IP, but other tools like ssh, ping, git, and web browsers do not. I can connect if I use the FQDN. <strong>What could be preventing the search domain from resolving correctly?</strong></p>\n\n<p>Below, find the relevant output from some commands.</p>\n\n<p>Nslookup:</p>\n\n<pre><code>$ nslookup server\nServer:     192.168.200.53\nAddress:    192.168.200.53#53\n\nserver.company.com  canonical name = server001.company.com.\nName:   server001.company.com\nAddress: 192.168.200.103\n</code></pre>\n\n<p>Host:</p>\n\n<pre><code>$ host server\nserver.company.com is an alias for server001.company.com.\nserver001.company.com has address 192.168.200.103\n</code></pre>\n\n<p>Ping:</p>\n\n<pre><code>$ ping server\nping: unknown host server\n\n$ ping server.company.com\nPING server001.company.com (192.168.200.103) 56(84) bytes of data.\n64 bytes from server001.company.com (192.168.200.103): icmp_seq=1 ttl=64 time=4.61 ms\n</code></pre>\n\n<p>I use ping as an example because it's simple, but most of the other tools I need to use show the same results as ping.</p>\n\n<p>Let me know if you need any more config files or info.</p>\n\n<p>/etc/hosts has no info related to the server I'm trying to connect to.</p>\n\n<p>Here is /etc/resolv.conf, which was generated by resolvconf.</p>\n\n<pre><code># Add Company Nameservers and Domain\nnameserver 192.168.200.53\nnameserver 192.168.200.65\nsearch company.com\nnameserver 127.0.1.1\nsearch company.com\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\nnameserver 127.0.1.1\nsearch hsd1.co.comcast.net\n</code></pre>\n\n<p>And /etc/network/interfaces:</p>\n\n<pre><code># interfaces(5) file used by ifup(8) and ifdown(8)\nauto lo\niface lo inet loopback\n</code></pre>\n"},{"id":582177,"title":"local DNS lookup not working, despite everything is in /etc/hosts","body":"<p>I am running Ubuntu (12.04) on Virtual Box and want my machine to be able to lookup its own hostname, the same way other VMs will do in this network (I am trying to build virtual cluster). There is no DNS server, IP are assigned by VirtualBox, and I just map them in /etc/hosts. </p>\n\n<p>The machine name is <strong>node1</strong> and I have /etc/hosts like that:</p>\n\n<pre><code>user@node1-VirtualBox:~$ cat /etc/hosts\n127.0.0.1   localhost \n192.168.56.103  node1-VirtualBox.cs.ucl.ac.uk node1-VirtualBox\n#10.0.2.15  node1-VirtualBox\n\n# The following lines are desirable for IPv6 capable hosts\n::1     ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n</code></pre>\n\n<p>So I would assume that</p>\n\n<ol>\n<li>Fully qualified hostname would be node1-VirtualBox.cs.ucl.ac.uk</li>\n<li>node1 and node1-VirtualBox.cs.ucl.ac.uk would resolve to 192.168.56.103 (and vice versa)</li>\n</ol>\n\n<p>From hostname I am getting this:</p>\n\n<pre><code>$hostname -&gt;  node1-VirtualBox   (OK)\n\n$hostname --fqdn -&gt; node1-VirtualBox.cs.ucl.ac.uk (OK)\n\n$hostname --A -&gt; node1.local node1.cs.ucl.ac.uk (OK i guess)\n</code></pre>\n\n<p>hostname looks promising, but when I try to get IP addresses using host, it doesn't work...</p>\n\n<pre><code>user@node1-VirtualBox:~$ host -v -t A node1-VirtualBox\nTrying \"node1-VirtualBox.cs.ucl.ac.uk\"\nTrying \"node1-VirtualBox\"\nHost node1-VirtualBox not found: 3(NXDOMAIN)\nReceived 110 bytes from 127.0.0.1#53 in 1 ms\n\nuser@node1-VirtualBox:~$ host -v -t A 192.168.56.103\nTrying \"103.56.168.192.in-addr.arpa\"\nHost 103.56.168.192.in-addr.arpa. not found: 3(NXDOMAIN)\nReceived 108 bytes from 127.0.0.1#53 in 2 ms\n</code></pre>\n\n<p>Any idea why this isn't working? From what I read and see in config, if DNS is done on localhost, it should just check /etc/hosts... and everything is there, right? And SSH is working, so clearly this file is correct?</p>\n\n<hr>\n\n<p>Below my configuration:</p>\n\n<pre><code># /etc/nsswitch.conf\n#\n# Example configuration of GNU Name Service Switch functionality.\n# If you have the `glibc-doc-reference' and `info' packages installed, try:\n# `info libc \"Name Service Switch\"' for information about this file.\n\npasswd:         compat group:          compat shadow:         compat\n\nhosts:          files mdns4_minimal [NOTFOUND=return] dns mdns4 networks:       files\n\nprotocols:      db files services:       db files ethers:         db files rpc:            db files\n\nnetgroup:       nis\n</code></pre>\n\n<hr>\n\n<pre><code>resolv.conf:\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\nnameserver 127.0.0.1\nsearch cs.ucl.ac.uk\n</code></pre>\n\n<hr>\n\n<pre><code>ifconfig:\neth0      Link encap:Ethernet  HWaddr 08:00:27:da:a1:bc  \n          inet addr:10.0.2.15  Bcast:10.0.2.255  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:feda:a1bc/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:169 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:176 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:123968 (123.9 KB)  TX bytes:21551 (21.5 KB)\n\neth1      Link encap:Ethernet  HWaddr 08:00:27:99:65:51  \n          inet addr:192.168.56.103  Bcast:192.168.255.255  Mask:255.255.0.0\n          inet6 addr: fe80::a00:27ff:fe99:6551/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:268 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:252 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:78333 (78.3 KB)  TX bytes:71866 (71.8 KB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:12527 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:12527 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:23857104 (23.8 MB)  TX bytes:23857104 (23.8 MB)\n</code></pre>\n\n<hr>\n\n<p>POST MORTEM:</p>\n\n<p>Ok, it turns out the \"host\" command not resolving was a bit of red herring for my original problem - it couldn't work because it doesn't look into /etc/hosts, as explained in answers below.</p>\n\n<p>The original issue was lack of canonical hostname i.e. <code>hostname --fqdn</code> was returning localhost. To fix it i had to have this: \n<code>192.168.56.103 node1-VirtualBox.cs.ucl.ac.uk node1-VirtualBox</code> as second line in my /etc/hosts.</p>\n\n<p>However for making it actually work i had to restart my machines and reinstall Cloudera on my cluster. </p>\n"},{"id":540151,"title":"Ubuntu 14.04: How to send email without registering a domain or having an MX or A record?","body":"<ol>\n<li>Ubuntu 14.04 on a virtual machine that is not my PC. I use my PC (Windows 7 and Putty 0.63) to shell into it. </li>\n<li>Uname=Linux ubuntucomp 3.13.0-24-generic #46-Ubuntu SMP Thu Apr 10 19:11:08 UTC 2014 x86_64  x86_64 x86_64 GNU/Linux</li>\n<li>This machine is on our private network and does not have an official registered domain name. It has it's own IP but I think it's an internal IP. This machine is not accessed from outside our network, I only use it to send outgoing emails to people in our company. I got Perl to send an email out to our  SMTP provider and that works fine. </li>\n<li>We pay for an external SMTP service, so that part is done. The only SMTP authentication I use is a username and password. SSL is not needed. </li>\n<li>I have no intention of receiving any email from the outside world on this machine. </li>\n<li>Right now my emails are being blocked by my SMTP provider, possibly because I don't have a FQDN. The error I get is \"connection timed out\". </li>\n<li>I can't even telnet from my PC to the SMTP server, I also get a \"timeout\" error. I used Putty 0.63. Yet I can still send email via a Perl program on Ubuntu. </li>\n<li>IT cannot help me so I'm on my own. I'm new to sysadmin for Ubuntu. </li>\n</ol>\n\n<p>I need a way to send emails with an attachment via the command line (for an automated cron process) without setting up a registered domain, MX or A record. What are my options? Postfix won't do this as it requires a bunch of network settings set up along with a (DNS?) record. </p>\n\n<p>Since the Perl module uses the SMTP protocol to directly log into the SMTP server, I suspect I need an Ubuntu package that does the same, without passing the task onto another MTA. </p>\n\n<p><strong>I tried SSMTP</strong></p>\n\n<ol>\n<li>Using ssmtp I got this error from /var/log/mail.log: Oct 22 10:18:19 ubuntucomp sSMTP[16075]: Unable to connect to \"smtpout.payserv.net\" port 587. Process failed with error code 1.\nOct 22 10:18:19 ubuntucomp sSMTP[16075]: Cannot open smtpout.payserv.net:587</li>\n<li>In /etc/ssmtp/ssmtp.conf I even changed the setting \"Rewritedomain\" to be our actual company domain name. </li>\n<li>And how do I restart the SSMTP daemon after I make changes to the ssmtp.conf file? Perhaps that's part of the problem. </li>\n</ol>\n\n<p><strong>I tried telnetting into the SMTP server</strong></p>\n\n<ol>\n<li>I tried telnetting into smtpout.payserv.net port 25 and just got \"220 *******************\", then Putty 0.63 quit. </li>\n</ol>\n\n<p>Is it possible my SMTP company has blocked my IP? Should I just call them?</p>\n\n<p><strong>Let's back up a bit</strong></p>\n\n<ol>\n<li>I did 'netstat -an|grep smtp' and did not see an smtp service running. How do I start it? </li>\n<li>Do I need to add the smtp server to /etc/hosts?</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"id":496669,"title":"Ubuntu 12.04 Cannot connect to Starbucks Free attn Wifi, DNS issue","body":"<p>first off, I'm a bit of a newbie and networking stuff is not my forte. So I've been pulling my hair out for the last hour trying to get my 12.04 Ubuntu partition to connect to an AT&amp;T hotspot in Starbucks. I have switched to my Windows partition on the computer so that I can get some work done. This happens every one in a while when I try to connect to public wifi and I think it relates to something with DNS going awry when I need to be rerouted to accept free wifi terms and conditions.</p>\n\n<p>Behaviour:\nThe wifi indicator says it's connected and has a strong signal, but I get a generic \"not connected\" when trying to access google through Chromium. My phone and windows partition both connect, so something is up with Ubuntu.</p>\n\n<p>Things I've Tried:</p>\n\n<ul>\n<li>Tried Firefox, same message</li>\n<li>Pinging www.google.com says that the DNS server can't resolve the name or something similar. Pinging 8.8.8.8 gets a response.</li>\n<li>Restarted via /etc/init.d/network-manager restart</li>\n<li>Logged in, Logged out</li>\n<li>Restarted Machine</li>\n<li>Found the IP address of what I think it the router. It redirects to the correct web address of the page where I would click the agreement for lawfully using Starbucks wifi, but shows an error message in the browser, which say something like \"Unable to resolve the server's DNS\"</li>\n<li>renamed the /etc/resolv.conf file, then moved it back when doing so didn't do anything (as per <a href=\"http://askubuntu.com/questions/142327/can-not-access-internet-dns-names-do-not-resolve-after-update-today\">Can not access Internet (DNS names do not resolve) after update today</a>)</li>\n<li>Commented out dnsmasq and then uncommented it (as per: <a href=\"http://www.ubuntugeek.com/how-to-disable-dnsmasq-in-ubuntu-12-04precise.html\" rel=\"nofollow\">http://www.ubuntugeek.com/how-to-disable-dnsmasq-in-ubuntu-12-04precise.html</a>)</li>\n<li>Went in to the chromium settings and fiddled with a bunch of privacy settings (un-checking \"Predict network actions to improve page load performance\" was suggested by chromium. It was already unclicked)</li>\n<li>In the GUI network manager for the attn network, tried turning off auto everything and manually putting in the server name for the dns server (no idea if this makes any sense, was kind of flailing at this point)</li>\n<li>Ran this command: sudo dpkg-reconfigure resolvconf, which was a little scary...hope I didn't mess anything up. (as per: <a href=\"http://oct.im/auto-dns-resolving-in-ubuntu-1204-desktop.html\" rel=\"nofollow\">http://oct.im/auto-dns-resolving-in-ubuntu-1204-desktop.html</a>)</li>\n</ul>\n\n<p>It's a little tough to talk on-line and troubleshoot, since I've only got one machine and I can get on-line but it involves rebooting on a windows partition. Any suggestions and/or advice would be very appreciated! Thank you!</p>\n"},{"id":406011,"title":"How can I specify or query the order DNS servers will be queried?","body":"<p>For some reason I am not hitting the DNS server I am expecting to hit.  I have a wireless connection with a VPN on top of it.  I have set both of the connections to use a specific set of DNS servers (automatic DHCP addresses only with the DNS servers listed), but it is still querying a different DNS server.  I can tell this is true because when I say</p>\n\n<pre><code>dig +short the.domain.I.am.looking.for\n</code></pre>\n\n<p>I get nothing, but when I say</p>\n\n<pre><code>dig +short @specific.dns the.domain.I.am.looking.for\n</code></pre>\n\n<p>I get the IP Address I am expecting.  I have also temporarily modified <code>/etc/reslov.conf</code> to read the way I want it to and the first dig starts working.  This means Network Manager is doing something sneaky behind my back.  How can I tell what it is doing? and how can I fix it so only the servers I specify (in the order I specify them) get queried?</p>\n"},{"id":377292,"title":"408 error in browser using Google or openid on some networks in Ubuntu","body":"<p>I have searched here and the web and many other people have similar issues going back a few years (<a href=\"http://askubuntu.com/questions/319565/my-google-account-not-working-properly-with-ubuntu\">My Google Account not working properly with Ubuntu</a> for example), but no one seems to have fixed it.  I get the same results in Chrome, Firefox and Epiphany browsers. Have done complete removal's and re-installs of them all and Ubuntu.  I originally had this problem in Mint, but re-installed Ubuntu, same problem</p>\n\n<p>I have this problem on 3 Ubuntu machines, 2 on 13.10 (fresh installs, not upgrades) and one on 11.10, the 11.10 dualboots windows 7 and that is what I am using now.  Only in windows can I log on to any Openid site, and only on windows can I use all Google services with out problems.  Dropbox client in Ubuntu can not connect, windows can.  </p>\n\n<p>So Openid and Google search results time out, in firefox I get the 408 error, in chrome the oops message.  But I can log into Gmail without problems in both browsers.</p>\n\n<p>With all of them the problem started with a change of service from my ISP (worldnet.co.nz when I moved from adsl to fiber optic or UFB).  Speed tests using speedtest.net produce similar download speed, but the Ubuntu machines are unable to do the upload tests, it just sits on 0.00 for as long as I can wait.</p>\n\n<p>One of the machines is a laptop and it works fine when I take it else where and use other networks.  So this would appear to be a network issue, but after 2 weeks my ISP can find nothing wrong, and have completely removed any firewall protection from my connection.  My main desktop is in the DMZ zone for my router, I have a static IP address, and no fire wall running on it at present.</p>\n\n<p>Windows 7 works correctly which suggests my ISP is correct when they say it's not a problem at their end. My router does not support IPv6 and I have disabled IPv6 in one of the machines, no change.  Ubuntu updates work fine, I have no problems with apt-get.  I can browse all generic web sites like www.nzherald.co.nz or askubuntu, but I can't log into some sites.</p>\n\n<p>I have tried changing dns servers, no difference, and nslookup and dig return the expected results always.  traceroute works fine. </p>\n\n<p>Can any one help here?  </p>\n\n<p>I have installed dnsmasq. unistalled it, tried static ip, dhcp (my router is assigned static ip by my isp which changed with the new fiber connection).  Tried Google dns, my isp dns manually added, auto assigned dns.</p>\n\n<p>ifconfig reports a virbr0 interface on 192.168.122.1, the rest of the machines on my router are on 192.168.0.* and I do not know where this virbr0 comes from.  Gnome boxes maybe?  All machines on the router can see each-other in files folders.</p>\n\n<p>So to recap, a fresh wipe all data re-install does not fix it, booting of the Ubuntu 13.10 live usb shows the same problems.  Windows has no problems.</p>\n\n<p>Please help me, as bizarrely this seems to be a problem with Ubuntu only.</p>\n\n<p>Thanks,</p>\n"}]}]
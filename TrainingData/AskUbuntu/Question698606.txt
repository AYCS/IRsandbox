[{"id":698606,"title":"rEFInd menu not showing on a dual Mac/Ubuntu machine","body":"<p>I'm having a little of a problem with rEFInd and couldn't find something\nspecific about it.</p>\n\n<p>I succesfully installed Ubuntu 14.04 for dual boot with OS X Yosemite on\nmy MacBook Pro 3.1 using rEFInd but now after booting into Ubuntu the\nrEFInd menu doesn't show after a reboot. It just goes straight into\ngrub. After booting again into OS X (using the option key on startup) <em>sometimes</em> rEFInd comes up, sometimes not, couldn't figure out how it is triggered.</p>\n\n<p>Is there way to ensure rEFInd is coming up first, no matter which OS i\nbooted previously?</p>\n\n<hr>\n\n<h2>Edit</h2>\n\n<p>Using <code>efibootmgr -v</code> gives me:</p>\n\n<p><code>BootCurrent: 0001\nTimeout: 5 seconds\nBootOrder: 0001,0080,0000\nBoot0000* opensuse-secureboot   HD(4,1962b000,4e800,11f33185-0ff8-493d-86bd-b9fee568adb8)File(\\EFI\\opensuse\\shim.efi)\nBoot0001* ubuntu    HD(1,28,64000,7e798e0a-82c3-4719-95ed-d79675efd190)File(\\EFI\\ubuntu\\shimx64.efi)\nBoot0080* Mac OS X  HD(1,28,64000,7e798e0a-82c3-4719-95ed-d79675efd190)File(\\EFI\\refind\\refind_x64.efi)\nBoot0081* Mac OS X ACPI(a0341d0,0)PCI(1f,2)03120a00000000000000HD(2,64028,1d02ba00,0b1ce04a-50b7-40b5-94f0-1a255d748d15)\nBoot0082* ACPI(a0341d0,0)PCI(1f,2)03120a00000000000000HD(2,64028,19490d60,20cc89c9-1320-4d70-b8bb-fffdf9900374)\nBootFFFF* ACPI(a0341d0,0)PCI(1f,2)03120a00000000000000HD(2,64028,19490d60,20cc89c9-1320-4d70-b8bb-fffdf9900374)File(\\System\\Library\\CoreServices\\boot.efi)</code></p>\n\n<p>If I set the NextBoot with the <code>-n</code>-option to 0080, after reboot, rEFInd comes up. FFFF brings me directly into OSX. 0081 seems to fail.</p>\n\n<p>Thanks for the help!</p>\n","related_questions":[{"id":697407,"title":"Set up rEFInd to boot Ubuntu directly (no Grub menu displayed)","body":"<p>I would like to set up a menuentry in rEFInd to boot directly into Ubuntu, without using GRUB. I would like to keep Grub on hand, however, with a menu entry for that.</p>\n\n<p>I've copied the most recent kernel and refind_linux.conf from <code>/boot/</code> to <code>/boot/efi/EFI/ubuntu</code>, and created the following refind.conf:</p>\n\n<pre><code>#\n# refind.conf\n# Configuration file for the rEFInd boot menu\n#\n\ntimeout 0\nscreensaver 300\nbanner mybanner.png\nbanner_scale fillscreen\nscanfor manual,external,optical\n\nmenuentry Ubuntu {\n    loader /EFI/ubuntu/vmlinuz-3.19.0-31-generic.efi.signed\n    icon /EFI/refind/icons/os_linux.png\n    ostype linux\n    options \"root=UUID=92f926f7-19f8-4a2b-9e9a-bf91db475a3c ro initrd=boot\\initrd.img-3.19.0-31-generic\"\n    initrd boot\\initrd.img-3.19.0-31-generic\n}\n\nmenuentry Grub {\n    loader /EFI/ubuntu/grubx64.efi\n    icon /EFI/refind/icons-backup/os_unknown.png\n}\n</code></pre>\n\n<p>The menuentry for Grub works great, but the menuentry for ubuntu so far only <strike>creates kernel panic (blinking capslock key, no boot) with and without the ostype and options.</strike>  By adding initrd lines, it now just says that it cannot find initrd..., tries again higher up, and dies.</p>\n\n<p>Ideally, I'd also like rEFInd to automatically update the ubuntu entry when the kernel gets upgraded. </p>\n\n<p>As I mentioned, I'm keeping GRUB as well, so I'd be ok with passing control to grub transparently, but I couldn't figure out how to send options directly to grub if that's the recommended way of doing this.</p>\n"},{"id":614988,"title":"Installing ubuntu on Mac Mini using refind: Do I use Logical or Primary for Ubuntu partition?","body":"<p>I'm trying to setup a dual boot with Ubuntu 15.04 and OS X using refind.</p>\n\n<p>I shrunk the OS X partition and have freed up enough space for Ubuntu.  Now I'm trying to create the Ubuntu partition, but I'm not sure what I should pick for these two questions?</p>\n\n<p>Type for the new partition: Primary or Logical</p>\n\n<p>Mount point: /, /boot, /home, /tmp, /usr, /var, /srv, /opt, /usr/local</p>\n"},{"id":580202,"title":"rEFIt - rEFInd - Grub2.....what is the “right way” for Ubuntu 14.10 on a Mac:","body":"<p>Can someone please help me to understand the “<strong>right way</strong>” (if there is such a thing) to run Ubuntu on an EFI computer (specifically a 2012 iMac -- I have Ubuntu 14.10 installed on this iMac, on partition /sda5).  </p>\n\n<p>I initially installed rEFIt.  It didn't work perfectly, so I later tried to replace it with rEFInd (though I think my removal of rEFIt was incomplete).  And of course I had Grub installed on the Ubuntu partition.  </p>\n\n<p>I don't remember the sequence of these installs.  I think I installed rEFIt on the Mac side, then installed Ubuntu (with Grub) on the /sda5 partition. . . then later “upgraded” to rEFInd by installing it on the Ubuntu side (but it might have been on the Mac side).  </p>\n\n<p>When I booted the Mac, for a long while, it would boot into Grub2 – where I would select my Ubuntu install.  Then, not sure what happened, but it started booting into rEFInd.  In rEFInd, I would select the Ubuntu icon and it would then boot into Grub2.  Essentially, I had two different boot managers that I had to use in sequence.  </p>\n\n<p>Anyway, I had this working for a long time until after a major crash.  After the crash, <em>every time I booted into rEFInd and selected ANY OS (including LiveUSBs), it would initially load <strong>but then the screen would eventually go blank and just stop there</em></strong>.  Nothing appeared to happen.  So I then removed reFIND and installed reFIt.  Now the Mac boots into rEFIt, and I when I select the Ubuntu icon, it goes to Grub2.  But the Grub screen is not entirely clear, just a little pixelated.  </p>\n\n<p>This caused me to wonder:  should I have to use two boot managers?  </p>\n\n<p>Is it possible/<em>preferable</em> to either: </p>\n\n<p><strong>1. boot directly into Grub2, with no intermediary; or<br>\n 2. boot into rEFIt (or rEFInd) and not have to then go to Grub?</strong></p>\n\n<p>Thanks for any erudition on this matter.  I just don't get it.</p>\n"},{"id":571558,"title":"Dual Boot Ubuntu from USB on a Mac: &quot;Loop not found&quot; and &quot;Load Kernel First&quot; Error in GRUB","body":"<p>I have the Mac version of Ubuntu loaded onto a USB, booted using ReFINd with an EFI partition. All runs until I select the Ubuntu EFI Boot in reFINd. Once loading begins, I get a \"Loop not found\", \"Load Kernel First\" error in GRUB. Then appears a blank Grub terminal. </p>\n\n<p>I have followed most of the tutorials for Yosemite. Still, nothing. Any suggestions? </p>\n"},{"id":571255,"title":"Triple boot Windows partition no longer works after Yosemite upgrade","body":"<p><strong>The problem:</strong></p>\n\n<p>After upgrading to OS X Yosemite, my triple boot through rEFInd no longer works as it did before. Specifically, I can boot into OS X and Ubuntu, but not Windows. Furthermore, the way I boot into Ubuntu is different than before.</p>\n\n<p><strong>Details:</strong></p>\n\n<p>I upgraded to OS X Yosemite and reinstalled rEFInd to upgrade to version 0.8.4, which supports Yosemite. Before, on boot I was presented with three options: OS X, Linux, and Windows. When I chose Linux or Windows I was sent to GNU Grub, and from there I could select Linux or Windows to boot to the desired OS. Now, things are different. Instead, I'm presented with OS X, a lot of Linux choices, and then the old Linux and Windows choices (the ones, by name, that I used before). The old ones don't work -- I'm presented with a black screen with 'invalid license' and then 'no bootable device'. The new Linux choices boot directly through rEFInd, and do work. I think that the Yosemite upgrade messed up Grub, and since I accessed Windows through Grub before I can no longer access it.</p>\n\n<p>Here's what efibootmgr displays, on Ubuntu:</p>\n\n<pre><code>BootCurrent: 0080\nTimeout: 5 seconds\nBootOrder: 0080,0000\nBoot0000* ubuntu\nBoot0080* Mac OS X\nBoot0081* Mac OS X\nBoot0082*\nBootFFFF*\n</code></pre>\n\n<p>Here's a screenshot of Gparted, if it helps:\n<a href=\"http://i.imgur.com/QRa0yA5.png\" rel=\"nofollow\">http://i.imgur.com/QRa0yA5.png</a></p>\n\n<p><strong>Attempted solutions:</strong></p>\n\n<p>I tried to use boot-repair to fix Grub. I now have Grub again, and my new default option on boot is to boot Ubuntu through Grub, but really this hasn't solved anything as Grub doesn't present a choice to load Windows.\nI also tried everything on this page: <a href=\"http://www.rodsbooks.com/refind/yosemite.html\" rel=\"nofollow\">http://www.rodsbooks.com/refind/yosemite.html</a>\nI'm not really sure where to go from here.</p>\n\n<p>My desired boot would be to bypass Grub at all, and just use rEFInd, but if I can get things back to how they were that would work as well.\nI can provide more details as you need them, just let me know. I'm going to sleep as of posting this thread, and I'll get back with more details as needed ASAP. Thanks in advance.</p>\n"},{"id":547366,"title":"Ubuntu 14.04 on MacBookPro 11,3 rEFInd boot issues","body":"<p>Last night in installed Ubuntu 14.04 on my MacBookPro 11,3 (Mid-2014 rMBP) and I used rEFInd as the bootloader, it worked, I installed wifi drivers, fixed my touchpad (I believe), and so on. Now, it doesn't want to boot at all, when I boot normally into Ubuntu I get a black screen with a blinking cursor, and upon entering the recovery mode I have some sort of SMP issue, which I hear the Haswell MBs have an issue with, and it does not boot. And sometimes when booting normally it stops at \"Fast TSC Calibration Failed.\" The issues I'm having seem to be CPU related, but I don't know how to solve them.</p>\n\n<p>P.S. This is my first Mac computer, any other computer I've ran Ubuntu on worked fine.</p>\n\n<p>Thanks.</p>\n"},{"id":537294,"title":"rEFInd deleted after formatting Mac OS X partition","body":"<p>I have recently installed ubuntu 14.04 on my MacBook Pro 9,2 , I installed it side by side with Mac OS X, and used rEFInd to boot into ubuntu, then I have decided to use the Mac OS X partition as my home folder in ubuntu, so I formatted it and moved my home folder into the new formatted partition, to discover after restarting the computer that the rEFInd loader was formatted with the partition, I was able to boot again into ubuntu by installing rEFInd on a flash drive and booting from it, I have tried to install rEFInd again through ubuntu using the install.sh file but was unsuccessful too, it gives me the following message:</p>\n\n<pre><code>Installing rEFInd on Linux....\n\nESP was found at /boot/efi using vfat\n\nFound rEFInd installation in /boot/efi/EFI/refind; upgrading it.\n\nInstalling driver for ext4 (ext4_x64.efi)\n\nCopied rEFInd binary files\n\nNotice: Backed up existing icons directory as icons-backup.\nExisting refind.conf file found; copying sample file as refind.conf-sample\nto avoid overwriting your customizations.\n\nAn existing rEFInd boot entry exists, but isn't set as the default boot\nmanager. The boot order is being adjusted to make rEFInd the default boot\nmanager. If this is NOT what you want, you should use efibootmgr to\nmanually adjust your EFI's boot order.\nInstalling it!\n\nALERT: There were problems running the efibootmgr program! You may need to\nrename the refind_x64.efi binary to the default name (EFI/boot/bootx64.efi\non x86-64 systems or EFI/boot/bootia32.efi on x86 systems) to have it run!\nExisting //boot/refind_linux.conf found; not overwriting.\n\nALERT:\nInstallation has completed, but problems were detected. Review the output for\nerror messages and take corrective measures as necessary. You may need to \nre-run this script or install manually before rEFInd will work.    \n</code></pre>\n\n<p>and now all I have when normally booting my mac is the recovery system, and when I press alt I get the windows option but not successful in booting into it..\nplease help! and sorry for my english</p>\n\n<ul>\n<li>Note: I also tried changing the file name into bootx64.efi and it didn't work either</li>\n</ul>\n"},{"id":441514,"title":"How do I permanently install rEFInd onto my mac from Ubuntu (without using mac os)","body":"<p>I deleted my mac os and I had trouble getting my mac to recognize the Ubuntu installer when i pressed the alt key on boot. I had to re-install mac os install refind and then install Ubuntu again when it was recognized and delete mac os. How do I permanently install rEFInd so that if I do an encrypted install or wiped the drive I could still use rEFInd? All of this from Ubuntu (I don't want to reinstall mac os again).</p>\n\n<p>EDIT:</p>\n\n<p>Here are the errors I found when I tried to change bootmgr error:\nI tried doing a manual install to <code>EFI/BOOT.bootx64.efi</code> and it worked I think but I had some errors when I tried changing boot order: </p>\n\n<pre><code>raj@raj-MacBookPro:~$ sudo efibootmgr -c -l \\\\EFI\\\\refind\\\\refind_x64.efi -L rEFInd  \n[sudo] password for raj:   \n** Warning ** : Boot0002 has same label rEFInd  \n** Warning ** : Boot0003 has same label rEFInd  \nBootCurrent: 0000  \nTimeout: 5 seconds  \nBootOrder: 0004,0003,0002,0000,0080,0001\nBoot0000* ubuntu  \nBoot0001* rEFInd Boot Manager  \nBoot0002* rEFInd  \nBoot0003* rEFInd  \nBoot0080* Mac OS X  \nBoot0081* Mac OS X  \nBoot0082*   \nBootD1A6* AST  \nBootFFFF* \nBoot0004* rEFInd  \nraj@raj-MacBookPro:~$ efibootmgr -o 0001,0080,0081  \n\nboot entry 1 does not exist  \n\nraj@raj-MacBookPro:~$   \n</code></pre>\n\n<p>I've tried many other versions of the <code>efibootmgr</code> command such as <code>efibootmgr -o 1,80,81</code> but they haven't worked.</p>\n"},{"id":91725,"title":"Dual Boot Ubuntu &amp; Mac","body":"<p>I have Ubuntu 11.10 installed. Just installed Mac OS X, updated GRUB, which generates 2 Mac entires (32bit &amp; 64bit). But when I try booting from these, it just restarts. I suppose I need EFI GRUB? Which I tried installing. But I think, the EFI partition needs to be the first partition? I currently have it like:</p>\n\n<p><img src=\"http://i.imgur.com/9WfZd.png\" alt=\"http://i.imgur.com/9WfZd.png\"></p>\n"}]}]
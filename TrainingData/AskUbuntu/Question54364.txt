[{"id":54364,"title":"How do you set the timezone for crontab?","body":"<p>I have set up ACPI wakeup so my laptop wakes up at a certain time each morning. The timezone for this is UTC. I want to set up my crontabs also using UTC so they fit with the wakeup alarm. </p>\n\n<p>How do you do it?</p>\n\n<p>I've tried editing <code>/etc/default/cron</code> to include:</p>\n\n<pre><code>TZ=\"UTC\"\n</code></pre>\n\n<p>but it doesn't work. (I've also tried <code>TZ=UTC</code> and <code>TZ=\"UTC/GMT\"</code>)</p>\n\n<p>Any ideas?</p>\n","related_questions":[{"id":715643,"title":"Timezone CRON issue","body":"<p>I wanted a CRON job on my server to run at 5 AM GMT every day, so that according to my timezone (IST), it'd send an email at 10:30 AM. </p>\n\n<p>Here's my date and timezone settings:</p>\n\n<pre><code>~# date\nFri Jan  1 10:33:52 GMT 2016\n~# cat /etc/timezone \nEtc/GMT0\n</code></pre>\n\n<p>And here's my crontab entry:</p>\n\n<pre><code>0 5 * * * /root/runfiles/up2date.sh\n</code></pre>\n\n<p>The problem is that the CRON fires at 10:30 AM server time, which is 4 PM in my time. I'm not sure what's causing it. The CRON I'm running fires a Python script which doesn't do any settings/calculations based on time.</p>\n\n<p>Please help!</p>\n"},{"id":702771,"title":"Timezone problem with date command","body":"<p>We are suffering from some date/time conversion issues so I am looking into any possible reasons. </p>\n\n<p>During this I have stumbled on this strange issue when issueing the <code>date</code> command in Ubuntu 14.04.</p>\n\n<p><code>date</code> gives <code>Thu Nov 26 11:05:50 GMT+1 2015</code></p>\n\n<p>but <code>date -u</code> gives <code>Thu Nov 26 12:05:53 UTC 2015</code></p>\n\n<p>The commands are typed about 3 seconds apart, but the GMT+1 time is wrong, it should have been <code>13:05</code>.</p>\n\n<p>/etc/timezone is set to \"Etc/UTC\".</p>\n\n<p>Output from <code>timedatectl</code></p>\n\n<p><code>Local time: Thu 2015-11-26 13:09:49 GMT+1\n  Universal time: Thu 2015-11-26 14:09:49 UTC\n        Timezone: Etc/UTC (GMT+1, -0100)\n     NTP enabled: yes\nNTP synchronized: yes\n RTC in local TZ: no\n      DST active: n/a\n</code></p>\n\n<p>Apparently that is the reason, but how can GMT+1 be -0100. (As dadexix86 answer explains that is correct behavior when using Etc/UTC.)</p>\n\n<p>It may have been a messed up /etc/localtime file. After doing</p>\n\n<p><code>sudo timedatectl set-timezone Europe/Copenhagen</code></p>\n\n<p><code>date</code> and <code>date -u</code> are now in synch.</p>\n\n<p>(The problem was \"Etc/UTC\" turning around +/-. Not only did setting the timezone solve the <code>date</code> problem. Our conversion issues disappeared as well.)</p>\n"},{"id":609850,"title":"What is the correct way to edit a crontab file?","body":"<p>I am trying to automate the refreshing of awstats for my webserver and understand that i need to use cron to set that up.  So each user has a crontab file?</p>\n\n<p>I was following the instructions <a href=\"https://help.ubuntu.com\" rel=\"nofollow\">here</a> community/AWStats</p>\n\n<p>And it says to go to the file at: <code>/etc/crontab</code></p>\n\n<p>That file already has some information in it.  Is this the main <code>crontab</code> file or something?  I have seen some instructions online to use the file that pops up with <code>crontab -e</code> .</p>\n\n<p>What is the proper file to use and best way to do this?</p>\n\n<p>If I schedule a task as my non-root user, will it run by itself at the time interval as specified, with no issues?</p>\n\n<p>Will I need to restart the server after saving the cron job in the <code>crontab</code> file before it will start working?</p>\n"},{"id":117359,"title":"How do I change the timezone to UTC?","body":"<p>I just installed a Ubuntu 11.10 box and I'm trying to figure out how to set the timezone to UTC. I have it set to London at the moment, but UTC doesn't appear to be an option.</p>\n\n<p>Help?</p>\n"},{"id":144064,"title":"Set server timezone but not working with crontab and phpmyadmin","body":"<h1>TimeZone is not working properly</h1>\n\n<p>I am using linode server running ubuntu 12.04LTS. My Question is when i configured timezone by using dpkg reconfigure tz as IST ASIA/Calcutta. It shows correct timezone by using date command. But it is not working in CRON jobs and PHPMYADMIN. Because My work is very important, anxiously i have to work in UTC timezone to run my cron jobs accordingly. But now i am  stucking with my applications output run by cron jobs. Please help me!! </p>\n\n<p>Thanks in advance</p>\n"},{"id":117978,"title":"Script doesn&#39;t run via crontab but works fine standalone","body":"<p>I have a script that reminds me to restart my computer if <code>uptime</code> is more than, say 3 days (although its set to 0 days now just to check if the script is running as my computer has been up only over a day..). </p>\n\n<p>I realize it isn't the most elegant script but I am trying! <code>:)</code> </p>\n\n<pre><code>#!/bin/bash\n\nup=$(uptime | grep \"day\" &gt; /home/dnaneet/uptime.foo &amp;&amp; awk &lt; /home/dnaneet/uptime.foo '{ print $3 }')\n\n[[ $up -gt 0 ]] &amp;&amp; xmessage -center \"Restart!\"\n</code></pre>\n\n<p>I have made it executable by <code>chmod + x checkup.sh</code> and it works fine when I run it fro the terminal via <code>./checkup.sh</code></p>\n\n<p>My crontab entry for this script is:</p>\n\n<p><code>46 14   * * *   /home/dnaneet/Desktop/./checkup.sh</code></p>\n\n<p>So it runs at 14:46hrs daily...</p>\n\n<p>So... I am thinking it should run, unless I didn't something really silly.\nAlso, do you think it's ok to move this bash script to <code>/bin</code>?</p>\n"},{"id":411535,"title":"System crontab entries not being run","body":"<p>I am running Ubuntu 12.04 LTS Desktop.</p>\n\n<p>I have used the /etc/crontab to set up a couple of entries that should run at different schedules.</p>\n\n<p>Now, the problem is that these do not seem to be running. I have used these same entries in other ubuntu systems and they work alright.</p>\n\n<p>Here is my crontab file:</p>\n\n<pre><code>#--------------------------------------------------------------------------------\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/bash\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / &amp;&amp; run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.monthly )\n​6  2-6/2 * * *  root    wget localhost/estimator/update_to_cs.php\n​26 2-6/2 * * *  root    wget localhost/estimator/update_estimator_cron.php\n*  *     * * *  printo  touch /home/printo/test_cron_output.txt\n*  *     * * *  printo  date &gt;&gt; /home/printo/test_cron_output.txt\n#--------------------------------------------------------------------------------\n</code></pre>\n\n<p>The user printo exists and has sudo privileges as well.</p>\n\n<p><code>ps -ef | grep cron</code> shows that cron is running.</p>\n\n<p>Any pointers on what I may be missing or a way to get to the root of the issue?</p>\n\n<p>TIA.</p>\n"},{"id":397599,"title":"Double timezone. How to delete one?","body":"<p>After upgrading from Ubuntu 13.04 to 13.10, my clock was always one hour fast. I issued the command <code>sudo dpkg-reconfigure tzdata</code></p>\n\n<pre><code>Current default time zone: 'Europe/Brussels'\nLocal time is now:      Mon Dec 30 11:52:06 CET 2013.\nUniversal Time is now:  Mon Dec 30 10:52:06 UTC 2013.\n</code></pre>\n\n<p>The time is correct now, but I notice a double time-zone in the clock-applet. How can I remove the other one?</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Y5Pu.jpg\" alt=\"enter image description here\"></p>\n\n<p>Note that cat <code>/etc/timezone</code> returns Europe/Brussels. The Copenhagen-entry isn't specified. However if one clicks on the clock-applet on the Brussels-value, the\nBrussels-value disappears and only the Copenhagen-entry is left. Now this\nentry appears in <code>/etc/timezone</code>.</p>\n"},{"id":385150,"title":"How to install changes to /etc/crontab","body":"<p>If I want to add lines to my system's /etc/crontab, what do I have to do to get them to take effect?</p>\n\n<hr>\n\n<p>Background:</p>\n\n<p>I'm trying to set up a machine with Ubuntu 13.04 so that it automatically locks/unlocks the monitor during the workday (it's hanging on the wall).</p>\n\n<p>I've done this by adding the following to my /etc/crontab:</p>\n\n<pre><code>00 18  * * mon-fri myuser export DISPLAY:=0 &amp;&amp; gnome-screensaver-command -a\n00 18  * * mon-fri myuser export DISPLAY:=0 &amp;&amp; xset dpms force standby\n00 08  * * mon-fri myuser export DISPLAY:=0 &amp;&amp; gnome-screensaver-command -d\n00 08  * * mon-fri myuser export DISPLAY:=0 &amp;&amp; xset dpms force on\n</code></pre>\n\n<p>The individual commands work fine, but I'm trying to test the crontab entries by setting the minute/day to the upcoming minute. For example, at 1:26PM I set the first two columns to 27 13 and waited until the next minute rolled around. But the commands don't appear to be getting executed. I also tried running <code>sudo crontab /etc/crontab</code>, but it doesn't seem to help.</p>\n"},{"id":35940,"title":"How do I set time for use on a server where microseconds are important?","body":"<p>Lets say you have a server that stores records, and the time stamp that goes into the mysql/postgres/text-file/whatever is vital to be accurate (lets pretend it's a physics experiment, or bank transaction auditing system).</p>\n\n<p>My server's always end up out of time bit by bit each day (this may be due to existinging inside a VM?).  I can run ntpdate every day, manually, which is a total pain, but I dont want to do that, and have a feeling it may not be a good solution at all for high precision time tracking.</p>\n\n<p>What should I do to ensure my computer is never off by more than 0.05 seconds? I want to be able to walk away from it for 5 years and have it running accurate time when I come back.</p>\n\n<p>Note: This is ubuntu-server, CLI commands only, there is no GUI.</p>\n"}]}]
[{"id":42985,"title":"How can I gzip my web directories?","body":"<p>I would like to make a compressed file of my web sites folder and send it to a backups folder, and I can't seem to find anything specific on google. <br></p>\n\n<ul>\n<li>My web folder is: <code>/home/user/public_html/mydomain.com/</code></li>\n<li>Backups folder is: <code>/home/user/backups/</code></li>\n</ul>\n\n<p><em>Some Concerns:</em></p>\n\n<ol>\n<li>Would there be any issues gziping while nginx/apache running? </li>\n<li>Also I have the permission set to 755, is this ok?</li>\n<li>Do I need to tarball before I gzip it?</li>\n<li>Will this overwrite a previous gzip?</li>\n<li>Is there a way to automatically append the date?...That would be great!</li>\n</ol>\n\n<p>I have been manually doing this in <a href=\"http://cyberduck.ch/\" rel=\"nofollow\">Cyberduck</a> ... what a pain!</p>\n","related_questions":[{"id":715925,"title":"&#39;gzip: file.log.gz: not in gzip format&#39; error","body":"<p>I have a <code>.gz</code> folder and I tried to unzip it using terminal by the following commands, but gave error.  </p>\n\n<pre><code>gunzip access-2.log.gz  \ngzip -d access-2.log.gz  \n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/EhHVO.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/EhHVO.png\" alt=\"gunzip\"></a>\n<a href=\"http://i.stack.imgur.com/aLzCz.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/aLzCz.png\" alt=\"gzip\"></a>  </p>\n\n<p>Then I followed the error in <a href=\"http://askubuntu.com/\">Ask Ubuntu</a>, found this <a href=\"http://askubuntu.com/questions/562763/gzip-stdin-not-in-gzip-format-when-gunzip-is-used-with-pipe\">question</a><br>\nAfter that I gave the command in terminal  </p>\n\n<pre><code>gunzip Desktop/project/data/access-2.log.gz   \n</code></pre>\n\n<p>similar error.<a href=\"http://i.stack.imgur.com/dzEpG.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/dzEpG.png\" alt=\"path\"></a> </p>\n\n<p>Why I'm getting this issue?<br>\nWhat is the solution to unzip the <code>name.log.gz</code> folder?</p>\n"},{"id":693409,"title":"how can I extract multiple gzip files in directory and subdirectories?","body":"<p>I have tried both <code>gzip</code> and <code>gunzip</code> commands but I get either</p>\n\n<pre><code>gunzip *.gz \ngzip: invalid option -- 'Y' \n\ngunzip -S-1800-01-01-000000-g01.h5.gz  \ngzip: compressed data not read\n from a terminal. Use -f to force decompression. For help, type: gzip -h\n</code></pre>\n\n<p>If I try the <code>-f</code> option it takes a very long time to work on one single file and the command is not executed successfully. Am I missing something?</p>\n"},{"id":62655,"title":"&quot;less&quot; doesn&#39;t automatically decompress gzipped files","body":"<p>On Fedora/Redhat/CentOS the <code>less</code> command seems to magically detect a gzipped file and decompress it on the fly, so you can do:</p>\n\n<pre><code>less my_stuff.csv.gz\n</code></pre>\n\n<p>I've just noticed this doesn't work on Ubuntu 11</p>\n\n<pre><code>less my_stuff.csv.gz\n\"my_stuff.csv.gz\" may be a binary file.  See it anyway? \n</code></pre>\n\n<p>I've been examining my CentOS VMs to see if there's some shell alias magic that makes it work but there doesn't seem to be. Is gzip support just built in to the CentOS binary?</p>\n\n<p>If anyone knows how this works on CentOS and/or how it can be made to work on Ubuntu I'd be grateful.</p>\n\n<p>I'm aware I can do</p>\n\n<pre><code>zcat my_stuff.csv.gz | less\n</code></pre>\n\n<p>but that would make my keyboard wear out more quickly.</p>\n"},{"id":496432,"title":"gzip all files with specific extensions","body":"<p>I'm trying to gzip all files on ubuntu that have the file extension .css, .html or .js. in a top directory and all subdirectories. I want to keep the original files and overwrite the .gz file, if already existing.</p>\n\n<p>So when I have n files, I want to keep these n files and create additional n archive files. Not just one.</p>\n\n<p>My try was to run a script that looks like this:</p>\n\n<pre><code>gzip -rkf *.css\ngzip -rkf *.html\n... one line for each file extension\n</code></pre>\n\n<p>First: I need to have one line in that script for each file extension I want to gzip. That's ok, but I hope to find a better way</p>\n\n<p>Second and more important: It does not work. Although -r should do the job, the subdirectories are unchanged. The gzip file is only created in the top directory.</p>\n\n<p>What am I missing here?</p>\n\n<p>Btw: The following is a bug in the verbose output, right? When using -k and -v option</p>\n\n<pre><code>-k, --keep        keep (don't delete) input files\n-v, --verbose     verbose mode\n</code></pre>\n\n<p>The verbose output says it replaces the file, although \"replace\" means that the original file does not exist after the replace. Anyway, THis is only the output thing.</p>\n\n<pre><code>$ ls\n  index.html      subdir1  testfile      testfile.css.gz\n  javaclass.java  subdir2  testfile.css\n$ gzip -fkv *.css\n  testfile.css:   6.6% -- replaced with testfile.css.gz\n$ ls\n  index.html      subdir1  testfile      testfile.css.gz\n  javaclass.java  subdir2  testfile.css\n</code></pre>\n"},{"id":492331,"title":"Tar Gzip Every n Files in a Directory","body":"<p>I have a folder with 7,491 files in it. I'd like to tar gzip these in batches of 100, e.g.</p>\n\n<pre><code>first 100 files &gt; archive1.tar.gz\nfiles 101-200 &gt; archive2.tar.gz\nfiles 201-300 &gt; archive3.tar.gz\n</code></pre>\n\n<p>Is there a way to do this via the command line?</p>\n"},{"id":485960,"title":"what program should i use with a gzip archive","body":"<p>I am trying to download grub-1.99.tar.gz ,I do not know what program to use to open  a </p>\n\n<p>Gzip file. please recommend</p>\n"},{"id":424969,"title":"xoj (Xournal) files handled as gzip despite presence of correct MIME type","body":"<p>So I had to uninstall the <a href=\"https://launchpad.net/~nilarimogard/+archive/webupd8\" rel=\"nofollow\">ppa</a> <a href=\"http://www.ubuntuupdates.org/package/webupd8/precise/main/base/xournal\" rel=\"nofollow\">version</a> of <a href=\"https://sourceforge.net/projects/xournal/\" rel=\"nofollow\">Xournal</a> and build from <a href=\"http://sourceforge.net/code-snapshots/git/x/xo/xournal/code.git/xournal-code-6d4c59eb9bd2b50c661701a6c5b5fbcfc617eb17.zip\" rel=\"nofollow\">source</a> (with a <a href=\"https://sourceforge.net/p/xournal/bugs/112/?limit=10&amp;page=1#000f\" rel=\"nofollow\">modification</a>).  And now .xoj files open automatically with KDE's archive manager Ark, and are identified as being of type \"Gzip archive\" when one selects Properties from the right-click menu in Dolphin:\n<img src=\"http://i.stack.imgur.com/bes9m.png\" alt=\"xoj properties from Dolphin\"><br>\n(Before, .xoj files opened with Xournal and were correctly identified.) This state of affairs persists despite all of the following:  </p>\n\n<p>1) Copied these files that come with the source package:<br>\n - <code>xournal.xml</code> into /usr/share/mime/packages/<br>\n - <code>xournal.desktop</code> into /usr/share/applications/<br>\n - <code>x-xoj.desktop</code> into /usr/share/mimelnk/application/  </p>\n\n<p>2) added the line<br>\n   <code>application/x-xoj=xournal.desktop;</code><br>\n   to ~/.local/share/applications/mimeapps.list  </p>\n\n<p>3) added the MIME type <code>application/x-xoj</code> in the <em>File Associations</em> System Setting<br>\n   (with appropriate content):<br>\n<img src=\"http://i.stack.imgur.com/45nsg.png\" alt=\"file-associations-xoj\"><br>\n   (Note also that <code>application/x-gzip</code> specifies only the .gz extension:<br>\n<img src=\"http://i.stack.imgur.com/yH6aO.png\" alt=\"enter image description here\">.)  </p>\n\n<p>4) copied <code>xournal.xml</code> to /usr/share/mime/application<br>\n   as suggested <a href=\"https://help.ubuntu.com/community/AddingMimeTypes\" rel=\"nofollow\">here</a>  </p>\n\n<p>5) <code>sudo update-mime-database /usr/share/mime</code>  </p>\n\n<p>6) restarted the computer  </p>\n\n<p><em>edited to add:</em><br>\n7) [right-click an .xoj file] --> Open With --> Other... --> [select 'Xournal'], tick 'Remember application association for this type of file' also has no effect.<br>\n<em>end of edit</em>  </p>\n\n<p>This is on Kubuntu 12.04.<br>\nSo, what am I missing?</p>\n\n<p><em>Edited to add</em><br>\nI have discovered that the <code>file --mime-type [filename]</code> and <code>mimetype [filename]</code> commands produce different results, as in <a href=\"http://askubuntu.com/questions/279899/file-mime-type-and-mimetype-commands-returning-different-results\">this question</a>:  </p>\n\n<pre><code>archelon@ingelrayok:~/Documents/xournal$ file --mime-type 2014-02-22-Note-02-09.xoj  \n2014-02-22-Note-02-09.xoj: application/x-gzip  \narchelon@ingelrayok:~/Documents/xournal$ mimetype 2014-02-22-Note-02-09.xoj  \n2014-02-22-Note-02-09.xoj: application/x-xoj  \n</code></pre>\n\n<p>However, there is no entry for <code>application/x-gzip</code> in /etc/mime.types (from which the <code>file</code> command supposedly gets its information); and, indeed, there shouldn't be, according to the comment at the beginning of that file, which reads in part:  </p>\n\n<blockquote>\n  <p>Note: Compression schemes like \"gzip\", \"bzip\", and \"compress\" are not\n   actually \"mime-types\".  They are \"encodings\" and hence must <em>not</em> have\n   entries in this file to map their extensions.  The \"mime-type\" of an\n   encoded file refers to the type of data that has been encoded, not the\n   type of encoding.</p>\n</blockquote>\n\n<p>That comment also says that  </p>\n\n<blockquote>\n  <p>Users can add their own types if they wish by creating a \".mime.types\"\n   file in their home directory.  Definitions included there will take\n   precedence over those listed here.  </p>\n</blockquote>\n\n<p>There is at present no such file.  There are some files in my home directory (which I didn't create) that are apparently related to the output of the <code>mimetype</code> command; these include<br>\n<code>~/.local/share/mime/application/x-xoj.xml</code>,<br>\n<code>~/.local/share/mime/packages/application-x-xoj.xml</code>, and<br>\n<code>~/.local/share/mime/types</code> which contains only the text <code>application/x-xoj</code>.<br>\nIn fact the directory ~/.local/share/mime/ and everything in it have the same timestamp (22:19 last night), and were thus presumably generated by the same process.  </p>\n\n<p>After looking at the manpages for <a href=\"http://manpages.ubuntu.com/manpages/precise/man1/mimetype.1p.html\" rel=\"nofollow\">mimetype</a> and <a href=\"http://manpages.ubuntu.com/manpages/precise/man1/file.1.html\" rel=\"nofollow\">file</a>, I decided to check the environment variables <code>$XDG_DATA_HOME</code> and <code>$XDG_DATA_DIRS</code>, which apparently are used by the former but not the latter.  But I didn't know how to report the value of an environment variable, so I tried <code>cat $XDG_DATA_HOME</code>, which <em>set</em> the value (to nothing) instead of reporting it.  <em>Edited to add:  Or so I thought at first; actually it was already unset, as we shall see.</em> The correct command is <code>echo $XDG_DATA_HOME</code>, as I learned from reading about environment variables <a href=\"https://help.ubuntu.com/community/EnvironmentVariables\" rel=\"nofollow\">here</a>.  So then I discovered that <code>$XDG_DATA_DIRS</code> was set to <code>/usr/share/default:/usr/local/share/:/usr/share/</code>; the first of these doesn't exist.  I don't think that matters, but anyway I ran the commands  </p>\n\n<pre><code>XDG_DATA_HOME=$HOME/.local/share  \n</code></pre>\n\n<p>and</p>\n\n<pre><code>XDG_DATA_DIRS=/usr/local/share/:/usr/share/  \n</code></pre>\n\n<p>to accord with the <a href=\"http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html\" rel=\"nofollow\">standard</a>.  I doubt that any of this will make any difference, but I'm going to try another restart now (although I think those environment variables will be automatically reset anyway). <em>Next edit</em>: Yes, they were; in fact the variable <code>XDG_DATA_HOME</code> is now null again.  </p>\n\n<p>Anyway the bottom line seems to be that KDE is using the functionality that <code>file</code> is using, rather than that which <code>mimetype</code> is using.  If I understand things correctly, this means that it is using magic instead of MIME types.  I now suspect that magic is responsible for this whole issue.  </p>\n\n<p><em>New edit</em>  </p>\n\n<p>So the <code>file</code> <a href=\"http://manpages.ubuntu.com/manpages/precise/man1/file.1.html\" rel=\"nofollow\">manpage</a> seems to be saying that these are the baseline magic files:  </p>\n\n<blockquote>\n  <p>/usr/share/misc/magic.mgc  Default compiled list of magic.<br>\n  /usr/share/misc/magic      Directory containing default magic files.  </p>\n</blockquote>\n\n<p>(I have these; /usr/share/misc/magic is a link to the empty folder /usr/share/file/magic and /usr/share/misc/magic.mgc is a link to the file /usr/share/file/magic.mgc -- the latter is a 2.1 MB file full of gobbledygook) and the following text:</p>\n\n<blockquote>\n  <p>The information identifying these files </p>\n</blockquote>\n\n<p>(i.e. \"files [which] have a ``magic number'' stored in a particular place near the beginning of the file\")  </p>\n\n<blockquote>\n  <p>is read from /etc/magic and the compiled magic file<br>\n   /usr/share/misc/magic.mgc, or the files in the directory<br>\n   /usr/share/misc/magic if the compiled file does not exist.  In addition,<br>\n   if $HOME/.magic.mgc or $HOME/.magic exists, it will be used in preference<br>\n   to the system magic files.  </p>\n</blockquote>\n\n<p>(I have confirmed this with <code>strace</code>, as suggested <a href=\"http://askubuntu.com/a/105658/192986\">here</a>.)  Neither $HOME/.magic.mgc nor $HOME/.magic exists on my system; but, since presumably xoj files contain precisely that gobbledygook which causes a file to be magically identified as <code>application/x-gzip</code>, it would do no good to create them (please correct me if I am wrong).</p>\n\n<p>The solution I'm looking for, then, would be a way to have the MIME-type specification override magic for a given file extension; I thought I had seen something that looked like it might provide a hint as to how that might be accomplished, but I can't find it now.  Yet surely such a method exists.</p>\n"},{"id":414905,"title":"How can I combine find command with gzip","body":"<p>I am trying to compress a specific files:</p>\n\n<pre><code>find /media/mount/storage -newermt \"2013-08-01 00:00:00\" -path '*/*wind.txt' -print0 | xargs -0 gzip -l &gt;&gt; file_system.tar.gz\n</code></pre>\n\n<p>but I am getting the following error:</p>\n\n<pre><code>gzip: /media/mount/storage/20130811120802_RHI1/20130811121000_wind.txt: not in gzip format\n</code></pre>\n\n<p>Where do I make the mistake?</p>\n\n<p>EDITED: with the answer written by chronitis sometimes the tar is recreated, this is the output:</p>\n\n<pre><code> /media/mount/storage/File system/20130505082135_CT1/20130505090000_wind.txt\n /media/mount/storage/File system/20130505085301_CT1/20130505090000_wind.txt\n tar: Removing leading `/' from member names &lt;- the size of the tar became zero\n /media/mount/storageFile system/20130505085301_CT1/20130505091000_wind.txt\n /media/mount/storageFile system/20130505085301_CT1/20130505092000_wind.txt\n</code></pre>\n"},{"id":26506,"title":"Repair gzipped tar","body":"<p>I have a pretty large(50Gb) tar.gz file that I can't untar anymore. Error that I am getting is this:</p>\n\n<pre><code>gzip: stdin: not in gzip format\ntar: Child returned status 1\ntar: Error is not recoverable: exiting now\n</code></pre>\n\n<p>Is there any way to repair broken tar.gz?</p>\n\n<p>UPDATE: Output of file command:</p>\n\n<pre><code>$ file projects.tgz \nprojects.tgz: POSIX tar archive (GNU)\n</code></pre>\n"},{"id":9747,"title":"How to give directory and file permissions to a web server","body":"<p>I'm a Linux newbie. I'm doing a project that uses the gosmore routing engine. In one of my email to the developer about a certain problem, he replied to me that to solve the problem:</p>\n\n<p>\"I think you will have to move gosmore directory to a home directory and give the webserver read and execute rights. On my Ubuntu installation this is the /home/lambertus/gosmore and my webpages run in /home/lambertus/public_html/yours.\"</p>\n\n<p>I did move the needed files to my home directory, and CHMOD it using this command:</p>\n\n<p><code>chmod -R 755 gosmore/</code></p>\n\n<p>The thing is, when I \"ls -l\" for the gosmore directory, it displays that I had had already set the permission correctly (drwxr-xr-x...). But when I check Permissions in the gosmore directory (right-click > Properties), the permissions are still not set. Because of these, my gosmore installation doesn't still work. What can I do to truly set the permissions that I need for the directories? Thanks in advance! :D</p>\n"}]}]
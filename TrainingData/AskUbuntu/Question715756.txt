[{"id":715756,"title":"Changing UUID with tune2fs gives &quot;NOT A DIRECTORY&quot; ERROR","body":"<p>I had a self-inflicted complete failure on my Ubuntu 15.10 partition (<code>/dev/sda5</code>).  I had a complete backup using <a href=\"https://sourceforge.net/projects/systemback/\" rel=\"nofollow\">Systemback</a>, which I installed successfully after booting to the LiveCD.  As happens when I completely reinstall Ubuntu on the partition using either Systemback or tar, the UUID was changed and I get this error:</p>\n\n<pre><code>No controller found\nNo caching mode found:\nGave up waiting for root device.....\nAlert! /dev/disk/by-uuid/####-####-#### (i.e., the UUID) does not exist.  Dropping into a shell.\n(initramfs)\n</code></pre>\n\n<p>To fix this, I usually boot into the LiveCD and perform the following:</p>\n\n<pre><code>sudo tune2fs /dev/sda5 -U ####-####-#### (i.e., the UUID)\n</code></pre>\n\n<p>However, I am now getting a very scary error:</p>\n\n<pre><code>tune2fs 1.42.12 (29-Aug-2014)\ntune2fs: Not a directory while trying to open /dev/sda5/\nCouldn't find valid filesystem superblock.\n</code></pre>\n\n<p><em>Can this be overcome -- either by getting tune2fs to work or by using an alternative way to change the UUID???</em>  I have searched everywhere for the <code>Not a directory while trying to open</code> error in conjunction with tune2fs, and have come up with nothing.  </p>\n\n<p>Aaaarggghh!</p>\n\n<ul>\n<li><strong>NOTE</strong>: I also tried to update the UUID manually in <code>/etc/fstab</code> and /boot/grub/grub.cfg then chrooting into <code>/dev/sda5</code> and updating\ngrub -- it didn't work!!</li>\n</ul>\n","related_questions":[{"id":689452,"title":"Had Win 7 and Ubuntu 14.04 on single SSD, want to delete Ubuntu from first SSD, re-install it 14.04.3 on new SSD, delete old and give space to Win 7","body":"<p>Currently I have a single 120GB SSD that has both Win 7 (NTFS) and Ubuntu 14.04 (EXT4)(sda1 Windows, sda2 Ubuntu, sda3 swap). Dual boot with grub giving me the choice of OS while booting up. Ubuntu is currently in position #1, Win 7 loader #5. I have installed Ubuntu 14.04.3 on a new SSD (128GB)(sdb). I'd like to reconfigure the grub to look at sdb for Ubuntu, and allow Win 7 to use the ~55GB of space on sda2 and sda3 after reformatting using Gparted to NTFS. What all do I have to change to accomplish this? When I first installed the newest Ubuntu on sdb, that option would come up in the grub menu. Now it does not. Also, do I have to create a Swap partition on sdb?</p>\n\n<p>The command sudo parted -l returned an error. Is there something I'm doing wrong?</p>\n\n<p>sudo parted /dev/sda print showed an MSDOS partition table and a 105MB ntfs boot primary partition.</p>\n\n<p>So I'm assuming it is MBR</p>\n"},{"id":683071,"title":"BOOT FAILURE Prtition Change","body":"<p>Stressed user here.  Last week I could not boot into my Ubuntu 5.04. I have now got the 14.04 installed via DVD. though I can not restore my backups and I have made matters even worse since I have changed the partitions which have stopped me using the FSCK command in the terminal. I can't get Ubuntu 15.04 back either.  </p>\n\n<p>I'm blind in both senses that I can't see what I'm doing and have to use my poor wife to carry out the operations and in the sense that I know little or nothing of restoring Ubuntu after boot failure and partition changing.  Totally, my fault about partition change.</p>\n\n<p>Help before I damage the computer and ruin my marriage LOL\nAndy :-(</p>\n"},{"id":680971,"title":"14.04.3 LTS tries to install bootloader to its own installation media, and how I fixed it","body":"<p>I tried installing Ubuntu Desktop and Ubuntu Server 14.04.3 LTS using the standard text-based install. It kept saying, \"Executing 'grub-install /dev/sda' failed. This is a fatal error.\"</p>\n\n<p>The alt+f4 logscreen says:</p>\n\n<blockquote>\n  <p>grub-install: warning: Attempting to install GRUB to a disk with multiple partition labels.  This is not supported yet..</p>\n  \n  <p>grub-installer: grub-install: error: embedding is not possible, but this is required for cross-disk install.</p>\n</blockquote>\n\n<p>Okay... the <em>installation media</em> is on /dev/sda. Why is it trying to install a bootloader <em>to its own installation media?</em> That makes no sense at all. It did the same thing three years ago when I tried to install 12.x or whatever was available then. (I solved that problem by installing Debian instead.)</p>\n\n<p>I also tried installing from the live preview. That <em>does</em> work, but it's not a complete installer - it won't let you set up RAID, for example. For a feature-complete \"advanced\" install, you either have to use the graphic installer and do a bunch of tedious monkey work to set up all the stuff that it can't handle, or use the default text mode installer and fix GRUB by hand. I thought the latter would be much less tedious.</p>\n\n<p>I continued without installing a bootloader, \"finished\" the installation, then rebooted into rescue mode so that I could get a shell in the installed OS's filesystem.</p>\n\n<p>Then, I did this (substitute your system disk for /dev/sdf):</p>\n\n<blockquote>\n  <h1>sudo grub-install --root-directory=/ /dev/sdf</h1>\n  \n  <h1>sudo grub-mkconfig -o /boot/grub/grub.cfg</h1>\n</blockquote>\n\n<p>No errors. Cool!</p>\n\n<p>I exited the shell, had the installer reboot the system, and now it works fine.</p>\n\n<p>I also tried doing this from inside the installer environment (without rebooting into rescue mode) but it couldn't load shared libraries needed by grub-install. There is a way to do that with chroot'ing, I think, but rebooting into rescue mode - while taking longer - takes care of all that stuff for you!</p>\n"},{"id":659170,"title":"Help with grub errors after installing cloned partition on new laptop","body":"<p>I just installed a cloned ubuntu partition (using clonezilla) on a new laptop that dual boots windows 7.  This machine has far fewer disks and partitions than the old one.</p>\n\n<p>I installed EasyBCD in windows and pointed it to the ubuntu partition.  After rebooting, I select \"Neo... Linux\" and it loads into grub2 rescue mode.</p>\n\n<p>Using the following commands in grub2-rescue, it now boots into grub2 after I select the \"Neo Linux\" option.</p>\n\n<p><code>set prefix=(hd0,3)/boot/grub</code></p>\n\n<p><code>set root=(hd0,3)</code></p>\n\n<p><code>insmod normal</code></p>\n\n<p><code>normal</code></p>\n\n<p>However, I would just like to use grub2.</p>\n\n<p>A few oddities I've noticed (before I get to the problems).</p>\n\n<p>Running <code>sudo fdisk -l</code></p>\n\n<pre><code>   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048      206847      102400    7  HPFS/NTFS/exFAT\n/dev/sda2          206848   567171071   283482112    7  HPFS/NTFS/exFAT\n/dev/sda3       567171072   902715391   167772160    7  HPFS/NTFS/exFAT\n</code></pre>\n\n<p>Lists my /dev/sda3 partition as \"HPFS/NTFS/exFAT\".  This is the ext4 ubuntu partition.</p>\n\n<ol>\n<li>Why?</li>\n</ol>\n\n<p>And then, running <code>sudo grub-install /dev/sda3</code>...</p>\n\n<pre><code>Installing for i386-pc platform.\ngrub-install: warning: File system `ext2' doesn't support embedding.\ngrub-install: warning: Embedding is not possible.  GRUB can only be  installed in this setup by using blocklists.  However, blocklists are  UNRELIABLE and their use is discouraged..\ngrub-install: error: will not proceed with blocklists.\n</code></pre>\n\n<p>Says the file system is ext2 (it's ext4, Disks program on ubuntu says so and that's what I formatted it as using fdisk before I installed the cloned ubuntu partition).</p>\n\n<p>So..</p>\n\n<ol>\n<li>What do these oddities mean? Can/should I fix them?</li>\n<li>How to re-install grub over the EasyBCD I installed earlier in windows and have that load instead of EasyBCD</li>\n<li>How to reconfigure grub to reflect my new disks/partitions?</li>\n<li>On a side note, after booting ubuntu from grub2-rescue.. it complains of a missing disk.</li>\n</ol>\n"},{"id":438126,"title":"Grub rescue; &quot;no such device&quot; error happens Intermittently","body":"<p>I have three storage devices:<br>\n⠀/dev/sda/, an SSD with Windows 8 installed on it (NTFS)<br>\n⠀/dev/sdb/, an HDD with a single NTFS partition on it that is shared<br>\n⠀/dev/sdc/, an SSD with Ubuntu 13.10 installed on it as a single EXT4 partition  </p>\n\n<p>About 50% of the time when I reboot, usually to switch the OS, I see the following:</p>\n\n<pre><code>error: no such device: &lt;uuid&gt;\nentering rescue mode...\ngrub rescue&gt;\n</code></pre>\n\n<p>Where <code>&lt;uuid&gt;</code> is the UUID of /dev/sdc1. When it happens, it goes away if I press Ctrl+Alt+Del and go into my BIOS's boot menu and choose /dev/sda to boot from.</p>\n\n<p>The intermittent behavior and the fact that it goes away only through that method (i.e. reinstalling GRUB to /dev/sda as other Ask Ubuntu answers recommend does not help) makes me think this is unrelated to the dozens of other AU questions about the same error message. What can I do to resolve this?</p>\n"},{"id":591553,"title":"Installing Ubuntu 1st Time, Fatal Error with Grub","body":"<p>I am new to Linux and this is my first time trying to install Ubuntu. Six hours in, and I have not yet succeeded. Any assistance would be greatly appreciated. </p>\n\n<p>I am trying to install Ubuntu on a partition on my Lenovo Thinkpad, which is already running Windows 7 on a separate partition. I have a liveCD which I burnt using the ISO supplied from Ubuntu. Everything seems to start off smoothly, but about 20 minutes into the installation, I get the message: </p>\n\n<blockquote>\n  <p>executing 'grub-install/dev/mmcblk0' failed. This is a fatal error. </p>\n</blockquote>\n\n<p>The installer gives me no choice but to exit. </p>\n\n<p>I read that some people had luck changing some options in their BIOS, such as turning off quick boot. Unfortunately my BIOS doesn't give me any options like that. When I got to the boot section, it only offers that I change the priority order. </p>\n\n<p>I've read through many answers online, but they all seem to be for people trying to dual-boot off Windows 8, or for people trying to install Ubuntu fresh with no other OS. </p>\n\n<p>I've also tried using sudo grub-install from the Ubuntu Live Desktop, hoping to manually install grub, but I got this message: </p>\n\n<blockquote>\n  <p>failed to get canonical path of /cow.</p>\n</blockquote>\n\n<p>I tried using chroot: </p>\n\n<pre><code>sudo mount /dev/sda /mnt\nsudo chroot /mnt\nsudo update-grub2\n</code></pre>\n\n<p>But I get the same message still. </p>\n\n<p>I also tried reading the dual-boot guide, as recommended in this answer:</p>\n\n<p><a href=\"https://askubuntu.com/questions/62328/1st-time-install-of-ubuntu-as-dual-boot-on-my-win-7-notebook-now-grub-error?rq=1\">1st-time-install-of-ubuntu-as-dual-boot-on-my-win-7-notebook-now-grub-error</a></p>\n\n<p>However I did not read anything in that guide that helped me with this problem.</p>\n\n<p>I've heard that some folks had some luck formatting and re-creating the target partition so I am going to do that now, but only because I don't know what else to do. </p>\n\n<p>Is there a way to complete the installation without GRUB and then manually install it later?</p>\n\n<p>Any advice would be greatly appreciated. </p>\n"},{"id":476492,"title":"How to do a dual boot of two Ubuntu operating systems?","body":"<p>This problem is little bit different than other similar ones.</p>\n\n<p>I have a clone image of Ubuntu production system and plan to propagate it to two different partitions (e.g., /dev/sda1, /dev/sda2). </p>\n\n<p>How to set it up so that the user can choose which one to boot? </p>\n\n<p>Below is what I did so far.</p>\n\n<pre><code>1. boot from rescue cd\n2. add a new file /etc/grub.d/11_boot_2 in /dev/sda1\n3. point uuid in 11_boot_2 to /dev/sda2\n4. chroot to /dev/sda1, and run update-grub\n5. modify /etc/fstab in /dev/sda2 to use different mount point\n</code></pre>\n\n<p>When rebooting, the GRUB menu shows the second boot option. But after choosing it, the boot ends in (initramfs) prompt. The uuid should be correct, because otherwise the boot will print an error like \"no such filesystem\".</p>\n\n<p>So my questions are:</p>\n\n<pre><code>1. Is any step above wrong, or did I missing anything?\n\n2. At the initramfs stage, what could I do to troubleshoot?\n\n3. Is there any way to enter \"grub rescue\"? \n   I end up in grub rescue before and I can test boot there. \n   But this time, the system didn't stop at grub rescue.\n\n4. Exactly what stage is initramfs during the whole boot process? \n   That may tell me what is right so far, and what may be wrong.\n</code></pre>\n\n<p>Thank you so much for the help!</p>\n"},{"id":464591,"title":"Cannot find grub to boot Ubuntu after installation","body":"<p>I use a ASUS N550JV laptop (UEFI) and I tried to dual boot 64bit Ubuntu 14.04 on it, along side with Windows 8. I have two hard drives and <code>/dev/sdb</code> is a SSD so I want to install Ubuntu on it (Windows is also installed on this drive). But when the auto  installation runs, it tries to install grub on /dev/sda, so it fails. So, I made 30GB unallocated space in Windows then used a USB drive with Ubuntu ISO in it. I partitioned the 30GB space as follows:</p>\n\n<pre><code>/boot 100MB   ext2 primary\n/     8192MB  ext4 logical\n/home 20480MB ext4 logical\nswap  the rest of space (about 4GB)\n</code></pre>\n\n<p>and I chose <code>/dev/sdb</code> as location to install boot loader. The installation run without reporting any error. But when the installation completed and the system rebooted, grub does not appear in the boot options. I went into boot options in BIOS and check efi directory and did not find grub either. What shall I do with situation? Thanks in advance.</p>\n\n<p>p.s. There actually exists two grub 1.99 in efi partition, which are left by unsuccessful installation of Ubuntu 13.10 and Debian 7.5. When I use them, there appears a grub command line, which I have no idea how to use. Is this causing the problems?</p>\n"},{"id":409829,"title":"Partition problems after resizing","body":"<p>This might be quite the hopeless case, so I posted another method that is simpler, but still need some help with.    </p>\n\n<p><a href=\"http://askubuntu.com/questions/409949/will-this-work-backup-partition-contents-of-both-linux-and-windows\">Will this backup the partition contents of both linux and windows?</a></p>\n\n<p>Here is the background:</p>\n\n<p>I've recently resized a partition (/sda2 to make another partition, /sda1) on a disk where Windows 8 and KDE Linux Mint are installed on. A whole lot of things went wrong.</p>\n\n<p>First, the computer wouldn't boot past BIOS and gave me grub rescue. With a Live Linux USB I used the boot-repair app to reinstall grub (on /sda). Thankfully linux booted from the new grub2 menu, but windows would crash when trying to load. When looking into it more on linux I found that apps like KDE Partition Manager and GParted both couldn't read the partition on my /sda disk.</p>\n\n<p>KDE Partition Manager gives me \"No valid partition was found on this device\".\nGParted gives me the whole thing is unallocated, and \"unable to satisfy all constraints on the partiton\".</p>\n\n<p>I then installed another app, FixParts. That gave me the following:</p>\n\n<pre><code>Warning: 0xEE partition doesn't start on sector 1. This can cause problems\nin some OSes.\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Disk size is 250069680 sectors (119.2 GiB)\nMBR disk identifier: 0x0FB1A4FB\nMBR partitions:\n\n                                                   Can Be   Can Be\nNumber  Boot  Start Sector   End Sector   Status   Logical  Primary   Code\n   1                    63       192779   primary     Y        Y      0x07\n   2      *         208839    134062424   logical     Y        Y      0x07\n   5             134066176    234067967   logical     Y        Y      0x83\n   6             234067968    250068991   primary              Y      0x82\n</code></pre>\n\n<p>fdisk -l gave me this:</p>\n\n<pre><code>Disk /dev/sda: 128.0 GB, 128035676160 bytes\n255 heads, 63 sectors/track, 15566 cylinders, total 250069680 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0fb1a4fb\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1              63      192779       96358+   7  HPFS/NTFS/exFAT\n/dev/sda2   *      208839   134062424    66926793    7  HPFS/NTFS/exFAT\n/dev/sda3       134066175   250068991    58001408+   f  W95 Ext'd (LBA)\n/dev/sda5       134066176   234067967    50000896   83  Linux\n/dev/sda6       234067968   250068991     8000512   82  Linux swap / Solaris\n</code></pre>\n\n<p>where sda1 is just an empty NTFS partition, sda2 contains my Windows 8, sda5 is Linux /(root). /home is on another disk.</p>\n\n<p>I want to keep my data. And I want my Windows 8 and Linux to be on the same disk because it's an SSD. If possible I would also like both Grub and Windows boot files to be on the same disk, but that's a different issue.</p>\n\n<p>First I thought the problem was \"0xEE partition doesn't start on sector 1\", but now I'm not so sure. My other disks (i got 3) give the same error, but the partition apps can read them. However, I remember seeing the boot-repair app reinstalling grub2 on every disk, so maybe that's related. Also, now I see that Windows 8 partition (/dev/sda2) is logical??? Windows cannot boot from logical, so it couldn't have been before. How can I even change that without loosing the data on it?</p>\n\n<p>Really detailed info from <a href=\"http://paste.ubuntu.com/6805345/\" rel=\"nofollow\">boot-repair app</a>.</p>\n"},{"id":308540,"title":"Grub2 ERROR: no such partition on boot 13.0.4","body":"<p>---Update---\nSo I discovered something odd.  If I select SDA4 in reffit, I get an error no partition found error described below.  If I use PLOP boot manager in the DVD drive and select SDA4 then I get grub loading properly.</p>\n\n<p>So somehow, the MBR that Reffit is using is corrupted.  It is using a Hybrid boot loader so this could be the issue that this has gotten messed up somehow by OSX during the resize.  Anyone know how to recover this?</p>\n\n<p>Setup:\nOSX /dev/sda2</p>\n\n<p>Ubuntu /dev/sda4</p>\n\n<p>Reffit is installed and still working.  I can select Linux and it was booting to Grub and then I would select Ubuntu and it would boot.</p>\n\n<p>How I caused the problem:\nResize OSX partition in disk utility in OSX to free up space for Ubuntu.</p>\n\n<p>Ubuntu is not installed in efi mode as I use custom Nvidia drivers.</p>\n\n<p>I've been able to use grub rescue to boot but using boot-repair tool, leaves me back where I started so something must be wrong somewhere that isn't being found by that tool.</p>\n\n<p>To boot manually from Grub, I use the following commands:</p>\n\n<pre><code>set prefix=(hd0,gpt4)/boot/grub\nset root=(hd0,gpt4)\ninsmod (hd0,gpt4)/boot/grub/i386-pc/linux.mod\nlinux /vmlinuz root=/dev/sda4 ro\ninitrd /initrd.img\nboot\n</code></pre>\n\n<p>My grub.cfg file is here:\n<a href=\"http://pastebin.com/m2juq2aJ\" rel=\"nofollow\">http://pastebin.com/m2juq2aJ</a></p>\n\n<pre><code>sudo fdisk -l /dev/sda\n\nWARNING: GPT (GUID Partition Table) detected on '/dev/sda'! The util fdisk doesn't support GPT. Use GNU Parted.\n\n\nDisk /dev/sda: 250.1 GB, 250059350016 bytes\n255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00001168\n\nDevice Boot      Start         End      Blocks   Id  System\n/dev/sda1               1      409639      204819+  ee  GPT\n/dev/sda2          409640   377176047   188383204   af  HFS / HFS+\n/dev/sda3       377176048   378445583      634768   ab  Darwin boot\n/dev/sda4   *   412082176   488392703    38155264   83  Linux\n\n\nsudo gdisk -l /dev/sda\nGPT fdisk (gdisk) version 0.8.5\n\nPartition table scan:\nMBR: hybrid\nBSD: not present\nAPM: not present\nGPT: present\n\nFound valid GPT with hybrid MBR; using GPT.\nDisk /dev/sda: 488397168 sectors, 232.9 GiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 000049BC-4A60-0000-F27F-0000207E0000\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 488397134\nPartitions will be aligned on 8-sector boundaries\nTotal free space is 33636933 sectors (16.0 GiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n1              40          409639   200.0 MiB   EF00  EFI system partition\n2          409640       377176047   179.7 GiB   AF00  Customer\n3       377176048       378445583   619.9 MiB   AB00  Recovery HD\n4       412082176       488392703   36.4 GiB    EF02  \n5       488392704       488396799   2.0 MiB     8200\n</code></pre>\n\n<p>Any help on how to restore my grub appreciated :)</p>\n"}]}]
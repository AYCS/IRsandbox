[{"id":715179,"title":"Connect to School VPN","body":"<p>The VPN setup instruction for my school and for Windows 7 is given <a href=\"https://www.depts.ttu.edu/ithelpcentral/solutions/vpn/windows7/\" rel=\"nofollow\">here</a>. My question is simple: how should it be done in Ubuntu? (p.s. I want to connect to my computer at school, so if there is any other way for remote desktop connection, that would work as well)</p>\n","related_questions":[{"id":626130,"title":"How do I connect to an L2TP IPSec VPN using a PSK on 15.04?","body":"<p>I've installed StrongSwan and the network manager helper and I have the options in the applet for VPN, but it only supports certificate configuration, not PSK entry.</p>\n\n<p>I've tried to add the PSK into the /etc/ipsec.secrets file but I don't know what syntax I should use to identify the connection. I simply get \"The VPN connection 'VPN Connection 1' failed because of invalid VPN secrets\".</p>\n"},{"id":372905,"title":"installing OpenSwan xl2tpd for IPSEC/L2TP VPN","body":"<p>I have a VPS hosted with QuickWeb.co.nz  Running Ubuntu 12.04 OpenVZ. </p>\n\n<p>I downloaded and unpacked OpenSwan, but I still cannot install:</p>\n\n<pre><code>root@vps:~/openswan-2.6.35# apt-get install openswan xl2tpd ppp \nReading package lists... Done\nBuilding dependency tree... Done\nPackage ppp is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Unable to locate package openswan\nE: Unable to locate package xl2tpd\nE: Package 'ppp' has no installation candidate\n</code></pre>\n\n<p>I admit to being a novice, I am learning as I go. Thanks for your patience and help!! :)</p>\n"},{"id":584336,"title":"Open VPN connection doesnt work after reboot Ubuntu 14.04","body":"<p>First I like to thank anyone who is giving these great answer here ! Im a new Ubuntu user and still on learning curve. After 8 years of OSX it is been harder than I expected. Two weeks ago I installed Ubuntu 14.04 on Samsung ATIV Book 9 Lite. I had hard time with BIOS and get machine boot from USB and finally boot to Ubuntu. Thats why I found this website and found fix to it.</p>\n\n<p>I think my machine is pretty much ready to go. I have followed lots of videos and articles such as \"top 5/10 things to do after installing Ubuntu\". So I have done all updates and tweaks through command line.</p>\n\n<p>I have premium plus account for CyberGhost VPN service so I wanted to install OpenVPN to my new fresh Linux machine. I found these excellent tutorial <a href=\"https://www.youtube.com/watch?v=M-qLZmp5WBo\" rel=\"nofollow\">https://www.youtube.com/watch?v=M-qLZmp5WBo</a></p>\n\n<p>sudo apt-get install openvpn\nsudo apt-get install openvpn bridge-utils\nsudo apt-get install network-manager-openvpn network-manager-openvpn-gnome\nsudo restart network-manager</p>\n\n<p>for my big suprice my VPN was working after first attemp ! Big thank you again to Scott Hunt. VPN was working flawlessly but after reboot clicking task bar network -- VPN connections -- (name of my VPN) nothing happened. Wirelesss indicator was not even trying to connect.I tried another reboot and checked setting but all was as they should be. Its not connecting. I dont know how to check any error logs etc. even if do, it wont help me much...</p>\n\n<p>I though something went wrong during installation so I thought I could do fresh install of OS and update everything just to practice and get more comfortable with Ubuntu. When everything was back to square one I started install VPN again.</p>\n\n<p>This time following previous link from youtube and cyberghost own install guide <a href=\"https://support.cyberghostvpn.com/index.php?/Knowledgebase/Article/View/395/0/configure-openvpn-for-linux-mint\" rel=\"nofollow\">https://support.cyberghostvpn.com/index.php?/Knowledgebase/Article/View/395/0/configure-openvpn-for-linux-mint</a></p>\n\n<p>Like said my first attemp was using OpenVPN UDP .ovpn with you youtube provide settings and it worked fine until reboot.</p>\n\n<p>After fresh OS installation i made VPN with TCP .ovnp and provide setting from cyberghost link. And for my bit suprice new TCP vpn connection work after clicking it !! All was fine like after first vpn installation but... after reboot it wont connect again. After two weeks with Ubuntu experience I have no tools to troubleshoot this. Hours of searching answers from forums im more confused. I have no other option to post my question and hope someone would find time to write step by step instruction get this thing work and hopefully someone who has same problem founds it too.</p>\n\n<p>ok, i dont know what im doing here but i was able to find a command how to look log files. I dont know if these are any usefull because i dont understand or can read it. Maybe this is some help for someone ?</p>\n\n<p>cyberghost@CyberGhost:~$ grep VPN /var/log/syslog\nFeb 11 01:57:16 CyberGhost NetworkManager[737]:  Starting VPN service 'openvpn'...\nFeb 11 01:57:16 CyberGhost NetworkManager[737]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 3791\nFeb 11 01:57:16 CyberGhost NetworkManager[737]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 01:57:16 CyberGhost NetworkManager[737]:  [1423612636.123729] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 01:57:21 CyberGhost NetworkManager[737]:  VPN service 'openvpn' disappeared\nFeb 11 10:51:24 CyberGhost NetworkManager[5339]:  VPN: loaded org.freedesktop.NetworkManager.pptp\nFeb 11 10:51:24 CyberGhost NetworkManager[5339]:  VPN: loaded org.freedesktop.NetworkManager.openvpn\nFeb 11 10:51:40 CyberGhost NetworkManager[5339]:  Starting VPN service 'openvpn'...\nFeb 11 10:51:40 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 5487\nFeb 11 10:51:40 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 10:51:40 CyberGhost NetworkManager[5339]:  [1423644700.329580] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 10:51:45 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' disappeared\nFeb 11 21:12:54 CyberGhost NetworkManager[5339]:  Starting VPN service 'openvpn'...\nFeb 11 21:12:54 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 7569\nFeb 11 21:12:54 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 21:12:54 CyberGhost NetworkManager[5339]:  [1423681974.194144] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 21:12:59 CyberGhost NetworkManager[5339]:  VPN service 'openvpn' disappeared\nFeb 11 21:15:58 CyberGhost NetworkManager[767]:  VPN: loaded org.freedesktop.NetworkManager.pptp\nFeb 11 21:15:58 CyberGhost NetworkManager[767]:  VPN: loaded org.freedesktop.NetworkManager.openvpn\nFeb 11 22:21:35 CyberGhost NetworkManager[739]:  VPN: loaded org.freedesktop.NetworkManager.pptp\nFeb 11 22:21:35 CyberGhost NetworkManager[739]:  VPN: loaded org.freedesktop.NetworkManager.openvpn\nFeb 11 22:27:10 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 22:27:10 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 2986\nFeb 11 22:27:10 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 22:27:10 CyberGhost NetworkManager[739]:  [1423686430.334729] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 22:27:15 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\nFeb 11 22:27:18 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 22:27:18 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 2989\nFeb 11 22:27:18 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 22:27:18 CyberGhost NetworkManager[739]:  [1423686438.614084] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 22:27:23 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\nFeb 11 22:27:24 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 22:27:24 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 2992\nFeb 11 22:27:24 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 22:27:24 CyberGhost NetworkManager[739]:  [1423686444.783814] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 22:27:29 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\nFeb 11 22:27:30 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 22:27:30 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 2995\nFeb 11 22:27:30 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 22:27:30 CyberGhost NetworkManager[739]:  [1423686450.537733] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 22:27:35 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\nFeb 11 23:10:18 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 23:10:18 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 3431\nFeb 11 23:10:18 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 23:10:18 CyberGhost NetworkManager[739]:  [1423689018.394501] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 23:10:23 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\nFeb 11 23:18:21 CyberGhost NetworkManager[739]:  Starting VPN service 'openvpn'...\nFeb 11 23:18:21 CyberGhost NetworkManager[739]:  VPN service 'openvpn' started (org.freedesktop.NetworkManager.openvpn), PID 3613\nFeb 11 23:18:21 CyberGhost NetworkManager[739]:  VPN service 'openvpn' appeared; activating connections\nFeb 11 23:18:21 CyberGhost NetworkManager[739]:  [1423689501.604361] [nm-vpn-connection.c:1374] get_secrets_cb(): Failed to request VPN secrets #2: (6) No agents were available for this request.\nFeb 11 23:18:26 CyberGhost NetworkManager[739]:  VPN service 'openvpn' disappeared\ncyberghost@CyberGhost:~$ </p>\n"},{"id":604214,"title":"I&#39;m connected to wifi but cannot access the internet except thru VPN (14.04)","body":"<p>I've had 14.04 for a while now and love it. The other day, out of the blue, I cannot load pages through any of my browsers or other programs unless I am connected to my VPN. All other machines in the house can connect, it's only this one laptop. I've searched the internet for answers and have found some, but all the fixes I find are for Windows. Is there a way to fix this, Ubuntu style?</p>\n\n<p>I have tried connecting with the ethernet cable in addition to wifi and the same thing happens.</p>\n"},{"id":595476,"title":"IPSec site-to-site VPN - behind router","body":"<p>I want to setup site-to-site VPN between two routers. On one site is an Ubuntu router marked \"A\", on the other site is a Cisco small business router marked \"C\". Here you can see the draft:</p>\n\n<p><a href=\"http://s17.postimg.org/bkdy2jnan/network.png\" rel=\"nofollow\">http://s17.postimg.org/bkdy2jnan/network.png</a></p>\n\n<p>Site-to-site VPN with PSK is configured on both sites. On \"A\" we use openswan and the tunnel is established. </p>\n\n<p><strong>The problem is that we can't access the remote subnets.</strong> (No connection between 192.168.70.x and 192.168.10.y, no ping, etc.) </p>\n\n<p>Here are the setup parameters on \"A\":</p>\n\n<pre><code>root@A:~# ip route\ndefault via 192.168.1.1 dev eth0\n192.168.1.0/24 dev eth0  proto kernel  scope link  src 192.168.1.2\n192.168.70.0/24 dev eth1  proto kernel  scope link  src 192.168.70.1\n\n\n/etc/ipsec.conf\nconfig setup\n        dumpdir=/var/run/pluto/\n        protostack=netkey\n        nat_traversal=yes\n        plutodebug=all\n\n\nconn cham\n        authby=secret\n        auto=add\n        type=tunnel\n        forceencaps=yes\n        left=192.168.1.2\n        leftid=78.x.y.z\n        leftsubnet=192.168.70.0/24\n        leftnexthop=%defaultroute\n        right=62.a.b.c\n        rightid=62.a.b.c\n        rightsubnet=192.168.10.0/24\n        rightnexthop=%defaultroute\n        ike=aes-sha1;modp1024\n        ikelifetime=28800s\n        phase2=esp\n        phase2alg=aes-sha1;modp1024\n        salifetime=3600s\n\n\n\n\nroot@A:~# iptables -t nat -vnL\nChain PREROUTING (policy ACCEPT 3748 packets, 293K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain INPUT (policy ACCEPT 959 packets, 128K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 1039 packets, 79647 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain POSTROUTING (policy ACCEPT 245 packets, 17799 bytes)\n pkts bytes target     prot opt in     out     source               destination\n 3343  215K MASQUERADE  all  --  *      eth0    0.0.0.0/0            0.0.0.0/0 \n\n\n\n\nroot@A:~# iptables -vnL\nChain INPUT (policy ACCEPT 15635 packets, 1906K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain FORWARD (policy ACCEPT 10 packets, 1040 bytes)\n pkts bytes target     prot opt in     out     source               destination\n 120K   45M ACCEPT     all  --  eth0   eth1    0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED\n 113K   11M ACCEPT     all  --  eth1   eth0    0.0.0.0/0            0.0.0.0/0  \n   10  1040 LOG        all  --  *      *       0.0.0.0/0            0.0.0.0/0            LOG flags 0 level 4\n\nChain OUTPUT (policy ACCEPT 6928 packets, 1179K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\n\n/etc/sysctl.conf\n\nnet.ipv4.ip_forward=1\n\nnet.ipv4.conf.all.accept_redirects = 0\nnet.ipv4.conf.all.send_redirects = 0\n\nnet.ipv4.conf.default.accept_redirects = 0\nnet.ipv4.conf.default.send_redirects = 0\n\nnet.ipv4.conf.eth0.accept_redirects = 0\nnet.ipv4.conf.eth0.send_redirects = 0\n\nnet.ipv4.conf.eth1.accept_redirects = 0\nnet.ipv4.conf.eth1.send_redirects = 0\n\nroot@A:/etc# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         192.168.1.1     0.0.0.0         UG    0      0        0 eth0\n192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0\n192.168.70.0    0.0.0.0         255.255.255.0   U     0      0        0 eth1\n</code></pre>\n\n<p>Any help would be appreciated. </p>\n\n<p>Thanks!</p>\n"},{"id":592248,"title":"Cisco VPN Connection only for ssh?","body":"<p>In order to ssh into a computer I need to connect to its Cisco AnyConnect Compatible VPN (openconnect) server. </p>\n\n<p>I can do that without a problem, but I would like only the ssh traffic to be routed using the vpn. Mainly because I want to be able to use remote desktop to access my computer and I cannot do that when connected to the vpn.</p>\n\n<p>Is this possible? how?</p>\n\n<hr>\n\n<pre><code>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.1.9.1        0.0.0.0         UG    0      0        0 eth0\n10.1.9.0        0.0.0.0         255.255.255.0   U     1      0        0 eth0\n128.143.1.0     0.0.0.0         255.255.255.0   U     0      0        0 vpn0\n128.143.20.85   0.0.0.0         255.255.255.255 UH    0      0        0 vpn0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0\n192.35.48.194   10.1.9.1        255.255.255.255 UGH   0      0        0 eth0\n</code></pre>\n"},{"id":546677,"title":"VPN between Ubuntu server (14.04.1 LTS ) AND Cisco ASA 5510","body":"<p>I have an Ubuntu server (14.04.1 LTS ) that should connect to a Cisco ASA 5510 (Adaptive Security Appliance). I have tried - to use <a href=\"http://manpages.ubuntu.com/manpages/lucid/man8/racoon.8.html\" rel=\"nofollow\">Racoon</a> without any success. Not even phase 1 is successful.</p>\n\n<p>The topology looks like this;</p>\n\n<p><img src=\"http://i.stack.imgur.com/pZUIR.png\" alt=\"enter image description here\"></p>\n\n<p>The Cisco ASA 5510 dictates the following settings should be used (just a policy by the owners);</p>\n\n<p><strong>Phase 1:</strong></p>\n\n<pre><code>Authentication Method: PSK\nEncryption Scheme: IKE\nDiffie-Hellman Group: Group 2\nEncryption Algorithm: 3DES\nHashing Algorithm: MD5\nMain or Aggressive Mode: Main Mode\nLifetime (for renegotiation): 28800 seconds\n</code></pre>\n\n<p><strong>Phase 2</strong></p>\n\n<pre><code>Encapsulation (ESP or AH): ESP\nEncryption Algorithm: 3DES\nAuthentication Algorithm: MD5\nPerfect Forward Secrecy: NO PFS\nLifetime (for renegotiation): 3600\nLifesize in KB (for renegotiation): 4608000 kilobytes\n</code></pre>\n\n<p>I have all IP addresses, and encryption domains for both ends. In my end, it's another server where all the \"important\" stuff happens. This one running the VPN actually acts as my gateway.</p>\n\n<p>I have already invested some days trying to use <a href=\"http://manpages.ubuntu.com/manpages/lucid/man8/racoon.8.html\" rel=\"nofollow\">Racoon</a> unsuccessfully. I hereby ask for your help great people. I need to know a quick install, configure and use GUI tool to help me connect to this Cisco ASA 5510 device from the Ubuntu 14.04.1 LTS server.</p>\n\n<p>Any assistance will be highly appreciated. </p>\n"},{"id":485270,"title":"Connecting to VPN Network in Ubuntu","body":"<p>I am trying to connect to a VPN from a Linux PC.  Now, this works on a Windows PC, where</p>\n\n<ul>\n<li>we use Cisco AnyConnect as the VPN client</li>\n<li>we use RSA SecurID Software Tokens</li>\n<li>the token is a soft token, using a sdtid file</li>\n</ul>\n\n<p>So, this works on my Windows PC, using windows applications &amp; instructions.  I would like to also connect to this VPN from a laptop I have running Ubuntu</p>\n\n<p>I've installed openConnect, and I've also installed stoken to handle the RSA passcodes for openConnect.</p>\n\n<p>However, when I attempt to import my sdtid file into stoken, I get this error</p>\n\n<pre><code>me@Animal:~/Cat/VPN$ stoken import --file filename.sdtid \nerror: no valid token in file 'filename.sdtid': General failure\n</code></pre>\n\n<p>I've googled around and also tried something called TokenConverter (a Java application) to convert data from the sdtid to a code that can be entered into stoken, but it hangs when I try to run it.</p>\n\n<p>My sdtid file looks to be an XML file, not a binary file.</p>\n\n<p>I'm using version 0.2-1 of stoken (as that's what the ubuntu repositories installed), but it looks like there are later versions downloadable.</p>\n\n<p>Has anyone got this setup to work from Ubuntu?  Surely I just must be missing a step.  Thanks for any help.</p>\n\n<p>Here's what I see when I add a connection:</p>\n\n<p><img src=\"http://i.stack.imgur.com/z4IaE.png\" alt=\"Network Manager's *Add VPN Connection* dialog box\"></p>\n\n<p>There's no option to use a soft token.</p>\n"},{"id":458283,"title":"Wait Until VPN Connection is Made before Mounting","body":"<p>Is there a way in /etc/fstab that I can wait for the VPN connection to be made, and then mount the network drives?</p>\n"},{"id":297163,"title":"How to set up VPN connecton to access school research databases?","body":"<p>I need to access some research databases over school IP address. IT office of my school provided information how to setup VPN connection in Windows (Control Panel -> Network connection -> Create New Connection -> and then we select \"Connect to the network at my workplace\" -> \"Virtual Private Network Connection\" -> and we just type any connection name, while IP address was provided, as well as username and password). </p>\n\n<p>I followed similar steps in Ubuntu 13.04, but it always say connection failed...</p>\n\n<p>Any idea what am I doing wrong? </p>\n\n<p><img src=\"http://i.stack.imgur.com/c2GfX.jpg\" alt=\"enter image description here\"></p>\n"}]}]
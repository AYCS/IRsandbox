[{"id":320121,"title":"Simple port forwarding","body":"<p>I am in a bit of trouble as I am trying to setup a reverse proxy with and a second server. My idea was to get the firewall to forward https to the reverse proxy and port 29418 (gerrit ssh) to the second server. Now my cooperate IT guy says: CAN NOT! Either both ports go to server 1 or both ports go to server 2.</p>\n\n<p>Ok, as a work around I tried to setup a port forwarding on the reverse proxy of port 29418 -> server2:29418</p>\n\n<p>Details:</p>\n\n<ul>\n<li>Server1 IP: 10.0.0.132 and 192.168.10.2 on Ubuntu 12.04.2 LTS</li>\n<li>Server2 IP: 10.0.0.133 and 192.168.10.3 on Ubuntu 12.04.2 LTS</li>\n</ul>\n\n<p>Now both https and port 29418 go from the firewall to 10.0.0.132, IT says that's the only way. :(</p>\n\n<p>So please tell me how to forward from 10.0.0.132:29418 -> 192.168.10.3:29418 or 10.0.0.133:29418</p>\n\n<p>When I am working on the 10.0.0.132 I can connect to both 10.0.0.133:29418 and 192.168.10.3:29418 so the ports are open.</p>\n\n<p>-- Update --</p>\n\n<p>My iptables -t nat -L looks like this:</p>\n\n<pre>\nroot@dev:/root# iptables -t nat -L\nChain PREROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nDNAT       tcp  --  anywhere             dev.example.com       tcp dpt:29418 to:10.0.0.133\n\nChain INPUT (policy ACCEPT)\ntarget     prot opt source               destination\n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination\n\nChain POSTROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nroot@dev:/root# cat /proc/sys/net/ipv4/ip_forward\n1\n</pre>\n","related_questions":[{"id":424013,"title":"Ubuntu Server Port 80 not reachable/closed","body":"<p>I am running Ubuntu server 12.04 with Apache2.</p>\n\n<p>My port 80 is not reachable and closed. Any idea how can I open it so I can access to my web admin?</p>\n\n<p>I noticed that port 80 is reachable under LAN, but its not able to reach outside of LAN even I had done port forwarding.</p>\n\n<p>What should I do?</p>\n\n<p>Thanks.</p>\n"},{"id":651723,"title":"How do I get my devices connected on port 8000 for SimpleHTTPServer","body":"<p>I'm following along with the book How Linux Works, and am trying to get the Python SimpleHTTPServer to work on its default port. I can access my home folder on the local host, but any other computer trying to access :8000 times out.</p>\n\n<p>I have port forwarding enabled in my router for port 8000, and yet nmap returns output</p>\n\n<p>PORT     STATE     SERVICE     REASON\n8000/tcp  filtered  http-alt    no-response</p>\n\n<p>nmap output to my other computer's IP is as follows</p>\n\n<p>PORT     STATE     SERVICE     REASON\n8000/tcp  closed    http-alt    conn-refused</p>\n\n<p>Other than this, I have not set up any rules in IPTables.</p>\n\n<p>Furthermore, I've tried this on both my home and work networks, completely disabling my home router's firewall with no success on either network.</p>\n"},{"id":104824,"title":"Port forward to a port on the same machine","body":"<p>I used to run a service on port 25570 I'm now changing it to run on port 25565 but I still want people who try to access it on the old port to have access to the service. So I'd like to forward port 25570 to 25565 on the same machine.</p>\n\n<p>I know there's a lot of questions that talk about forwarding to a different machine but I was wondering if the method is different when using the same machine?</p>\n"},{"id":566942,"title":"Orange livebox and ubuntu port forwarding","body":"<p>I installed a LAMP server in my computer to try some php and html scripts and I want to know if I can make those files public so I can see them from other computer with other internet conection. My router is the orange livebox.</p>\n"},{"id":537187,"title":"How can I open ports?","body":"<p>I want to open a port, specifically port <code>32887</code> for <code>TCP</code>, used for Ace of Spades (buildnshoot) game.</p>\n\n<p>I created a server (I can access it from <code>127.0.0.1</code>) but my friends can't join me. It looks like a port problem.</p>\n\n<p>Could you guys help me?</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Did everything camconn told me to do and got this out of <code>iptables -L</code> command:</p>\n\n<pre><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \nACCEPT     udp  --  anywhere             anywhere             udp dpt:32887\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination    \n</code></pre>\n\n<p>Is this all I have to do?</p>\n"},{"id":48129,"title":"How to create a restricted SSH user for port forwarding?","body":"<p>ændrük <a href=\"http://askubuntu.com/q/48111/6969#48123\">suggested a reverse connection</a> for getting an easy SSH connection with someone else (for remote help). For that to work, an additional user is needed to accept the connection. This user needs to be able to forward his port through the server (the server acts as proxy).</p>\n\n<p>How do I create a restricted user that can do nothing more than the above described?</p>\n\n<p>The new user must <strong>not</strong> be able to:</p>\n\n<ul>\n<li>execute shell commands</li>\n<li>access files or upload files to the server</li>\n<li>use the server as proxy (e.g. webproxy)</li>\n<li>access local services which were otherwise not publicly accessible due to a firewall</li>\n<li>kill the server</li>\n</ul>\n\n<p>Summarized, how do I create a restricted SSH user which is only able to connect to the SSH server without privileges, so I can connect through that connection with his computer?</p>\n"},{"id":225315,"title":"MySQL port forwarding","body":"<p>I am trying to help a colleague to connect to my MySQL server. However the situation is a bit special, and here's why (let's call him person A and me, person B):</p>\n\n<p>Person A has a PC, on which he has a virtual machine, which is in the same network as the actual PC he's running. However person A is also in the same network with person B (a different network).</p>\n\n<p>I want the site that lives on A's VM to be able to connect to the MySQL server on B's PC. For this I've thought a port forwarding would be appropriate: from <code>ip-of-person-A:3306</code> to <code>ip-of-person-B:3306</code>. This way the site would connect to the IP of the PC it's living on (not the VM), which would forward to A's MySQL.</p>\n\n<p>I've seen several examples of port forwarding, but I don't think it's what I need, from what I've seen, it's kind of the opposite. So would something like this be achievable?</p>\n"},{"id":175757,"title":"Error when doing port forwarding with iptables?","body":"<p>I've got a fairly standard ubuntu install and looking to add a port forward. </p>\n\n<pre><code>*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p icmp -j ACCEPT\n-A INPUT -i lo -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n\n#Redirect 1731 to  8443\n-t nat -A PREROUTING -i eth0 -p tcp --dport 1731 -j REDIRECT --to-port 8443\n\n#Allow 443 and 80\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT\n\n\n-A INPUT -j REJECT --reject-with icmp-host-prohibited\n-A FORWARD -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n</code></pre>\n\n<p>However I keep getting an error:</p>\n\n<pre><code>iptables: Applying firewall rules: iptables-restore v1.4.7: Line 13 seems to have a -t table option.\n</code></pre>\n\n<p>I've confirmed that ip forwarding is enabled on that device:</p>\n\n<pre><code>cat /proc/sys/net/ipv4/ip_forward \n1\n</code></pre>\n\n<p>I'm sure it's something simple in the formatting of iptables that I am missing. Thoughts?</p>\n"},{"id":12545,"title":"Port Forwarding to Connect to MySQL Database of VirtualBox","body":"<p>I have Ubuntu 10.04 as <strong>host</strong> machine and Ubuntu 10.10 as <strong>guest</strong> machine installed in VirtualBox. </p>\n\n<p>I had success on port forwarding to connect to Apache of guest machine, so that now I can open in host machine web sites published in Web Server(Apache) of guest machine. </p>\n\n<p>I need to do the same with MySql, i.e. access MySql of <strong>guest</strong> machine from <strong>host</strong> machine. </p>\n\n<p>In order to achieve this goal I am executing following commands in <strong>host</strong> machine:</p>\n\n<pre><code>VBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/HostPort\" 3307\nVBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/GuestPort\" 3306\nVBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/Protocol\" TCP\n</code></pre>\n\n<p>where <strong><em>Ubuntu</em></strong> is the name of the host machine.</p>\n\n<p>Guest machine loads and when I try to connect to MySql from host machine it can not connect to it. </p>\n\n<p>What could be the problem here?</p>\n\n<p>Thank you.</p>\n"}]}]
[{"id":710525,"title":"Multiple questions on same dialog","body":"<p>How do I setup the postinst script and template to have multiple questions on same dialog and get their return values in different <code>$RET</code></p>\n\n<p>My current code:</p>\n\n<h1>template</h1>\n\n<pre><code>Template: foo/like_debian\nType: boolean                            \nDescription: Do you like Debian?\n We'd like to know if you like the Debian GNU/Linux system\n\nTemplate: foo/like_debian2\nType: boolean                            \nDescription: Do you really like Debian?\n We'd like to know if you really like the Debian GNU/Linux system\n</code></pre>\n\n<h1>postinst</h1>\n\n<pre><code># Do you like debian?\ndb_input medium foo/like_debian || true\ndb_go\ndb_get foo/like_debian\necho $RET\n\n# Do you really like debian?\ndb_input medium foo/like_debian2 || true\ndb_go\ndb_get foo/like_debian2\necho $RET2\n</code></pre>\n","related_questions":[{"id":548662,"title":"How to create multiple debian packages using the same debian directory","body":"<p>I am packaging an application in my PC for installation/distribution purposes. I have created the package successfully using <code>dpkg</code> facility in ubuntu 12.04. Now I need to create multiple packages (binary package(like xxx.deb), source package(xxx.1.0-1-devel.deb)) using the same file set-up. \n<strong>Debian</strong> folder contains all modified files required for packaging using <code>dpkg-buildpackage -rfakeroot</code>. If I need to create all .deb files using the same debian file set-up. What should I additionally do ?  </p>\n\n<p>additionally, below things also confused for me.\n<strong>what should include -devel package ?</strong> does it only development header files or development header files and required shared libraries or all binary files including header files ?</p>\n"},{"id":473453,"title":"DEB package: Shell script with debconf does not show input dialog","body":"<p>The following <em>config</em> script inside <em>control.tar.gz</em></p>\n\n<pre><code>#!/bin/sh -e\n\n. /usr/share/debconf/confmodule\n\ndb_fset mailadmin/database_host seen false\ndb_clear\ndb_purge\n\ndb_input medium mailadmin/database_host || true\ndb_go\n\ndb_get mailadmin/database_host\necho \"$RET\" &gt; /tmp/from_config_script.txt\n\nexit 0\n</code></pre>\n\n<p>with the template</p>\n\n<pre><code>Template: mailadmin/database_host\nType: string\nDescription: The database server's host name or IP address.\n</code></pre>\n\n<p>(file <em>templates</em>) does not show an input dialog when I install the package using <em>dpkg -i</em>, and when I run it from the command line as well.</p>\n\n<p>Instead it writes \"localhost\" to <em>/tmp/from_config_script.txt</em>, even though this default value is not part of the template file any more. I never ever saw the input popup. The input popup is what I am trying to achieve.</p>\n\n<p>I removed the package with <em>apt-get purge mailadmin</em>, but even purge did not clear this default value. What can I do?</p>\n"},{"id":339790,"title":"How can I prevent apt-get/aptitude from showing dialogs during installation?","body":"<p>I'm trying to build an Ansible Playbook to deploy some Ubuntu 12.04 servers on Linode, but my problem seems to be an Ubuntu one. When I run different combinations of apt-get or aptitude I always get the following dialog that I have to respond to. </p>\n\n<p><img src=\"http://i.stack.imgur.com/rq3D3.png\" alt=\"Package configuration dialog\"></p>\n\n<p>I'd like this to be answered from the command line so that it doesn't interrupt the automatic deployment. Any ideas?</p>\n\n<p>My current commands are below. Note that I'm trying to set DEBIAN_FRONTEND:</p>\n\n<pre><code>#!/bin/bash\n\necho 'DEBIAN_FRONTEND=\"noninteractive\"' &gt;&gt; /etc/profile\necho 'DEBIAN_FRONTEND=\"noninteractive\"' &gt;&gt; ~/.profile\n\nsource /etc/profile\nsource ~/.profile\n\n# This next line is the one that pops up the dialog\nsudo aptitude -y install iptables-persistent\n\n# Need this to fix an issue with the package post-install (this works fine.)\nsudo sed \\\n    -i 's/\\(modprobe -q ip6\\?table_filter\\)/\\1 || true/g' \\\n    /var/lib/dpkg/info/iptables-persistent.postinst; \\\nsudo aptitude install iptables-persistent\n</code></pre>\n"},{"id":550161,"title":"Mobo problems? Multiple failures in multiple OS&#39;s","body":"<p>I recently put together my first build and loaded it up with the most recent Ubuntu 14. Everything was working untill 1 package wouldn't install; ttfmscorefonts. I installed it but about halfway through glitched. I started getting dpkg and lock fails that regardless of ANY commands couldn't be fixed. I re-installed twice after that and still had the same problem with dpkg. Then I tried SparkLinux with a BRAND NEW hard drive AND STILL HAVE THE PROBLEM! \"Unable to lock the administration directory (/var/lib/dpkg/)\". I'm worried I'm having problems with my motherboard. It's an Asus A58-Series mobo with an AMD a10 processor. Please help!</p>\n"},{"id":485036,"title":"Installing a Package that asks debconf questions doesn&#39;t work with the Software-Center","body":"<p>I am building an automatic configure Package for our environment and it has to ask a few debconf questions when installing. Until Ubuntu 13.10 it was no problem installing it via the GUI but since 14.04 the Software-Center just hangs when installing.</p>\n\n<p>After installing libgtk2-perl separately this is no longer a problem and the questions are getting asked.</p>\n\n<p>Is this a Bug in the Software-Center or how am I supposed to handle it?</p>\n\n<p>My current workaround is a Pre-Depends on libgtk2-perl but this shouldn't be the final solution and sucks for people installing it via Terminal.</p>\n"},{"id":427413,"title":"DPKG: Error Processing (--unpack) (RaspberryPi Compiler - Ubuntu)","body":"<pre>\nubuntu@ubuntu:~/RaspberryPi/devel$ sb2 -eR apt-get upgrade\nReading package lists... Done\nBuilding dependency tree \nReading state information... Done\nThe following packages have been kept back:\nalsa-base gnome-themes-standard lxde lxsession openssh-client openssh-server scratch wpasupplicant\nThe following packages will be upgraded:\nalsa-utils apt apt-utils aptitude aptitude-common base-files bash binutils bsdutils bzip2 ca-certificates console-setup\nconsole-setup-linux consolekit coreutils cpio cpp cpp-4.6 cryptsetup-bin curl dbus dbus-x11 dconf-gsettings-backend dconf-service\ndebconf debconf-i18n debconf-utils debian-reference-common debian-reference-en desktop-base dictionaries-common dmsetup dpkg\ndpkg-dev e2fslibs e2fsprogs eject file firmware-atheros firmware-brcm80211 firmware-libertas firmware-ralink firmware-realtek\nfontconfig fontconfig-config fuse g++ g++-4.6 gcc gcc-4.4-base gcc-4.6 gcc-4.6-base gcc-4.7-base gconf-service gconf2\ngconf2-common gdb gdbserver gir1.2-gst-plugins-base-0.10 gir1.2-gstreamer-0.10 gnupg gpgv gsettings-desktop-schemas idle\nidle-python2.7 idle-python3.2 idle3 ifupdown initscripts insserv iptables isc-dhcp-client isc-dhcp-common iso-codes\nkeyboard-configuration kmod krb5-locales libapt-inst1.5 libapt-pkg-dev libapt-pkg4.12 libasound2 libavahi-client3\nlibavahi-common-data libavahi-common3 libblkid1 libboost-iostreams1.49.0 libbsd0 libbz2-1.0 libc-bin libc-dev-bin libc6 libc6-dev\nlibcairo-gobject2 libcairo2 libcap2 libck-connector0 libcomerr2 libcroco3 libcryptsetup4 libcups2 libcurl3 libdbus-1-3\nlibdbus-1-dev libdbus-glib-1-2 libdconf0 libdevmapper-event1.02.1 libdevmapper1.02.1 libdpkg-perl libdrm2 libelf1 libexpat1\nlibexpat1-dev libfm-data libfm-gtk-bin libfm-gtk1 libfm1 libfontconfig1 libfontconfig1-dev libfreetype6 libfreetype6-dev libfuse2\nlibgail-3-0 libgail18 libgcc1 libgconf-2-4 libgcrypt11 libgfortran3 libgif4 libgl1-mesa-glx libglapi-mesa libglib2.0-0\nlibglib2.0-bin libglib2.0-data libglib2.0-dev libgnutls26 libgomp1 libgpg-error0 libgssapi-krb5-2 libgstreamer-plugins-base0.10-0\nlibgstreamer-plugins-base0.10-dev libgstreamer0.10-0 libgstreamer0.10-dev libgtk-3-0 libgtk-3-bin libgtk-3-common libgtk2.0-0\nlibgtk2.0-common libgudev-1.0-0 libicu-dev libicu48 libjavascriptcoregtk-1.0-0 libjavascriptcoregtk-3.0-0 libjson0 libk5crypto3\nlibkmod2 libkrb5-3 libkrb5support0 liblapack3 liblapack3gf libldap-2.4-2 liblightdm-gobject-1-0 liblvm2app2.2 liblzma5 libmagic1\nlibmikmod2 libmount1 libnewt0.52 libnfnetlink0 libobrender27 libobt0 libopenjpeg2 libpam-ck-connector libparted0debian1 libpci3\nlibpcsclite1 libpixman-1-0 libpolkit-agent-1-0 libpolkit-backend-1-0 libpolkit-gobject-1-0 libportmidi0 libprocps0 libproxy0\nlibpulse0 libpython2.7 libraspberrypi-bin libraspberrypi-dev libraspberrypi-doc libraspberrypi0 libreadline6 librsvg2-2\nlibrsvg2-common libsasl2-2 libsasl2-modules libsdl-mixer1.2 libsmpeg0 libsqlite3-0 libsqlite3-dev libss2 libssh2-1 libssl-dev\nlibssl1.0.0 libstdc++6 libstdc++6-4.6-dev libsysfs2 libsystemd-login0 libthai-data libthai0 libtiff4 libudev-dev libudev0\nlibusb-0.1-4 libuuid1 libwbclient0 libwebkitgtk-1.0-0 libwebkitgtk-1.0-common libwebkitgtk-3.0-0 libwebkitgtk-3.0-common libwebp2\nlibwrap0 libx11-6 libx11-data libx11-xcb1 libxapian-dev libxapian22 libxcb-glx0 libxcb-render0 libxcb-shm0 libxcb1 libxcursor1\nlibxext6 libxfixes3 libxfont1 libxi6 libxinerama1 libxml2 libxml2-dev libxrandr2 libxrender1 libxres1 libxslt1-dev libxslt1.1\nlibxt6 libxtst6 libxxf86vm1 lightdm linux-libc-dev locales lsb-base lua5.1 lxde-core lxtask manpages midori module-init-tools\nmount multiarch-support net-tools nfs-common ntfs-3g omxplayer openbox openssh-blacklist openssh-blacklist-extra openssl parted\npciutils perl perl-base perl-modules policykit-1 procps psmisc python python-minimal python-numpy python-pygame python2.7\npython2.7-minimal python3 python3-minimal python3-numpy python3.2 python3.2-minimal raspberrypi-bootloader raspi-copies-and-fills\nreadline-common rsyslog samba-common sgml-base squeak-vm ssh sudo sysv-rc sysvinit sysvinit-utils tar tasksel tasksel-data tcpd\nttf-dejavu-core tzdata udev udisks unzip util-linux vim-common vim-tiny wget whiptail x11-common xarchiver xkb-data xml-core\nxserver-common xserver-xorg xserver-xorg-core xserver-xorg-input-all xserver-xorg-input-synaptics xz-utils\n319 upgraded, 0 newly installed, 0 to remove and 8 not upgraded.\nNeed to get 269 MB of archives.\nAfter this operation, 23.2 MB disk space will be freed.\nDo you want to continue [Y/n]? y\nFetched 269 MB in 2min 11s (2,043 kB/s) \nExtracting templates from packages: 100%\nPreconfiguring packages ...\n(Reading database ... 54465 files and directories currently installed.)\nPreparing to replace base-files 6.9 (using .../base-files_7.1wheezy2+rpi1_armhf.deb) ...\nUnpacking replacement base-files ...\ndpkg: error processing /var/cache/apt/archives/base-files_7.1wheezy2+rpi1_armhf.deb (--unpack):\ntrying to overwrite '/var/run', which is also in package isc-dhcp-client 4.2.2.dfsg.1-5\nErrors were encountered while processing:\n/var/cache/apt/archives/base-files_7.1wheezy2+rpi1_armhf.deb\nE: Sub-process /usr/bin/dpkg returned an error code (1)\nubuntu@ubuntu:~/RaspberryPi/devel$\n</pre>\n\n<p>Im was using this \"How to...\" FAQ <a href=\"http://www.pieczewski.de/programming/RaspberryPi_CrossCompile\" rel=\"nofollow\">http://www.pieczewski.de/programming/RaspberryPi_CrossCompile</a></p>\n\n<p>Hope you can help me.</p>\n"},{"id":227582,"title":"xml2-config is different from the same file on the system","body":"<p>I followed <a href=\"http://askubuntu.com/questions/9135/best-way-to-backup-all-settings-list-of-installed-packages-tweaks-etc/99151#99151\">this procedure</a> to restore a previously exported list of packages in a new system. At the end of the procedure, after <code>sudo apt-get dselect-upgrade -y</code> I got this message:</p>\n\n<pre><code>[cut]lot of output, everything OK[cut]\n\nErrors were encountered while processing:\n /var/cache/apt/archives/libsensors4_1%3a3.3.1-2ubuntu1_i386.deb\n /var/cache/apt/archives/gcc-4.4-base_4.4.7-1ubuntu2_amd64.deb\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p>The full output is available on <a href=\"http://paste.ubuntu.com/1423409/\" rel=\"nofollow\">paste.ubuntu.com</a>. <code>/etc/sources.list</code> content is also available <a href=\"http://paste.ubuntu.com/1423412/\" rel=\"nofollow\">here</a>.</p>\n\n<p>Then I typed again <code>sudo apt-get dselect-upgrade -y</code>. This is the error:</p>\n\n<pre><code>Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nYou might want to run 'apt-get -f install' to correct these.\nThe following packages have unmet dependencies:\n libxslt1-dev:i386 : Depends: libxml2-dev:i386 (&gt;= 2.6.26) but it is not installed\nE: Unmet dependencies. Try using -f.\n</code></pre>\n\n<p>And trying to <code>sudo apt-get -f install</code>:</p>\n\n<pre><code>Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nCorrecting dependencies... Done\nThe following extra packages will be installed:\n  libxml2-dev:i386\nThe following NEW packages will be installed:\n  libxml2-dev:i386\n0 upgraded, 1 newly installed, 0 to remove and 6 not upgraded.\n5 not fully installed or removed.\nNeed to get 0 B/761 kB of archives.\nAfter this operation, 2,206 kB of additional disk space will be used.\nDo you want to continue [Y/n]? \n(Reading database ... 372874 files and directories currently installed.)\nUnpacking libxml2-dev:i386 (from .../libxml2-dev_2.7.8.dfsg-5.1ubuntu4.3_i386.deb) ...\ndpkg: error processing /var/cache/apt/archives/libxml2-dev_2.7.8.dfsg-5.1ubuntu4.3_i386.deb (--unpack):\n './usr/bin/xml2-config' is different from the same file on the system\nProcessing triggers for man-db ...\nErrors were encountered while processing:\n /var/cache/apt/archives/libxml2-dev_2.7.8.dfsg-5.1ubuntu4.3_i386.deb\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p>Other people had similar problem and I tried to follow <a href=\"http://askubuntu.com/a/142808/18140\">this answer</a>, but without being able to solve. Can you help me?</p>\n"},{"id":27982,"title":"Bypass RabbitMQ &quot;OK&quot; dialog on install","body":"<p>When I install rabbitmq-server package  on Lucid, I always get a warning about upgrading from a previous version (even though no previous version is installed), and then I have to hit enter to dismiss the dialog. Is there any way to disable this prompt so I can do the install unattended?</p>\n"},{"id":27023,"title":"Multiple Depends/Recommends/[…] in a control file?","body":"<p>Is it possible to have multiple lines for any type of field in a dpkg control file? This is not about line continuation, but e.g. Depends interspersed with Recommends like so:</p>\n\n<p>Depends: git, etckeeper, apt-file<br>\nRecommends: equivs<br>\nDepends: mplayer, pidgin, dlocate, pwsafe, ciso<br>\nRecommends: aria2  </p>\n\n<p>And so on. Is this allowed, is it unspecified (and some tool is going to cough on it) or is it explicitly forbidden? (Couldn't find anything in debian-policy, either)</p>\n"}]}]
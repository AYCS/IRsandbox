[{"id":715358,"title":"gdisk unable to write GPT table","body":"<p>I'm trying to recover a disk which appears to have a corrupt ID for the protective MBR.</p>\n\n<p>Yesterday I took a backup of the GPT and protective MBR, and dumped to file.</p>\n\n<p>At that time fdisk reported the MBR type ID as 83, where it should be EE for a protective MBR.</p>\n\n<p>Thanks to a great set of pages at <a href=\"http://www.rodsbooks.com/gdisk/gdisk.html\" rel=\"nofollow\">http://www.rodsbooks.com/gdisk/gdisk.html</a> I decided the best course of action was:</p>\n\n<ol>\n<li>invoke gdisk and select the GPT option (it was showing MBR as present, but not in protective mode). I understand selecting GPT creates a fresh protective MBR.</li>\n<li>write the table to disk, restoring the protective MBR.</li>\n</ol>\n\n<p>So, I attempted it today, but something changed overnight, and now gdisk shows:</p>\n\n<pre><code>GPT fdisk (gdisk) version 0.8.8\n\nType device filename, or press &lt;Enter&gt; to exit: /dev/sdc\nWarning! Read error 5; strange behavior now likely!\nWarning! Read error 5; strange behavior now likely!\nPartition table scan:\n  MBR: not present\n  BSD: not present\n  APM: not present\n  GPT: not present\n\nCreating new GPT entries.\n</code></pre>\n\n<p>(Overnight, I did have photorec running, and today decided to kill it - I didn't think it was intrusive, but wonder if that had anything to do with the change in status reported by gdisk. If not, then possibly the disk really is rotting badly.)</p>\n\n<p>Anyway, I loaded my backed-up GPT and partitions look fine:</p>\n\n<pre><code>Recovery/transformation command (? for help): l\nEnter backup filename to load: sdb_gpt.txt\n\nRecovery/transformation command (? for help): p\nDisk /dev/sdc: 5860533168 sectors, 2.7 TiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 503CCEC8-87B4-4A12-B19B-1B1D224C216E\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 5860533134\nPartitions will be aligned on 2048-sector boundaries\nTotal free space is 2925 sectors (1.4 MiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n   1            2048         3905535   1.9 GiB     EF02  \n   2         3905536        11718655   3.7 GiB     8200  \n   3        11718656      5761718271   2.7 TiB     0700  \n   4      5761718272      5860532223   47.1 GiB    8300  \n\nRecovery/transformation command (? for help): o\n\nDisk size is 5860533168 sectors (2.7 TiB)\nMBR disk identifier: 0x00000000\nMBR partitions:\n\nNumber  Boot  Start Sector   End Sector   Status      Code\n   1                     1   4294967295   primary     0xEE\n</code></pre>\n\n<p>BUT.... I cannot write it out:</p>\n\n<pre><code>Recovery/transformation command (? for help): w\n\nFinal checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING\nPARTITIONS!!\n\nDo you want to proceed? (Y/N): Y\nOK; writing new GUID partition table (GPT) to /dev/sdc.\nUnable to save backup partition table! Perhaps the 'e' option on the experts'\nmenu will resolve this problem.\nWarning! An error was reported when writing the partition table! This error\nMIGHT be harmless, or the disk might be damaged! Checking it is advisable.\n</code></pre>\n\n<p>I feel like I'm close to fixing. Why would gdisk fail to write out? Is there anything I can do to fix the disk at a lower level?</p>\n\n<p>Could/should I erase the MBR and partition table at the start of the disk, and then retry the write?</p>\n","related_questions":[{"id":363518,"title":"Can&#39;t remove GPT data from MBR","body":"<p>I am having difficulty getting the Ubuntu installer (and gparted) to recognize the partitions on my MBR type disk. Other operating systems and disk tools read the disk structure and the files on it fine. I have used fixparts to write a new MBR but the issue persists. I assume the issue stems from the Protective MBR data still present on the disk but I am at a loss as to how to remove it while preserving my NTFS data partition.</p>\n\n<blockquote>\n  <p>Microsoft Windows [Version 6.1.7601] Copyright (c) 2009 Microsoft\n  Corporation.  All rights reserved.</p>\n  \n  <p>c:\\Users\\mike\\Desktop\\fixparts>fixparts 3: FixParts 0.8.8</p>\n  \n  <p>Loading MBR data from 3:</p>\n  \n  <p>Warning: 0xEE partition doesn't start on sector 1. This can cause\n  problems in some OSes.</p>\n  \n  <p>MBR command (? for help):</p>\n</blockquote>\n\n<p>Running gdisk shows </p>\n\n<pre><code>Microsoft Windows [Version 6.1.7601] Copyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\n\n\nc:\\Users\\mike\\Desktop\\fixparts&gt;gdisk 3: GPT fdisk (gdisk) version\n0.8.7\n\nPartition table scan:\n   MBR: MBR only\n   BSD: not present\n   APM: not present\n   GPT: not present\n\n\n***************************************************************\nFound invalid GPT and valid MBR; converting MBR to GPT format in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by typing 'q' if you don't want to convert your MBR partitions to GPT format!\n***************************************************************\n\n************************************************************************ \nMost versions of Windows cannot boot from a GPT disk, and most varieties prior to Vista cannot read GPT disks. Therefore, you should exit now unless you understand the implications of converting MBR to GPT or creating a new GPT disk layout!\n************************************************************************\n\nAre you SURE you want to continue? (Y/N): y\n\nCommand (? for help): p Disk 3:: 2930277168 sectors, 1.4 TiB Logical sector size: 512 bytes Disk identifier (GUID): BFE92CE8-F93D-4141-82B8-816AD06FB36E Partition table holds up to 128 entries First usable sector is 34, last usable sector is 2930277134 Partitions will be aligned on 2048-sector boundaries Total free space is 163846893 sectors (78.1 GiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n     1     163842048      2930272255   1.3 TiB     0700  Microsoft basic data\n\nCommand (? for help): r\n\nRecovery/transformation command (? for help): o\n\nDisk size is 2930277168 sectors (1.4 TiB) MBR disk identifier: 0x00000000 MBR partitions:\n\nNumber  Boot  Start Sector   End Sector   Status      Code\n   1                     1   2930277167   primary     0xEE\n\nRecovery/transformation command (? for help): q\n</code></pre>\n"},{"id":685068,"title":"Unable to resize Win partition under Ubuntu","body":"<p>I know my problem sounds pretty common but all advices I found on the internet did not worked for me.</p>\n\n<p>I try to resize partition and I cant lower its size.My previous SSD disk failed and I need to install system on my second HDD disk. HDD was previously formated on win7. I could create new partition instead of old but obviously I want to keep my data untouched. During Ubuntu installation proccess partition manager says its unallocated space but its normally booting to view folders and stuff.</p>\n\n<p>I experience error like:</p>\n\n<p><a href=\"http://i.stack.imgur.com/2ttKj.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/2ttKj.png\" alt=\"GPT Signatures error\"></a></p>\n\n<p>In this case /dev/sdb/ is linux pendrive but I think it might be related to /dev/sda/ - HDD. I tried to fix this with doing:</p>\n\n<ul>\n<li>Changing Boot mode from UEFI to normal mode.</li>\n<li>Using gparted (error above) with result red exclamation mark near disk.</li>\n<li>Using fixparts on my HDD (/dev/sda/) with result:</li>\n</ul>\n\n<blockquote>\n  <p>Loading MBR data from /dev/sda</p>\n  \n  <p>This disk appears to be a GPT disk. Use GNU Parted or GPT fdisk on it!</p>\n  \n  <p>Exiting!'</p>\n</blockquote>\n\n<ul>\n<li><p>Using testdisk which wrote MBR to partition (on /dev/sda/)</p></li>\n<li><p>Using gdisk on /dev/sda/ with commands: x then p then w. Gdisk told its valid GPT table.</p></li>\n<li><p>Tried to change in my UEFI storage setting AHCI to IDE.</p></li>\n</ul>\n\n<p>I know my approach is chaotic, as I just try different internet solutions. Maybe there is something wrong in order of things I did.</p>\n"},{"id":633465,"title":"The CRC for the main partition and back up partition table are invalid","body":"<p>I've been having problems with my HDD since I tried dual booting ubuntu 14.04 with windows 8.1. When I was installing from the ubuntu installer I was receiving \"input/output error during write on /dev/sda\". </p>\n\n<p>I can't do anything in gdisk, it seems that both the main and the back up GPT header are corrupt. It seems that the back up header is unable to save whenever I do anything and try to write to the disk. At this point, I've already lost all my data, I don't have any of my windows partitions, and I just want to start fresh and be able to reinstall either windows or linux. Any help is greatly appreciated</p>\n\n<p>When I try using fdisk:</p>\n\n<blockquote>\n  <p>$ sudo fdisk /dev/sda </p>\n</blockquote>\n\n<p>I get \"The backup GPT table is corrupt, but the primary appears OK, so that will be used.\"\nI tried to  use </p>\n\n<blockquote>\n  <p>g   create a new empty GPT partition table</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>w   write table to disk and exit</p>\n</blockquote>\n\n<p>I get \"failed to write disklabel: Input/output error\"</p>\n\n<blockquote>\n  <p>v verify the partition table</p>\n</blockquote>\n\n<p>I get </p>\n\n<blockquote>\n  <p>No errors detected.</p>\n  \n  <p>Header version: 1.0</p>\n  \n  <p>Using 0 out of 128 partitions.</p>\n  \n  <p>A total of 1953525101 free sectors is available in 1 segment.</p>\n</blockquote>\n\n<p>using gdisk:</p>\n\n<blockquote>\n  <p>$ sudo gdisk /dev/sda</p>\n</blockquote>\n\n<p>I receive</p>\n\n<blockquote>\n  <p>Warning! Error 5 reading partition table for CRC check!</p>\n  \n  <p>Warning! One or more CRCs don't match. You should repair the disk!</p>\n  \n  <p>Partition table scan:</p>\n  \n  <p>MBR: protective</p>\n  \n  <p>BSD: not present</p>\n  \n  <p>APM: not present</p>\n  \n  <p>GPT: damaged</p>\n  \n  <hr>\n  \n  <p>Caution: Found protective or hybrid MBR and corrupt GPT. Using GPT, but disk\n  verification and recovery are STRONGLY recommended.</p>\n  \n  <hr>\n</blockquote>\n\n<p>when I enter v to verify my disk i get</p>\n\n<blockquote>\n  <p>Caution: The CRC for the backup partition table is invalid. This table may</p>\n  \n  <p>be corrupt. This program will automatically create a new backup partition</p>\n  \n  <p>table when you save your partitions.</p>\n  \n  <p>Identified 1 problems!</p>\n</blockquote>\n\n<p>I have tried loading back up and main gpt tables but no matter what I do, when I enter w to write table to disk and exit I receive this error:</p>\n\n<blockquote>\n  <p>Unable to save backup partition table! Perhaps the 'e' option on the experts'\n  menu will resolve this problem.</p>\n  \n  <p>Warning! An error was reported when writing the partition table! This error</p>\n  \n  <p>MIGHT be harmless, or the disk might be damaged! Checking it is advisable.</p>\n</blockquote>\n"},{"id":568028,"title":"Trying to access/mount raid array with gpt partition table","body":"<p>My raid arrays seem to be giving me alot of hassle under linux.<br>\nI have 2 RAID 0 arrays:<br>\n- 2 x 120GB SSD with MBR partition table (windows 7 x64)<br>\n- 2 x 3TB HDD with GPT partition table (data/storage)<br>\nBoth work in windows.</p>\n\n<p>Ubuntu automatically mounts my ssd array and its 100% functional however I cannot seem to mount my data array.<br>\nUsing gdisk I found:</p>\n\n<blockquote>\n  <p>ubuntu@ubuntu:~$ sudo gdisk /dev/mapper/isw_bghgaejcif_seagate<br>\n  GPT fdisk (gdisk) version 0.8.8 Warning! Disk size is smaller than the main header indicates! Loading\n  secondary header from the last sector of the disk! You should use 'v' to\n  verify disk integrity, and perhaps options on the experts' menu to repair\n  the disk.<br>\n  Caution: invalid backup GPT header, but valid main header; regenerating\n  backup header from main header.<br>\n  Warning! One or more CRCs don't match. You should repair the disk!  </p>\n  \n  <p>Partition table scan:<br>\n    MBR: protective<br>\n    BSD: not present<br>\n    APM: not present<br>\n    GPT: damaged  </p>\n  \n  <hr>\n  \n  <p>Caution: Found protective or hybrid MBR and corrupt GPT. Using GPT, but disk\n  verification and recovery are STRONGLY recommended.</p>\n  \n  <hr>\n</blockquote>\n\n<p>Apparantly the array has a corrupted GPT however</p>\n\n<blockquote>\n  <p>Command (? for help): p<br>\n  Disk /dev/mapper/isw_bghgaejcif_seagate: 3131122176 sectors, <strong>1.5 TiB</strong><br>\n  Logical sector size: 512 bytes<br>\n  Disk identifier (GUID): B734AE2F-67D2-407B-990D-2C055811C9D2<br>\n  Partition table holds up to 128 entries<br>\n  First usable sector is 34, last usable sector is 11721056222<br>\n  Partitions will be aligned on 8-sector boundaries<br>\n  Total free space is 4029 sectors (2.0 MiB)  </p>\n  \n  <p>Number  Start (sector)    End (sector)  Size Code  Name<br>\n     1    .............           34    .......................      262177  ........ 128.0 MiB   0C01  Microsoft reserved part<br>\n     2    .............      264192     .............11721054207   5.5 TiB     0700  Basic data partition  </p>\n</blockquote>\n\n<p>Shows the correct partitions but the wrong array size (in bold)<br>\nI have tried going through the repair menu of gdisk however it always reports that the partition #2 is too large for the drive and refuses to write the partition table.  </p>\n\n<p>Also in /dev/mapper I do not see partition 2 of the data array, I only see:  </p>\n\n<blockquote>\n  <p>ubuntu@ubuntu:/$ ls /dev/mapper<br>\n  control<br>\n                 isw_bgafeegffb_hyperx3k1<br>\n  isw_bgafeegffb_hyperx3k<br>\n  isw_bgafeegffb_hyperx3k2<br>\n  isw_bghgaejcif_seagate<br>\n  isw_bghgaejcif_seagate1</p>\n</blockquote>\n\n<p>Any guidance is much appreciated</p>\n"},{"id":112921,"title":"Help me!! Extract partition table GPT","body":"<p>English is not my native language, so I apologize.</p>\n\n<p>I want to remove the partition table from my hard drive /dev/sdb and then put it on my disk /dev/sda, but when running the following command:</p>\n\n<pre><code>sudo sfdisk -d /dev/sdb | sed s/sdb/sdc/ &gt; part.sdb\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>AVISO: ¡GPT (Tabla de partición GUID) detectada en «/dev/sdb»! La utilidad sfdisk no soporta GPT. Use GNU Parted.\n</code></pre>\n\n<p>ERROR, LITERAL TRANSLATION (real error in english could be very different)</p>\n\n<pre><code>WARNING: GPT (GUID partition table) detected on /dev/sdb!. sfidk utility doesn't support GTP, please use GNU Parted.\n</code></pre>\n\n<p>I have little linux knowledge, but by reading little by little I'm improving.</p>\n\n<p>Can you help?</p>\n\n<p>Thank you very much!</p>\n\n<hr>\n\n<p>Hola, </p>\n\n<p>MI ingles no es mi lengua materna, por eso me disculpo.</p>\n\n<p>Deseo Extraer la tabla de particiones de mi disco duro /deb/sdb y luego colocar esta en mi disco /deb/sda, pero al realizar el comando siguiente:</p>\n\n<p>sudo sfdisk -d /dev/sdb | sed s/sdb/sdc/ > part.sdb</p>\n\n<p>AVISO: ¡GPT (Tabla de partición GUID) detectada en «/dev/sdb»! La utilidad sfdisk no soporta GPT. Use GNU Parted.</p>\n\n<p>No puedo realizarla.</p>\n\n<p>MIs conocimientos de linux son pocos, pero leyendo poco a poco he podido.</p>\n\n<p>Me pueden Colaborar?</p>\n\n<p>Muchas gracias!!</p>\n"},{"id":334270,"title":"Can&#39;t remove GPT table from hard drive","body":"<p>I have tried everything, but nothing works...</p>\n\n<p><strong>Background:</strong> Started out with Windows 7, formated and installed Ubuntu and later installed Arch linux with a GPT partition table.</p>\n\n<p>Running following commands from Ubuntu 12.04 Live USB.</p>\n\n<p><strong>Starting with:</strong> Have Arch Linux installed with four partitions. Using GPT.</p>\n\n<pre><code>/dev/sda1 Root partition\n/dev/sda2 BIOS boot partition\n/dev/sda3 Swap partition\n/dev/sda4 /home partition\n</code></pre>\n\n<p><strong>Step 1:</strong></p>\n\n<pre><code>sudo parted /dev/sda\nmklabel msdos\n</code></pre>\n\n<p>Get the \"GPT signatures found\"-error message then I check.</p>\n\n<p><strong>Step 2:</strong></p>\n\n<pre><code>sudo dd bs=4M if=/dev/zero of=/dev/sda\n</code></pre>\n\n<p>Still get the error message.</p>\n\n<p><strong>Step 3:</strong></p>\n\n<pre><code>sudo dd bs=1M if=/dev/zero of=/dev/sda\n</code></pre>\n\n<p>Still get the damned error message about GPT signatures found.</p>\n\n<p><strong>Step 4></strong></p>\n\n<pre><code>sudo parted /dev/sda\nmktable msdos\n</code></pre>\n\n<p>I'm not giving up! Even this doesn't work, and the error message appear. </p>\n\n<p>Output from <strong>sudo fdisk -l:</strong></p>\n\n<blockquote>\n  <p>Disk /dev/sda: 250.1 GB, 250059350016 bytes</p>\n  \n  <p>255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors</p>\n  \n  <p>Units = sectors of 1 * 512 = 512 bytes</p>\n  \n  <p>Sector size (logical/physical): 512 bytes / 4096 bytes</p>\n  \n  <p>I/O size (minimum/optimal): 4096 bytes / 4096 bytes</p>\n  \n  <p>Disk identifier: 0x0004cb5a</p>\n  \n  <p>Device Boot      Start         End      Blocks   Id  System</p>\n  \n  <p>WARNING: GPT (GUID Partition Table) detected on '/dev/sdb'! The util fdisk doesn't \n  support GPT. Use GNU Parted.</p>\n  \n  <p>Disk /dev/sdb: 2103 MB, 2103443456 bytes</p>\n  \n  <p>255 heads, 63 sectors/track, 255 cylinders, total 4108288 sectors</p>\n  \n  <p>Units = sectors of 1 * 512 = 512 bytes</p>\n  \n  <p>Sector size (logical/physical): 512 bytes / 512 bytes</p>\n  \n  <p>I/O size (minimum/optimal): 512 bytes / 512 bytes</p>\n  \n  <p>Disk identifier: 0x71bafca0</p>\n  \n  <p>Device Boot      Start         End      Blocks   Id  System</p>\n  \n  <p>/dev/sdb1   *           0     1607679      803840    0  Empty</p>\n  \n  <p>/dev/sdb2         1595952     1600495        2272   ef  EFI (FAT-12/16/32)</p>\n  \n  <p>WARNING: GPT (GUID Partition Table) detected on '/dev/sdb1'! The util fdisk doesn't \n  support GPT. Use GNU Parted.</p>\n  \n  <p>Disk /dev/sdb1: 823 MB, 823132160 bytes</p>\n  \n  <p>255 heads, 63 sectors/track, 100 cylinders, total 1607680 sectors</p>\n  \n  <p>Units = sectors of 1 * 512 = 512 bytes</p>\n  \n  <p>Sector size (logical/physical): 512 bytes / 512 bytes</p>\n  \n  <p>I/O size (minimum/optimal): 512 bytes / 512 bytes</p>\n  \n  <p>Disk identifier: 0x71bafca0</p>\n\n<pre><code> Device Boot      Start         End      Blocks   Id  System\n</code></pre>\n  \n  <p>/dev/sdb1p1   *           0     1607679      803840    0  Empty</p>\n  \n  <p>/dev/sdb1p2         1595952     1600495        2272   ef  EFI (FAT-12/16/32)</p>\n</blockquote>\n\n<p>Output from <strong>sudo parted -l</strong></p>\n\n<blockquote>\n  <p>Model: ATA ST250LT007-9ZV14 (scsi)</p>\n  \n  <p>Disk /dev/sda: 250GB</p>\n  \n  <p>Sector size (logical/physical): 512B/4096B</p>\n  \n  <p>Partition table: msdos</p>\n  \n  <p>Number Start End Size Type File system Flags</p>\n  \n  <p>[GPT-Signatures-found error message]</p>\n</blockquote>\n\n<p>What should I do to remove the last fragments of the GPT table? Trying to reinstall Arch again, but can't use cgdisk to create partitions.</p>\n"},{"id":150378,"title":"How to fix MBR partition prior to Ubuntu Installation? A partition overlaps GPT backup sectors","body":"<p>My main problem is that i have just acquired an ASUS laptop with WINDOWS 7 and I want to install Ubuntu on it.</p>\n\n<p>I want to have a dual boot to choose between both Operating systems, I read that it's better to first install Windows and then Ubuntu, because Windows installer overwrites Ubuntu's boot loader.</p>\n\n<p>So, i tried to install Ubuntu 12.04 LST from an USB pendrive, but when it check for other OS doen's find the Windows 7 system.</p>\n\n<p>I checked posibled causes and re-installed Windows 7 from the Recovery partition in the HD but i got the same result.</p>\n\n<p>Aparently Ubuntu installer found two partition tables (GPT and MBR) and it doesn't know which one to use.</p>\n\n<p>I used <code>gdisk</code> to try to solve the problem.</p>\n\n<p>From the fdisk and gdisk outputs below, i know that i have to fix my MBR partition but i don't know how.</p>\n\n<pre><code>ubuntu@ubuntu:~$ sudo fdisk -l\n\nWARNING: GPT (GUID Partition Table) detected on '/dev/sda'! The util fdisk doesn't support GPT. Use GNU Parted.\n\n\nDisk /dev/sda: 500.1 GB, 500107862016 bytes\n256 heads, 63 sectors/track, 60563 cylinders, total 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x7834646f\n\n  Device Boot      Start         End      Blocks   Id  System\n/dev/sda1               1  4294967295  2147483647+  ee  GPT    \n</code></pre>\n\n<p></p>\n\n<pre><code>ubuntu@ubuntu:~$ sudo gdisk -l /dev/sda\nGPT fdisk (gdisk) version 0.8.5\n\nPartition table scan:\n  MBR: protective\n  BSD: not present\n  APM: not present\n  GPT: present\n\nFound valid GPT with protective MBR; using GPT.\n\nWarning! Secondary partition table overlaps the last partition by\n33 blocks!\nYou will need to delete this partition or resize it in another utility.\nDisk /dev/sda: 976773168 sectors, 465.8 GiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): B1142EF0-26CB-4F15-9C42-AFC122E50E2A\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 976773134\nPartitions will be aligned on 2048-sector boundaries\nTotal free space is 122884062 sectors (58.6 GiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n  1            2048          411647   200.0 MiB   EF00  EFI system partition\n  2          411648          673791   128.0 MiB   0C01  Microsoft reserved part\n  3          673792       391383039   186.3 GiB   0700  Basic data partition\n  4       391383040       802693119   196.1 GiB   0700  Basic data partition\n  5       925575168       976773167   24.4 GiB    2700  Basic data partition\n\nCommand (? for help): r\n\nRecovery/transformation command (? for help): o\n\nDisk size is 976773168 sectors (465.8 GiB)\nMBR disk identifier: 0x7834646F\nMBR partitions:\n\nNumber  Boot  Start Sector   End Sector   Status      Code\n  1                     1   4294967295   primary     0xEE\n</code></pre>\n"},{"id":405759,"title":"Can&#39;t boot into Windows 7 EFI GPT after recovery operation","body":"<p>My question, or rather issue, is in the extent of <a href=\"http://askubuntu.com/questions/405370/bios-grub-partition-in-the-way-of-resizing-ubuntu-partition/405371?noredirect=1#comment520502_405371\">this previous case</a> in which I wanted to grow my Linux (ext4) partition. The partition /dev/sda6 was in the way of doing this and since it contained bios_grub I didn't touch it until someone with expert knowledge could help me.</p>\n\n<p><img src=\"http://i.stack.imgur.com/xnb4T.png\" alt=\"enter image description here\"><br>\n<strong>As suggested by the helper I deleted the highlighted partition /dev/sda6</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/Whpsd.png\" alt=\"Step 2\"><br>\n<strong>All seemed well</strong></p>\n\n<p>The partition was successfully removed so I went on to step 3, merging /dev/sda7 (the ext4 containing everything Ubuntu) with the unallocated partition to grow my Linux partition.</p>\n\n<p><img src=\"http://i.stack.imgur.com/uMv5J.png\" alt=\"enter image description here\"><br>\n<strong>Everything still seemed to be going the right way</strong></p>\n\n<p>So everything went well. The helper suggested to <em>turn swappoff on /sda8 during the process</em>, so I did.\nGparted kept on merging the two partitions, which I think was a good thing, as well as refreshing itself to find all the partitions after turning swapoff.</p>\n\n<p>When GParted finally refreshed, the program just stopped and shut itself down while it was still in the middle of growing /dev/sda7.</p>\n\n<p>I restarted GParted to find this:\n<img src=\"http://i.stack.imgur.com/LhKGt.png\" alt=\"enter image description here\"><br>\n<strong>Mini heart attack</strong></p>\n\n<p>Now I'm running <code>sudo testdisk</code> from Ubuntu live DVD session, performing a deeper search on the hard drive. I did this yesterday allready, but I realized fixing this was a little, if not way over my head. So please, if you have the time (but especially the <strong>knowledge</strong> to help me with this (preferably in real time through chat or anything)), help me liberate myself from this torment...</p>\n\n<p>EDIT: 'new' information:</p>\n\n<p><img src=\"http://i.imgur.com/hW0u10U.png?1?6886\" alt=\"enter image description here\">  </p>\n\n<p><img src=\"http://i.stack.imgur.com/PS2W7.png\" alt=\"enter image description here\"><br>\n<strong>Extra information if needed</strong>  </p>\n\n<p>EDIT:  </p>\n\n<p><img src=\"http://i.imgur.com/A1vFCHt.png?1\" alt=\"enter image description here\"> \n<img src=\"http://i.stack.imgur.com/Cfb7C.png\" alt=\"enter image description here\"><br>\n<img src=\"http://i.stack.imgur.com/Dyy2E.png\" alt=\"enter image description here\">\n<strong>TestDisk results</strong>  </p>\n\n<p><em>Output of fdisk in terminal:</em>  </p>\n\n<pre><code>ubuntu@ubuntu:~$ sudo fdisk -l /dev/sda\n\nWARNING: GPT (GUID Partition Table) detected on '/dev/sda'! The util fdisk doesn't support GPT. Use GNU Parted.\n\n\nDisk /dev/sda: 1000.2 GB, 1000204886016 bytes\n255 heads, 63 sectors/track, 121601 cylinders, total 1953525168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisk identifier: 0x0fb2bbaa\n\nDisk /dev/sda doesn't contain a valid partition table\nubuntu@ubuntu:~$\n</code></pre>\n\n<p><em>Output of gdisk in terminal:</em>  </p>\n\n<pre><code>ubuntu@ubuntu:~$ sudo gdisk -l /dev/sda\nGPT fdisk (gdisk) version 0.8.1\n\nCaution: invalid main GPT header, but valid backup; regenerating main header\nfrom backup!\n\nCaution! After loading partitions, the CRC doesn't check out!\nWarning! Main partition table CRC mismatch! Loaded backup partition table\ninstead of main partition table!\n\nWarning! One or more CRCs don't match. You should repair the disk!\n\nPartition table scan:\n  MBR: not present\n  BSD: not present\n  APM: not present\n  GPT: damaged\n\nFound invalid MBR and corrupt GPT. What do you want to do? (Using the\nGPT MAY permit recovery of GPT data.)\n 1 - Use current GPT\n 2 - Create blank GPT\n\nYour answer:  \n</code></pre>\n\n<p>I answered with <kbd>1</kbd>\n<img src=\"http://i.stack.imgur.com/MBcpo.png\" alt=\"enter image description here\"></p>\n\n<p>And TestDisk gave me these results:\n<img src=\"http://i.stack.imgur.com/9QrH2.png\" alt=\"enter image description here\">  </p>\n\n<p>After further exploration, TestDisk (while selecting my hard disk as gpt efi) showed that ALL of my files on partitions [OS], [DATA] and [RECOVERY] where perfectly in tact. The unlabeled partitions are respectively 2 Linux partitions containing data (a lot of it is damaged, but thats not the upmost priority at the moment) and one SWAP partition.  </p>\n\n<p>At the moment I am copying the whole hard disk to an external hard disk to prepare for any probable error when fiddling with TestDisk to try and recover the system.  </p>\n\n<p><strong>EDIT 13 Februari 2014:</strong><br>\nAt the moment my setup looks like this. I have some confusion over my hard disk, was it MBR or GPT to begin with? Anyway, some last steps to be taken care of, I hope someone can help me! Ubuntu is booting from GRUB and/or rEFInd but Windows 7 just doesn't boot.<br>\n<img src=\"http://i.stack.imgur.com/bBaQw.png\" alt=\"current situation\"><br>\nI tried with every boot repair option I could find (about windows 7) but untill now everything has failed.<br>\n- Boot with Windows 7 boot repair cd and enter Command Prompt environment<br>\n- I tried the commands: <code>bootrec /fixmbr</code>, <code>bootrec /fixboot</code>, <code>bootrec /rebuildbcd</code>, and rebooted, but it fixed nothing<br>\n- So I tried the \"nuclear method\" by using the commands: <code>bootsect /nt60 c: /force /mbr</code>, <code>bcdboot c:\\windows /s c:</code><br>\n- boot-repair-disk (linux lubuntu) didn't help me either, I tried common repair and advanced repair.\nAbove steps didn't work for me.<br>\nsda4 is the partition containing the Windows OS</p>\n"},{"id":400553,"title":"Trying to remove leftover GPT Data using Fixparts","body":"<p>So i have a laptop that come with windows 8, like others i dislike it with passion, installed windows 7 over the top (i assumed it would atleast wipe the MBR properly but i dont think so anymore.</p>\n\n<p>anyway this is my partition setup (according to the MBR Table, this is how i set it up, this is all correct:)<img src=\"http://i.stack.imgur.com/gm2cR.png\" alt=\"My partition setup (MBR)\"></p>\n\n<p>And so being the Ubuntu enthusiast I have a left over unallocated space at the end, I was going to install Ubuntu there with a dual boot, but parted, the partition manager in the Ubuntu setup reads that there is no compatible operating systems installed, hmm, so i searched around on google and on askubuntu, there's a lot of people having leftover GPT data.</p>\n\n<p>On the Ubuntu live CD, I downloaded and launched fix parts, there was no warning message at the start, i was following this guide(<a href=\"http://www.rodsbooks.com/fixparts/\" rel=\"nofollow\">http://www.rodsbooks.com/fixparts/</a>), so at first i thought it may not be any GPT data</p>\n\n<p>Until I got this up \n<img src=\"http://i.stack.imgur.com/uaVCQ.png\" alt=\"enter image description here\"></p>\n\n<p>According to the guide I should have had a warning at the beginning, and being given the option to remove it. </p>\n\n<p>I have created a system image of my windows install onto an external HDD</p>\n\n<p><em><strong></em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>___</strong>--</p>\n\n<p>I also tried using GPT disk, it was very complicated, took me a while to even get it open, and then I count copy the backup of my partition table (parts.txt) out of the system rescue CD as I new it would delete when I powered it down.</p>\n\n<p>So, how can I remove this GPT data so that parted will see my windows install?\nOr should I try and convert it all to GPT data?</p>\n\n<hr>\n\n<p>As requested, here are the outputs to the following commands</p>\n\n<p><img src=\"http://i.stack.imgur.com/oMMYy.png\" alt=\"The p menu option\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/bpDMg.png\" alt=\"Sudo fdisk -l /dev/sda\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/vyJK5.png\" alt=\"Parted print\"></p>\n\n<p>gdisk doesnt seem to be in the package i have? or atleast the command is unknown\n<img src=\"http://i.stack.imgur.com/BEROm.png\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p>This is the problem i am getting at in the first place, i wish to install ubuntu (dual booted with windows 7) onto that unallocated space at the end of my drive</p>\n\n<p>But the ubuntu installer (i read it uses parted) simply does not recognise the windows partition</p>\n\n<p><img src=\"http://i.stack.imgur.com/WlCca.png\" alt=\"Eventually i was aiming to use the Borg bootloader,i was expecting the option &quot;Install alongside windows 7&quot; and thats what im trying to get, so i googled this problem, and lots of people had leftover GPT data, so now i have no idea where to go \"></p>\n"},{"id":165459,"title":"GPT Not mounting using &quot;normal&quot; GPT mounting techniques 12.04","body":"<p>I've got two 2TB drivess: one MBR and the other GPT. </p>\n\n<pre><code>sudo blckid /dev/sdb1\n</code></pre>\n\n<p>returns a blank.</p>\n\n<p>gdisk shows:</p>\n\n<pre>\nPartition table scan:\nMBR: protective\nBSD: not present\nAPM: not present\nGPT: present\n\nFound valid GPT with protective MBR; using GPT.\n\nWarning! Secondary partition table overlaps the last partition by 1970 blocks!\nYou will need to delete this partition or resize it in another utility.\n\nDisk /dev/sdb: 3907027055 sectors, 1.8 TiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 38A1113D-B5E9-4B69-ABFF-ACB27AFB3DDD\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 3907027021\nPartitions will be aligned on 8-sector boundaries\n\nTotal free space is 2014 sectors (1007.0 KiB)\nNumber Start (sector) End (sector) Size       Code Name\n  1              34       262177   128.0 MiB  0C01 Microsoft reserved part\n  2          264192   3907028991   1.8 TiB    0700 Basic data partition\n</pre>\n\n<p>mounting via fstab or -t gives same error when using NTFS or NTFS-3g\n\"NTFS signature is missing\"</p>\n\n<p>GParted says one partition is overwriting another, yet windows shows no errors at all. The drive is also mounted easily via MacOs (triple boot)</p>\n"}]}]
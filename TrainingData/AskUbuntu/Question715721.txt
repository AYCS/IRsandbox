[{"id":715721,"title":"How to lock screen 30 minutes after unlock","body":"<p>I would like my children to only use the computer for 30 minutes, at which time I would like the screen to be locked.  At that point, if I choose to unlock the screen again, I would like the screen to lock again in another 30 minutes.  </p>\n\n<p>How can I write a script to do this?  </p>\n","related_questions":[{"id":664295,"title":"Lock user screen with custom full screen image and prevent unlock using ssh","body":"<p>I want to connect to a computer using ssh, lock the computer's screen by displaying a full screen custom text/image and prevent user from doing anything until I unlock the screen again using ssh.\nHow is this possible?</p>\n\n<p>For example let's say I am the teacher of a class and I want to lock all of my students screens until I let them to use their computers. </p>\n"},{"id":633484,"title":"Two lock screens when unlocking my computer","body":"<p>Probably I installed something, but I don't know what it is... Since then, I have to type my password twice in two different lock screens.</p>\n\n<p>If I lock the computer (CTRL-ALT-L), then I have to give the password only once, in the default(?) Ubuntu lock screen (similar to <a href=\"http://3.bp.blogspot.com/-NJ0ByKWy98g/TzrWC2mRgtI/AAAAAAAACLM/YH8Xjv1v7Ls/s1600/New%20Lock%20Screen%20Ubuntu.png\" rel=\"nofollow\">this one</a>).</p>\n\n<p>However, if I close the lid, then I get two(!) lock screens. The first is something similar to <a href=\"http://i.stack.imgur.com/pVYh8.png\" rel=\"nofollow\">this one</a>, and the second is the one I mentioned above.</p>\n\n<p>Any idea why is it happening? How can I get rid of the first lock screen when I open the lid? I run Ubuntu 15.04.</p>\n\n<h3>Edit:</h3>\n\n<p>Here is the history of <code>apt-get install</code>:</p>\n\n<pre><code>    4  sudo apt-get install skype \n    7  sudo apt-get install google-chrome\n   14  sudo apt-get install git\n   28  sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext   libz-dev libssl-dev\n   29  sudo apt-get install asciidoc xmlto docbook2x\n   31  sudo apt-get install autoconf\n   46  sudo apt-get install build-essential\n   76  sudo apt-get install ack-grep\n  150  sudo apt-get install python-pip\n  187  sudo apt-get install virtualenv\n  208  sudo apt-get install build-essential python-dev\n  217  sudo apt-get install zmq\n  218  sudo apt-get install libzmq-dev\n  219  sudo apt-get install zmq\n  227  apt-get install python3-dev\n  228  sudo apt-get install python3-dev\n  230  apt-get update &amp;&amp; apt-get install python3-dev python3-pip build-essential libzmq3-dev\n  231  sudo apt-get update &amp;&amp; apt-get install python3-dev python3-pip build-essential libzmq3-dev\n  232  sudo apt-get install python3-dev python3-pip build-essential libzmq3-dev\n  237  sudo apt-get install libatlas-base-dev gfortran\n  272  sudo apt-get install unity-tweak-tool\n  289  sudo apt-get install spotify-client\n  320  sudo apt-get install awesome\n  325  sudo apt-get install workrave\n  334  sudo apt-get install flyspell\n  350  sudo apt-get install dconf-tools\n  355  sudo apt-get install virtualbox\n  360  sudo apt-get install virtualbox\n  364  sudo apt-get install virtualbox\n  367  sudo apt-get install virtualbox\n  369  sudo apt-get install virtualbox-guest-dkms\n  379  sudo apt-get install virtualbox-guest-utils \n</code></pre>\n\n<p>BTW: if I disable the <code>Require my password when waking from suspend</code>, then I'm left only with one lock screen (the one from the second link).</p>\n"},{"id":429716,"title":"How to run a command or script at screen lock/unlock?","body":"<p>I am looking for a way to store lock/unlock screen times.</p>\n\n<pre><code>A=$(date)\necho $A &gt;&gt; $HOME/time_xprofile\n</code></pre>\n\n<p>What did I try:</p>\n\n<pre><code>$HOME/.bashrc\n$HOME/.bash_logout\n$HOME/.bash_prompt\n$HOME/.xprofile\n</code></pre>\n\n<p>Then I locked the screen and checked whether file appeared and it failes every time. How can I check the time than?</p>\n"},{"id":625951,"title":"How to monitor the status of shutdown sequence","body":"<p>This is the script I made to lock and shutdown my system after 30 minutes.</p>\n\n<pre><code>#!/bin/bash\n# Read Password\nread -s -p \"Password: \" password\necho\n# shutdown and screensaver Command\necho \"$password\" | sudo -kS shutdown -h +30 &amp;\ngnome-screensaver-command -a &amp;\nread -p \"Press any key to continue... \" -n1 -s \n</code></pre>\n\n<p>The problem with this script is that sometimes it will not shutdown even after 30 minutes.</p>\n\n<p>That's why I added a <code>read</code> command at the end - in order to monitor the status of shutdown sequence as well as a progress window. But this script only shows the status of the starting minute</p>\n\n<p>eg:</p>\n\n<pre><code>Broadcast message from root@eka-PC\n    (unknown) at 10:31 ...\n\nThe system is going down for halt in 30 minutes!\n</code></pre>\n\n<p>it doesn't show the progress of the shutdown.</p>\n\n<p>EDITED:</p>\n\n<p>I also found this bug in the above script, If a wrong password is entered the system will lock without any warning. Is it possible to give a conditional statement in shutdown command. I have tried this</p>\n\n<pre><code>SHUTDOWN=$(echo \"$password\" | sudo -kS shutdown -h +30 &amp;);\nif [[ $SHUTDOWN -eq 0]]\nthen\ngnome-screensaver-command -a &amp;\nread -p \"Press any key to continue... \" -n1 -s \nfi\n</code></pre>\n\n<p>It activates only the shutdown but not the screensaver </p>\n\n<hr>\n\n<h2>WORKING SCRIPT</h2>\n\n<p>No solution found for validating shutdown <code>(echo \"$password\" | sudo -kS shutdown -h +30 &amp;)</code> so i tried a workaround to this problem by confirming the password twice. This is the working script</p>\n\n<pre><code>#!/bin/bash\n\nred=`tput setaf 1`\ngreen=`tput setaf 2`\nreset=`tput sgr0`\n\necho \"Activate screensaver and shutdowns the system in 30 minutes\";\n# Read Password\nshut()\n{\nread -s -p \"Password: \" password1\nread -s -p \"Confirm Password: \" password\necho\n# Run Command\nif [ \"$password1\" == \"$password\" ]\nthen\necho \"$password\" | sudo -kS shutdown -h +30 &amp;\ngnome-screensaver-command -a &amp;\nread -p \"`echo $'\\n&gt; \\n&gt;'` ${green} To cancel shutdown, press C ${reset}`echo $'\\n&gt; \\n&gt;'`\" prompt\n\n    if [[ $prompt =~ [cC](es)* ]]\n    then\n    echo \"$password\" | sudo -kS shutdown -c\n    read -p \"`echo $'\\n&gt; \\n&gt;'`${red} Shutdown Cancelled ${reset}\" -n1 -s\n    fi\nelse\necho -e \"\\n${red} Wrong Password ${reset}, Re enter the password\"\nshut \nfi\n}\nshut\n</code></pre>\n\n<p>Added additional text formatting and shutdown cancellation code also to the above script. </p>\n\n<p>If you want to activate a music player (eg Rhytmbox) as well, then after <code>gnome-screensaver-command -a &amp;</code> add this code <code>rhythmbox-client --play &amp;</code> </p>\n\n<p>Any suggestion is aprreciated</p>\n"},{"id":312438,"title":"Ubuntu-GNOME 13.04 - Lock screen takes lot of time to unlock","body":"<p>I have gnome-screensaver package installed for using Ctrl+Alt+L to lock the screen. Though locking the screen works fine, it takes a whole lot of time to unlock after entering my password at the prompt. The lock screen just freezes during the time (mouse is active).</p>\n\n<p>Here are the log messages from <code>$HOME/.cache/gdm/session.log</code></p>\n\n<ol>\n<li><p>When screen is locked:</p>\n\n<pre><code>(gnome-shell:2850): GLib-GIO-WARNING **: Dropping signal ActiveSessionChanged of type (s) since the type from the expected interface is (o) \n(above message repeated 5 times)\n\n  JS ERROR: !!!   Exception was: TypeError: arguments[0] is null\n  JS ERROR: !!!     message = '\"arguments[0] is null\"'\n  JS ERROR: !!!     fileName = '\"/usr/share/gnome-shell/js/ui/components/autorunManager.js\"'\n  JS ERROR: !!!     lineNumber = '133'\n  JS ERROR: !!!     stack = '\"(null,[object _private_Gio_IOErrorEnum])@/usr/share/gnome-shell/js/ui/components/autorunManager.js:133\n  ([object _private_Gio_DBusProxy],[object _private_Gio_SimpleAsyncResult])@/usr/share/gjs-1.0/overrides/Gio.js:86\"'\n</code></pre></li>\n<li><p>When screen is unlocked:</p>\n\n<pre><code>(gnome-shell:2850): GLib-GIO-WARNING **: Dropping signal ActiveSessionChanged of type (s) since the type from the expected interface is (o)\n(above message repeated 4 times)\n\nJS LOG: loading default theme (Adwaita)\n\n(gnome-shell:2850): GLib-GIO-WARNING **: Dropping signal ActiveSessionChanged of type (s) since the type from the expected interface is (o)\n(above message repeated 13 times)\n\nJS ERROR: !!!   Exception was: TypeError: arguments[0] is null\nJS ERROR: !!!     message = '\"arguments[0] is null\"'\nJS ERROR: !!!     fileName = '\"/usr/share/gnome-shell/js/ui/components/autorunManager.js\"'\nJS ERROR: !!!     lineNumber = '133'\nJS ERROR: !!!     stack = '\"(null,[object _private_Gio_IOErrorEnum])@/usr/share/gnome-shell/js/ui/components/autorunManager.js:133\n([object _private_Gio_DBusProxy],[object _private_Gio_SimpleAsyncResult])@/usr/share/gjs-1.0/overrides/Gio.js:86\"' \n(above block repeated 4 times)\n</code></pre></li>\n</ol>\n\n<p>Are these related to the long delay/freeze in unlocking the screen? or is it caused by some other software etc.</p>\n\n<p>Glad to provide any extra information in this regard. Thanks.</p>\n"},{"id":435727,"title":"How to launch program on lock and close it on unlock","body":"<p>Have siblings who like to \"play\" with my laptop by waking it from suspension and then typing random keys on the keyboard into the password field. Afterwards, they always deny it. I plan to install motion and only have it run while the computer is locked. After the computer is unlocked, the process should be killed. How would I go about launching motion when <kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>L</kbd> is pressed and kill motion when the correct password is entered?</p>\n"},{"id":204073,"title":"How to run script after resume and after unlocking screen","body":"<p>In Ubuntu 12.04 LTS, I would like to run scripts after resuming from suspend, and after unlocking my desktop. These need to run as my user, and with access to my $DISPLAY.</p>\n\n<p>In particular, I would like to</p>\n\n<ul>\n<li>restart nm-applet to work around bug <a href=\"https://bugs.launchpad.net/ubuntu/+source/network-manager-applet/+bug/985028\">985028</a></li>\n<li>show a custom notification using notify-send</li>\n<li>possibly other stuff when I get these working</li>\n</ul>\n\n<p>When I resume, scripts in /etc/pm/sleep.d/ are run, but they run as root, without knowledge of my screen and username. It might work if I would hard code my username and export the default DISPLAY :0 in these scripts, but that feels like a very ugly hack.</p>\n\n<p>Scripts in ~/.config/autostart/xyz.desktop, run after login, but they don't run after merely unlocking the screen after resume.</p>\n\n<p>Is there a way to run scripts after unlocking the screen after a resume?</p>\n"},{"id":378536,"title":"Can you lock the Unity screen after 15 minutes, not shown in &quot;Brightness &amp; Lock&quot; dropdown?","body":"<p>In Ubuntu 13.10, the Brightness &amp; Lock dialog lets you lock the screen after idle time of 1, 2, 3, 5, 10, 30, and 60 minutes. Is it possible to set a different idle time not shown in this list, say, 15 minutes?</p>\n\n<p>(Frankly, it's silly to present only a few options like this.... Why not permit an arbitrary number of minutes?)</p>\n"},{"id":379090,"title":"How to disable screen lock timeout from a script?","body":"<p>I'm looking for a way to disable screen dimming and desktop locking timeout from a bash script on Ubuntu 13.10. The script should be run when user logs in (configured in Startup Applications window) or as a service before <em>lightdm</em> (from init.d).</p>\n\n<p>I have found <a href=\"http://askubuntu.com/a/171164/129094\">this answer</a> and tried the command:</p>\n\n<pre><code>gconftool-2 -s /apps/gnome-screensaver/idle_activation_enabled --type bool false\n</code></pre>\n\n<p>It has actually changed that setting (I've checked with <code>gconftool-2 -g</code> and <code>gconf-editor</code>), but it doesn't seem to work like expected. Settings window still states that screen will turn off, and in fact, after 5 minutes screen turns off and I'm prompted to enter my password when I wake it up.</p>\n\n<p>I've also tried looking around in <code>gconf-editor</code>, but I haven't found any settings that looked relevant.</p>\n\n<p>So, how can I disable desktop locking and screen off timeout from a script?</p>\n"},{"id":261181,"title":"After resuming my laptop it is unlocked for a while before locking","body":"<p>When I close my laptop lid and it is suspended, when I open it again it is resumed but without showing the lock screen which is set to come up. It resumes with access to web pages or programs that were left open. I can use my laptop to continue with what I had open for between a few seconds to about half a minute at which point the lock screen will come up. I would much prefer it if the lock screen would show when the lid is opened.</p>\n\n<p>My laptop is a Zoostorm Freedom 10-270 Netbook, with Intel Atom N270 (1.6GHz). It is running Ubuntu 12.10.</p>\n"}]}]
[{"id":405993,"title":"USB drive auto-mounted by user but gets write permissions for root only","body":"<p>I am trying to use my ext4 USB drive but Ubuntu 13 is currently mounting it with write permission only for root so with my normal user I can't write to it, without sudo. </p>\n\n<p>The first place I checked was <code>dconf-editor</code> which has the following options</p>\n\n<ul>\n<li>automount</li>\n<li>automount-open</li>\n<li>autorun-never</li>\n<li>autorun-x-content-ignore</li>\n<li>autorun-x-content-open-folder</li>\n<li>autorun-x-content-start-app</li>\n</ul>\n\n<p>and it seems to me there should be an option in there to control if I can write to the mounted USB drive, but no. </p>\n\n<p>I also made sure my user is in the relevant groups: <code>fuse</code> and <code>plugdev</code></p>\n\n<p>I've searched most of the internet and can't find a solution to change the permissions given by the mount operation. There's literally nobody out there having this problem incredibly. A ton of people have issues because their drives mounts totally read-only, but not this way with only root write permission.</p>\n\n<p>I can't see any way of controlling what happens. I looked at setting the mount options using <code>gnome-disks</code> but drew a blank.</p>\n\n<p>It's not in <code>fstab</code> but it does appear in the <code>mount</code> list or /etc/mtab:</p>\n\n<pre><code>/dev/sdb1 /media/adam/WDPassport2T ext4 rw,nosuid,nodev,uhelper=udisks2 0 0\n</code></pre>\n\n<p>This is what appears in syslog if it helps:</p>\n\n<pre><code>kernel: [111522.196770] usb 2-1: USB disconnect, device number 6\nkernel: [111525.384020] usb 2-1: new high-speed USB device number 7 using ehci-pci\nkernel: [111525.565220] usb 2-1: New USB device found, idVendor=1058, idProduct=0820\nkernel: [111525.565225] usb 2-1: New USB device strings: Mfr=1, Product=2, SerialNumber=5\nkernel: [111525.565227] usb 2-1: Product: My Passport 0820\nkernel: [111525.565229] usb 2-1: Manufacturer: Western Digital\nkernel: [111525.565231] usb 2-1: SerialNumber:  575832314141334A34383631\nkernel: [111525.565729] usb-storage 2-1:1.0: USB Mass Storage device detected\nkernel: [111525.566203] scsi9 : usb-storage 2-1:1.0\nmtp-probe: checking bus 2, device 7: \"/sys/devices/pci0000:00/0000:00:1d.7/usb2/2-1\"\nmtp-probe: bus: 2, device: 7 was not an MTP device\nkernel: [111526.564697] scsi 9:0:0:0: Direct-Access     WD       My Passport 0820 1007 PQ: 0 ANSI: 6\nkernel: [111526.565063] scsi 9:0:0:1: Enclosure         WD       SES Device       1007 PQ: 0 ANSI: 6\nkernel: [111526.568096] sd 9:0:0:0: Attached scsi generic sg2 type 0\nkernel: [111526.568202] ses 9:0:0:1: Attached Enclosure device\nkernel: [111526.568263] ses 9:0:0:1: Attached scsi generic sg3 type 13\nkernel: [111531.263108] sd 9:0:0:0: [sdb] 3906963456 512-byte logical blocks: (2.00 TB/1.81 TiB)\nkernel: [111531.265100] sd 9:0:0:0: [sdb] Write Protect is off\nkernel: [111531.265105] sd 9:0:0:0: [sdb] Mode Sense: 47 00 10 08\nkernel: [111531.266473] sd 9:0:0:0: [sdb] No Caching mode page found\nkernel: [111531.266479] sd 9:0:0:0: [sdb] Assuming drive cache: write through\nkernel: [111531.272224] sd 9:0:0:0: [sdb] No Caching mode page found\nkernel: [111531.272230] sd 9:0:0:0: [sdb] Assuming drive cache: write through\nkernel: [111531.284885]  sdb: sdb1\nkernel: [111531.288219] sd 9:0:0:0: [sdb] No Caching mode page found\nkernel: [111531.288223] sd 9:0:0:0: [sdb] Assuming drive cache: write through\nkernel: [111531.288227] sd 9:0:0:0: [sdb] Attached SCSI disk\nkernel: [111531.751588] EXT4-fs (sdb1): mounted filesystem with ordered data mode. Opts: (null)\nudisksd[3131]: Mounted /dev/sdb1 at /media/adam/WDPassport2T on behalf of uid 1000\n</code></pre>\n","related_questions":[{"id":600348,"title":"USB drive doesn&#39;t auto mount","body":"<p>I was trying to create a live  USB on my Ubuntu 14.04 system using the 'dd' command. After this operation, on inserting the USB stick, the device does not mount automatically as it used to get before. I tried using 'dmesg' to check if the OS recognizes the device and it works. Explicitly using 'mount' command makes the contents of the USB drive available. What might have gone wrong ?</p>\n"},{"id":251206,"title":"Mount USB drive with write permissions for everyone or specific user","body":"<p>I know there are similar questions but I get some specific problem I can't overcome.</p>\n\n<p>I have:</p>\n\n<ul>\n<li>HDD split into two partitions. <code>/dev/sdb1</code> and <code>/dev/sdb2</code>.  <code>sdb1</code> is NTFS and I don't need it. I need <code>sdb2</code> which is fat32.</li>\n<li>Ubuntu 12.04.1 LTS (server)</li>\n</ul>\n\n<p>I want:</p>\n\n<p>Ultimately I need a perma-mount <code>/dev/sdb2</code> to <code>/home/storage</code> with access right (rw) for the user <code>media</code>.</p>\n\n<p>Problems I'm facing:</p>\n\n<p><strong>1) Using manual mount from command line.</strong></p>\n\n<p>If I just use</p>\n\n<pre><code>server# sudo mount /dev/sdb2 /home/storage\n</code></pre>\n\n<p>It mounts but the <code>/home/storage</code> receives root as owner and group and doesn't allow <code>media</code> user to write there.</p>\n\n<p>If i use <code>mount</code> command without <code>sudo</code> as the user <code>media</code> - i'm not allowed. Says only root can use mount.</p>\n\n<p>If I use <code>mount</code> with options: <code>server# sudo mount /dev/sdb2 /home/storage -o umask=000</code> I get what I need. A bit overdone of course, since the storage folder becomes writable for everyone. <strong>BUT - that is manually mounted - now i need it to remount on every reboot.</strong></p>\n\n<p><strong>2) Remounting on reboot - using <code>fstab</code></strong></p>\n\n<p>So I thought I'll be fine if I use <code>fstab</code> to mount this partition (<code>/dev/sdb2</code>) every time i reboot. The <code>fstab</code> line I added:</p>\n\n<p><code>UUID=8C52-C1CD /home/storage auto   user,umask=000,utf8,noauto  0   0</code></p>\n\n<p>got uuid with <code>blkid</code>. The fs type <code>auto</code> i changed few times...tried <code>vfat</code> too, but always on the reboot ubuntu stops when processing fstab (as i think) with the message (took from the log):</p>\n\n<p><code>fsck from util-linux 2.20.1\n/dev/sda5: clean, 120559/10969088 files, 19960144/43861504 blocks\nmount: unknown filesystem type 'static'\nmountall: mount /etc/fstab: [772] terminated with status 32\nmountall: Filesystem could not be mounted: /etc/fstab:\nSkipping /etc/fstab: at user request</code></p>\n\n<p>And also - <code>sudo mount -a</code> never really does anything.</p>\n\n<p>What am I doing wrong? I do suspect I messed up something:)</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>As it seems - fstab should hold only mounts for static drives, not any sort of usb stuff. I'm puzzled how then this works with all the people posting on the net their success stories...</p>\n\n<p>however..if this is not possible - i would like to know how to remount my usb after every reboot...if not with fstab - than how?:)</p>\n"},{"id":336387,"title":"Only root can mount /dev/sdb1 on /media/sdb1 - contribute to external usb drive","body":"<p>I can't understand why, when I tried plug-in external USB driver in Ubuntu 12.04, I see next message:</p>\n\n<pre><code>Error mounting: mount exited with exit code 1: helper failed with:\nmount: only root can mount /dev/sdb1 on /media/sdb1\n</code></pre>\n\n<p>Here is content of <code>/etc/fstab</code>:</p>\n\n<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\nproc                                       /proc           proc  nodev,noexec,nosuid       0  0  \n# / was on /dev/sda1 during installation\nUUID=5f5d330f-d5f2-4157-9496-94f1dce2f181  /               ext4  errors=remount-ro         0  1  \n# swap was on /dev/sda5 during installation\nUUID=84747ef4-6f50-49bc-9df1-fcba364ba299  none            swap  sw                        0  0  \n\n/dev/fd0                                   /media/floppy0  auto  rw,user,noauto,exec,utf8  0  0  \n/dev/sdc1                                  /media/sdc1     vfat  uid=1000,noauto           0  0  \n/dev/sdd1                                  /media/sdd1     vfat  uid=1000,noauto           0  0  \n/dev/sdb1                                  /media/sdb1     vfat  uid=1000,noauto           0  0\n</code></pre>\n\n<p>And this is my current <code>sudo fdisk -l</code>:</p>\n\n<pre><code>Disk /dev/sda: 160.0 GB, 160041885696 bytes\n255 heads, 63 sectors/track, 19457 cylinders, total 312581808 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x000e28b8\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   310484991   155241472   83  Linux\n/dev/sda2       310487038   312580095     1046529    5  Extended\n/dev/sda5       310487040   312580095     1046528   82  Linux swap / Solaris\n\nDisk /dev/sdb: 993 MB, 993001472 bytes\n2 heads, 1 sectors/track, 969728 cylinders, total 1939456 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1             133     1939455      969661+   6  FAT16\n\nDisk /dev/sdc: 4009 MB, 4009754624 bytes\n16 heads, 32 sectors/track, 15296 cylinders, total 7831552 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0xd8e1f237\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdc1   *          32     7831551     3915760    b  W95 FAT32\n</code></pre>\n\n<p><code>sdc</code> and <code>sdb</code> - there are external usb drivers.</p>\n\n<p><em><strong>Can I solve this trouble and mount all external usb drives automatically?</em></strong></p>\n"},{"id":31307,"title":"Why can&#39;t I copy a large number of files to my USB flash drive?","body":"<blockquote>\n  <h2>Final Update:</h2>\n  \n  <p>So it turns out that the drive was indeed defective and I was able to get it replaced - the replacement works great!</p>\n</blockquote>\n\n<p><strong>What happens:</strong></p>\n\n<ol>\n<li>I insert the flash drive.</li>\n<li>I try to copy 2GB of files.</li>\n<li>About 600MB (but not always the same amount) in to the transfer, it aborts and forcefully dismounts the drive.</li>\n<li>Plugging it in again mounts it as read only due to filesystem errors.</li>\n</ol>\n\n<hr>\n\n<p>Information in <code>/var/log/syslog</code>:</p>\n\n<pre>\nApr  4 20:19:09 my-laptop kernel: [10720.130076] usb 1-4: new high speed USB device using ehci_hcd and address 2\nApr  4 20:19:09 my-laptop kernel: [10720.284655] scsi6 : usb-storage 1-4:1.0\nApr  4 20:19:10 my-laptop kernel: [10721.280796] scsi 6:0:0:0: Direct-Access     Corsair  Survivor GTR     0.00 PQ: 0 ANSI: 2\nApr  4 20:19:10 my-laptop kernel: [10721.281920] sd 6:0:0:0: Attached scsi generic sg3 type 0\nApr  4 20:19:10 my-laptop kernel: [10721.284361] sd 6:0:0:0: [sdc] 63438848 512-byte logical blocks: (32.4 GB/30.2 GiB)\nApr  4 20:19:10 my-laptop kernel: [10721.284863] sd 6:0:0:0: [sdc] Write Protect is off\nApr  4 20:19:10 my-laptop kernel: [10721.284870] sd 6:0:0:0: [sdc] Mode Sense: 00 00 00 00\nApr  4 20:19:10 my-laptop kernel: [10721.284876] sd 6:0:0:0: [sdc] Assuming drive cache: write through\nApr  4 20:19:10 my-laptop kernel: [10721.287862] sd 6:0:0:0: [sdc] Assuming drive cache: write through\nApr  4 20:19:10 my-laptop kernel: [10721.287873]  sdc: sdc1\nApr  4 20:19:10 my-laptop kernel: [10721.301238] sd 6:0:0:0: [sdc] Assuming drive cache: write through\nApr  4 20:19:10 my-laptop kernel: [10721.301243] sd 6:0:0:0: [sdc] Attached SCSI removable disk\nApr  4 20:20:03 my-laptop kernel: [10774.494709] FAT: Filesystem error (dev sdc1)\nApr  4 20:20:03 my-laptop kernel: [10774.494714]     fat_free_clusters: deleting FAT entry beyond EOF\nApr  4 20:20:03 my-laptop kernel: [10774.494718] FAT: Filesystem has been set read-only\nApr  4 20:22:04 my-laptop kernel: [10895.160070] usb 1-4: reset high speed USB device using ehci_hcd and address 2\nApr  4 20:22:04 my-laptop kernel: [10895.700029] usb 1-4: device not accepting address 2, error -71\nApr  4 20:22:04 my-laptop kernel: [10895.820047] usb 1-4: reset high speed USB device using ehci_hcd and address 2\nApr  4 20:22:04 my-laptop kernel: [10895.950038] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:05 my-laptop kernel: [10896.191050] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:05 my-laptop kernel: [10896.420054] usb 1-4: reset high speed USB device using ehci_hcd and address 2\nApr  4 20:22:05 my-laptop kernel: [10896.840042] usb 1-4: device not accepting address 2, error -71\nApr  4 20:22:05 my-laptop kernel: [10896.962678] usb 1-4: reset high speed USB device using ehci_hcd and address 2\nApr  4 20:22:06 my-laptop kernel: [10897.380047] usb 1-4: device not accepting address 2, error -71\nApr  4 20:22:06 my-laptop kernel: [10897.380095] usb 1-4: USB disconnect, address 2\nApr  4 20:22:06 my-laptop kernel: [10897.380122] sd 6:0:0:0: [sdc] Unhandled error code\nApr  4 20:22:06 my-laptop kernel: [10897.380125] sd 6:0:0:0: [sdc] Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK\nApr  4 20:22:06 my-laptop kernel: [10897.380130] sd 6:0:0:0: [sdc] CDB: Write(10): 2a 00 00 12 9e 00 00 00 f0 00\nApr  4 20:22:06 my-laptop kernel: [10897.380141] end_request: I/O error, dev sdc, sector 1220096\nApr  4 20:22:06 my-laptop kernel: [10897.382530] sd 6:0:0:0: [sdc] Unhandled error code\nApr  4 20:22:06 my-laptop kernel: [10897.382534] sd 6:0:0:0: [sdc] Result: hostbyte=DID_NO_CONNECT driverbyte=DRIVER_OK\nApr  4 20:22:06 my-laptop kernel: [10897.382539] sd 6:0:0:0: [sdc] CDB: Write(10): 2a 00 00 12 9e f0 00 00 f0 00\nApr  4 20:22:06 my-laptop kernel: [10897.382549] end_request: I/O error, dev sdc, sector 1220336\nApr  4 20:22:06 my-laptop kernel: [10897.385121] FAT: FAT read failed (blocknr 329)\nApr  4 20:22:06 my-laptop kernel: [10897.385150] FAT: FAT read failed (blocknr 322)\nApr  4 20:22:06 my-laptop kernel: [10897.385173] FAT: FAT read failed (blocknr 329)\nApr  4 20:22:06 my-laptop kernel: [10897.385188] FAT: FAT read failed (blocknr 322)\nApr  4 20:22:06 my-laptop kernel: [10897.390581] FAT: unable to read inode block for updating (i_pos 496133)\nApr  4 20:22:06 my-laptop kernel: [10897.830055] usb 1-4: new high speed USB device using ehci_hcd and address 3\nApr  4 20:22:06 my-laptop kernel: [10897.962671] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:07 my-laptop kernel: [10898.200060] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:07 my-laptop kernel: [10898.432548] usb 1-4: new high speed USB device using ehci_hcd and address 4\nApr  4 20:22:07 my-laptop kernel: [10898.560068] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:07 my-laptop kernel: [10898.802603] usb 1-4: device descriptor read/64, error -71\nApr  4 20:22:07 my-laptop kernel: [10899.030075] usb 1-4: new high speed USB device using ehci_hcd and address 5\nApr  4 20:22:08 my-laptop kernel: [10899.460032] usb 1-4: device not accepting address 5, error -71\nApr  4 20:22:08 my-laptop kernel: [10899.580064] usb 1-4: new high speed USB device using ehci_hcd and address 6\nApr  4 20:22:08 my-laptop kernel: [10900.000071] usb 1-4: device not accepting address 6, error -71\nApr  4 20:22:08 my-laptop kernel: [10900.000101] hub 1-0:1.0: unable to enumerate USB device on port 4\nApr  4 20:22:09 my-laptop kernel: [10900.322588] usb 4-2: new full speed USB device using uhci_hcd and address 2\nApr  4 20:22:09 my-laptop kernel: [10900.466510] usb 4-2: not running at top speed; connect to a high speed hub\nApr  4 20:22:19 my-laptop kernel: [10910.471597] usb 4-2: string descriptor 0 read error: -110\nApr  4 20:22:24 my-laptop kernel: [10915.471643] usb 4-2: can't set config #1, error -110\n</pre>\n\n<hr>\n\n<p><strong>Other steps taken:</strong></p>\n\n<ul>\n<li>I tried plugging it into different USB ports.</li>\n<li>I tried plugging it into one of the root ports on the PC.</li>\n<li>I ran <code>badblocks</code> on the device and it came up clean.</li>\n<li>I tried wiping the partition table before formatting - no difference.</li>\n<li>I have an external USB 2.0 1TB hard drive that runs fine and can perform large transfers without incident.</li>\n<li><code>smartctl -T normal /dev/sdX</code> fails, saying \"Terminate command early due to bad response to IEC mode page. A mandatory SMART command failed: exiting.\"</li>\n</ul>\n\n<p><i><strong>Note:</strong> thanks to <a href=\"http://askubuntu.com/users/8515/djeikyb\">djeikyb</a> for helping me with some of the steps.</i></p>\n"},{"id":339191,"title":"Ubuntu 12.04.3 takes too long to mount usb 3.0 ntfs hard drive","body":"<p>I just upgraded my Ubuntu from 12.04.2 kernel 3.5.0-39 to 12.04.3 kernel 3.8.0-29 (raring kernel). Here is the problem: when I connect the usb 3.0 NTFS hard drive to my system, it takes about 5-7 min to mount the hard drive successfully! The usb 3.0 NTFS hard drive works well with ubuntu 12.04.2 kernel 3.5.0-39 and windows 8 (dual boot).</p>\n\n<p>lsusb output:</p>\n\n<pre>\nBus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub\nBus 004 Device 002: ID 125f:a21a A-DATA Technology Co., Ltd. \nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\nBus 001 Device 006: ID 0cf3:3005 Atheros Communications, Inc. AR3011 Bluetooth\nBus 001 Device 004: ID 058f:a014 Alcor Micro Corp. \nBus 001 Device 005: ID 0bda:0139 Realtek Semiconductor Corp. \nBus 002 Device 003: ID 046d:c058 Logitech, Inc. M115 Mouse\n</pre>\n\n<p>dmesg | tail -n 50:</p>\n\n<pre>\n[ 2110.871454] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2110.890464] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2110.891863] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2110.891874] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2142.823966] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2142.842895] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2142.844277] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2142.844288] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2174.776259] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2174.795360] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2174.796794] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2174.796805] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2175.677168] sd 7:0:0:0: [sdc] No Caching mode page present\n[ 2175.677180] sd 7:0:0:0: [sdc] Assuming drive cache: write through\n[ 2206.728759] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2206.747804] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2206.749238] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2206.749250] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2238.681134] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2238.700144] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2238.701552] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2238.701563] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2270.633590] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2270.652574] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2270.653947] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2270.653958] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2302.586048] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2302.605016] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2302.606406] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2302.606417] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2303.853319]  sdc: sdc1\n[ 2303.856211] sd 7:0:0:0: [sdc] No Caching mode page present\n[ 2303.856214] sd 7:0:0:0: [sdc] Assuming drive cache: write through\n[ 2334.538275] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2334.553109] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2334.554479] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2334.554481] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2366.490863] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2366.509769] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2366.511152] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2366.511183] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2398.443073] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2398.457795] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2398.459303] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2398.459309] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2430.395719] usb 4-1: reset SuperSpeed USB device number 2 using xhci_hcd\n[ 2430.414627] usb 4-1: Parent hub missing LPM exit latency info.  Power management will be impacted.\n[ 2430.415988] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad8780\n[ 2430.415997] xhci_hcd 0000:04:00.0: xHCI xhci_drop_endpoint called with disabled ep ffff880147ad87c0\n[ 2431.294666] sd 7:0:0:0: [sdc] Attached SCSI disk\n</pre>\n\n<p>How could I fix this issue?</p>\n"},{"id":341463,"title":"VirtualBox under Ubuntu 12.04 has a problem in mounting an external USB-drive","body":"<p>I have installed VirtualBox on Ubuntu 12.04 64bit. Now, I've bought an external USB-drive with 1.5 TB.</p>\n\n<p>When I start Windows7 in VirtualBox and mount the new USB-drive, a popup-message appears, saying: \"USB Device Not Recognized - One of the USB devices attached to this computer has malfunctioned, and Windows does not recognize it.\"</p>\n\n<p>When I use the the USB-drive on Windows7 without VirtualBox, the drive works properly.</p>\n\n<p>When I start Unbutu 12.04 in VirtualBox and mount the new USB-drive, nothing happens. The new drive neither appears, nor an error-message is thrown.</p>\n\n<p>When I use the the USB-drive on Ubuntu 12.04 without VirtualBox, the drive works properly.</p>\n\n<p>When I use other USB-drives (2 x 250 GB (USB2.0), 1 x 500 GB (USB2.0), 1 x 1 TB (USB3.0)) and mount them in VirtualBox they also work properly.</p>\n\n<p>TIA</p>\n"},{"id":299430,"title":"Slow USB transfer speeds","body":"<p>I am experiencing very slow USB transfer speeds when trying to backup files to a USB HDD. I am not entirely sure when the problem 1st occured but there was definitely a period using 12.04 where transfer speeds were fine and then they dropped to kbs/s and backups became impossible. It might well have coincided with a software update but at the time I thought maybe the USB HDD was at fault and didn't make a note of any software changes.</p>\n\n<p>I have since used other USB HDDs and see the same issue. I have also upgraded to 13.04 and the problem remains.</p>\n\n<p>The details of my machine are as follows:</p>\n\n<p>lscpi:</p>\n\n<blockquote>\n  <p>00:00.0 Host bridge: Intel Corporation 2nd Generation Core Processor\n  Family DRAM Controller (rev 09)</p>\n  \n  <p>00:02.0 VGA compatible controller: Intel Corporation 2nd Generation\n  Core Processor Family Integrated Graphics Controller (rev 09)</p>\n  \n  <p>00:16.0 Communication controller: Intel Corporation 6 Series/C200\n  Series Chipset Family MEI Controller #1 (rev 04)</p>\n  \n  <p>00:1a.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset\n  Family USB Enhanced Host Controller #2 (rev 05)</p>\n  \n  <p>00:1b.0 Audio device: Intel Corporation 6 Series/C200 Series Chipset\n  Family High Definition Audio Controller (rev 05)</p>\n  \n  <p>00:1c.0 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset\n  Family PCI Express Root Port 1 (rev b5)</p>\n  \n  <p>00:1c.1 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset\n  Family PCI Express Root Port 2 (rev b5)</p>\n  \n  <p>00:1c.2 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset\n  Family PCI Express Root Port 3 (rev b5)</p>\n  \n  <p>00:1d.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset\n  Family USB Enhanced Host Controller #1 (rev 05)</p>\n  \n  <p>00:1f.0 ISA bridge: Intel Corporation HM65 Express Chipset Family LPC\n  Controller (rev 05)</p>\n  \n  <p>00:1f.2 SATA controller: Intel Corporation 6 Series/C200 Series\n  Chipset Family 6 port SATA AHCI Controller (rev 05)</p>\n  \n  <p>00:1f.3 SMBus: Intel Corporation 6 Series/C200 Series Chipset Family\n  SMBus Controller (rev 05)</p>\n  \n  <p>05:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd.\n  RTL8101E/RTL8102E PCI Express Fast Ethernet controller (rev 05)</p>\n  \n  <p>06:00.0 Network controller: Atheros Communications Inc. AR9285\n  Wireless Network Adapter (PCI-Express) (rev 01)</p>\n</blockquote>\n\n<p>lsusb:</p>\n\n<blockquote>\n  <p>Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching\n  Hub</p>\n  \n  <p>Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching\n  Hub</p>\n  \n  <p>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p>\n  \n  <p>Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p>\n  \n  <p>Bus 001 Device 005: ID 26bd:9917</p>\n  \n  <p>Bus 001 Device 004: ID 0bda:0139 Realtek Semiconductor Corp. Card\n  reader</p>\n  \n  <p>Bus 002 Device 005: ID 046d:c52e Logitech, Inc.</p>\n  \n  <p>Bus 002 Device 003: ID 04f2:b277 Chicony Electronics Co., Ltd</p>\n  \n  <p>Bus 002 Device 004: ID 0489:e00d Foxconn / Hon Hai Broadcom Bluetooth\n  2.1 Device</p>\n</blockquote>\n\n<p>dmesg:</p>\n\n<blockquote>\n  <p>[  434.552616] usb 1-1.2: new high-speed USB device number 5 using\n  ehci-pci</p>\n  \n  <p>[  435.950539] usb 1-1.2: New USB device found, idVendor=26bd,\n  idProduct=9917</p>\n  \n  <p>[  435.950555] usb 1-1.2: New USB device strings: Mfr=1, Product=2,\n  SerialNumber=3</p>\n  \n  <p>[  435.950563] usb 1-1.2: Product: Portable SSD</p>\n  \n  <p>[  435.950570] usb 1-1.2: Manufacturer: Integral</p>\n  \n  <p>[  435.950575] usb 1-1.2: SerialNumber: 07073404D5442A05</p>\n  \n  <p>[  436.120805] Initializing USB Mass Storage driver...</p>\n  \n  <p>[  436.121280] scsi7 : usb-storage 1-1.2:1.0</p>\n  \n  <p>[  436.121562] usbcore: registered new interface driver usb-storage</p>\n  \n  <p>[  436.121569] USB Mass Storage support registered.</p>\n  \n  <p>[  437.448442] scsi 7:0:0:0: Direct-Access     Integral Portable SSD<br>\n  PMAP PQ: 0 ANSI: 6</p>\n  \n  <p>[  437.450971] sd 7:0:0:0: Attached scsi generic sg3 type 0</p>\n  \n  <p>[  437.947534] sd 7:0:0:0: [sdc] 246546432 512-byte logical blocks:\n  (126 GB/117 GiB)</p>\n  \n  <p>[  438.247077] sd 7:0:0:0: [sdc] Write Protect is off</p>\n  \n  <p>[  438.247085] sd 7:0:0:0: [sdc] Mode Sense: 45 00 00 00</p>\n  \n  <p>[  438.546644] sd 7:0:0:0: [sdc] Write cache: disabled, read cache:\n  enabled, doesn't support DPO or FUA</p>\n  \n  <p>[  440.643704]  sdc: sdc1</p>\n  \n  <p>[  442.341191] sd 7:0:0:0: [sdc] Attached SCSI removable disk</p>\n  \n  <p>[  450.103616] systemd-hostnamed[3254]: Warning: nss-myhostname is not\n  installed. Changing the local hostname might make it unresolveable.\n  Please install nss-myhostname!</p>\n</blockquote>\n\n<p>I have noticed that one of my USB sockets on the laptop seems to come up as usb 1-1.2 in dmesg whereas the others come up as 2-1.2. Potentially this is the source of the problem , i.e. one USB is USB 1 whereas the rest are USB 2? Subjectively, luckybackup does seem to run a lot quicker when I plug the USB HDD in any othe USB port than the one that dmesg is reporting as 1-1.2</p>\n"},{"id":200984,"title":"Only root-permissions to USB-drive after formatting with Gparted","body":"<p>I formatted my external USB-drive with GParted to ext2 file system. After that the usb-drive is automounted with root-permission and now I only can write with sudo to the drive. Of course I can change the permissions manually (chmod), but the behavior I want is that by inserting the drive it gets automounted with permission 7 independent of which user is logged in, like an usual usb-drive does.\nI hope my question is clear enough, if not I'll can clarify, just ask.\nThx in advance!!</p>\n"},{"id":25110,"title":"Disable auto-mount for particular partitions on USB drives","body":"<p>I have a big USB disk with 3 partitions: one for backup and two other bootable ones for installing and testing new distros.  I want the backup partition automounted on boot.  But I don't want the two test partitions automounted.  Despite my use of \"noauto\" in /etc/fstab, something (gnome?) seems to be mounting them when I plug the drive it.</p>\n\n<pre><code>LABEL=mybook            /srv/backup     ext4    defaults        0       2\nLABEL=mybook-root       /media/mybook-root ext4    user,noauto  0       2\nLABEL=mybook-spare      /media/mybook-spare ext4   user,noauto  0       2\n</code></pre>\n\n<p>In previous Ubuntu distributions it seems that it was possible to configure gnome so it would avoid mounting particular partitions on removable drives like USB:</p>\n\n<pre><code>gnome-mount --write-settings --mount-options noauto --device /dev/sda1\n</code></pre>\n\n<p>This is no longer available in Lucid (when did it go away?)</p>\n\n<p>Is there another way to do this now?</p>\n"},{"id":104588,"title":"Only 746.52 GB of 3TB drive is seen when accessed via USB enclosure. Works fine internally","body":"<p>I have a Mediasonic Smart Drive SuperSpeed 3.5\" SATA HDD External Enclosure - USB 3.0 [HD6-SU3-BK]. It has the <a href=\"http://www.via-labs.com/en/products/vl700/index.jsp\" rel=\"nofollow\">VIA VL700 - Super-Speed USB 3.0 to SATA controller</a> which is supposed to support 3TB drives. The drive is an Advanced Format 3TB <a href=\"http://wdc.com/en/products/products.aspx?id=120\" rel=\"nofollow\">WDC WD30EZRX</a>. I'm running 64bit Oneiric with the standard 3.0.0-16-generic kernel.</p>\n\n<pre><code>usb controller:\n                       ATI SB700/SB800 USB OHCI0 Controller\n                       ATI SB700/SB800 USB EHCI Controller\n                       ATI SB700/SB800 USB OHCI0 Controller\n                       ATI SB700/SB800 USB EHCI Controller\n                       ATI SB700/SB800 USB OHCI2 Controller\n                       ATI SB700/SB800 USB OHCI0 Controller\n                       ATI SB700/SB800 USB EHCI Controller\n                       NEC USB Controller\n</code></pre>\n\n<p>When the drive is connected to the internal SATA controller, I can access the whole 3TB, partition it with a GPT table and format it using XFS. When I put the drive in the enclosure, I can only see 746.52 GB.</p>\n\n<p>Here's how the kernel sees the drive when it's connected to the internal SATA interface.</p>\n\n<pre><code>2.855426] scsi 6:0:0:0: Direct-Access     ATA      WDC WD30EZRX-00M 80.0 PQ: 0 ANSI: 5\n[    2.855608] sd 6:0:0:0: [sdc] 5860533168 512-byte logical blocks: (3.00 TB/2.72 TiB)\n[    2.855611] sd 6:0:0:0: [sdc] 4096-byte physical blocks\n[    2.855619] sd 6:0:0:0: Attached scsi generic sg2 type 0\n</code></pre>\n\n<p>Here's how the kernel sees the drive when connected via the USB enclosure.</p>\n\n<pre><code>[605703.368137] usb 2-5: new high speed USB device number 3 using ehci_hcd\n[605703.830770] Initializing USB Mass Storage driver...\n[605703.831288] scsi10 : usb-storage 2-5:1.0\n[605703.831626] usbcore: registered new interface driver usb-storage\n[605703.831632] USB Mass Storage support registered.\n[605719.251982] scsi 10:0:0:0: Direct-Access     WDC WD30 EZRX-00MMMB0     80.0 PQ: 0 ANSI: 2\n[605719.254314] sd 10:0:0:0: Attached scsi generic sg2 type 0\n[605719.258115] sd 10:0:0:0: [sdc] 1565565869 512-byte logical blocks: (801 GB/746 GiB)\n</code></pre>\n\n<p>See how internally there's 5,860,533,168 logical blocks and externally only 1,565,565,869.</p>\n\n<p>I also noticed that SATA reports WDC WD30EZRX-00M 80.0 PQ: 0 <strong>ANSI: 5</strong> while USB reports WDC WD30 EZRX-00MMMB0     80.0 PQ: 0 <strong>ANSI: 2</strong> What's the difference between the two? Could this be the problem?</p>\n\n<p>When connected to the SATA controller, parted says:</p>\n\n<pre><code>Model: ATA WDC WD30EZRX-00M (scsi)\nDisk /dev/sdb: 3001GB\nSector size (logical/physical): 512B/4096B\nPartition Table: gpt\n\nNumber  Start   End     Size    File system  Name  Flags\n 1      1049kB  3001GB  3001GB  xfs\n</code></pre>\n\n<p>How can I access the whole drive when it's in the enclosure? Do I need an updated kernel/driver? </p>\n"}]}]
[{"id":130856,"title":"My printer requires &quot;modprobe&quot; and &quot;ccpd&quot; to be started after every system restart.","body":"<p>In each time I start my Ubuntu 12.04 computer I need to type the following commands to get my Canon LBP 2900 printer working. Otherwise the status monitor says \"Communication Error\". I am using driver version 2.40.</p>\n\n<pre><code>sudo modprobe usblp \nls -l /dev/usb/lp0 \nsudo /etc/init.d/ccpd start \n</code></pre>\n","related_questions":[{"id":125100,"title":"ccpd starting problem in ubuntu 11.10","body":"<p>How can add the following command to start up ?\nNow I manually enter this command in each time the computer start up for using Canon LBP 2900 printer</p>\n\n<p>sudo /etc/init.d/ccpd start</p>\n"},{"id":174474,"title":"Installing Canon LBP6000 in Ubuntu 12.04","body":"<p>With the release of Ubuntu 14.04, this question may not be relevant any more. This one (<a href=\"http://askubuntu.com/questions/473728/making-canon-lbp6000-printer-work-under-ubuntu-14-04-64-bit\">Making Canon LBP6000 printer work under Ubuntu 14.04 64-bit</a>) might be more helpful. </p>\n\n<hr>\n\n<p>This is really frustrating. I am trying to install LBP6000 in Ubuntu 12.04 without any success. </p>\n\n<p>(Well, I had success about a week back when I first bought the printer and finally printed pages after a struggle of several hours. Then today it suddenly stopped working and I uninstalled everything and started from scratch. Now, I seem to have lost the way.)</p>\n\n<p><strong>My steps</strong> </p>\n\n<ol>\n<li>Downloaded the latest <a href=\"http://www.canon-europe.com/Support/Consumer_Products/products/printers/Laser/i-SENSYS_LBP6000.aspx?DLtcmuri=tcm:13-846492&amp;page=1&amp;type=download\" rel=\"nofollow\">Canon driver from Canon site</a>. File Linux_CAPT_PrinterDriver_V240_uk_EN.tar.gz</li>\n<li>Got the radu script (<a href=\"http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/\" rel=\"nofollow\">http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/</a>) </li>\n<li><p>Changed the <code>/etc/modprobe.d/blacklist-cups-usblp.conf</code> file as instructed in, <a href=\"https://help.ubuntu.com/community/CanonCaptDrv190\" rel=\"nofollow\">\nOfficial Documentation</a>. (See the section Ubuntu 12.04 Install).  Now this file looks like,</p>\n\n<pre><code># cups talks to the raw USB devices, so we need to blacklist usblp to avoid\n# grabbing them\n# blacklist usblp\n</code></pre></li>\n<li><p>Rebooted my machine</p></li>\n<li><p>Changed the port in radu script to 59787 as instructed in the link at step 3. (Again see the section Ubuntu 12.04 Install, or see the comment at <a href=\"http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/#comment-578224454\" rel=\"nofollow\">How to Install Canon LBP Printers in Ubuntu</a>.\nAlso put the latest deb files from step 1 in the appropriate directory of this script.</p></li>\n<li><p>Ran the radu script. A printer, LBP6000 got added. Not two printers, one to be disabled, as appeared in the message on the terminal after running the script. </p></li>\n<li><p><code>sudo /etc/init.d/ccpd</code> status shows,</p>\n\n<pre><code>Canon Printer Daemon for CUPS: ccpd: 3142 3139\n</code></pre>\n\n<p><strong>Results</strong></p></li>\n<li><p>The printer does not print. Printer state (from System Setting->Printing, or at cups http interface localhost:631/printers/LBP6000) goes from Idle to Processing, a job appears in print queue, and then the job disappears and the printer state goes back to Idle. The actual printer does not even blink.</p></li>\n</ol>\n\n<p><strong>Diagnostics</strong> (got help from the link in step 3, Troubleshooting)</p>\n\n<ol>\n<li><p>captstatusui -P LBP6000 shows communication error</p></li>\n<li><p><code>lsmod | grep usblp</code> did not show anything. After running, sudo modprobe usblp, shows</p>\n\n<pre><code>usblp                  17885  0\n</code></pre>\n\n<p>However, <code>ls -l /dev/usb/lp0</code> gives,</p>\n\n<p>ls: cannot access /dev/usb/lp0: No such file or directory</p></li>\n<li><p><code>/var/ccpd</code> did not exist, created,</p>\n\n<pre><code>sudo mkdir /var/ccpd\nsudo mkfifo /var/ccpd/fifo0\nsudo chown -R lp:lp /var/ccpd\n</code></pre></li>\n</ol>\n\n<p>Any suggestion will be appreciated. Do not know what to do.</p>\n"},{"id":487627,"title":"How To Install Canon LBP2900B printer in 14.04 LTS ? I tried the method for LBP2900 but it didnt work","body":"<p>How can I install Canon LBP2900B on Ubuntu 14.04 LTS ? I tried the method for the installation of LBP2900, but it didn't work. </p>\n\n<p>I tried installing the CanonCaptDrv190 as outlined in the Community wiki and answers #1 by Alvar. #2 by SarveshM @ <a href=\"http://askubuntu.com/questions/232645/how-to-install-canon-lbp2900-printer-in-ubuntu-12-10\">How to install Canon LBP2900 printer in ubuntu 12.10</a> but neither approach worked for me. The printer is switched on and has pages in tray and connected through USB.</p>\n\n<p>EDIT: I followed the Ubuntu 13.10 installation method of Community Help Wiki again. Now I get this </p>\n\n<p>On command 4 (sudo update-rc.d ccpd defaults) - </p>\n\n<p>update-rc.d: warning /etc/init.d/ccpd missing LSB information</p>\n\n<p>update-rc.d: see<a href=\"http://wiki.debian.org/LSBInitScripts\" rel=\"nofollow\">http://wiki.debian.org/LSBInitScripts</a></p>\n\n<p>System start/stop links for /etc/init.d/ccpd already exist.</p>\n\n<p>On seeing captstatusui for LBP2900, I get - </p>\n\n<p>Message : No Specified Printer</p>\n\n<p>In the below box I get - Check the (Printer asterix,asterix,asterix (the symbol)) of /etc/ccpd.conf</p>\n\n<p>I tried your method, Elder Geek but it didn't work.</p>\n\n<p>Any more ideas?</p>\n\n<p>Regards,\nAndy </p>\n"},{"id":490616,"title":"Modprobe: &#39;Invalid nodule format&#39;, yet works after insmod","body":"<p>I am having a problem with Ubuntu 12.04 not properly recognising a custom made kernel module. The kernel module is a spoof of <code>raw1394</code>. So that programs that look for the presence of a <code>raw1394</code> module in memory still work properly, even though the actual module that handles IEEE 1394/FireWire communication is different. The instructions for creating the dummy raw1394 module are at <a href=\"https://wiki.sofa-framework.org/tdev/wiki/HowTo/SensableWithoutRaw1394\" rel=\"nofollow\">wiki.sofa-framework.org</a>.</p>\n\n<p>The problem is that to load the kernel module I have to use <code>insmod</code> every time.</p>\n\n<p>When after rebooting I try to load the <code>raw1394</code> kernel module I get the following error message:</p>\n\n<pre><code>$ sudo modprobe raw1394\nFATAL: Error inserting raw1394 (/lib/modules/3.5.0-51-generic/misc/raw1394.ko): Invalid module format\n</code></pre>\n\n<p>However, if I run the following sequence of commands it all works fine:</p>\n\n<pre><code>$ sudo insmod raw1394.ko\n$ sudo modprobe raw1394\n</code></pre>\n\n<p>I can't see how it can be a problem with mismatched version:</p>\n\n<pre><code>$ uname -a\nLinux mech801 3.5.0-51-generic #77~precise1-Ubuntu SMP Thu Jun 5 00:48:28 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>Here are the MD5 hashes. The files are the same length but I assume that <code>insmod</code> must be changing something internally as it inserts the module. Both files are 3274 bytes in size.</p>\n\n<pre><code>$ md5sum /lib/modules/3.5.0-51-generic/misc/raw1394.ko ./raw1394.ko \nab06501bba1372f57115125bc7a24dfb  /lib/modules/3.5.0-51-generic/misc/raw1394.ko\nc3c3d2b4e2fe174a76b90af33eefc5e0  ./raw1394.ko\n</code></pre>\n\n<p>Is there something I am missing that is causing this <code>Invalid module format</code> problem?</p>\n"},{"id":187816,"title":"How do I get the scanner on a Canon Pixma MG5300 working?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://askubuntu.com/questions/82337/how-do-i-get-a-canon-mg-mp-and-mx-series-usb-printer-working\">How do I get a Canon MG, MP and MX series USB printer working?</a><br>\n  <a href=\"http://askubuntu.com/questions/128118/canon-mg5320-not-recognized-by-simple-scan-prints-fine\">Canon MG5320 not recognized by Simple Scan (prints fine)</a>  </p>\n</blockquote>\n\n\n\n<p>I have a canon pixma mg5300 series printer/scanner. I am able to print with it, after I successfully added the driver (if I remember correctly, I had to install it from the constructor, though I'm not sure, it was quite some time ago). However, I don't know how to use the scanner. I tried typing 'scan' in the dash, and a application named 'simple scan' appeared. Yet this application doesn't recognize the scanner, even though if I click 'print' on firefox, it recognizes the printer.</p>\n\n<p>How to scan with ubuntu 12.04 ?</p>\n"},{"id":394620,"title":"Canon LBP3100B Printer =&gt; CAPT driver is installed =&gt; when I try to start ccpd, I get this: `Check the DevicePath of /etc/ccpd.conf`","body":"<p>OS: Ubuntu 13.10 64 bit</p>\n\n<p>Driver: CAPT v2.60 -> debian package 64 bit</p>\n\n<p>Printer: LBP3100B</p>\n\n<hr>\n\n<p>Regarding to <a href=\"http://askubuntu.com/a/106260/152405\">this \"Answer\"</a>, I've installed the canon CAPT driver on my machin, but when I try to start/restart ccpd, I get the below error</p>\n\n<p><img src=\"http://i.stack.imgur.com/6CeEp.png\" alt=\"img\"></p>\n\n<p>However, printer doesn't work without starting ccpd. Here is <strong>/etc/ccpd.conf</strong> contents:</p>\n\n<pre><code># Canon Printer Daemon for CUPS Configuration Data\n&lt;Path&gt;\n# CUPS configuration file path.\n#  Default  /etc/cups/\nCUPS_ConfigPath   /etc/cups/\n# Log directory path.\n#  LogDirectoryPath /var/log/CCPD/\n&lt;/Path&gt;\n# Printer entries.\n#  Mapping each \"Printer Name\" to each \"Printer Device Port\".\n#  The \"Printer Name\" has to be identical to the CUPS printer queue name.\n#  For example, if you prepare a printer named \"LBP3200\" as a CUPS printer\n#  queue name, and the printer is connected to the USB port \"/dev/usb/lp0\",\n#  you can use the following three lines example just by removing the\n#  comment symbol \"#\" of each line.\n#&lt;Printer  LBP3200&gt;\n#DevicePath  /dev/usb/lp0\n#&lt;/Printer&gt;\n&lt;Printer LBP3100B&gt;\nDevicePath /dev/usb/lp0\n&lt;/Printer&gt;\n&lt;Ports&gt;\n# Status monitoring socket port.\n#  Default 59787\nUI_Port  59787\nPDATA_Port  59687\n&lt;/Ports&gt;\n</code></pre>\n\n<p>After un-commeniting <code>LogDirectoryPath /var/log/CCPD/</code> and trying to print a page, It seems the log file is not created: <code>ls /var/log/CCPD/</code>, Output -> ls: cannot access /var/log/CCPD/: No such file or directory</p>\n\n<p>And the below picture is captured from the printer properties dialogue:</p>\n\n<p><img src=\"http://i.stack.imgur.com/eSvMw.png\" alt=\"img-2\"></p>\n\n<p>And here is <code>/var/log/cups/error_log.3.gz</code>:</p>\n\n<pre><code>W [20/Dec/2013:20:54:08 +0330] CreateProfile failed: org.freedesktop.ColorManager.AlreadyExists:profile id 'LBP3100B-Gray..' already exists\nW [20/Dec/2013:20:55:35 +0330] CreateProfile failed: org.freedesktop.ColorManager.AlreadyExists:profile id 'LBP3100B-Gray..' already exists\nE [20/Dec/2013:20:59:55 +0330] [Job 2] ccp send_data error, exit\nE [20/Dec/2013:20:59:55 +0330] [Job 3] Invalid printer command \"Clean\".\nE [20/Dec/2013:20:59:55 +0330] [Job 3] ccp send_data error, exit\nE [20/Dec/2013:21:04:57 +0330] [Job 2] Stopping unresponsive job.\nE [20/Dec/2013:21:04:57 +0330] [Job 3] Stopping unresponsive job.\nE [20/Dec/2013:21:06:08 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [20/Dec/2013:21:06:08 +0330] [Job 2] ccp send_data error, exit\nE [20/Dec/2013:21:06:08 +0330] [Job 3] Invalid printer command \"Clean\".\nE [20/Dec/2013:21:06:08 +0330] [Job 3] ccp send_data error, exit\nE [21/Dec/2013:01:06:45 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [21/Dec/2013:01:06:45 +0330] [Job 2] ccp send_data error, exit\nE [21/Dec/2013:01:06:45 +0330] [Job 3] Invalid printer command \"Clean\".\nE [21/Dec/2013:01:06:45 +0330] [Job 3] ccp send_data error, exit\nE [21/Dec/2013:01:11:46 +0330] [Job 2] Stopping unresponsive job.\nE [21/Dec/2013:01:11:46 +0330] [Job 3] Stopping unresponsive job.\nE [21/Dec/2013:01:12:57 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [21/Dec/2013:01:12:57 +0330] [Job 2] ccp send_data error, exit\nE [21/Dec/2013:01:12:57 +0330] [Job 3] Invalid printer command \"Clean\".\nE [21/Dec/2013:01:12:57 +0330] [Job 3] ccp send_data error, exit\nE [21/Dec/2013:01:17:58 +0330] [Job 2] Stopping unresponsive job.\nE [21/Dec/2013:01:17:58 +0330] [Job 3] Stopping unresponsive job.\nE [21/Dec/2013:01:19:09 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [21/Dec/2013:01:19:09 +0330] [Job 2] ccp send_data error, exit\nE [21/Dec/2013:01:19:09 +0330] [Job 3] Invalid printer command \"Clean\".\nE [21/Dec/2013:01:19:09 +0330] [Job 3] ccp send_data error, exit\nE [21/Dec/2013:01:24:10 +0330] [Job 2] Stopping unresponsive job.\nE [21/Dec/2013:01:24:10 +0330] [Job 3] Stopping unresponsive job.\nE [21/Dec/2013:01:25:21 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [21/Dec/2013:01:25:21 +0330] [Job 2] ccp send_data error, exit\nE [21/Dec/2013:01:25:21 +0330] [Job 3] Invalid printer command \"Clean\".\nE [21/Dec/2013:01:25:21 +0330] [Job 3] ccp send_data error, exit\nE [21/Dec/2013:01:30:22 +0330] [Job 2] Stopping unresponsive job.\nE [21/Dec/2013:01:30:22 +0330] [Job 3] Stopping unresponsive job.\nE [21/Dec/2013:01:31:33 +0330] [Job 2] Can't connect to CCPD: Connection refused\nE [21/Dec/2013:01:31:33 +0330] [Job 2] ccp send_data error, exit\nE [21/Dec/2013:01:31:33 +0330] [Job 3] Invalid printer command \"Clean\".\nE [21/Dec/2013:01:31:33 +0330] [Job 3] ccp send_data error, exit\n</code></pre>\n\n<p>AND</p>\n\n<p><code>ls /var/log</code>: <a href=\"http://paste.ubuntu.com/6669726\" rel=\"nofollow\">http://paste.ubuntu.com/6669726</a></p>\n"},{"id":326620,"title":"Printing problem , Canon LBP2900","body":"<p>I am using Ubuntu 12.04 , 32bit . when I'm printing nothing happen.</p>\n\n<p>I actually install my printer drivers , canon LBP2900 from <a href=\"http://www.canon-europe.com/Support/Consumer_Products/products/printers/Laser/i-SENSYS_LBP2900.aspx?type=download&amp;page=1\" rel=\"nofollow\">canon site</a> , its contain 2 *.deb file :</p>\n\n<ol>\n<li><p>cndrvcups-common_2.60-1_i386.deb</p></li>\n<li><p>cndrvcups-capt_2.60-1_i386.deb</p></li>\n</ol>\n\n<p>after installing them I done the following as suggested in forum:</p>\n\n<ol>\n<li><p>Created the following directories:</p>\n\n<pre><code>sudo mkdir /var/ccpd\nsudo mkfifo /var/ccpd/fifo0\nsudo mkdir /var/captmon\n</code></pre></li>\n<li><p>Registered the printer:</p>\n\n<pre><code>sudo /usr/sbin/lpadmin -p LBP2900 -m CNCUPSLBP2900CAPTK.ppd -v ccp:/var/ccpd/fifo0 -E\n</code></pre></li>\n<li><p>Register the printer with ccpd daemon:</p>\n\n<pre><code>sudo /usr/sbin/ccpdadmin -p LBP2900 -o /dev/usb/lp0\n</code></pre></li>\n<li><p>Start ccpd daemon:</p>\n\n<pre><code>sudo /etc/init.d/ccpd start\n</code></pre></li>\n</ol>\n\n<p>all steps was successfully and even my printer added to printer list in system setting and if I want to print sth it is available but when I print sth after some minuets I get this from printer state :  \" Idle - ccp send_data error, exit \" </p>\n\n<p>Of course the printer is connected , when I enter <code>lsusb</code> in terminal it is in the list.</p>\n\n<p>and nothing will happen next just the jobs are in queue .</p>\n\n<p>The posts that I used  : <a href=\"http://askubuntu.com/questions/92698/printing-canon-lbp2900-problems\">printing Canon LBP2900 problems</a></p>\n\n<p><a href=\"http://www.unixmen.com/installation-canon-lbp2900-on-linux/\" rel=\"nofollow\">http://www.unixmen.com/installation-canon-lbp2900-on-linux/</a></p>\n\n<p><a href=\"https://wiki.archlinux.org/index.php/Canon_LBP2900\" rel=\"nofollow\">https://wiki.archlinux.org/index.php/Canon_LBP2900</a></p>\n\n<p>Thanks,<br>\nFari</p>\n"},{"id":331457,"title":"Can&#39;t find or install Canon MP230 on Ubuntu 12.04","body":"<p>I have recently purchased a Canon MP230 for college and I am trying to install it onto my computer which is running Ubuntu 12.04. I have checked the connections and it is switched on.</p>\n\n<p>I initially couldn't find the printer in system settings. The only options given was URI and Network Printer. Eventually, after installing updates, it found a printer connected through USB. When I searched the database, it didn't have the model of this printer. I tried searching for the PPD file but couldn't find it on the installation disk. (I'm still new to Ubuntu in some aspects). I tried typing the make and model in manually but it wouldn't search for the drivers. I downloaded the drivers from the Canon Europe website, both the Debian 32 bit version and the RPM version. The RPM version wouldn't install at all and the debian I tried running through the Software Center. I tried to access the printer again through system settings and it will not find it as happened before the updates. I proceeded to install through the terminal but it could not find a connected printer. </p>\n\n<p>I have an art project due in 2 weeks and need the printer and scanner up and running asap.</p>\n"},{"id":196736,"title":"Unable to use canon LBP printer after upgrading ubuntu","body":"<p>I had used canon LBP2900B (laserjet) in Ubuntu 10.04 earlier after installing steps as suggested by <a href=\"http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/\" rel=\"nofollow\">Radu Kotescu's site</a>.</p>\n\n<p>After upgrading to 12.04.1 I see that printer options are available as usual but not a single page can be printed. If I open a PDF document by evince and try to print a page, the following message appears on the terminal: `</p>\n\n<pre><code>**WARNING: gnome-keyring:: couldn't connect to: /tmp/keyring-9mrPtj/pkcs11: No such file or directory**.\n</code></pre>\n\n<p>Another change I notice is that earlier it was normal to see two printers in the options for printers after installation was completed and installation details suggested which one is to be made the default printer for my purpose. These are available now also but the default printer option had automatically changed (to the best of my knowledge). </p>\n\n<p>Please suggest some way to make the printer work. I understand the previous driver downloaded from Radu Kotescu's site was specifically for 10.04 and now I am running 12.04. So the situation a bit complicated. (Please also note that apparmor is in enforced mode, relevant profile being <code>/usr/sbin/cupsd</code>, but this was same in 10.04 version) What should I do now? </p>\n"},{"id":47286,"title":"Installing canon LBP5000 laserjet printer","body":"<p>I have the following \n<b>setup</b>:</p>\n\n<ul>\n<li>Ubuntu Natty (11.04) server edition installed</li>\n<li>Printer Canon LBP5000 laserjet </li>\n<li>CUPS, using the web interface because I have no gui. Im operating the system by ssh via my network</li>\n</ul>\n\n<p><b>My problem</b>:<br/>\nIt just doesn't want to print, Im trying to print a test page but nothing is happing. After a while it gives me a error like</p>\n\n<blockquote>\n  <p>Can't connect to CCPD: Connection refused</p>\n</blockquote>\n\n<p>Or</p>\n\n<blockquote>\n  <p>ccp send_data error, exit</p>\n</blockquote>\n\n<p><b>My attempts</b>:</p>\n\n<ul>\n<li><p>I have followed this guide: <a href=\"https://help.ubuntu.com/community/CanonCaptDrv190\" rel=\"nofollow\">https://help.ubuntu.com/community/CanonCaptDrv190</a> . The command \"ccpd status\" gives me the correct output : </p>\n\n<blockquote>\n  <p>Canon Printer Daemon for CUPS: ccpd: 4171 4170 </p>\n</blockquote></li>\n<li><p>I have tried this script: <a href=\"http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/\" rel=\"nofollow\">http://radu.cotescu.com/how-to-install-canon-lbp-printers-in-ubuntu/</a>, same results</p></li>\n</ul>\n\n<p>Can someone help me with this, cause Im really out of options.</p>\n"}]}]
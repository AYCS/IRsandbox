[{"id":715939,"title":"Swap not available says System Monitor","body":"<p>I am having trouble when I play videos on my browser. I guess this may be due to low memory. I have 2GB of ram, and I had created a swap partition during the installation. I don't remember its exact size, but it may be same as my ram. The system monitor shows \"no swap available\". The <code>blkid</code> o/p is:</p>\n\n<pre><code>/dev/sda1: UUID=\"ab6ca9c6-3ee9-42de-a6d6-dacec655c2f7\" TYPE=\"ext4\" \n/dev/sda5: LABEL=\"Shubu dada\" UUID=\"CCD076A1D0769206\" TYPE=\"ntfs\" \n/dev/sda6: LABEL=\"Official\" UUID=\"A26828166827E82D\" TYPE=\"ntfs\" \n/dev/sda7: LABEL=\"Entertainment\" UUID=\"0C6CE5A26CE586B4\" TYPE=\"ntfs\" \n</code></pre>\n\n<p><code>cat /etc/fstab</code> o/p:</p>\n\n<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/sda1 during installation\nUUID=ab6ca9c6-3ee9-42de-a6d6-dacec655c2f7 /               ext4    errors=remount-ro 0       1\n# swap was on /dev/sdb5 during installation\nUUID=0ab0d74f-7e82-4706-8516-f94384d8a6b3 none            swap    sw              0       0\n</code></pre>\n","related_questions":[{"id":462775,"title":"Swap not working on clean 14.04 install using encrypted home","body":"<h2>Update 3:</h2>\n\n<p>I decided to reinstall the system from scratch to remove any old cruft lying around since I had been experiencing some other issues after the upgrade aswell. Howver, this issue persisted.</p>\n\n<p>On a clean install, choosing to install using \"encrypted home\" leads to a broken encrypted swap configuration. </p>\n\n<h2>Update 2:</h2>\n\n<p>I fixed the partioning order that cfdisk complained about, but he issue persists. The swap is now on /dev/sda6, and I can get it up and running as follows:</p>\n\n<pre><code>~$ sudo mkswap /dev/sda6\nSetting up swapspace version 1, size = 7998460 KiB\nno label, UUID=18881d0f-d9ec-43be-a23f-0cbd78ea6d22\n\n$sudo nano /etc/crypttab # Update crypttad with new UUID\n\n$ sudo /etc/init.d/cryptdisks reload\n * Stopping remaining crypto disks...\n * cryptswap1 (stopped)...                                               [ OK ] \n * Starting remaining crypto disks...                                        \n * cryptswap1 (starting)..\n * cryptswap1 (started)...                                               [ OK ] \n$ sudo swapon -a\n\n$ls -l /dev/disk/by-uuid/\ntotal 0\nlrwxrwxrwx 1 root root 10 May 11 09:04 08b07f88-6da5-4b40-b062-42b3bb1c5f00 -&gt; ../../sda3\nlrwxrwxrwx 1 root root 10 May 11 09:08 18881d0f-d9ec-43be-a23f-0cbd78ea6d22 -&gt; ../../sda6\nlrwxrwxrwx 1 root root 10 May 11 09:04 19aa372c-05c8-4226-8f09-c54e5566e816 -&gt; ../../sda5\nlrwxrwxrwx 1 root root 10 May 11 09:04 A800B16E00B143DA -&gt; ../../sda1\nlrwxrwxrwx 1 root root 10 May 11 09:04 D28230E68230D129 -&gt; ../../sda2\nlrwxrwxrwx 1 root root 10 May 11 09:08 fcc8c419-8fec-4d4d-b55e-9e4c3b04d21d -&gt; ../../dm-0\n</code></pre>\n\n<p>But after a reboot swap fails to activate and it once again looks like this:</p>\n\n<pre><code>$ ls -l /dev/disk/by-uuid/\ntotal 0\nlrwxrwxrwx 1 root root 10 May 11 09:12 08b07f88-6da5-4b40-b062-42b3bb1c5f00 -&gt; ../../sda3\nlrwxrwxrwx 1 root root 10 May 11 09:12 19aa372c-05c8-4226-8f09-c54e5566e816 -&gt; ../../sda5\nlrwxrwxrwx 1 root root 10 May 11 09:12 A800B16E00B143DA -&gt; ../../sda1\nlrwxrwxrwx 1 root root 10 May 11 09:12 D28230E68230D129 -&gt; ../../sda2\n</code></pre>\n\n<p>My guess at the moment is that when setting up the disk as being encrypted linux no longer recognizes the partition type and therefore doesn't load it properly causing it to not register for it's UUID and therefore cryptswap can't find it causing the failure. But I don't know how to fix it..</p>\n\n<h2>Updated question:</h2>\n\n<p>Further testing revealed that I could get the swap up and running by running\n    $ mkswap /dev/sda5</p>\n\n<p>and then updating /etc/crypttab with the correct UUID and following the steps outlined here:\n<a href=\"http://askubuntu.com/questions/248158/how-do-i-setup-an-encrypted-swap-file\">How do I setup an encrypted swap file?</a></p>\n\n<p>The problem however remains when I reboot the computer, the /dev/sda5 doesn't appear when I run</p>\n\n<pre><code>$ ls -l /dev/disk/by-uuid/\n</code></pre>\n\n<p>If I do:</p>\n\n<pre><code>$ cfdisk /dev/sda \n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>FATAL ERROR: Bad logical partition 6: enlarged logical partitions overlap\n                      Press any key to exit cfdisk\n</code></pre>\n\n<p>The graphical \"Disks\" utility doesn't complain about any error when opening the disk using it.</p>\n\n<pre><code>$ sudo fdisk -l\n\nDisk /dev/sda: 256.1 GB, 256060514304 bytes\n255 heads, 63 sectors/track, 31130 cylinders, total 500118192 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x619aebf1\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048      206847      102400    7  HPFS/NTFS/exFAT\n/dev/sda2          206848   100870143    50331648    7  HPFS/NTFS/exFAT\n/dev/sda3       191397888   192397311      499712   83  Linux\n/dev/sda4       192399358   500117503   153859073    5  Extended\n/dev/sda5       484118528   500117503     7999488   82  Linux swap / Solaris\n/dev/sda6       192399360   484118527   145859584   83  Linux\n\nPartition table entries are not in disk order\n</code></pre>\n\n<h2>Original question:</h2>\n\n<p>After upgrading to 14.04 (from 13.04) my computer has been experiencing severe slowdowns, when running top i noticed kswap0 taking up alot of cpu time. I also noticed that I didn't have any swap space!</p>\n\n<pre><code>$ sudo swapon -a\nswapon: /dev/mapper/cryptswap1: stat failed: No such file or directory\n</code></pre>\n\n<p>There seems to be some problem with my encrypted swap setup (didn't even know that I had one)</p>\n\n<pre><code>$ cat /etc/crypttab \ncryptswap1 UUID=abe3c568-c8fd-4dfb-b8e9-0520d442dd61 /dev/urandom swap,cipher=aes-cbc-essiv:sha256\n\n$ ls -l /dev/disk/by-uuid/\ntotal 0\nlrwxrwxrwx 1 root root 10 May  6 11:00 08b07f88-6da5-4b40-b062-42b3bb1c5f00 -&gt; ../../sda3\nlrwxrwxrwx 1 root root 10 May  6 11:00 19aa372c-05c8-4226-8f09-c54e5566e816 -&gt; ../../sda6\nlrwxrwxrwx 1 root root 10 May  6 11:00 A800B16E00B143DA -&gt; ../../sda1\nlrwxrwxrwx 1 root root 10 May  6 11:00 D28230E68230D129 -&gt; ../../sda2\n</code></pre>\n\n<p>And looking at my fstab</p>\n\n<pre><code>$ cat /etc/fstab\n# /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/sda6 during installation\nUUID=19aa372c-05c8-4226-8f09-c54e5566e816 /               ext4    errors=remount-ro 0       1\n# /boot was on /dev/sda3 during installation\nUUID=08b07f88-6da5-4b40-b062-42b3bb1c5f00 /boot           ext2    defaults        0       2\n# swap was on /dev/sda5 during installation\n#UUID=abe3c568-c8fd-4dfb-b8e9-0520d442dd61 none            swap    sw              0       0\n/dev/mapper/cryptswap1 none swap sw 0 0\n</code></pre>\n\n<p>My guess is that there is something wrong the the setup of sda5, but I don't know how to fix it since it is setup up to be encrypted. Would appreciate some help as how to proceed.</p>\n"},{"id":661354,"title":"swap partition crashes 14.04/12.04","body":"<p>Hardware:<br>\nAcer Aspire ACX-603-UR10<br>\n8 GB RAM<br>\nBlue WD010EZEX 1 TB HDD<br>\n-- or --<br>\nGreen WD30EXRX 3 TB HDD<br>\n-- or --<br>\nSamsung HM251JI 250 GB HDD</p>\n\n<p>Seagate ST3160815AS 160 BG HDD (Windows 8.1/now upgraded to Windows 10)</p>\n\n<p>Only one drive is ever plugged in at any given time except when I am cloning from one to the other. I did previously have both the 12.04 (Samsung) and 8.1 (then on the 1TB) drives plugged in together for a dual-boot to windows/ubuntu.  However, I wasn't using windows, so I cloned the Samsung to the 1TB drive to upgrade to 14.04 which was eventually cloned to the 3TB drive for a backup. </p>\n\n<p>Samsung was original HDD with 12.04 LTS and partitioned as:<br>\nsda1  fat32       /boot/efi        380 MiB  4.11 MiB used<br>\nsda2  ext4        /                 24 GiB 12.48 GiB used<br>\nsda3  linux swap                     8 GiB<br>\nsda4   ext4       /home            200 GiB  (remainder of Samsung HDD)</p>\n\n<p>Background:<br>\nThe Samsung drive was operating normally with swapon running 12.04 when I decided to upgrade to 14.04.  I ran Clonezilla disk-to-disk to copy the Samsung to the 3 TB drive, leaving the extra space blank.  I upgraded the  3TB to 14.04 3 different times. (I kept crashing 14.04 with various tweak tests.) Finally, I cloned the 3TB to the 1TB to keep a backup of 14.04.  All three drives worked!</p>\n\n<p>I decided to upgrade my windows HDD (Seagate 160GB) to Windows 10 so I removed my Ubuntu HDD and disconnected my external USB drive and plugged in the Seagate.<br>\nI changed the BIOS boot to Secure-On to boot windows.\nI ran the updates to Windows 8.1 (which took 8 hours.) I unplugged it and plugged in my 1 TB drive. I did not switch from Secure-On to Secure-Off in the BIOS and got a screen dump (see problem) when I tried to boot. I changed it back to Secure-Off and was able to boot, but was unable to use the NIC with Ubuntu.  I tested with all three Ubuntu drives and had the same results.  Windows still used the NIC with no problems. (another problem that was solved).</p>\n\n<p>Finally, I tried to boot the 3TB drive with the Windows 8.1 recovery USB plugged in (Meant to have the 14.04 plugged in) and the computer booted 14.04 with the NIC working. It also worked when I had any UEFI formatted USBs installed (12.04, 14.04 live or win8.1.) But, without the USB it would crash.  </p>\n\n<p>I was also getting a UUID device failure error at boot time.  I identified it in the fstab as follows:<br>\nswap was on /dev/sda3 during installation\nUUID=227f2961-6f7e-4027-ac44-e045fc7e026a none            swap    sw              0       0  </p>\n\n<p>I commented it out and rebooted.  The UUID error was gone, but without the USB plugged in, I still got the screen dump problem. </p>\n\n<p>Finally, I turned swapoff in gparted and could boot without the USB plugged in.</p>\n\n<p>Problem:<br>\nWith swapon when Ubuntu boots after Grub, I get a multi-page \"dump\" of some sort that pauses awhile and then scrolls again periodically.  It does this for hours, but I don't have the patience to see when it might end, so I end up hard-crashing to turn off the computer. </p>\n\n<p>This will continue until I insert any USB flash formatted with UEFI plugged in.  I don't have to boot to it, just have it plugged in.  Then, Ubuntu boots with swapoff.  I can then unplug the USB, reboot and everything works.... until I turn swapon again.</p>\n\n<p>Attempted Solutions (1TB drive only):<br>\n - format swap partition\n - delete and recreate swap partition<br>\n - delete sda3 and create sda5 formatted as swap<br>\n - resize swap partition</p>\n\n<p>I tried deleting and moving swap partition around.  No matter what I do, with swapon I get the screen dump when booting and cannot boot without inserting a UEFI USB.  With swapoff, everything seems to work properly.  My 12.04 works the same way as well.</p>\n\n<p>Other than turning swapoff on the Samsung or 3TB drive, I have not experimented with them looking for solutions. </p>\n\n<p>** On my active drive, the 1TB, I did extend the /home partition to 400 GB and create a 500GB partition for backups.  During that change, I tried again to create a swap partition and had the same results. When I find a solution, I will resize the /home partition and add the swap partition.  In the meantime, I will be using the 3TB for experimenting until I find the solution.</p>\n\n<p>*** I read numerous questions about swap problems and find nothing that matches this one.</p>\n"},{"id":623360,"title":"How to re-setup swap partition in GPT system","body":"<p>I installed Ubuntu 14.04 as dual boot on my windows 8 acer desktop pc. I am sure I set up a swap drive but now if I do <code>swapon -s</code> I don't seem to have a swap partition. Upon <code>sudo fdisk -l</code> I get:</p>\n\n<pre><code>WARNING: GPT (GUID Partition Table) detected on '/dev/sda'! The util fdisk doesn't support GPT. Use GNU Parted.\n\n\nDisk /dev/sda: 1000.2 GB, 1000204886016 bytes\n255 heads, 63 sectors/track, 121601 cylinders, total 1953525168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisk identifier: 0x055144b6\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1               1  1953525167   976762583+  ee  GPT\nPartition 1 does not start on physical sector boundary.\n</code></pre>\n\n<p>I have corrected swap problems before on a non-GPT system and would appreciate some help in get my swap re-setup on GPT. \nMy system shows the following:\n<code>sudo gdisk /dev/sda</code> then <code>p</code> shows:</p>\n\n<pre><code>Disk /dev/sda: 1953525168 sectors, 931.5 GiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 531392B4-E90D-44D4-B066-9D0760AAE16B\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 1953525134\nPartitions will be aligned on 2048-sector boundaries\nTotal free space is 3437 sectors (1.7 MiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\n   1            2048         1230847   600.0 MiB   2700  Basic data partition\n   2         1230848         1845247   300.0 MiB   EF00  EFI system partition\n   3         1845248         2107391   128.0 MiB   0C01  Microsoft reserved part\n   4         2107392       161163263   75.8 GiB    0700  Basic data partition\n   5       161163264       317462527   74.5 GiB    0700  Basic data partition\n   6       317462528       348829695   15.0 GiB    2700  Basic data partition\n   7       348829696       387891199   18.6 GiB    0700  \n   8       387891200       583202815   93.1 GiB    8300  \n   9       583202816       598827007   7.5 GiB     8200  \n  10       598827008      1953523711   646.0 GiB   8300\n</code></pre>\n\n<p>My original swap was on no 9 above. </p>\n\n<p><code>blkid</code> shows:</p>\n\n<pre><code>/dev/sda1: LABEL=\"Recovery\" UUID=\"C8D83761D8374D46\" TYPE=\"ntfs\" \n/dev/sda2: LABEL=\"ESP\" UUID=\"B639-EA4B\" TYPE=\"vfat\" \n/dev/sda4: LABEL=\"Acer\" UUID=\"01D0215206ACFEE0\" TYPE=\"ntfs\" \n/dev/sda5: LABEL=\"DATA\" UUID=\"01D0215209012810\" TYPE=\"ntfs\" \n/dev/sda6: LABEL=\"Push Button Reset\" UUID=\"01D021528B28B4C0\" TYPE=\"ntfs\" \n/dev/sda7: UUID=\"6D02-3AEA\" TYPE=\"vfat\" \n/dev/sda8: UUID=\"775b2ce6-e738-40e5-828f-eccdf49cd63a\" TYPE=\"ext4\" \n/dev/sda10: UUID=\"22c6084f-1225-48eb-a295-5d1a0d3d8830\" TYPE=\"ext4\" \n</code></pre>\n"},{"id":623861,"title":"Encrypted swap partition not available","body":"<p>How should I correctly set up my encrypted swap partition?  How can I ensure that the setup persists?</p>\n\n<p>I'm running 14.04 using encrypted home folder.  I noticed that occasionally my machine would grind to a complete halt for a minute or so.  I finally realized that my machine showed that it did not have any swap space set up and my memory was filling up and nothing could be swapped when this happened.</p>\n\n<p><code>/dev/sda6</code> is the partition of interest in my case.</p>\n\n<p><strong>How I Made Swap Work Yesterday</strong></p>\n\n<p>I reformatted the swap partition to <code>linux-swap</code> format via <code>gparted</code> and put its UUID, obtained from <code>blkid /dev/sda6</code>, in the appropriate <code>/etc/crypttab</code> entry.  I then rebooted the system.  Swap file was available and working correctly.</p>\n\n<p><strong>How Swap Stopped Working Again</strong> </p>\n\n<p>Uncertain.</p>\n\n<hr>\n\n<p>Steps I've taken to diagnose this situation, things I modified, etc.:</p>\n\n<ul>\n<li><p><code>free -m</code> shows 0MB total swap space available</p>\n\n<pre><code>dmays@vipertooth:~$ free -m\n             total       used       free     shared    buffers     cached\nMem:          5875       2238       3636        270         98       1007\n-/+ buffers/cache:       1133       4741\nSwap:            0          0          0\n</code></pre></li>\n<li><p><code>gparted</code> shows the swap partition as \"Unknown\"</p></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/lQ1bc.png\" alt=\"gparted screenshot -- /dev/sda6 is partition of interest\"></p>\n\n<ul>\n<li><p><code>blkid /dev/sda6</code> returns exit code 2.</p></li>\n<li><p><code>swapon -s</code> shows only column headers</p>\n\n<pre><code>dmays@vipertooth:~$ swapon -s\nFilename                Type        Size    Used    Priority\n</code></pre></li>\n<li><p><code>swapon -a</code> fails with exit code 255</p>\n\n<pre><code>dmays@vipertooth:~$ sudo swapon -a\n[sudo] password for dmays: \nswapon: /dev/mapper/cryptswap1: stat failed: No such file or directory\n</code></pre></li>\n<li><p>modified <code>/etc/crypttab</code> from yesterday</p>\n\n<pre><code>cryptswap1 UUID=4602a330-ead0-4198-be26-47a5b16666e1 /dev/urandom swap,cipher=aes-cbc-essiv:sha256\n</code></pre></li>\n<li><p>examined <code>fstab</code> -- it appears my /home may not be encrypted???</p>\n\n<pre><code># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n# / was on /dev/sda5 during installation\nUUID=b09ec379-a94d-4905-b4ac-2f5c62b5605d /               ext4    errors=remount-ro 0       1\n# /home was on /dev/sda7 during installation\nUUID=d57bf732-77df-44fe-b547-d15a48dd1857 /home           ext4    defaults        0       2\n# swap was on /dev/sda6 during installation\n/dev/mapper/cryptswap1 none swap sw 0 0\n</code></pre></li>\n</ul>\n"},{"id":294312,"title":"Swap Not available in system monitor","body":"<p>i make a swap partition with 5 GB but i notice always that it is marked as \"not available\" on the system monitor plus when i do operations consume the whole RAM ubuntu starts to kill to relief the RAM with no use at all for SWAP</p>\n\n<p>i typed in terminal <code>sudo mountall -v</code>\nand this what i get </p>\n\n<p><code>mounted event handled for /proc/sys/fs/binfmt_misc\nlocal 1/5 remote 0/0 virtual 1/12 swap 0/1\nmounted event handled for /sys\nlocal 1/5 remote 0/0 virtual 2/12 swap 0/1\nmounted event handled for /sys/fs/fuse/connections\nlocal 1/5 remote 0/0 virtual 3/12 swap 0/1\nmounted event handled for /sys/kernel/security\nlocal 1/5 remote 0/0 virtual 4/12 swap 0/1\nmounted event handled for /dev/pts\nlocal 1/5 remote 0/0 virtual 5/12 swap 0/1\nmounted event handled for /run/lock\nlocal 1/5 remote 0/0 virtual 6/12 swap 0/1\nmounted event handled for /run/shm\nlocal 1/5 remote 0/0 virtual 7/12 swap 0/1\nmounted event handled for /home/ahmed/.gvfs\nlocal 2/5 remote 0/0 virtual 7/12 swap 0/1\nmounted event handled for /media/UbuntuGeneralFiles\nlocal 3/5 remote 0/0 virtual 7/12 swap 0/1\nmounted event handled for /media/ONCE\\040AND\\040FOR\\040ALL\nlocal 4/5 remote 0/0 virtual 7/12 swap 0/1\nmounting event handled for /tmp\nmounted event handled for /dev\nlocal 4/5 remote 0/0 virtual 8/12 swap 0/1\nmounted event handled for /proc\nlocal 4/5 remote 0/0 virtual 9/12 swap 0/1\nmounted event handled for /sys/kernel/debug\nlocal 4/5 remote 0/0 virtual 10/12 swap 0/1\nmounted event handled for /run\nlocal 4/5 remote 0/0 virtual 11/12 swap 0/1\nmounted event handled for /home/ahmed\nvirtual finished\nremote finished\nlocal 4/5 remote 0/0 virtual 12/12 swap 0/1\nmounted event handled for /tmp\nlocal finished\nAll filesystems mounted\nlocal 5/5 remote 0/0 virtual 12/12 swap 0/1\n</code> </p>\n\n<p>this is fstab output</p>\n\n<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\nproc            /proc           proc    nodev,noexec,nosuid 0       0\n# / was on /dev/sdf1 during installation\nUUID=34c3c29b-e5dd-4ed7-a49b-616afded4704 /               ext4    errors=remount-ro 0       1\n# swap was on /dev/sdf2 during installation\n#UUID=9a7f0b9c-9be9-4074-8957-afcf25072bbe none            swap    sw              0       0\n/dev/mapper/cryptswap1 none swap sw 0 0\n/dev/disk/by-label/swap /mnt/swap auto nosuid,nodev,nofail 0 0\n/dev/sdb2 /mnt/sdb2 ext4 nosuid,nodev,nofail 0 0\n</code></pre>\n\n<p>this is the output of <code>sudo blkid</code>\n`</p>\n\n<pre><code>  /dev/sda1: UUID=\"AC9C59EA9C59B016\" TYPE=\"ntfs\" \n/dev/sda2: LABEL=\"System\" UUID=\"C26CFB2E6CFB1C3B\" TYPE=\"ntfs\" \n/dev/sda3: LABEL=\"ONCE AND FOR ALL\" UUID=\"3EF60BD0F60B86FD\" TYPE=\"ntfs\" \n/dev/sdb1: UUID=\"34c3c29b-e5dd-4ed7-a49b-616afded4704\" TYPE=\"ext4\" \n/dev/sdb2: LABEL=\"Swap\" UUID=\"21cf04d1-6c18-4ab7-a8c3-ec435ab3f43e\" TYPE=\"ext4\" \n/dev/sdb5: LABEL=\"UbuntuGeneralFiles\" UUID=\"E636244736241AD7\" TYPE=\"ntfs\" \n/dev/sr1: LABEL=\"Etisalat 3.5G\" TYPE=\"iso9660\" \n</code></pre>\n\n<p>`\nsudo fdisk -l:</p>\n\n<pre><code>Disk /dev/sda: 1000.2 GB, 1000203804160 bytes\n255 heads, 63 sectors/track, 121601 cylinders, total 1953523055 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0d91aeaa\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048      206847      102400    7  HPFS/NTFS/exFAT\n/dev/sda2          206848   209717247   104755200    7  HPFS/NTFS/exFAT\n/dev/sda3       209717248  1953519615   871901184    7  HPFS/NTFS/exFAT\n\nDisk /dev/sdb: 250.1 GB, 250059350016 bytes\n64 heads, 32 sectors/track, 238475 cylinders, total 488397168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000001\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048   236331007   118164480   83  Linux\n/dev/sdb2       236333056   244148221     3907583   82  Linux swap / Solaris\n/dev/sdb3       244148222   488396799   122124289    5  Extended\n/dev/sdb5       244148224   488396799   122124288    7  HPFS/NTFS/exFAT`\n</code></pre>\n\n<p>i dont know what is going on actually , so any help ? </p>\n"},{"id":595957,"title":"Swapping disks between different systems","body":"<p>I am going to swap my laptop's drive for my desktop's drive. Both run a 64bit 14.04 distro. My laptop has an Intel Celeron CPU while my desktop runs on a AMD A6 CPU What are some things that I need to know? Do I need to make any changes in any part of the OS or will linux kernel take care of swapping modules as necessary?</p>\n\n<p>Thanks for your time.</p>\n"},{"id":497099,"title":"swap partition shows as unknown in gparted","body":"<p>My swap partition does not seem to be operating properly. It worked fine yesterday, but seems to be inactive today. Per <code>lsb_release -a</code>, running Ubuntu 14.04 LTS trusty on a Compaq CQ62, dual booting Windows 7. I was going to post some images, but the site would not let me without 10 reputation. Nice. That makes things complicated.</p>\n\n<p>So instead, here is what I did:</p>\n\n<ol>\n<li>I ran <code>swapon -a</code> and <code>swapon -s</code> first. </li>\n<li>I then ran GParted to see what was going on with my swap partition.</li>\n<li>I dug around this site and figured out that I should look at <code>fstab</code> and compare it to <code>blkid</code>. </li>\n</ol>\n\n<p>Here are the details on what I found on each of these steps: </p>\n\n<p>Did <code>swapon -a</code> with no error returned.</p>\n\n<p><code>swapon -s</code> shows:</p>\n\n<pre><code>Filename                   Type       Size     Used    Priority    \n/dev/mapper/cryptswap1    partition   2025468    56     -1\n</code></pre>\n\n<p>GParted showed <code>unknown</code> for the swap partition and would not let me format as swap (launched it using sudo, password). Since I cannot just show you a screen cap of gparted, here is what <code>parted print</code> shows:</p>\n\n<pre><code>Model: ATA WDC WD2500BEVT-6 (scsi)    \nDisk /dev/sda: 250GB\nSector size (logical/physical): 512B/512B    \nPartition Table: msdos\n\nNumber  Start   End     Size    Type      File system  Flags    \n 1      210MB   73.2GB  73.0GB  primary   ntfs         boot\n 2      73.2GB  250GB   177GB   extended\n 5      73.2GB  248GB   175GB   logical   ext4    \n 6      248GB   250GB   2074MB  logical\n</code></pre>\n\n<p>That last one, number 6, is supposed to be a swap partition. Linux lives on 5, of course, which is part of the same extended partition 2 that the swap partition is also on. Windows lives on 1. Grub does work and dual boots defaulting to Linux. </p>\n\n<p>In <code>blkid</code>, it shows a different ID from <code>fstab</code> and calls it <code>cryptswap</code> instead of just swap.</p>\n\n<pre><code>root@darkstar1:/home/darkstar# blkid\n/dev/sda1: UUID=\"A84E02644E022C1E\" TYPE=\"ntfs\" \n/dev/sda5: UUID=\"c8635db4-5951-47fc-8f84-19b706a2e9ec\" TYPE=\"ext4\" \n/dev/mapper/cryptswap1: UUID=\"9b77fefd-115c-4bf2-8e17-52d1bcf58fee\" TYPE=\"swap\"\n</code></pre>\n\n<p><code>fstab</code> looks like this:</p>\n\n<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n\n# / was on /dev/sda5 during installation\nUUID=c8635db4-5951-47fc-8f84-19b706a2e9ec /               ext4    errors=remount-ro 0       1\n\n# swap was on /dev/sda6 during installation\n#UUID=c44f68cd-e433-462f-81dc-16b8e52c7abb none            swap    sw              0       0\n/dev/mapper/cryptswap1 none swap sw 0 0\n</code></pre>\n\n<p>Is <code>cryptswap1</code> the same as my swap partition? Do I need to change my <code>fstab</code> to show the same ID the <code>blkid</code> is showing for the <code>cryptswap1</code>? I need swap, as my computer only has 2 GB of ram and easily locks up when playing video online. When the swap was running yesterday, it ran smoothly with no problems whatsoever. I had just replaced my older Ubuntu install with a Xubuntu install. Windows is on the first partition, Linux and the swap are supposed to be on the second extended partition. </p>\n\n<p>I would rather have my home drive encrypted. Xubuntu did not give me a choice to NOT have it encrypted when I installed it (the boxes were prechecked in the installer and I could not uncheck them). So it should be encrypted. </p>\n\n<p>I think this might have something to do with my old install of Ubuntu (I was testing KDE, XFCE and Gnome and decided to just reinstall with Xubuntu since the swap NEVER worked on the original install and I had numerous issues with the other window managers - XFCE really is the best).</p>\n"},{"id":359258,"title":"Swap not available on System Monitor","body":"<p>I had a swap partition of 1GB (RAM 1GB, Ubuntu 12.04 lts). Now swap is not shown on System Monitor neither can I hibernate my pc (sudo pm-hibernate).</p>\n\n<p><strong>blkid output:</strong></p>\n\n<pre><code>/dev/sda1: UUID=\"B8B4FBB1B4FB706C\" TYPE=\"ntfs\" \n/dev/sda2: UUID=\"2ea7d608-2d89-4e41-9436-d05cb3ce8871\" TYPE=\"swap\" \n/dev/sda3: UUID=\"3219d03a-67e4-454b-8ce7-a27831846e35\" TYPE=\"ext4\" \n/dev/sda5: LABEL=\"Softwares\" UUID=\"AC1CC3301CC2F47C\" TYPE=\"ntfs\" \n/dev/sda6: LABEL=\"Education\" UUID=\"1E103E6C103E4B53\" TYPE=\"ntfs\" \n/dev/sda7: LABEL=\"Recreation\" UUID=\"2CC8D181C8D149AA\" TYPE=\"ntfs\" \n/dev/sda8: LABEL=\"Miscellaneous\" UUID=\"0274D6B174D6A727\" TYPE=\"ntfs\" \n</code></pre>\n\n<p><strong>/etc/fstab</strong></p>\n\n<pre><code># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\nproc            /proc           proc    nodev,noexec,nosuid 0       0\n# / was on /dev/sda6 during installation\nUUID=3219d03a-67e4-454b-8ce7-a27831846e35 /               ext4    errors=remount-ro 0       1\n# swap was on /dev/sda5 during installation\nUUID=2ea7d608-2d89-4e41-9436-d05cb3ce8871 none            swap    sw              0       0\n</code></pre>\n\n<p><strong>free -m</strong></p>\n\n<pre><code>     total       used       free     shared    buffers     cached\nMem:           991        867        123          0         27        418\n-/+ buffers/cache:        421        569\nSwap:            0          0          0\n</code></pre>\n\n<p><strong>cat /proc/swaps</strong></p>\n\n<pre><code>Filename                Type        Size    Used    Priority\n</code></pre>\n\n<p><strong>fdisk -l</strong></p>\n\n<pre><code>Disk /dev/sda: 160.0 GB, 160041885696 bytes\n255 heads, 63 sectors/track, 19457 cylinders, total 312581808 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x9f369f36\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *          63    31471334    15735636    7  HPFS/NTFS/exFAT\n/dev/sda2        31471616    33470447      999416   82  Linux swap / Solaris\n/dev/sda3        33472512    62539775    14533632   83  Linux\n/dev/sda4        62541045   312592769   125025862+   f  W95 Ext'd (LBA)\n/dev/sda5        62541108   125066024    31262458+   7  HPFS/NTFS/exFAT\n/dev/sda6       125066088   187591004    31262458+   7  HPFS/NTFS/exFAT\n/dev/sda7       187591068   250115984    31262458+   7  HPFS/NTFS/exFAT\n/dev/sda8       250116048   312576704    31230328+   7  HPFS/NTFS/exFAT\n</code></pre>\n\n<p><strong>swapon --all</strong></p>\n\n<pre><code>swapon: /dev/sda2: swapon failed: Invalid argument\n</code></pre>\n\n<p><strong>dmesg | grep -A 5 -B 5 -i swap</strong></p>\n\n<pre><code>[    9.487404] EXT4-fs (sda3): ext4_orphan_cleanup: deleting unreferenced inode 131645\n[    9.487413] EXT4-fs (sda3): ext4_orphan_cleanup: deleting unreferenced inode 131330\n[    9.487418] EXT4-fs (sda3): 16 orphan inodes deleted\n[    9.487420] EXT4-fs (sda3): recovery complete\n[    9.578600] EXT4-fs (sda3): mounted filesystem with ordered data mode. Opts: (null)\n[   20.580539] Swap area shorter than signature indicates\n[   20.588363] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready\n[   20.619443] udevd[330]: starting version 175\n[   20.649959] lp: driver loaded but no devices found\n[   20.662972] [drm] Initialized drm 1.1.0 20060810\n[   20.675515] i915 0000:00:02.0: setting latency timer to 64\n--\n[   72.288573] PM: thaw of drv:sr dev:3:0:0:0 complete after 178.143 msecs\n[   72.288578] PM: thaw of drv:scsi_device dev:3:0:0:0 complete after 178.136 msecs\n[   72.299677] PM: thaw of drv:scsi_device dev:2:0:0:0 complete after 189.270 msecs\n[   72.309473] PM: thaw of devices complete after 202.763 msecs\n[   72.309668] PM: writing image.\n[   72.309670] PM: Cannot find swap device, try swapon -a.\n[   72.309699] PM: Cannot get swap writer\n[   72.329896] Restarting tasks ... done.\n[   72.331777] PM: Basic memory bitmaps freed\n[   72.331792] video LNXVIDEO:00: Restoring backlight state\n[   72.420048] option1 ttyUSB0: option_instat_callback: error -84\n[   72.804047] option1 ttyUSB0: option_instat_callback: error -84\n--\n[  145.960625] sd 7:0:0:0: Attached scsi generic sg2 type 0\n[  145.972036] sd 7:0:0:0: [sdb] Attached SCSI removable disk\n[  172.430508] PPP BSD Compression module registered\n[  172.455583] PPP Deflate Compression module registered\n[  332.260789] type=1400 audit(1381814763.342:27): apparmor=\"DENIED\" operation=\"capable\" parent=1 profile=\"/usr/sbin/cupsd\" pid=636 comm=\"cupsd\" pid=636 comm=\"cupsd\" capability=36  capname=\"block_suspend\"\n[ 1913.030998] Swap area shorter than signature indicates\n[ 2022.530155] type=1400 audit(1381816453.610:28): apparmor=\"DENIED\" operation=\"capable\" parent=1 profile=\"/usr/sbin/cupsd\" pid=636 comm=\"cupsd\" pid=636 comm=\"cupsd\" capability=36  capname=\"block_suspend\"\n[ 4062.729509] Swap area shorter than signature indicates\n</code></pre>\n\n<p>Please help. Thanks in advance.</p>\n\n<hr>\n\n<p><strong>df -h</strong></p>\n\n<pre><code>Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda3        14G  6.1G  7.0G  47% /\nudev            488M  4.0K  488M   1% /dev\ntmpfs           199M  868K  198M   1% /run\nnone            5.0M  4.0K  5.0M   1% /run/lock\nnone            496M  224K  496M   1% /run/shm\n</code></pre>\n"},{"id":91292,"title":"Is my Swap (cryptswap) partition working properly?","body":"<p>I have a feeling it's not.  I'm running Ubuntu 11.10 on a Toshiba Satellite L305-S5944 Laptop.  Says I have 1.8 GiB of Ram (thought I had 2).  When I look at the Resources tab in the System Monitor the Swap always says 0 bytes of 0 bytes.  I tried reinstalling Ubuntu 11.10, but still says the same.  Both times I choose the encrypt home directory option during install.  Some times when I'm booting it says some thing like \"could not mount cryptswap\".  Tried to get a screen shot but now it's not doing it.  When I look at my hard disk in the Disk Utility it shows 3 partitions created during install: 248 GB ext 4, Extended 2.0 GB, and Unknown 2.0 GB.  As you can see on the screen shots the partition called Unknown, has the Partition Type: Linux swap (0x82).  Sorry wouldn't let me post images.</p>\n\n<p>Been having problems with crashes and slow downs pretty regularly.  Also I don't see a hibernate option when I click on the button in the upper right corner.  So does it look like my swap space is not functioning properly?</p>\n\n<p>It's my understanding that the swap space is encrypted.  Is this why it's not registering in the System Monitor or is that indicating a problem?</p>\n\n<p>Is there any way to test if the swap is functioning? </p>\n\n<p>If it's not working, how would I make it work, looks like it's there already, just not working possibly?</p>\n\n<p>The output of \"free -m\" is: </p>\n\n<pre><code>                total used free shared buffers cached \nMem:            1883  1729 154  0      21      634 \n-/+ buffers/cache:    1073 810 \nSwap:           0     0    0 \n</code></pre>\n\n<p>Not sure whether it's LUKS or ecryptfs. All I did was click the check mark box that says \"encrypt my home directory\" or something similar during the normal installation process. I think it's ecryptfs cause I just checked the hidden files in my home folder and there's a hidden folder called \".ecryptfs\"</p>\n\n<p>ran blkid and the output was: </p>\n\n<pre><code>/dev/sda1: UUID=\"92a6b5e8-695f-4d54-a389-d5dd7c7b862e\" TYPE=\"ext4\" \n/dev/sdc1: LABEL=\"FreeAgent GoFlex Drive\" UUID=\"04684AE3684AD2DA\" TYPE=\"ntfs\" \n</code></pre>\n\n<p>sdc1 is my external HD. Also tried GParted and in addition to the sda1 it shows a sda 2 with a File System: \"extended\" and Size 1.87 GiB. It also shows a parition, sda5, nested inside sda2, with a File System \"unknown\" and size 1.87 GiB. Though next to the sda5 there is a red cirle with a \"!\" inside.</p>\n\n<p>When I right on it and select \"information\" it says Status: Not mounted and at the bottom Warning: Unable to detect file system! Possible reasons are: -The file system is damaged -The file system is unknown to GParted -There is no file system available (unformatted) -The device entry /dev/sda5 is missing. Did I do something wrong during the install? I thought when I choose erase and use the whole hard drive that Ubuntu would create the swap automatically. Looks like it's there there but not working for some reason. </p>\n\n<p>My /etc/fstab file looks like this:</p>\n\n<pre><code># /etc/fstab: static file system information.\n#\n# Use 'blkid' to print the universally unique identifier for a\n# device; this may be used with UUID= as a more robust way to name devices\n# that works even if disks are added and removed. See fstab(5).\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\nproc            /proc           proc    nodev,noexec,nosuid 0       0\n# / was on /dev/sdb1 during installation\nUUID=92a6b5e8-695f-4d54-a389-d5dd7c7b862e /               ext4    errors=remount-ro 0       1\n# swap was on /dev/sdb5 during installation\n#UUID=088145ec-4c28-43e4-b3de-9f6971b08704 none            swap    sw              0       0\n/dev/mapper/cryptswap1 none swap sw 0 0\n</code></pre>\n\n<p>The output of <code>sudo fdisk -l</code> is:</p>\n\n<pre><code>Disk /dev/sda: 250.1 GB, 250059350016 bytes\n255 heads, 63 sectors/track, 30401 cylinders, total 488397168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0001d8e9\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   484472831   242235392   83  Linux\n/dev/sda2       484474878   488396799     1960961    5  Extended\n/dev/sda5       484474880   488396799     1960960   82  Linux swap / Solaris\n\nDisk /dev/sdc: 640.1 GB, 640135028224 bytes\n1 heads, 63 sectors/track, 19845455 cylinders, total 1250263727 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x2bc1313e\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdc1              63  1250258687   625129312+   7  HPFS/NTFS/exFAT\n</code></pre>\n\n<p>I noticed that my swap in the fstab was commented out so I deleted the # to uncomment and restarted though still not working.</p>\n"},{"id":145399,"title":"Swap partition does not mount on restart","body":"<p>I am using Ubuntu 12.04 and was trying to enable Hibernate.I came across that one should have Swap Partition equivalent to RAM in system so created one.\nMy file system information on</p>\n\n<p><code> sudo fdisk -l /dev/sda</code><br/></p>\n\n<pre>\nDisk /dev/sda: 160.0 GB, 160041885696 bytes\n255 heads, 63 sectors/track, 19457 cylinders, total 312581808 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x000b11e9\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1              63       96389       48163+  de  Dell Utility\n/dev/sda2           98304    84097023    41999360   83  Linux\n/dev/sda3        84097024   167878655    41890816    7  HPFS/NTFS/exFAT\n/dev/sda4       167879311   312575999    72348344+   f  W95 Ext'd (LBA)\n/dev/sda5       167879313   287396152    59758420    7  HPFS/NTFS/exFAT\n/dev/sda6       287397888   310425599    11513856    7  HPFS/NTFS/exFAT\n/dev/sda7       310427648   312575999     1074176   82  Linux swap / Solaris\n</pre>\n\n<p>I am able to hibernate my system once I swapon my /dev/sda7 partition.</p>\n\n<p>For that I do,\n<code>mkswap /dev/sda7 </code><br>\nand <code>swapon /dev/sda7</code>  </p>\n\n<p>I even added entry in /etc/fstab</p>\n\n<p><code>UUID=\"xxx\" /dev/sda7 none swap sw 0 0</code></p>\n\n<p>Everything happens successfully including <code>sudo pm-hibernate</code>\nBut when I restart my system after Hibernate its not able to load my swap partition.</p>\n\n<p>I checked using Gparted Partition Editor then for /dev/sda7 the file system becomes unknown.\nPlease help in resolving this.</p>\n"}]}]
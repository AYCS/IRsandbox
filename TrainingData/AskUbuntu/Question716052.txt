[{"id":716052,"title":"xUbuntu visudo malfunction ldap tutorial","body":"<p>I'm trying to make some simple modifications to my sudo file. I execute the following command in my terminal:</p>\n\n<pre><code>sudo visudo\n</code></pre>\n\n<p>What happens next is my terminal taking a very prolonged break where there is no respond to the command. I can type into the terminal but the system is still waiting for the response to my visudo command so nothing I type in is input recognised for execution.</p>\n\n<p>When eventually there is some feedback, it prompts for my password. I provide it but my password is printed out in plain text which is obviously wrong. Then the system goes away on another prolonged hiatus.</p>\n\n<p>Can anyone help me with this issue, please?</p>\n\n<p>UPDATE:</p>\n\n<p>I've just discovered similar issues of long delays with other basic commands like the listing command. It seems my issue may not be necessarily related to visudo.\nI just tried executing the following and got no response and my terminal was useless to me for far, far too long:</p>\n\n<pre><code>ls -l /home\n</code></pre>\n\n<p>For context, I'm trying to follow <a href=\"https://www.digitalocean.com/community/tutorials/how-to-authenticate-client-computers-using-ldap-on-an-ubuntu-12-04-vps\" rel=\"nofollow\">this</a> tutorial and installed the following two packages, just incase anyone recognises them a source of instability:</p>\n\n<pre><code>sudo apt-get install libpam-ldap nscd\n</code></pre>\n\n<p>PLEASE Help!</p>\n","related_questions":[{"id":708669,"title":"LDAP not working properly with LAM and lamdaemon","body":"<p>So me and my team are responsible for administrating computer labs for students back at my university. For that matter, we have an Ubuntu Server 14.04 as a Lightweight Directory Access Protocol (LDAP) and Network File System (NFS) server, giving them accounts with remote access to their files to work in any computer within those labs.</p>\n\n<p>To easily handle the administration and organization of these accounts, we use the LDAP Account Manager (LAM), the web front-end. And here comes the <strong>issue</strong>: the LAM is not capable of doing his <em>whole purpose</em>. Through it, we create user accounts, for example. So far so good. But we have to <em>manually</em> log into de LDAP server and create the user's home directory for it to properly work. That is, until now, the lamdaemon was not configured, so we have to manually make the necessary changes in the server. You could say that it was not the priority when the server was implemented and now we are giving it attention.</p>\n\n<p>That being said, we started trying to make the lamdaemon work. It is installed on the server, and the LAM <strong>admin</strong> account was modified (giving it the attributes \"PosixAccount\" and \"id\") to be able to run the lamdaemon.pl. It is able to run, but not as expected. Now I will try to actually show what are the errors and the configurations of the server.</p>\n\n<ul>\n<li>Users accounts have their home directories created at <code>/export/home</code>.</li>\n<li>For the automount, we have set the configuration files <code>auto.master</code> and <code>auto.home</code> as follows:</li>\n</ul>\n\n<p><strong>auto.master</strong>:</p>\n\n<pre>\n/home   /etc/auto.home\n+auto.master\n</pre>\n\n<p><strong>auto.home</strong>:</p>\n\n<pre>\n *    192.168.1.254,192.168.2.254:/export/home/&\n</pre>\n\n<ul>\n<li>A user <code>foo</code> has it's entry as follows:</li>\n</ul>\n\n<pre>\ndn: cn=foo,ou=bar,ou=group,dc=server,dc=at,dc=this,dc=location\ncn: foo\ngidnumber: 2000\nhomedirectory: /home/foo\nloginshell: /bin/bash\nobjectclass: account\nobjectclass: posixAccount\nobjectclass: top\nuid: foo\nuidnumber: 22273\nuserpassword: {MD5}aY3BnUicTk23PiinE+qwew==\n</pre>\n\n<p>These are some of the configurations of our working LDAP and NFS server, but without the lamdaemon feature. As you may have noticed, the user entry says it's home directory is located at <code>/home/foo</code> but I told you that it actually is at <code>/export/home/foo</code>.</p>\n\n<p>So we figured this was a problem for the lamdaemon after we had it configured and tested it by creating a user (using the LAM) with the correct home location according to the server. The user is created and the home folder too (without the need of manually creating the folder. It's what we want!). All the permissions and ownership are correct. When trying to login with the user, it logs in, but the following error is showed:</p>\n\n<pre>\nCould not chdir to home directory /export/home/foo: Permission denied\n-bash: /export/home/foo/.bash_profile: Permission denied\n</pre>\n\n<p>And his directory in not mounted, therefore the user is not able to initiate a graphic session. That's the main issue. The lamdaemon seems to be working but something is off with the server configurations that is making this error happen. And we don't really know what is causing it, or where it could be at this point, so I'm sorry for this long text and possibly short with useful information that could help. If there's anything relevant missing, please leave a comment so I can get it.</p>\n\n<p>Any tips or suggestions are highly welcome.</p>\n"},{"id":646675,"title":"LDAP client remote authentication","body":"<p>I have configured LDAP server in ubunt 14.04 on vmware platform, it is working fine when i connect client through ssh or direct console, and for the users we have configured mate remote desktop connection, ldap authentication is not working for the remote session, can anyone help me to resolve this issue please</p>\n"},{"id":625821,"title":"Must use &#39;visudo&#39;?","body":"<p>In /etc/sudoers, it is said \"This file MUST be edited with the 'visudo' command as root.\" My question is why must this file be edited with 'visudo'. </p>\n\n<p>It seems I was able to edit the file successfully with gedit, by issuing:\n<code>sudo gedit /etc/sudoers</code>.</p>\n\n<p>If I was able to edit it with gedit, why must I use <code>visudo</code>?</p>\n"},{"id":519215,"title":"LDAP mounting home over network","body":"<p>Guys i am working with LDAP and was successful in making the user logging in using PAM but how can i sync the directories so that if the user logs in and saves any data in his home folder can access all his data by logging in anywhere in the network.\nUltimately i want that the LDAP user can access his home data anywhere in the network.</p>\n"},{"id":213575,"title":"How to promote ldap user to adminstrator role?","body":"<p>I am doing this project to centralize the auth from openldap, I trap the problem below:\nnow my ldap users asign to the sudo group(command 'id'),so I can do all the implent from \nthe command terminal, but in the user-account box (right top desktop screen),it display standard role for my ldap user, every time ldap user change his password, they should type the administaror's password,but its password unkown to the ldap users.</p>\n\n<p>Can promote ldap user to adminstrator role ? Any script method ? I have 500+ ldap user\nauth.</p>\n"},{"id":351829,"title":"visudo crashing on making changes","body":"<p>I am attempting to add an entry to <code>visudo</code>:</p>\n\n<pre><code>admin ALL=(ALL) /bin/kill\n</code></pre>\n\n<p>I have attempted to make changes to this in the past but crashed the visudo file.  Can someone assist in telling me where exactly the command above should be placed?</p>\n"},{"id":47445,"title":"Massive Xubuntu desktop malfunction","body":"<p>I'm using Xubuntu 11.04. Before everything worked fine, but when booting today the following happened:</p>\n\n<ol>\n<li><p>Window focus does not leave the first-opened program. This means that if I keep Firefox open, and open a terminal, window focus will never be transferred to the terminal.</p>\n\n<p>(EDIT: if I open a terminal first, and then open Firefox, Firefox steals focus) </p></li>\n<li><p>Window menus have disappeared. The maximize, minimize, etc., buttons and menu are gone.</p></li>\n<li><p>In Xfce Settings Manager, the \"Window Manager\" settings window is empty. There is just a gray screen there, so I cannot modify any window settings.</p></li>\n<li><p>The keyboard shortcuts I had previously defined using the Settings Manager do no longer work. Further, <kbd>ALT</kbd>-<kbd>TAB</kbd> no longer works for cycling between windows.</p></li>\n<li><p>The mouse pointer does not show when I first log in. I have to log out and log in again (with an invisible pointer) before the mouse shows itself.</p>\n\n<p>EDIT:</p></li>\n<li>I cannot re-size or move the Thunderbird window, but I can move the Firefox window</li>\n</ol>\n\n<p>What can I do to troubleshoot this?</p>\n"},{"id":175387,"title":"Is there a simple tutorial for ldap?","body":"<p>I'm looking for something targeted at a complete beginner.  It's not setting up the package itself that I'm concerned with, but rather a way to set up a schema.</p>\n"},{"id":404038,"title":"Xubuntu visudo sudoers edit not working","body":"<p>I have been trying to specify a script that I would like to run without being prompted for a password. After a number of google and stack searches and a number of different syntax changes, I still cannot get it to work. One peculiar thing is that when typing <code>sudo visudo</code> nano is opened to edit the file. I never specified nano as the editor, but I may have first edited the file with nano. Would that make nano the default editor? If so, could that cause problems. Thanks for the help.</p>\n\n<p>Here is my sudoers file.</p>\n\n<pre><code>#\n# This file MUST be edited with the 'visudo' command as root.\n#\n# Please consider adding local content in /etc/sudoers.d/ instead of\n# directly modifying this file.\n#\n# See the man page for details on how to write a sudoers file.\n#\nDefaults        env_reset\nDefaults        mail_badpass\nDefaults        secure_path=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:$\n\n# Host alias specification\n\n# User alias specification\n\n# Cmnd alias specification\n\n# User privilege specification\nroot    ALL=(ALL:ALL) ALL\n\n# Members of the admin group may gain root privileges\n%admin ALL=(ALL) ALL\n\n# Allow members of group sudo to execute any command\n%sudo   ALL=(ALL) ALL\npat     ALL=NOPASSWD: /home/pat/test.sh\n\n# See sudoers(5) for more information on \"#include\" directives:\n\n#includedir /etc/sudoers.d\n</code></pre>\n"},{"id":404991,"title":"Lost visudo - I seem to have lost visudo, to my great surprise","body":"<p>Lost <code>visudo</code></p>\n\n<p>I seem to have lost <code>visudo</code>, to my great surprise.  I'm trying to add to <code>/etc/sudoers</code> or <code>/etc/sudoers.d</code> but when I try and run <code>visudo</code> as root I get this</p>\n\n<pre><code>sudo: visudo: command not found\n</code></pre>\n\n<p>when I search I get this</p>\n\n<pre><code>whereis visudo \nvisudo: /usr/share/man/man8/visudo.8.gz\n</code></pre>\n\n<p>So the packed file is there but for some reason was either not unpacked or has been lost. <code>sudo</code> works fine.</p>\n\n<p>If I try <code>visudo</code> as a command I get this</p>\n\n<pre><code>visudo \nThe program 'visudo' can be found in the following packages: \n * sudo \n * sudo-ldap \nTry: sudo apt-get install &lt;selected package&gt;\n</code></pre>\n\n<p>I'm unsure if trying  <code>sudo apt-get install sudo</code> will solve the problem or just give more problems. </p>\n"}]}]
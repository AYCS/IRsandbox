[{"id":715885,"title":"Email Notification for Ubuntu Auto-mount USB Drives","body":"<p>I have Ubuntu 14.04.2 LTS server with attached 1TB USB Hard Drive and I am looking for that a script or a tool for Ubuntu Server to check the USB drive's status and automatically send a status to admin email ids please advise.</p>\n","related_questions":[{"id":650336,"title":"Bash script sends mail from one server but not the other","body":"<p>I have a bash script that is running on two, virtually identical servers. This script sends email essentially like this:</p>\n\n<p>( commands that generate some output ) | /usr/bin/mailx -s 'Some subject line' recipient@domain.com</p>\n\n<p>This script is running on two Ubuntu 14.04 servers. The script runs successfully on both servers. By that I mean that the activities inside the (...) that perform backups, etc. complete, and I can see the results of these operations are there on both servers. However, I get the email reporting that the job has run from one of the servers but not from the other.</p>\n\n<p>Background info: Both of these servers were recently upgrade from Ubuntu 12.04 and these scripts were installed on these servers as part of that upgrade. Prior to that, these same scripts were running on two other servers that were running Ubuntu 10.04, where both scripts were running and both scripts were sending me email.</p>\n\n<p>One more thing about the email config - I think (would like) for this mail to be delivered through an email server on a third server that is also running Ubuntu 14.04 with postfix; however, the email headers in the message that I am receiving indicate that the message came directly from the root account on the server where the script is running (under root as a cron job).</p>\n\n<p>I feel that I have missed a step setting up one of these new servers, but I cannot find it.</p>\n"},{"id":648684,"title":"Nagios Core Version 4.0.8 stopped sending automatic email notification after IP change","body":"<p>I have Nagios Core Version 4.0.8 installed on Ubuntu 14.04.1 LTS.\nI changed the IP if the server and after that nagios wont send me automatic notifications, I have send email from root and nagios user by using mail -s \"hello\" \"email@address\" &lt;&lt; EOF\nmessage\nEOF</p>\n\n<p>And I the email from both users\nWhen I run which mail I get /usr/<strong>bin</strong>/mail but I saw this in the logs</p>\n\n<pre><code>[1436932929] Warning: Notifying contact 'nagiosadmin' of service 'SSH' on host 'store9' by command '/usr/bin/printf \"%b\" \"***** Nagios *****\\n\\nNotification Type: RECOVERY\\n\\nService: SSH\\nHost: store9 kringlan\\nAddress: 192.168.175.1\\nState: OK\\n\\nDate/Time: Wed Jul 15 04:01:39 GMT 2015\\n\\nAdditional Info:\\n\\nSSH OK - OpenSSH_4.3 (protocol 2.0)\\n\" | /usr/**sbin**/sendmail -s \"** RECOVERY Service Alert: store9 kringlan/SSH is OK **\" email@address' timed out after 0.00 seconds\n</code></pre>\n\n<p>But no email.... I tried to change the /usr/sbin/sendmail to /usr/bin/sendmail\nbut got an error </p>\n\n<p>I have rebooted the server, done service sendmail stop/start and service nagios restart</p>\n\n<p>anyone have an idea what more I can try ?</p>\n"},{"id":329524,"title":"Auto backup when USB Drive inserted","body":"<p>If this is not the best place to post this question, can you please direct me to a more appropriate place to post this.</p>\n\n<p><strong>What I am trying to do:</strong></p>\n\n<p>I have a USB drive, it is <code>fat32</code> and its name is <code>JavaClasses</code>. Whenever I plug it in it is mounted and its accessible path is <code>/media/bill/JavaClasses</code>. I have a script that when I run it, it checks to see if the <code>JavaClasses</code> directory exists, if it does, it will make a directory with this format, <code>yyyymmddhhmm</code>.  Then the script will copy (backup) my eclipse directory to this new directory.</p>\n\n<p>I have created a new rule under <code>/etc/udev/rules.d/85-javaclasses.rules</code>.  This will launch the above script.  The script has a 2 second delay to allow the mounting.</p>\n\n<p><strong>Current situation:</strong></p>\n\n<p>The script runs fine if I run in manually. It does not run automatically when the drive is plugged in.</p>\n\n<p><strong>The command line and info:</strong></p>\n\n<p>This is the command in the <code>85-javaclasses.rules</code>.</p>\n\n<pre><code>SUBSYSTEMS==\"usb\", ACTION==\"add\", ATTRS{idVendor}==\"0930\", ATTRS{idProduct}==\"6545\", RUN+=\"/home/bill/bin/javaclasses.sh\"\n</code></pre>\n\n<p>This is what I get when I run </p>\n\n<pre><code>udevadm info --attribute-walk --name /dev/sdb1\n\n\nlooking at parent device '/devices/pci0000:00/0000:00:07.0/0000:04:00.0/usb10/10-1/10-1.4':\n    KERNELS==\"10-1.4\"\n    SUBSYSTEMS==\"usb\"\n    DRIVERS==\"usb\"\n    ATTRS{bDeviceSubClass}==\"00\"\n    ATTRS{bDeviceProtocol}==\"00\"\n    ATTRS{devpath}==\"1.4\"\n    ATTRS{idVendor}==\"0930\"\n    ATTRS{speed}==\"480\"\n    ATTRS{bNumInterfaces}==\" 1\"\n    ATTRS{bConfigurationValue}==\"1\"\n    ATTRS{bMaxPacketSize0}==\"64\"\n    ATTRS{busnum}==\"10\"\n    ATTRS{devnum}==\"4\"\n    ATTRS{configuration}==\"\"\n    ATTRS{bMaxPower}==\"200mA\"\n    ATTRS{authorized}==\"1\"\n    ATTRS{bmAttributes}==\"80\"\n    ATTRS{bNumConfigurations}==\"1\"\n    ATTRS{maxchild}==\"0\"\n    ATTRS{bcdDevice}==\"0100\"\n    ATTRS{avoid_reset_quirk}==\"0\"\n    ATTRS{quirks}==\"0x0\"\n    ATTRS{serial}==\"001A4D5E4020ED5199130595\"\n    ATTRS{version}==\" 2.00\"\n    ATTRS{urbnum}==\"2197\"\n    ATTRS{ltm_capable}==\"no\"\n    ATTRS{manufacturer}==\"Kingston\"\n    ATTRS{removable}==\"unknown\"\n    ATTRS{idProduct}==\"6545\"\n    ATTRS{bDeviceClass}==\"00\"\n    ATTRS{product}==\"DataTraveler 2.0\"\n</code></pre>\n\n<p>Can anyone point me in a direction to have this resolved? \nThank you for your time.</p>\n"},{"id":626185,"title":"EMAIL SERVER SET-UP IN UBUNTU 14.04: how to create a shell or python script to automate email user or account creation","body":"<p>i have set-up an email server in ubuntu 14.04 desktop for use within my local network 192.168.0.0/24. i have build a programme that i want to connect to my email server. i have incorporated an interface in the programme that will allow people to register their own email and password.</p>\n\n<p>how do i make a python or shell script in my ubuntu 14.04 desktop that my programme will call to create email and password of the user to my desktop. please not that when a user account is created in my desktop, that automaticall becomes the email if i attach my domain to the username. can anyone please make a script for me here please. i do not want the script to prompt for the computer user password in case you use sudo to create the user-creation script. i have use this script but it won't work and am new to linux and programming.thanks</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\nx=0\ncreated=0\nfor user in ${usernames[*]}\ndo\n  useradd -m -c ${fullnames[$x]} -g \"${groups[$x]}\" $user 2&gt; /dev/null\n  if [ $? -eq 0 ]\n  then\n    let created=$created+1\n  fi\n\n  echo \"${userid[$x]}\" | passwd --stdin \"$user\" &gt; /dev/null\n\n  echo \"Welcome! Your account has been created. Your username is $user\" #| mail -s \"New account for $user\" -b root $user\n  x=$x+1\n  echo -n \"...\"\n  sleep .25\ndone\nsleep .25\necho \" \"\necho \"Complete. $created accounts have been created.\"\n</code></pre>\n\n<p>your help is highly solicited</p>\n"},{"id":600348,"title":"USB drive doesn&#39;t auto mount","body":"<p>I was trying to create a live  USB on my Ubuntu 14.04 system using the 'dd' command. After this operation, on inserting the USB stick, the device does not mount automatically as it used to get before. I tried using 'dmesg' to check if the OS recognizes the device and it works. Explicitly using 'mount' command makes the contents of the USB drive available. What might have gone wrong ?</p>\n"},{"id":576884,"title":"Sending email no longer working on Ubuntu 14.04.1 after deploying with Meteor Up","body":"<p>I asked this over on SO, but I think this is a server related issue, so this might be a better place to ask:</p>\n\n<p>Recently I added email sending capability to my Meteor app, using both the email package, and the account registration APIs to send emails. The other day, after having tested this thoroughly on my dev machine, I deployed it to our production server using Meteor Up. Once deployed, I did a quick check that the email APIs were working properly, and let it be. A day or two later, I made some minor changes, wrapping these email APIs in a Meteor.defer method to speed up the UI. I tested the changes locally (all fine), and re-deployed. I also ran apt-get update on my server after seeing a notification there were some new security updates available. After doing this, the email system no longer works. I tried reverting back to my previous configuration, and it still isn't working. I'm getting a timeout error:</p>\n\n<pre><code>Exception while invoking method 'forgotPassword' Error: connect ETIMEDOUT\n</code></pre>\n\n<p>I was wondering if anyone had any ideas on what might be causing this timeout (a blocked port?...how can I diagnose this?). Given my SMTP port is working on my development machine, it doesn't seem to be an issue with my code, but rather either with the MUP deployment, or Ubuntu configuration. I'm not super familiar with configuring Ubuntu servers. Any suggestions on how to go about de-bugging would be greatly appreciated!</p>\n"},{"id":540151,"title":"Ubuntu 14.04: How to send email without registering a domain or having an MX or A record?","body":"<ol>\n<li>Ubuntu 14.04 on a virtual machine that is not my PC. I use my PC (Windows 7 and Putty 0.63) to shell into it. </li>\n<li>Uname=Linux ubuntucomp 3.13.0-24-generic #46-Ubuntu SMP Thu Apr 10 19:11:08 UTC 2014 x86_64  x86_64 x86_64 GNU/Linux</li>\n<li>This machine is on our private network and does not have an official registered domain name. It has it's own IP but I think it's an internal IP. This machine is not accessed from outside our network, I only use it to send outgoing emails to people in our company. I got Perl to send an email out to our  SMTP provider and that works fine. </li>\n<li>We pay for an external SMTP service, so that part is done. The only SMTP authentication I use is a username and password. SSL is not needed. </li>\n<li>I have no intention of receiving any email from the outside world on this machine. </li>\n<li>Right now my emails are being blocked by my SMTP provider, possibly because I don't have a FQDN. The error I get is \"connection timed out\". </li>\n<li>I can't even telnet from my PC to the SMTP server, I also get a \"timeout\" error. I used Putty 0.63. Yet I can still send email via a Perl program on Ubuntu. </li>\n<li>IT cannot help me so I'm on my own. I'm new to sysadmin for Ubuntu. </li>\n</ol>\n\n<p>I need a way to send emails with an attachment via the command line (for an automated cron process) without setting up a registered domain, MX or A record. What are my options? Postfix won't do this as it requires a bunch of network settings set up along with a (DNS?) record. </p>\n\n<p>Since the Perl module uses the SMTP protocol to directly log into the SMTP server, I suspect I need an Ubuntu package that does the same, without passing the task onto another MTA. </p>\n\n<p><strong>I tried SSMTP</strong></p>\n\n<ol>\n<li>Using ssmtp I got this error from /var/log/mail.log: Oct 22 10:18:19 ubuntucomp sSMTP[16075]: Unable to connect to \"smtpout.payserv.net\" port 587. Process failed with error code 1.\nOct 22 10:18:19 ubuntucomp sSMTP[16075]: Cannot open smtpout.payserv.net:587</li>\n<li>In /etc/ssmtp/ssmtp.conf I even changed the setting \"Rewritedomain\" to be our actual company domain name. </li>\n<li>And how do I restart the SSMTP daemon after I make changes to the ssmtp.conf file? Perhaps that's part of the problem. </li>\n</ol>\n\n<p><strong>I tried telnetting into the SMTP server</strong></p>\n\n<ol>\n<li>I tried telnetting into smtpout.payserv.net port 25 and just got \"220 *******************\", then Putty 0.63 quit. </li>\n</ol>\n\n<p>Is it possible my SMTP company has blocked my IP? Should I just call them?</p>\n\n<p><strong>Let's back up a bit</strong></p>\n\n<ol>\n<li>I did 'netstat -an|grep smtp' and did not see an smtp service running. How do I start it? </li>\n<li>Do I need to add the smtp server to /etc/hosts?</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"id":508734,"title":"Auto-Mount USB drives when plugged in","body":"<p>I have some old USB-drives that sometimes unmount itself but I don't have the time to replace them by better drives so soon.</p>\n\n<p>How can I configure Ubuntu 14.04 so it automatically re-mounts the external drives and partitions in the same mount-folder so am Mp3 running from that drive continues playing when the drive is back withut having to click on the drive on the left in Nautilus?</p>\n"},{"id":439092,"title":"Simple Linux mailserver for sending &quot;notification&quot; emails","body":"<p>I am looking to set up a simple postfix server on Ubuntu server 12.04 to use for \"notifications\" from simple equipment like UPS devices. My company is moving to an external hosted provider for our Exchange email services and this would allow simple, preferrably un-authenticated email messages to be sent from the linux box to outside email addresses.  I have a postfix server installed and can use the webmin console gui to send test messages from the primary user account successfully, but so far I am still unable to send from any other \"device based\" system.</p>\n\n<p>Pointers to a good tutorial or prior posts which my searches did not discover are welcome.</p>\n"},{"id":292515,"title":"How can I send email from my website on ubuntu server","body":"<p>I am using ubuntu 12.04 and I have installed Appache , php , and mysql all the latest versions. I have my website on the root folder of this machine.\nNow, I want an email be sent to my boss when ever some one downloads a document from the website after filling the form. I already have designed a form and made all the neccessary validations as well. But I do not know how to send those form contents to my boss in her email address!!</p>\n\n<p>I love ubuntu and am Enjoying it and am a beginner!\nwould any one please help me??\nThank you so much! \nJoye</p>\n"}]}]
[{"id":715334,"title":"How to use `scrot` to take screenshots of a particular window by name?","body":"<p>If I would like to select a window for <code>scrot</code> this could be easily done with:</p>\n\n<pre><code>scrot -s name.jpg\n</code></pre>\n\n<p>But if I want to ask <code>scrot</code> to keep taking screenshots from a selected window, then I don't know how to do this. The following is what I tried:</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>#!/bin/sh\nwhile true\ndo\n   scrot -s \"$(date)\".jpg\n   sleep 5\ndone\n</code></pre>\n\n<p>The problem with the above is: after every 5 seconds I have to tell <code>scrot</code> which window by clicking it.</p>\n\n<p>If only I could pass the window by clicking it only once the first time it would be perfect.</p>\n\n<p>If not, could I tell <code>scrot</code> which window by telling it the window name?</p>\n\n<p><strong>Edit:</strong> I also want it to work even when the window is minimised. How to do this?</p>\n","related_questions":[{"id":77247,"title":"I&#39;ve downloaded a .sh file - how do I install this?","body":"<p>I'm new to Ubuntu and know installing programs only from window. It is very easy there: Just double-click the setup.exe and the things start. </p>\n\n<p>But how do I install a program on Ubuntu? </p>\n\n<p>I want to install something which I couldn't find in the Ubuntu Software Center. I downloaded a .sh file and now I don't know what to do with it.</p>\n"},{"id":631642,"title":"Taking a screenshot of current user&#39;s session","body":"<p>(Forgive me if my terminology is not quite accurate here)</p>\n\n<p>I have a cron job set up that uses <code>scrot</code> to take screenshots of my desktop at various intervals. </p>\n\n<p>However, when I switch user to another account (without logging off) the screenshots that come back are just shots of the lock screen. </p>\n\n<p>Is there anyway for me to get a screenshot of the current user's session? I.e, what is <em>actually</em> on the screen?</p>\n"},{"id":621897,"title":"Create periodically screenshots using scrot excluding time when screen is locked","body":"<p>I do one screenshot per minute using next bash script</p>\n\n<pre><code>while true;\ndo\n    scrot -d 60 -q 1 '%Y-%m-%d-%H:%M:%S.png' -e 'mkdir -p ~/screen-snapshots/%Y-%m-%d &amp; mv $f ~/screen-snapshots/%Y-%m-%d/';\ndone\n</code></pre>\n\n<p>But screenshots are made also if screen is locked. How to do screenshots only is screen is not locked?</p>\n\n<p>System - Ubuntu 14.10 with Unity</p>\n\n<p>[Solution]</p>\n\n<p>Thanks for @solsTiCe. Whole script is</p>\n\n<pre><code>#!/bin/bash\n\nfunction isScreenLocked() {\n    gdbus call -e -d com.canonical.Unity -o /com/canonical/Unity/Session -m com.canonical.Unity.Session.IsLocked | grep -q false\n}\n\nwhile true;\ndo\n    sleep 60;\n    if isScreenLocked\n    then\n        scrot -q 1 '%Y-%m-%d-%H:%M:%S.png' -e 'mkdir -p ~/screen-snapshots/%Y-%m-%d; mv $f ~/screen-snapshots/%Y-%m-%d/';\n    fi\ndone\n</code></pre>\n"},{"id":573009,"title":"How can I refer to all files that are named using two numbers?","body":"<p>I want to make a shell script that downloads all files that area named [0-9][0-9].png;</p>\n\n<p>e.g: 00.png 01.png 33.png 91.png etc</p>\n\n<pre><code>files = ???????\n\nfor file in files\ndo\n\ncurl ftp://server/${file}\n\ndone\n</code></pre>\n\n<p>What should I put at files = ???</p>\n"},{"id":407175,"title":"How to take screenshots with a timestamp and date stamp (with scrot command)","body":"<p>How to take screenshots with a timestamp and date stamp (with scrot command)? I forget the dates and i dont have time to go to properties and see the date. also, dates aren't written on the panel even! i use lubuntu 13.10 and 512 mb ram</p>\n"},{"id":256884,"title":"Tell if windows are open and not minimised from shell script Unity","body":"<p>I'd like to add into my .bashrc a little script that sets the terminal background to transparent iff I don't have any non-minimised, non-terminal windows open and leaves the terminal background as image if there is something open.</p>\n\n<p>I'm using 12.04 with Unity.</p>\n\n<p>I've no problem setting the terminal background, but I've only got a kludge to tell if a program is open, and can't tell if the window is minimised.</p>\n\n<p>My kludge at the moment:</p>\n\n<pre><code>if [ -z \"$( ps -e | grep firefox )\" ]\n    then\n        gconftool-2 --type string --set /apps/gnome-terminal/profiles/Default/background_type transparent\n    else\n        gconftool-2 --type string --set /apps/gnome-terminal/profiles/Default/background_type image\nfi\n\n\n(add inset for each of my most used programs)\n</code></pre>\n\n<p>I'd be happy with being able to tell at launch of terminal, but if I could turn the terminal transparent upon minimising (or closing) the last open window, that would be amazing. I'd guess something like:</p>\n\n<pre><code>export largewindows=  #number of open, non-minimised windows\n\nif [ $largewindows -eq 0 ]\n    then\n        gconftool-2 --type string --set /apps/gnome-terminal/profiles/Default/background_type transparent\nfi\n</code></pre>\n\n<p>with (somehow) a little script that runs this upon opening, closing, minimising or un-minimising a program window.</p>\n\n<p>What I don't know:</p>\n\n<ul>\n<li><p>How to count the number of windows (or even running programs) automatically.</p></li>\n<li><p>How to run a script every time I open/close/minimise/un-minimise a window.</p></li>\n</ul>\n\n<p>Any advice in the right direction would be appreciated - Thanks a lot!</p>\n"},{"id":97522,"title":"How can my script determine whether it&#39;s being run by bash or dash?","body":"<p>I'm running a fresh Oneiric install (i.e. not an upgrade) on two different systems and running into the same set of seemingly related problems.  </p>\n\n<p>The most frustrating of the bunch is that, when I use the .profile and .bashrc that I have carried with me from Mac OS X, logging in to X via LightDM logs me out immediately. I believe this is caused by the fact that, when running \"/bin/sh\", it behaves as /bin/dash, but still has the $SHELL variable set to /bin/bash. </p>\n\n<h1>Extrapolation</h1>\n\n<p>I have a huge <code>.bashrc</code>. You can see it <a href=\"http://younix.us/cgit/cgit.cgi/dhd.git/plain/hbase/.bashrc\">here</a> if you want, but its contents are probably not relevant, aside from the fact that it's full of bashisms, and the fact that it works with no errors inside xterm or on a virtual console. </p>\n\n<p>My <code>.profile</code> looks like this (abbreviated): </p>\n\n<pre><code>case $SHELL in \n*bash*)\n    if [ -f $HOME/.bashrc -a -r $HOME/.bashrc ]; then\n        . $HOME/.bashrc\n    fi\n    ;;\nesac\n</code></pre>\n\n<p>If I attempt to log in to X via LightDM, it will log me immediately back out. I get errors in <code>.xsession-errors</code> relating to my .bashrc that look like this (abbreviated): </p>\n\n<pre><code>/home/mrled/.bashrc: 103: [[: not found\n[: 103: Linux: unexpected operator\n[: 274: -P :: unexpected operator\n/home/mrled/.bashrc: 520: complete: not found\n</code></pre>\n\n<p>As I said, when I run bash from a virtual console, I don't get these errors. Furthermore, if I remove my .profile, I can log in to X just fine. (I can also log in to a virtual console and use <code>startx</code> to initiate an X session that works, but this is of course not a long term solution.)</p>\n\n<p>However, I discovered that if I run <code>/bin/sh -l</code>, I <em>do</em> get the errors. Here's an example session (note: the bash prompt I have simplified to <code>bash&gt;</code>, and the sh prompt is just <code>$</code>): </p>\n\n<pre><code>bash&gt; echo $SHELL\n/bin/bash\nbash&gt; echo $BASH_VERSION\n4.2.10(1)-release\nbash&gt; /bin/sh -l\n/home/mrled/.bashrc: 103: [[: not found\n[: 103: Linux: unexpected operator\n[: 274: -P :: unexpected operator\n/home/mrled/.bashrc: 520: complete: not found\n$ echo $SHELL\n/bin/bash\n$ echo $BASH_VERSION\n\n$\n</code></pre>\n\n<h1>Q1: Why is this happening?</h1>\n\n<p>I understand that <a href=\"https://wiki.ubuntu.com/DashAsBinSh\">/bin/sh now points to dash rather than bash</a>, but if that's true, then why is <code>$SHELL</code> still returning <code>/bin/bash</code>? </p>\n\n<h1>Q2: What can I do to work around it?</h1>\n\n<p>Is there a way to work around this? I want to keep my profile loading .bashrc so that I get the same environment on both login and non-login shells, but obviously I only want it to load for bash itself, not /bin/sh masquerading as bash. </p>\n\n<p>You may have noticed the difference in the contents of the $BASH_VERSION variables above. I have tried wrapping my .profile in something like this: </p>\n\n<pre><code>if [ -n $BASH_VERSION ]; then\n    # the rest of my .profile as above\nfi\n</code></pre>\n\n<p>The <code>-n</code> test should return true only if the length of the string is non-zero, however, even though in the session above, when I'm running under <code>/bin/sh -l</code> it returns an empty string for $BASH_VERSION, when it's included in my .profile like this, it passes the test! It them proceeds to source my .bashrc and give me the same errors as before. </p>\n\n<p>Now I'm <em>really</em> confused.</p>\n"},{"id":122125,"title":"how to rename and move files according to directory names?","body":"<p>I have bunch of directories containing the file with the same name. I want to move these files to another directory and at the same time renaming them with the directory name so that they are distinguished and are not over-written.</p>\n\n<p><strong>EDIT:</strong>\nAll the directories are in the same directory. Destination is one directory on the system which could be anything. We read directory and read file form it and rename it exactly as the directory name and put it to the destination.</p>\n\n<p>An important constraint is that the name of the file is given which will be in all of the directories. Directories might contain other files bit also the one which is given</p>\n\n<p>Thanks a lot</p>\n"},{"id":90437,"title":"How to make &quot;changing mac adress&quot; a script the best way?","body":"<p>I figured out how to change my mac address of my network card:</p>\n\n<pre><code>sudo ip addr                                    # Show details\nsudo ifconfig eth0 down                         # deactivate network card\nsudo ifconfig eth0 hw ether DESIRED_MAC_ADDRESS # change mac address\nsudo ifconfig eth0 up                           # activate network card\nsudo ip addr                                    # show details again\n</code></pre>\n\n<p>What would be the best way to make this a script which I could start each time I need this modification? Also where do I have to put this generated script? What is the standard folder for this?</p>\n\n<p>I don't want it to be started every time Ubuntu starts. (But it would be nice to know how this is done, though. Where would be the best place to store it in that case?)</p>\n\n<p>Appreciate any suggestions!</p>\n"},{"id":41957,"title":"how to run a function as root in shell script","body":"<p>exactly i want to make a script and add this to shortcut launcher...<br>\nwhen i double click the icon, it will popup a terminal window (done)</p>\n\n<p>in terminal, it will ask root password at first..<br>\nand then do some stuff with root privilege (i make it as a function) ..<br>\nafter that, in the end of script it will close the window<br>\nlike \"press anykey to close window\" (i can do it)</p>\n\n<pre><code>#!/bin/sh\ntouchpad(){\n    whoami\n}\nsudo -S touchpad # but it return error \"command not found\"\n</code></pre>\n\n<p>how to run a function as root user?<br>\nor there is another way to do this?</p>\n\n<p><strong>EDIT :</strong><br>\ni'v try this\n    #!/bin/bash</p>\n\n<pre><code>sudo ./main2.sh #this not work when i make it as a launcher\nexit \n</code></pre>\n\n<p>this is my current code (after googling):  </p>\n\n<pre><code>#!/bin/bash\n\ngksudo -m \"Input Password\" clear\nsudo whoami\n#sudo bla bla bla\nread -n 1 -p \"Press any key to close window\"\n</code></pre>\n\n<p>this is what i want, but got error if i type wrong password for 3 times..<br>\nhow to force quit main window if gksudo fail??</p>\n"}]}]
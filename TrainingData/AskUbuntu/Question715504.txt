[{"id":715504,"title":"X server broken by Free CAD?","body":"<p>I'm typing this on my phone, so bear with me until I make it to a computer.</p>\n\n<p>I have been running Gubuntu 14.04 on my Lenovo G500 for about a year, with other ubuntu distros years before that.</p>\n\n<p>Yesterday, my laptop worked perfectly. Last night I first installed BRL-CAD, but then decided Free CAD looked better and installed that, also. I vaguely remember seeing one of the two say it was removing packages, and I think that is the root of the problem.</p>\n\n<p>In fact it might have been BRL-CAD. Here are the <a href=\"http://brlcad.org/wiki/Compiling#Install_Dependencies\" rel=\"nofollow\">dependencies</a> I believe it was the X related packages that removed some when they were installed.</p>\n\n<p>So this morning I go to login to my laptop, and on the screen where you type in the password it kept saying authentication failed, as of the enter button were being continually clicked. This prevented me from entering my password without interruption, so I restart my computer. Next thing I know, my computer is hanging at the splash screen. I restart in recovery mode, and then try to boot and it appears to be hanging on Restoring resolver state. Upon googling this only happened on distro upgrades, it seems?? </p>\n\n<p>So I reboot into recovery mode again, turn on network, run the dpkg tool, open root console, run apt-get update/upgrade for redundancy sake, and shutdown the computer.</p>\n\n<p>I try to boot again, still hangs on splash screen. I open a terminal with alt + ctrl + F2. I am able to log in. I try to enter startx, screen goes blank for a moment then returns to prompt, with this output:</p>\n\n<p><img src=\"http://i67.tinypic.com/2rh37z9.jpg\" alt=\"\"></p>\n","related_questions":[{"id":690820,"title":"X server on 15.10 keeps crushing and restarting at login","body":"<p>My X window keeps crushing and loading to the login screen especially when am watching a video and I decide to skip forward. I am wondering what I did wrong</p>\n"},{"id":630908,"title":"Xorg Server refusing to start after Ubuntu 15.04 Vivid upgrade","body":"<p>Hellu.</p>\n\n<p>Yesterday evening I decided to upgrade my laptop (14.04) to the latest release, aka 15.04. I ran \"do-release-upgrade\" as root, said yes to everything and went to bed. This did not go as smooth as I had planned thought.</p>\n\n<p>Today when I woke up and were going to try the new release I was met with ... nothing. Basically a black-screen.\nWhen the laptop boots up it first says is:</p>\n\n<pre><code>Starting version 219\n</code></pre>\n\n<p>Afterwards the standard Ubuntu screen comes up. When it have finally loaded the computer ends up displaying nothing what-so-ever and goes into  what I like to call \"fire mode\" (cpu on full, fan on full, feels like the pc is going to melt). No error messages or anything is printed after this point.</p>\n\n<p>I recently also discovered that pressing CTRL+ALT+1 gives you a terminal where I can login. I tried typing \"startx\" but it the Xorg server failed to start. I checked the log file and it seemed like it missed the package \"fglrx\". I do not longer have this log file as Ubuntu overwrote it on reboot and I forgot to make a copy of it.</p>\n\n<p>My logical conclusion was then to install this \"fglrx\" package. This seemed to fix my previous error however now a new appeared.</p>\n\n<p><strong>Logs</strong></p>\n\n<p>My current Xorg generated log file: <a href=\"http://paste.ubuntu.com/11495951/\" rel=\"nofollow\">http://paste.ubuntu.com/11495951/</a></p>\n\n<p>My syslog contains these lines:</p>\n\n<pre><code>Jun  1 13:56:47 maxubuntu failsafeXServer[1232]: xinit: giving up\nJun  1 13:56:47 maxubuntu failsafeXServer[1232]: xinit: unable to connect to X server: Connection refused\nJun  1 13:56:47 maxubuntu failsafeXServer[1232]: xinit: server error\n</code></pre>\n\n<p>I have a <strong>AMD Radeon HD 6620g</strong> graphic card if that helps...</p>\n\n<p>I dont know what more logs I can/should provide? Any solution on this would be greatly appreciated.</p>\n\n<p>Kind Regards,</p>\n"},{"id":252072,"title":"Cant log in to gui ,X is broken","body":"<p>Note to others if you just want a summary of the problem skip down to summary.  This first part is going to be slightly long and hopefully entertaining.   As in, that is screwed up! but there might be a clue in there.</p>\n\n<p>So I bought my laptop. From the very beginning, and occasionally for no known reason it's screen would freeze. The keyboard would freeze and the keyboard shortcuts on wikipediea, that try and shut down a frozen computer, were quickly found. The shortcuts didn't work either. It didn't happen often and got better with updates.  Better means less frequently.  Eventually it would happen only when  under heavy load, when I was in Chromium with 10 tabs.  Annoying but with no solution , I ignored it.  </p>\n\n<p>Well two days ago before work It did this, I shut the computer down as I always did,by holding down the power button. \nIt popped back up and ran a hard drive check as it sometimes did and brought me to the login screen.  Which is different then most times , usually it goes straight to the desktop. So I typed in my password and nothing happened,  fine I called up a terminal trying to shut down the computer first by ctrl-alt-f2 as I always do.  My computer not being frozen goes to command line, I log in and I type in one of the few commands I now know by heart sudo reboot! And it does in ten seconds,  SSDs rock.   And comes to the login screen. </p>\n\n<p>Vague recognition occurs that this isn't Kansas anymore Toto,  and Crap  I haven't backed up in a while.  No don't groan,  I swear I'll back up more often, I swear I will learn what rsync does and create a keyboard short cut to back up my home folder.  I'll go through rehab I swear  just help me get my wallpapers and documents  back please!</p>\n\n<p>I broke X and I don't even know what X is, Its a video thingy mag jig, that puppy linux (dell mini sometimes)  asks me X versa or X org.\nSo I broke out my netbook  a dell mini 9 that I bought with a tax return,  I now have internet with a small screen, to small to enjoy really, 12 inch minimum is recommended , maybe 10 with a tablet.   I come the interwebs for a solution and nothing.  My google fu has failed me. </p>\n\n<p>I think, well lets upgrade to 12.10, that should keep my files and fix the problem.  Well It starts and I go to work.   And doesn't work.  I am now ubuntu 12.10 and no GUI.   I try to reinstall the gnome shell via a command on the internet choose lightdm and nothing.   I have tried these commands (not necessarily in order)  <em>sudo apt-get system76-driver  ,  sudo dpkg –configure -a , sudo apt-get gnome-shell , sudo apt-get autoremove , sudo apt-get update, sudo start lightdm , sudo stop lightdm , do release-upgrade , sudo stopx , sudo killx ,  sudo startx, and sudo lsusb</em> (that last didn't help me at all, note a lot of the responses went over my head)  </p>\n\n<p>So being terminaly board, get it I am in the terminal and board, and being as I have to go to work in an hour and being ready to work I type in the commands to run Diablo 3 I run my Ptrace command</p>\n\n<p>echo 0| sudo tee /proc/sys/kernel/yama/ptrace_scope</p>\n\n<p>*force_s3tc_enable=true setarch i386 -3 -L -B -R /opt/cxoffice/bin/wine –bottle “Diablo III” --cx-app “Diablo III laucher.exe”</p>\n\n<p>and I am sure you are just shocked shocked to hear that I didn't run.  It can't create a window, can't find a driver or some such.    And if your thinking thats an lot of flags and command line fu for someone who doesn't speak the language ,  your right,  you would be surprised to find out what a monkey with an Internet connection , the ability to copy, with out really understanding whats going on, can do.  Yes I am not an idiot, yes I am learning, but no I really dont know what I am doing.  Downloaded a book to kindle today on the ubuntu command line. \n What I want from the readership here</p>\n\n<ul>\n<li><p>A brilliant concise solution thats easy to implement to just fix X.</p></li>\n<li><p>or A solution to fix my X</p></li>\n<li>and/or someone tell me how to find my\npictures folder path, documents folder path, and my usb path (it\nstill auto mounts apparently) so I can use the copy command I found\nand copy to my stuff to usb and in my second hardrive mounted in my\ncomputer I have file I need  /unknownpathtoharddrive/OSs/ubuntu12.1064bit.iso  I would like to get that to my USB.</li>\n</ul>\n\n<p>Summary</p>\n\n<p>System Spec\nUbuntu 12.10  64 bit \n15.6\" 1080p Full High Definition LED Backlit Display featuring 95% NTSC Color Gamut in Matte Finished Surface ( 1920 x 1080 ) \nIntel HD Graphics 4000 \n3rd Generation Intel Core i7-3610QM Processor ( 2.30GHz 6MB L3 Cache - 4 Cores plus Hyperthreading ) \n8 GB Dual Channel DDR3 SDRAM at 1600MHz - 2 X 4GB \n120 GB Intel 520 Series SATA III 6 Gb/s Solid State Disk Drive \n750 GB 7200 RPM HDD + Caddy Case\nIntel Centrino Advanced-N 6235 - 802.11A/B/G/N Wireless LAN + Bluetooth Combo Module </p>\n\n<ul>\n<li>GUI  Borked , doesn't work kewbluie,  Snafu,  oh Snap.... you get the\nidea infinite login loop</li>\n<li>wrong password produces “incorrect password”  correct password \nproduces a bell and goes back to login page (or never leaves?)</li>\n<li>good news- ctrl-alt-f2 works and gives me a command line.  And I can\nlog in!</li>\n<li>problem-I don't speak command line.  Vim?  haha your kidding right</li>\n<li>Problem-  I don't know the commands so it can report the problem so I\ncant google the answer</li>\n</ul>\n\n<p>Help?  </p>\n\n<ol>\n<li>vague goal of reinstalling without losing a couple of word documents\nand wallpapers</li>\n<li>I have tried:  stop and start x, stop and start lightdm , \ninstalling updates, Ubuntu upgrade,  and running Dablo and Natulius\nUpdate:\nJust tried to log in under guest,  full GUI  interface, now I am flumuixed ,  so its some setting that doesn't allow me to log in with a gui on my main account,  but I can with the comand line,as soon I get my info fresh install.</li>\n</ol>\n"},{"id":131051,"title":"How to kill and to start the X server?","body":"<p>In 12.04 How do you kill the X server from the command line and from the GUI interface and how do you start it from the virtual terminal?</p>\n"},{"id":450516,"title":"Ubuntu 14.04 freezes on splash screen after broken upgrade from 13.10","body":"<p>I'm using VirtualBox to run my ubuntu VM on Mac. I've decided to make a distro upgrade which was apparently a very big mistake... </p>\n\n<p>During upgrading my Mac hung up and I had to make hard reset. After this, when I run my ubuntu VM I can see Ubuntu splash screen with orange dots progress bar. All dots are orange and then if freezes.</p>\n\n<p>I managed to open root shell, and run:</p>\n\n<pre><code>apt-get -f install\ndpkg --configure -a\napt-get update\n</code></pre>\n\n<p>So at least apt is working now and all software seems to be up to date.</p>\n\n<p>But if I run:</p>\n\n<pre><code>startx\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>X: exec of /usr/bin/Xorg failed\nxinit: giving up\nxinint: unable to connect to X server: Connection refused\nxinit: server error\n</code></pre>\n\n<p>When I try to run /usr/bin/Xorg manually I get:</p>\n\n<pre><code>-bash: /usr/bin/Xorg: cannot execute binary file: Exec format error\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"id":449756,"title":"Erratic detection of usb keyboard and mouse","body":"<p>I just installed Ubuntu 14.04. During installation my keyboard (Razer blackwidow ultimate) and my mouse (Raze deathadder, plugged on the USB port of the keyboard) worked fine.</p>\n\n<p>I started my system for the first time, it told me some updates were necessary, I proceeded with them, restarted and then : before the loading screen, several screens of text about hdi-generic devices not working or not found were displayed and then, at the loading screen, keyobard and mouse were not working. They worked in BIOS, in Grub and on my dual-boot Windows7 but not in Ubuntu, even in recovery mode.</p>\n\n<p>Even stranger, as I tried, I remarked they SOMETIMES work, if I plug them differently. How \"differently\" depends of the USB port : if I plug them on the front ports, they will always work, if I plug them on the back ports, they will work once out of ten times (but then only if I plug them on different ports than those used the last time it did not work...). </p>\n\n<p>Other strange behaviour : if they work and I unplug then replug them : they won't work anymore.</p>\n\n<p>I have an old keyboard and an old mouse, they work perfectly. The problem is limited to Razer hardware.</p>\n\n<p>Each time I restart my computer I can tell if the keyboard and the mouse will work after grub simply by noticing if the screens of text about hdi-generic devices not working or not found are displayed or not.</p>\n"},{"id":383176,"title":"Is there any way making tear-free desktop with NON-proprietary drivers? Ubuntu 13.10","body":"<p>My question, is there any way to make \"tear-free desktop\" or no tearing while playing videos with non-proprietary drivers? </p>\n\n<p>I never managed install ATI drivers from AMD website. For Ubuntu 13.10, I also tried to install with <code>sudo apt-get install fglrx fglrx-pxpress</code>. In this case I don't get enable-tear-desktop menu in AMD Catalyst Control Center, also these drivers dont work very well, they cause fan noising and also tearing almost everywhere. </p>\n\n<p>And I can't come back from suspend mode.</p>\n"},{"id":169725,"title":"Xorg: Number of created screens does not match number of detected devices","body":"<p>I've been trying to configure my TV as external monitor, because the only thing I saw on it was a white background with a X as cursor.</p>\n\n<p>I tried around in the nVidia XServer Settings, but I never got it working that it would disable the laptop monitor and move to my TV as soon as I'd plug in the HDMI cable. After not beeing able to get it to work, I tought I'd rename xorg.conf so it would create a default configuration again (at least I tought it would).</p>\n\n<p>After a restart, I got the login screen. I entered my credentials, screen went black for a second, followed by a short sequence of the nvidia logo when it finally threw me back to the login screen. I tried logging in again, but same behaviour.</p>\n\n<p>I quickly booted to the root shell, renamed the old file back to xorg.conf, but it still wouldn't work. I then tried booting into failsafe mode, which told me that he couldn't detect any screens. Bootet up again, went to tty3 console, and tried the following:</p>\n\n<pre><code>sudo service lightdm stop\nsudo Xorg -configure\n</code></pre>\n\n<p>This leads to</p>\n\n<blockquote>\n  <p>Number of created screems dpes mpt ,match number of detected devices.<br>\n  Configuration failed.<br>\n  ddxSigGiveUp: CLosing log<br>\n  Server terminated with error (2). CLosing log file.</p>\n</blockquote>\n\n<p>Also, I can only selected between <code>Ubuntu</code> and <code>Ubuntu 2D</code> at login, I tought there were some more options? I'm using default Ubuntu 12.04 Desktop.</p>\n\n<p>If you need any log files, please let me know which ones so I can provide them.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Update:</strong> I tried <a href=\"http://askubuntu.com/questions/133733/cannot-login-via-unity-login-screen-after-upgrade-to-12-04\">this</a> accepted answer. While using gdm I am able to login. As soon as I change it back to lightdm, I can't log in anymore. Any idea?</p>\n"},{"id":158141,"title":"Free RAM disappears - Memory leak?","body":"<p>On a fresh started system, <code>free</code> reports about 1.5G used RAM (8G RAM alltogether, Ubuntu 12.04 with lightdm and plasma desktop, one konsole window started). Having the apps running I use, it still consumes not more than 2G. However, having the system running for a couple of days, more and more of my free RAM disappears -- without showing up in the list of used apps: while <code>smem --pie=name</code> reports less than 20% used (and 80% being available), everything else says differently. <code>free -m</code> for example reports on about day 7:</p>\n\n<pre><code>             total       used       free     shared    buffers     cached\nMem:          7459       7013        446          0        178        997\n-/+ buffers/cache:       5836       1623\nSwap:         9536        296       9240\n</code></pre>\n\n<p>(so you can see, it's not the buffers or the cache). Today this finally ended with the system crashing completely: the windows manager being gone, apps \"hanging in the air\" (frameless) -- and a popup notifying me about \"too many open files\". Syslog reports:</p>\n\n<pre><code>kernel: [856738.020829] VFS: file-max limit 752838 reached\n</code></pre>\n\n<p>So I closed those applications I was able to close, and killed X using Ctrl-Alt-backspace. X tried to come up again after that with failsafeX, but was unable to do so as it could no longer detect its configuration. So I switched to a console using Ctrl-Alt-F2, captured all information I could think of (vmstat, free, smem, <code>proc/meminfo</code>, lsof, <code>ps aux</code>), and finally rebooted. X again came up with failsafeX; this time I told it to \"recover from my backed-up configuration\", then switched to a console and successfully used <code>startx</code> to bring up the graphical environment.</p>\n\n<p>I have no real clue to what is causing this issue -- though it must have to do either with X itself, or with some user processes running on X -- as after killing X, <code>free -m</code> output looked like this:</p>\n\n<pre><code>             total       used       free     shared    buffers     cached\nMem:          7459       2677       4781          0         62        419\n-/+ buffers/cache:       2195       5263\nSwap:         9536         59       9477\n</code></pre>\n\n<p>(~3.5GB being freed) -- to compare with the output after a fresh start:</p>\n\n<pre><code>             total       used       free     shared    buffers     cached\nMem:          7459       1483       5975          0         63        730\n-/+ buffers/cache:        689       6769\nSwap:         9536          0       9536\n</code></pre>\n\n<p>Two more helpful outputs are provided by <code>memstat -u</code>. Shortly before the crash:</p>\n\n<pre><code>User     Count     Swap      USS      PSS      RSS\nmail         1        0      200      207      616\nwhoopsie     1      764      740      817     2300\ncolord       1     3200      836      894     2156\nroot        62    70404   352996   382260   569920\nizzy        80   177508  1465416  1519266  1851840\n</code></pre>\n\n<p>After having X killed:</p>\n\n<pre><code>User     Count     Swap      USS      PSS      RSS\nmail         1        0      184      188      356\nizzy         1     1400      708      739     1080\nwhoopsie     1      848      668      826     1772\ncolord       1     3204      804      888     1728\nroot        62    54876   131708   149950   267860\n</code></pre>\n\n<p>And after a restart, back in X:</p>\n\n<pre><code>User     Count     Swap      USS      PSS      RSS\nmail         1        0      212      217      628\nwhoopsie     1        0     1536     1880     5096\ncolord       1        0     3740     4217     7936\nroot        54        0   148668   180911   345132\nizzy        47        0   370928   437562   915056\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/CWr7N.png\" alt=\"File System Usage for one week\">\n<img src=\"http://i.stack.imgur.com/gYl5b.png\" alt=\"Kernel / CPU usage for one week\"></p>\n\n<p>Edit: Just added two graphs from my monitoring system. Interesting to see: everytime when there's a \"jump\" in memory consumption, CPU peaks as well. Just found this right now -- and it reminds me of another indicator pointing to X itself: Often when returning to my machine and unlocking the screen, I found something doing heavvy work on my CPU. Checking with <code>top</code>, it always turned out to be <code>/usr/bin/X :0 -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch -background none</code>.</p>\n\n<p>So after this long explanation, finally my questions:</p>\n\n<ol>\n<li>What could be the possible causes?</li>\n<li>How can I better identify involved processes/applications?</li>\n<li>What steps could be taken to avoid this behaviour -- short from rebooting the machine all X days?</li>\n</ol>\n\n<p>I was running 8.04 (Hardy) for about 5 years on my old machine, never having experienced the like (always more than 100 days uptime, before rebooting for e.g. kernel updates). This now is a complete new machine with a <strong>fresh install of 12.04</strong>. In case it matters, some specs:</p>\n\n<p>AMD A4-3400 APU with Radeon(tm) HD Graphics, using the open-source ati/radeon driver (so no fglrx installed), 8GB RAM, WDC WD1002FAEX-0 hdd (1TB), Asus F1A75-V Evo mainboard. Ubuntu 12.04 64-bit with KDE4/Plasma. Apps usually open more or less permanently include Evolution, Firefox, konsole (with Midnight Commander running inside, about 4 tabs), and LibreOffice -- plus occasionally Calibre, Gimp and Moneyplex (banking software I'm already using for almost 20 years now, in a version which did fine on Hardy).</p>\n\n<p><strong>Edit:</strong>\nToday I found one of the \"evil guys\": KDE4s plasma-desktop. Used memory was again up to 5GB, when I did a <code>killall plasma-desktop &amp;&amp; plasma-desktop</code>. This freed up 1.3GB RAM! <code>ps</code> says:</p>\n\n<pre><code>                             RSS    SIZE   VSZ\nplasma usage before restart  120988 526472 1300816\nplasma usage after restart   92352  495972 1263632\n</code></pre>\n\n<p>So where have those 1.3GB been? The diff between those values, if added up, amount to 96MB -- not 1.3GB.</p>\n\n<p>And this can only be one part, as still 3.7GB are in use (should be less than 2GB). I monitored this during the past 6 days using several tools: used memory (not talking about cache and buffers) increases slowly but steadily. Even if I'm not at my desk to run anything...</p>\n\n<p>As to monitoring processes with open files, I currently use the following 1-liner (I love shell and especially bash) to get the top-5:</p>\n\n<pre><code>echo \"$(for pid in $(ls -a /proc|egrep '^([0-9])*$'|sort -n 2&gt;/dev/null); do \\\nif [ -e /proc/$pid/fd ]; then FHC=$(ls -l /proc/$pid/fd|wc -l); \\\nif [ $FHC -gt 0 ]; then PNAME=\"$(cat /proc/$pid/comm)\"; \\\necho \"$FHC files opened by $pid ($PNAME)\"; fi; fi; done)\"|sort -r -n|head -n5\n</code></pre>\n\n<p>Command here in 4 lines for better readability. Nothing much yet from there -- except that Skype doesn't like have the Internet connection broken. Each disconnect causes a slight increase of its open files, but nothing dramatic. On the other hand it seems like plasma is also responsible for that:</p>\n\n<p><img src=\"http://i.stack.imgur.com/LmZPL.png\" alt=\"VFS usage (2 days)\"></p>\n\n<p>See the drop of file handles at the end? That was the plasma restart.</p>\n"},{"id":120312,"title":"How do I forcibly stop the X server?","body":"<p>I am new bie to Ubuntu. I am using Ubuntu 11.10  when I tried to forcibly kill the X server from my process it again starts\nand prompts me a login screen how this is happening.</p>\n\n<p>Please help me:</p>\n\n<pre><code>vj        2383   908  0 15:01 tty2     00:00:00 -bash\nroot      3054     1  0 15:04 ?        00:00:00 lightdm\nroot      4395  3054 14 15:12 tty7     00:21:50 /usr/bin/X :0 -auth /var/run/lightdm/root/:0 -noliste\nvj        4498     1  0 15:12 ?        00:00:00 /usr/bin/gnome-keyring-daemon --daemonize --login\nvj        4508  3054  0 15:12 ?        00:00:00 /usr/bin/gnome-session --session=ubuntu\n\nKill 4395\n</code></pre>\n"}]}]
[{"id":715500,"title":"How can I write to stderr so that stderred colours it red?","body":"<p>For background, I previously asked <a href=\"https://askubuntu.com/questions/712881/stderr-of-terminal-in-red-even-with-sudo\">this question</a>.</p>\n\n<p>I am using <a href=\"https://github.com/sickill/stderred\" rel=\"nofollow\">stderred</a> to turn <em>stderr</em> text in red when diplayed on a terminal.  This works nicely on most occasions, more specifically for what appear to be binary executables as opposed to bash scripts.</p>\n\n<p>I realized that <code>stderred</code> does not appear to work when <em>stderr</em> is referred to directly from a <code>command</code> called from a terminal.</p>\n\n<p>For example, using <code>stderred</code> I still do not have red if I use redirection as with the following:</p>\n\n<pre><code>echo \"pomme\" 1&gt;&amp;2\n</code></pre>\n\n<p>How is <em>redirection</em> any different than other cases with regards to the <code>stderred</code> hook?</p>\n\n<p>How can I have red for <em>stderr</em> output if I redirect <code>1&gt;&amp;2</code> in a <code>/bin/bash</code> context, as I do in my bash scripts (Ubuntu 15.10)?</p>\n","related_questions":[{"id":707827,"title":"Can anyone tell me how can this be achieved?","body":"<p>Prompting a yes no interface to user so as to re-execute a block of code.lets assume that block of code is echo \"Hello\"</p>\n"},{"id":703762,"title":"How to write a script that does collectstatic for django","body":"<p>I want to do an automatic collectstatic script for my django application. I tried various things but it did not work. My last attempt is to call an expect script within a normal script: </p>\n\n<p>collectstatic.sh: </p>\n\n<pre><code>python manage.py collectstatic --settings=app.settings_mark &amp;&amp;\n./testscript.sh\n</code></pre>\n\n<p>testscript.sh: </p>\n\n<pre><code>#!/usr/bin/expect -f\nspawn testscript.sh\nexpect \"Type 'yes' to continue, or 'no' to cancel:\"\nsend \"yes\"\n</code></pre>\n\n<p>However, the line <code>./testscript.sh</code> get never executed because the <code>collectstatic</code> command before is waiting for input. How can I skip that ? I also tried leaving out the <code>&amp;&amp;</code> but it didn't work. </p>\n\n<p>Thanks in advance ! </p>\n"},{"id":682913,"title":"How to write shell script to start some programs?","body":"<p>I'm making a shell script that will start bunch on programs that l mostly use. I wants commands for them the programs are-\n1. skype\n2. sublime-text\n3. google-chrome\n4. Beyond-comopare\n5. scudCloud\n6. Lampp</p>\n\n<p>i've found some of them-</p>\n\n<pre><code>#! /bin/sh\nsudo service mysql stop\nsudo /opt/lampp/lampp start\nsudo /usr/bin/skype start\nsudo /usr/bin/subl start\nsudo google-chrome\n</code></pre>\n\n<p>I know the application can be set from startup application also but i need to run some command also.</p>\n\n<p>After running command bash  shell script will run.</p>\n"},{"id":642204,"title":"How do I write a Bash script for this scenario?","body":"<p>I have these files in the directory <code>home/acs</code>.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TBBN027162G_38d8-2f08-0c40\nTBBN027605G_38d8-2f08-1518\nTBBN027941G_38d8-2f08-0d1c\nTBBN027923G_38d8-2f08-35e4\n</code></pre>\n\n<p>I want to read <code>TBBN027162G</code> as <code>service_id</code> and <code>38d8-2f08-0c40</code> as <code>mac_address</code> and then store it into my database. I also want to back up the file for the future reference.</p>\n\n<p>Below is the script I tried to write, still incomplete. I have no idea how to make this work.    </p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\ncd /home/acs/\n\nFILES=*\n\nfor f in $FILES\ndo\n    #backup file\n    echo \"$f\" &gt;&gt; /home/suriani/acs/data/mac/maclist\n\n    while read $line\n    do\n      awk -F '_' '{print $1}' /home/suriani/acs/data/mac/maclist\n      #read service_id\n\n      awk -F '_' '{print $2}' /home/suriani/acs/data/mac/maclist\n      #read mac_address\n\n    done &lt; /home/suriani/acs/data/mac/maclist\n\ndone\n</code></pre>\n\n<p>The output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TBBN027162G\n38d8-2f08-0c40\nTBBN027162G\nTBBN027605G\n38d8-2f08-0c40\n38d8-2f08-1518\nTBBN027162G\nTBBN027605G\n38d8-2f08-0c40\n38d8-2f08-1518\nTBBN027162G\nTBBN027605G\nTBBN027923G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\nTBBN027162G\nTBBN027605G\nTBBN027923G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\nTBBN027162G\nTBBN027605G\nTBBN027923G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\nTBBN027162G\nTBBN027605G\nTBBN027923G\nTBBN027941G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\n38d8-2f08-0d1c\nTBBN027162G\nTBBN027605G\nTBBN027923G\nTBBN027941G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\n38d8-2f08-0d1c\nTBBN027162G\nTBBN027605G\nTBBN027923G\nTBBN027941G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\n38d8-2f08-0d1c\nTBBN027162G\nTBBN027605G\nTBBN027923G\nTBBN027941G\n38d8-2f08-0c40\n38d8-2f08-1518\n38d8-2f08-35e4\n38d8-2f08-0d1c\n</code></pre>\n"},{"id":625224,"title":"How to redirect stderr to a file","body":"<p>While using nohup to put a command to run in background some of content appear in terminal.</p>\n\n<pre><code>cp: error reading ‘/mnt/tt/file.txt’: Input/output error\ncp: failed to extend ‘/mnt/tt/file.txt’: Input/output error\n</code></pre>\n\n<p>I want to save that content to a file.</p>\n"},{"id":617125,"title":"How to create log file from a command (through alias)","body":"<p>The call is simply <code>ud</code> typed in a terminal.  <code>ud</code> is defined as the following in my <code>~/.bash_aliases</code>:</p>\n\n<pre><code>alias ud='sudo apt-get update &amp;&amp; sudo apt-get upgrade -y &amp;&amp; sudo apt-get dist-upgrade -y &amp;&amp; sudo apt-get clean -y'\n</code></pre>\n\n<p>After a quick search I found the following method suggested for maintaining log files (using <code>make install</code> from the original post):</p>\n\n<pre><code>$ make install &gt; file.txt 2&gt;&amp;1\n</code></pre>\n\n<p>Here is the problem; if I adapt this to my needs, I do not get the expected results out from the following syntax:</p>\n\n<pre><code>$ ud &gt; file.txt 2&gt;&amp;1\n</code></pre>\n\n<p>What I get is that the command executes to on-screen stdout and a 0-byte text file is produced.  What I wish to accomplish is create an output text file similar to the following for <code>ls</code>:</p>\n\n<pre><code>$ ls &gt; file.txt 2&gt;&amp;1\n</code></pre>\n\n<p>May I ask for someone to explain to me what is going on?</p>\n\n<p>Finally, the following produce results I cannot explain:</p>\n\n<pre><code>$ $(ud) &gt; file.txt\nLa commande « Ign » est introuvable, vouliez-vous dire :\n La commande « tgn » du paquet « tgn » (universe)\nIgn : commande introuvable\n\n$ echo $(ud) &gt; file.txt\n</code></pre>\n"},{"id":571268,"title":"how to fix my keyboard after a bash script messed it up","body":"<p>Okay, I was stupid. I ran a bash script I got off of some forum on the internet, github I think it was, that said a cool matrix would appear in the terminal, which did happen, but it also messed up my keyboard. </p>\n\n<p>In order to write just this help message, I have had to copy-paste every m,w,., and d, or else they look like this: ñ,ü,ç, and ɗ</p>\n\n<p>Is there some way to undo this? I know this looks hilarious, but it really sucks to type.</p>\n\n<p>I was wondering if someone that knew bash scripting could help me reverse the damage these are the problems I have in terminal.</p>\n\n<p>This happens when I try to modify the script:</p>\n\n<pre><code>E325: ATTENTION\nFound a swap file by the name \".bash matrix.swp\"\n          owned by: chris   dated: Thu Jan  8 00:35:25 2015\n         file name: ~chris/Documents/pr0grams/bash matrix\n          modified: YES\n         user name: chris   host name: ubuntu\n        process ID: 16416\nWhile opening file \"bash matrix\"\n             dated: Sun Dec  7 23:35:13 2014\n\n(1) Another program may be editing the same file.  If this is the case,\n    be careful not to end up with two different instances of the same\n    file when making changes.  Quit, or continue with caution.\n(2) An edit session for this file crashed.\n    If this is the case, use \":recover\" or \"vim -r bash matrix\"\n    to recover the changes (see \":help recovery\").\n    If you did this already, delete the swap file \".bash matrix.swp\"\n    to avoid this message.\n\nSwap file \".bash matrix.swp\" already exists!\n[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort:\n</code></pre>\n\n<p>And this is the script itself:</p>\n\n<pre>\n#!/bin/bash\nblue=\"\\033[0;34m\"\nbrightblue=\"\\033[1;34m\"\ncyan=\"\\033[0;36m\"\nbrightcyan=\"\\033[1;36m\"\ngreen=\"\\033[0;32m\"\nbrightgreen=\"\\033[1;32m\"\nred=\"\\033[0;31m\"\nbrightred=\"\\033[1;31m\"\nwhite=\"\\033[1;37m\"\nblack=\"\\033[0;30m\"\ngrey=\"\\033[0;37m\"\ndarkgrey=\"\\033[1;30m\"\ncolors=($green $brightgreen)\nspacing=${1:-100}\nscroll=${2:-0}\nscreenlines=$(expr `tput lines` - 1 + $scroll)\nscreencols=$(expr `tput cols` / 2 - 1)\nchars=(ｱ ｲ ｳ ｴ ｵ ｶ ｷ ｸ ｹ ｺ ｻ ｼ ｽ ｾ ｿ ﾀ ﾁ ﾂ ﾃ ﾄ ﾅ ﾆ ﾇ ﾈ ﾉ ﾊ ﾋ ﾌ ﾍ ﾎ ﾏ ﾐ ﾑ ﾒ ﾓ ﾔ ﾕ ﾖ ﾗ ﾘ ﾙ ﾚ ﾛ ﾜ ﾝ)\ncount=${#chars[@]}\ncolorcount=${#colors[@]}\ntrap \"tput sgr0; clear; exit\" SIGTERM SIGINT && setxkbmap gh fula\nif [[ $1 =~ '-h' ]]; then\n    echo \"Usage:        matrix [SPACING [SCROLL]]\"\n    exit 0\nfi\nclear\ntput cup 0 0\nwhile :\n    do for i in $(eval echo {1..$screenlines})\n        do for i in $(eval echo {1..$screencols})\n            do rand=$(($RANDOM%$spacing))\n                case $rand in\n                    0)\n                        printf \"${colors[$RANDOM%$colorcount]}${chars[$RANDOM%$count]} \"\n                        ;;\n                    1)\n                        printf \"  \"\n                        ;;\n                    *)\n                        printf \"\\033[2C\"\n                        ;;\n                esac\n            done\n            printf \"\\n\"\n        done\n        tput cup 0 0\n    done\n</pre>\n\n<p>It then asked to create an encryption key, and I remember it.</p>\n\n<p>Please help, I know I was an idiot and should have tested it in a virtual environment first.</p>\n\n<p>EDIT that formatted terribly, I found the forum I got it from: <a href=\"https://github.com/MKorostoff/bash-sandbox/blob/master/matrix.sh\" rel=\"nofollow\">https://github.com/MKorostoff/bash-sandbox/blob/master/matrix.sh</a></p>\n"},{"id":216322,"title":"How can I capture text from a specific terminal and redirect it to a log file while simultaneously working?","body":"<p>I viewed <a href=\"http://askubuntu.com/questions/140782/how-can-i-capture-text-from-my-terminal-without-redirecting-it-to-a-text-file\"><strong>this question</strong></a> to redirect text to file while displaying the output. My question is how can I redirect it while working <strong>AND</strong> without constant <code>| tee</code> command.</p>\n\n<p>My plan is to use <a href=\"http://askubuntu.com/questions/210182/how-to-check-which-terminal-emulator-is-being-currently-used\"><strong>this question</strong></a> to identify terminal (Gnome or Guake) and record only Gnome for my Linux commands testing. So I need constant and immediate redirecting of commands and their outputs (with errors) to a file (say cmdlog.log).</p>\n"},{"id":524590,"title":"How to send a file as an input to another file?","body":"<p>Through the command shell we can redirect the three standard filestreams so that we can get input from either a file or another command instead of from our keyboard, and we can write output and errors to files or send them as input for subsequent commands.</p>\n\n<p>So why can't we give input to an other file as</p>\n\n<pre><code>~# /root/Documents/text1.txt &gt; /root/Documents/text2.txt\n</code></pre>\n"},{"id":420340,"title":"How to redirect all manuals to files?","body":"<p>Just for fun, or say for sake of convenience, I decided to write out all man pages to files.  </p>\n\n<p>Now if I have to do it one by one, I would do <code>man package-name &gt; filename</code>.  But I want to do some smart work and write all mans at once, either by using single command or by a bash script.All that I have come up with till now is</p>\n\n<pre><code>cd /usr/share #you may use any folder\nwhereis -m * | grep '.gz' |awk '{print$1}' |sed s/://g\n</code></pre>\n\n<p>This gives an output, naming all applications having man pages.Some part of it is as below.  </p>\n\n<pre><code>speech-dispatcher\nstellarium\nsynaptic\nsyslinux\nsystem-config-printer\ntabset\nterminfo\ntotem\nufw\nunetbootin\nunity\nunity-greeter\nupdate-manager\nupstart\nusb_modeswitch\nvim\nvirtualbox\nvlc\nxmms2\nxpdf\nyelp\nzenity\n</code></pre>\n\n<p>Now, what I need to do is redirect this output to <code>man</code> so that I could redirect it to files.Once I do this, then I may create a script to <em>cd</em> to every folder and check for <em>mans</em>.</p>\n\n<p>So my question is, how do I achieve this?</p>\n\n<p>OR, maybe an alternate way exists?</p>\n\n<p>I'm using Ubuntu 12.10.</p>\n\n<blockquote>\n  <p>Please migrate it to stackoverflow if it's appropriate there.Though I think it's more appropriate here.</p>\n</blockquote>\n"}]}]
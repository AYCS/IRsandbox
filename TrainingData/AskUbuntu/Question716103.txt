[{"id":716103,"title":"Samba configuration file location","body":"<p>I have setup samba share in Ubuntu 14.04, by using the Local Network Share option in nautilus and I am able to successfully access the shared folder from other computers in my home. </p>\n\n<p>What I can't figure out is, where nautilus stores samba share configuration. I expected it to be in <code>/etc/samba/smb.conf</code>, but the shared folder is not listed there. I also found another config file in <code>/usr/share/samba/smb.conf</code>, but it doesn't list the shared folder either.</p>\n\n<p>I would appreciate it, if someone could help me figure out the location of samba configuration file in Ubuntu. </p>\n","related_questions":[{"id":664903,"title":"Ubuntu shared folders using samba not getting listed in windows 7","body":"<p>I am trying to share files using samba from my Ubuntu 14.04 machine to Windows 7 machine which are connected to the same network . I have set up samba in my ubuntu machine, gave sharing permissions to the folders and modified the smb.conf file as stated by this thread <a href=\"http://askubuntu.com/questions/19361/cant-access-ubuntus-shared-folders-from-windows-7/19379#19379\">Can&#39;t access Ubuntu&#39;s shared folders from Windows 7</a>. But what I find is that shared folders are not getting listed under networks of my ubuntu machine in my Windows 7 machine </p>\n\n<p>Below is the lines I have added in smb.conf for the shared folders</p>\n\n<pre><code>[Personal$]\n   comment = Personal\n   path = /home/local/aarish/Personal\n   browseable = yes\n   read only = no\n   guest ok = yes\n   public = yes\n   writable = yes\n   available = yes\n\n[Movies$]\n   comment = Movies\n   path = /home/local/aarish/Movies\n   browseable = yes\n   read only = no\n   guest ok = yes\n   public = yes\n   writable = yes\n   available = yes\n</code></pre>\n\n<p>Can someone please tell me how do I fix this issue and get the sharing from ubuntu to windows machine successful ?</p>\n"},{"id":659544,"title":"Samba public share does not show up at &quot;Network&quot; in Windows, but is accessible","body":"<p>I have set up a Samba public share as follows:</p>\n\n<pre><code>[global]\n    workgroup = MYWORKGROUP\n    netbios name = SHUTTLESERVER\n    security = user\n    map to guest = bad user\n    dns proxy = no\n    guest account = nobody\n\n    #to disable printer sharing error message\n    printing = bsd\n    printcap name = /dev/null\n\n[public]\n    comment = Public Share\n    path = /home/villermen/public\n    browsable = yes\n    writable = yes\n    guest only = yes\n</code></pre>\n\n<p>The share can be accessed and written to just fine by Windows using the server's name or ip, (\\192.168.something or \\SHUTTLESERVER). However, it does not show up in the list of network devices. My laptop on the same workgroup, and some other devices like my printer/router show up just fine. The server shows up as dlna device too if I install minidlna, no idea if that is of any use to the question though.</p>\n\n<p>I'm running Ubuntu Server 14.04.3, and Samba 4.1.6-Ubuntu.</p>\n\n<p>Would be great if someone shed some light on this, as I've tried pretty much every option to get this to work.</p>\n\n<p>Gr.Viller</p>\n"},{"id":652087,"title":"Ubuntu 14.04 - issue opening Samba shared locations with Nautilus","body":"<p>As asked I'll try to clarify my issue.</p>\n\n<p>I've an Ubuntu 12.04 system (64Bit), on which I've some shared folders. I'll call this <strong>SYSTEM A</strong>.</p>\n\n<p>I'm able to access to these folders from other devices connected to the LAN, such as two Android devices (with ES File Explorer) and an Ubuntu 10.04 system (32Bit) (with Nautilus).</p>\n\n<p>The issue is with an Ubuntu Gnome 14.04 system (64Bit), that I'll call <strong>SYSTEM B</strong>:\nwhen I try to explore network and access SYSTEM <strong>A</strong> I receive message 'Error retrieving the list of shares: Connection Refused'.</p>\n\n<p>If I try to access from SYSTEM <strong>B</strong> to SYSTEM <strong>A</strong> with Firefox, going to address smb://192.168.x.x., soon after doing this I'm able to access also from Nautilus, as a shortcut is added to Nautilus window (on left bar).</p>\n\n<p>Just to add infos: SYSTEM A shares also printers, and I'm able to access them without problems from SYSTEM B.</p>\n\n<p>I'll be able to produce screenshots, if may help to clarify better.</p>\n\n<p>Here are some screenshots:\n<a href=\"http://i.stack.imgur.com/aEL7r.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/aEL7r.png\" alt=\"STEP 1\"></a>\n<a href=\"http://i.stack.imgur.com/n41nM.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/n41nM.png\" alt=\"STEP 2\"></a>\n<a href=\"http://i.stack.imgur.com/c7qfI.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/c7qfI.png\" alt=\"STEP 3\"></a></p>\n"},{"id":621020,"title":"How is mounting samba share in terminal different to mounting in Nautilus?","body":"<p>I have a server operating a samba share that I can happily navigate by browsing the network, finding the server and share. When I open the share I'm asked to log in. I use my username and password and have full access to the drive and its shares.</p>\n\n<p>When I attempt to mount the same server and share with the same login details, the permissions on the share are all different. What is the difference between the two methods and how can I mount a share with the same permissions that nautilus can? I am using the command:</p>\n\n<pre><code>sudo mount -t cifs -o user=&lt;username&gt; //&lt;IP&gt;/&lt;share&gt;/ &lt;share_folder&gt;/\n</code></pre>\n\n<p>The problem is a lot of software does not know how to open and save files to/from a network share in nautilus, so I need to mount it to the local file system.</p>\n"},{"id":578977,"title":"Samba shares not accessible from Windows 8.1 with Ubuntu 14.04 LTS","body":"<p>Here is my smb.conf file as obtained after using the \"sudo system-config-samba\" command</p>\n\n<pre><code>#\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\n#\n#\n# This is the main Samba configuration file. You should read the\n# smb.conf(5) manual page in order to understand the options listed\n# here. Samba has a huge number of configurable options most of which \n# are not shown in this example\n#\n# Some options that are often worth tuning have been included as\n# commented-out examples in this file.\n#  - When such options are commented with \";\", the proposed setting\n#    differs from the default Samba behaviour\n#  - When commented with \"#\", the proposed setting is the default\n#    behaviour of Samba but the option is considered important\n#    enough to be mentioned here\n#\n# NOTE: Whenever you modify this file you should run the command\n# \"testparm\" to check that you have not made any basic syntactic \n# errors. \n\n#======================= Global Settings =======================\n\n[global]\n\n## Browsing/Identification ###\n\n# Change this to the workgroup/NT-domain name your Samba server will part of\n    workgroup = MSHOME\n\n# server string is the equivalent of the NT Description field\n    server string = %h server (Samba, Ubuntu)\n\n# Windows Internet Name Serving Support Section:\n# WINS Support - Tells the NMBD component of Samba to enable its WINS Server\n#   wins support = no\n\n# WINS Server - Tells the NMBD components of Samba to be a WINS Client\n# Note: Samba can be either a WINS Server, or a WINS Client, but NOT both\n;   wins server = w.x.y.z\n\n# This will prevent nmbd to search for NetBIOS names through DNS.\n    dns proxy = no\n\n#### Networking ####\n\n# The specific set of interfaces / networks to bind to\n# This can be either the interface name or an IP address/netmask;\n# interface names are normally preferred\n;   interfaces = 127.0.0.0/8 eth0\n\n# Only bind to the named interfaces and/or networks; you must use the\n# 'interfaces' option above to use this.\n# It is recommended that you enable this feature if your Samba machine is\n# not protected by a firewall or is a firewall itself.  However, this\n# option cannot handle dynamic or non-broadcast interfaces correctly.\n;   bind interfaces only = yes\n\n\n\n#### Debugging/Accounting ####\n\n# This tells Samba to use a separate log file for each machine\n# that connects\n    log file = /var/log/samba/log.%m\n\n# Cap the size of the individual log files (in KiB).\n    max log size = 1000\n\n# If you want Samba to only log through syslog then set the following\n# parameter to 'yes'.\n#   syslog only = no\n\n# We want Samba to log a minimum amount of information to syslog. Everything\n# should go to /var/log/samba/log.{smbd,nmbd} instead. If you want to log\n# through syslog you should set the following parameter to something higher.\n    syslog = 0\n\n# Do something sensible when Samba crashes: mail the admin a backtrace\n    panic action = /usr/share/samba/panic-action %d\n\n\n####### Authentication #######\n\n# Server role. Defines in which mode Samba will operate. Possible\n# values are \"standalone server\", \"member server\", \"classic primary\n# domain controller\", \"classic backup domain controller\", \"active\n# directory domain controller\". \n#\n# Most people will want \"standalone sever\" or \"member server\".\n# Running as \"active directory domain controller\" will require first\n# running \"samba-tool domain provision\" to wipe databases and create a\n# new domain.\n    server role = standalone server\n\n# If you are using encrypted passwords, Samba will need to know what\n# password database type you are using.  \n;   passdb backend = tdbsam\n\n    obey pam restrictions = yes\n\n# This boolean parameter controls whether Samba attempts to sync the Unix\n# password with the SMB password when the encrypted SMB password in the\n# passdb is changed.\n    unix password sync = yes\n\n# For Unix password sync to work on a Debian GNU/Linux system, the following\n# parameters must be set (thanks to Ian Kahan &lt;&lt;kahan@informatik.tu-muenchen.de&gt; for\n# sending the correct chat script for the passwd program in Debian Sarge).\n    passwd program = /usr/bin/passwd %u\n    passwd chat = *Enter\\snew\\s*\\spassword:* %n\\n *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\n\n# This boolean controls whether PAM will be used for password changes\n# when requested by an SMB client instead of the program listed in\n# 'passwd program'. The default is 'no'.\n    pam password change = yes\n\n# This option controls how unsuccessful authentication attempts are mapped\n# to anonymous connections\n    map to guest = bad user\n\n########## Domains ###########\n\n#\n# The following settings only takes effect if 'server role = primary\n# classic domain controller', 'server role = backup domain controller'\n# or 'domain logons' is set \n#\n\n# It specifies the location of the user's\n# profile directory from the client point of view) The following\n# required a [profiles] share to be setup on the samba server (see\n# below)\n;   logon path = \\\\%N\\profiles\\%U\n# Another common choice is storing the profile in the user's home directory\n# (this is Samba's default)\n#   logon path = \\\\%N\\%U\\profile\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the location of a user's home directory (from the client\n# point of view)\n;   logon drive = H:\n#   logon home = \\\\%N\\%U\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the script to run during logon. The script must be stored\n# in the [netlogon] share\n# NOTE: Must be store in 'DOS' file format convention\n;   logon script = logon.cmd\n\n# This allows Unix users to be created on the domain controller via the SAMR\n# RPC pipe.  The example command creates a user account with a disabled Unix\n# password; please adapt to your needs\n; add user script = /usr/sbin/adduser --quiet --disabled-password --gecos \"\" %u\n\n# This allows machine accounts to be created on the domain controller via the \n# SAMR RPC pipe.  \n# The following assumes a \"machines\" group exists on the system\n; add machine script  = /usr/sbin/useradd -g machines -c \"%u machine account\" -d /var/lib/samba -s /bin/false %u\n\n# This allows Unix groups to be created on the domain controller via the SAMR\n# RPC pipe.  \n; add group script = /usr/sbin/addgroup --force-badname %g\n\n############ Misc ############\n\n# Using the following line enables you to customise your configuration\n# on a per machine basis. The %m gets replaced with the netbios name\n# of the machine that is connecting\n;   include = /home/samba/etc/smb.conf.%m\n\n# Some defaults for winbind (make sure you're not using the ranges\n# for something else.)\n;   idmap uid = 10000-20000\n;   idmap gid = 10000-20000\n;   template shell = /bin/bash\n\n# Setup usershare options to enable non-root users to share folders\n# with the net usershare command.\n\n# Maximum number of usershare. 0 (default) means that usershare is disabled.\n;   usershare max shares = 100\n\n# Allow users who've been granted usershare privileges to create\n# public shares, not just authenticated ones\n    usershare allow guests = yes\n    username map = /etc/samba/smbusers\n    security = user\n;   encrypt passwords = yes\n    guest ok = yes\n    guest account = smbguest\n\n#======================= Share Definitions =======================\n\n# Un-comment the following (and tweak the other settings below to suit)\n# to enable the default home directory shares. This will share each\n# user's home directory as \\\\server\\username\n;[homes]\n;   comment = Home Directories\n;   browseable = no\n\n# By default, the home directories are exported read-only. Change the\n# next parameter to 'no' if you want to be able to write to them.\n;   read only = yes\n\n# File creation mask is set to 0700 for security reasons. If you want to\n# create files with group=rw permissions, set next parameter to 0775.\n;   create mask = 0700\n\n# Directory creation mask is set to 0700 for security reasons. If you want to\n# create dirs. with group=rw permissions, set next parameter to 0775.\n;   directory mask = 0700\n\n# By default, \\\\server\\username shares can be connected to by anyone\n# with access to the samba server.\n# Un-comment the following parameter to make sure that only \"username\"\n# can connect to \\\\server\\username\n# This might need tweaking when using external authentication schemes\n;   valid users = %S\n\n# Un-comment the following and create the netlogon directory for Domain Logons\n# (you need to configure Samba to act as a domain controller too.)\n;[netlogon]\n;   comment = Network Logon Service\n;   path = /home/samba/netlogon\n;   guest ok = yes\n;   read only = yes\n\n# Un-comment the following and create the profiles directory to store\n# users profiles (see the \"logon path\" option above)\n# (you need to configure Samba to act as a domain controller too.)\n# The path below should be writable by all users so that their\n# profile directory may be created the first time they log on\n;[profiles]\n;   comment = Users profiles\n;   path = /home/samba/profiles\n;   guest ok = no\n;   browseable = no\n;   create mask = 0600\n;   directory mask = 0700\n\n[printers]\n    comment = All Printers\n    browseable = no\n    path = /var/spool/samba\n    printable = yes\n;   guest ok = no\n;   read only = yes\n    create mask = 0700\n\n# Windows clients look for this share name as a source of downloadable\n# printer drivers\n[print$]\n    comment = Printer Drivers\n    path = /var/lib/samba/printers\n;   browseable = yes\n;   read only = yes\n;   guest ok = no\n# Uncomment to allow remote administration of Windows print drivers.\n# You may need to replace 'lpadmin' with the name of the group your\n# admin users are members of.\n# Please note that you also need to set appropriate Unix permissions\n# to the drivers directory for these users to have write rights in it\n;   write list = root, @lpadmin\n\n[TorrentsEl]\n    path = /media/laurent06000/Elements/Torrents\n    writeable = yes\n;   browseable = yes\n    guest ok = yes\n\n[laurent06000]\n    path = /home/laurent06000\n    writeable = yes\n;   browseable = yes\n    guest ok = yes\n</code></pre>\n\n<p>In the global section I double checked that the workgroup = MSHOME is correct.</p>\n\n<p>THe laurent06000 share is visible fron Windows but the TorrentsElements is NOT (windows 8.1 tells me : \"<em>You do not have permission to access \\[PC]\\TorrentsElements</em>\" </p>\n\n<p>Any idea ?</p>\n\n<p>PS : here is my smbusers content :\nlaurent06000 = Laurent06</p>\n\n<p>I must say I do not feel comfortable in choosing options in the Add Users option (Avahi, Daemon, Backup etc...) :\n<img src=\"http://i.stack.imgur.com/QVujD.png\" alt=\"Samba Users\"> </p>\n\n<p>PS 2 :\nI noticed strange messages NT-* when issuing a smbstatus command.</p>\n\n<p>smbstatus</p>\n\n<pre><code>Samba version 4.1.6-Ubuntu\nPID     Username      Group         Machine                        \n-------------------------------------------------------------------\nFailed to initialize session_global: NT_STATUS_ACCESS_DENIED\n\nService      pid     machine       Connected at\n-------------------------------------------------------\nFailed to initialize session_global: NT_STATUS_ACCESS_DENIED\nFailed to traverse sessions: NT_STATUS_ACCESS_DENIED\n\nNo locked files\n</code></pre>\n\n<p>Does anybody can explain those messages ?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Laurent</p>\n\n<p>[Edit 1] : I've added the following lines to my smb.conf file :</p>\n\n<p>[Videos]\n    comment = 705\n    path = /media/laurent06000/705c48fd-e126-4af4-baea-f7692de7f138/home/laurent06000/Vidéos\n    writeable = yes\n    browseable = yes\n    guest ok = yes</p>\n\n<p>[laur1]\n    comment = 0cc\n    path = /media/laurent06000/0cc3d633-b99e-4578-a54e-687afd200226/laurent06000\n    writeable = yes\n    browseable = yes\n    guest ok = yes</p>\n\n<p>I double checked that all those shares [TorrentsEl] [Videos] ans [laur1], belongs to my ubuntu user (laurent06000) by using the command <code>sudo chown -R laurent06000:laurent06000</code> at the \"root\" directory of each media present under directory /media/laurent06000.</p>\n\n<p>I still have the error message \"You do not have permission to access \\[PC][share] except for the  [laurent06000]     path = /home/laurent06000 share.</p>\n\n<p>It drives me crazy.</p>\n\n<p>What is wrong in my smb.conf configuration ? Why am I able to access only the /home/laurent06000 share ? </p>\n\n<p>Note : my smbusers contents was changed to (but not by me) :</p>\n\n<pre><code># Unix_name = SMB_Name1 SMB_Name2 ...\nroot = administrator\nnobody = guest smbguest pcguest\nLaurent06 = laurent06\n</code></pre>\n"},{"id":518458,"title":"Why are browsing samba shares from Ubuntu (Nautilus) so much slower than browsing from Windows","body":"<p>I have a samba share over the a vpn server.  Browsing the share takes 60 times longer from Ubuntu than it takes from Windows.</p>\n\n<p>From a Windows 7 Virtual Box (and any other machine in the shop) it takes 3 seconds for a folder with 1000 files to appear.</p>\n\n<p>Clicking on the same folder from Nautilus it takes over 3 minutes before the files show.</p>\n\n<p>The network is the same.  The only difference is browsing from Ubuntu vs browsing from Windows.</p>\n\n<p>This is the /etc/fstab entry from the Ubuntu machine:</p>\n\n<pre><code>//myserver/officeshared /mnt/myshare cifs noauto,username=myname,uid=1001,file_mode=0660,dir_mode=0775,noexec,credentials=/etc/smbpassw 0 0\n</code></pre>\n\n<p>I'm sure the problem is Nautilus and not ubuntu because I can get a file listing in 3 seconds with:</p>\n\n<pre><code>time ls /mnt2/mckserver/McKelvey/ &gt; ~/filelist.txt\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>real    0m2.223s\nuser    0m0.004s\nsys     0m0.007s\n</code></pre>\n"},{"id":525148,"title":"Cant configure existing samba share","body":"<p>I am sorry for the probably dumb question. I have two Ubuntu server VMs - 12.10 and 13.10. A year ago I have configured samba on both machines somehow with <em>documents</em> share on each. Now I cannot find this configuration. That is both shares <em>work</em> but neither /var/samba/smb.conf nor system-config-samba shows them! If I stop smbd service - sharing stops working. Both boxes have a separate volume mounted inside home folder and shared with name \"documents\". Please help!</p>\n"},{"id":43364,"title":"Why does Samba always time-out whilst copying a large file off a network share?","body":"<p>I'm running Ubuntu 11.04 (natty), kernel 2.6.38-8-generic, GNOME 2.32.1.</p>\n\n<p><strong>EDIT:</strong> As of 3 April 2012 I'm now on kernel 2.6.38-13-generic (still same Ubuntu and GNOME). The problem still persists.</p>\n\n<p>I have a Synology DiskStation DS207 NAS connected to my home network. Both of these devices are connected to the network via wired gigabit ethernet.</p>\n\n<p>I access the NAS via Samba on the Ubuntu box.</p>\n\n<p>My problem is that every time I try to copy a large file from one of the NAS's Samba shares to the Desktop on the Ubuntu box using Nautilus, the operation times-out and fails about a third of the way through the copy (roughly about 3 mins into the operation).</p>\n\n<p>I have retried the copy 3 times and the same thing has happened every time.</p>\n\n<p>However, I also have a Windows 7 installation on a different drive in the same PC as the Ubuntu install, and if I boot into Windows 7 and try to copy the file using that OS instead then it works perfectly. This proves (to me at least) that the file and the network connection and hardware are actually all fine.</p>\n\n<p>So does anyone have any ideas about what might be going wrong when trying to copy the file in Ubuntu? Is there simply a \"samba keep-alive\" setting or similar that I need to set somewhere?</p>\n\n<p>By the way, here's a screenshot of the error I get:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MtueV.png\" alt=\"Screenshot of the error\"></p>\n"},{"id":50197,"title":"Cannot connect to Samba share from Nautilus","body":"<p>I have Ubuntu 10.04 and I would like to connect to my Samba shares which are on a DLink DNS323.</p>\n\n<p>From Nautilus in \"Places\" -> \"Network\" I can easily navigate to the DND323 and see the available shares. When I select one of the password-less share I have access to it as expected. When I want to connect to a password protected share, it doesn't work. All it does is asking the password again and again.</p>\n\n<p>I tried to mount the share manually and it worked the first time with</p>\n\n<pre><code>sudo mount -t cifs -o username=user,password=pass //xxx.xxx.xxx.xxx/share ~/share\n</code></pre>\n\n<p>Any idea why this is not working in Nautilus ?</p>\n"},{"id":156312,"title":"I managed to set up a samba file server, but have to use gksudo to add or remove files!","body":"<p>I managed to set up a samba file server, but have to use gksudo to add or remove files!  Also, the windows pc's cannot copy or use the files contained in the share.  How do I rectify this?  The line \"read only = no\" is set properly in my .config file.</p>\n\n<p>here is my smb.conf:</p>\n\n<pre>\n#\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\n#\n#\n# This is the main Samba configuration file. You should read the\n# smb.conf(5) manual page in order to understand the options listed\n# here. Samba has a huge number of configurable options most of which \n# are not shown in this example\n#\n# Some options that are often worth tuning have been included as\n# commented-out examples in this file.\n#  - When such options are commented with \";\", the proposed setting\n#    differs from the default Samba behaviour\n#  - When commented with \"#\", the proposed setting is the default\n#    behaviour of Samba but the option is considered important\n#    enough to be mentioned here\n#\n# NOTE: Whenever you modify this file you should run the command\n# \"testparm\" to check that you have not made any basic syntactic \n# errors. \n# A well-established practice is to name the original file\n# \"smb.conf.master\" and create the \"real\" config file with\n# testparm -s smb.conf.master >smb.conf\n# This minimizes the size of the really used smb.conf file\n# which, according to the Samba Team, impacts performance\n# However, use this with caution if your smb.conf file contains nested\n# \"include\" statements. See Debian bug #483187 for a case\n# where using a master file is not a good idea.\n#\n\n#======================= Global Settings =======================\n\n[global]\n\n## Browsing/Identification ###\n\n# Change this to the workgroup/NT-domain name your Samba server will part of\n    workgroup = matt\n\n# server string is the equivalent of the NT Description field\n    server string = %h server (Samba, Ubuntu)\n\n# Windows Internet Name Serving Support Section:\n# WINS Support - Tells the NMBD component of Samba to enable its WINS Server\n#   wins support = yes\n\n# WINS Server - Tells the NMBD components of Samba to be a WINS Client\n# Note: Samba can be either a WINS Server, or a WINS Client, but NOT both\n;   wins server = w.x.y.z\n\n# This will prevent nmbd to search for NetBIOS names through DNS.\n    dns proxy = no\n\n# What naming service and in what order should we use to resolve host names\n# to IP addresses\n;   name resolve order = wins lmhosts hosts bcast\n\n#### Networking ####\n\n# The specific set of interfaces / networks to bind to\n# This can be either the interface name or an IP address/netmask;\n# interface names are normally preferred\n;   interfaces = 1o eth1\n\n# Only bind to the named interfaces and/or networks; you must use the\n# 'interfaces' option above to use this.\n# It is recommended that you enable this feature if your Samba machine is\n# not protected by a firewall or is a firewall itself.  However, this\n# option cannot handle dynamic or non-broadcast interfaces correctly.\n;   bind interfaces only = yes\n\n\n\n#### Debugging/Accounting ####\n\n# This tells Samba to use a separate log file for each machine\n# that connects\n    log file = /var/log/samba/log.%m\n\n# Cap the size of the individual log files (in KiB).\n    max log size = 1000\n\n# If you want Samba to only log through syslog then set the following\n# parameter to 'yes'.\n#   syslog only = no\n\n# We want Samba to log a minimum amount of information to syslog. Everything\n# should go to /var/log/samba/log.{smbd,nmbd} instead. If you want to log\n# through syslog you should set the following parameter to something higher.\n    syslog = 0\n\n# Do something sensible when Samba crashes: mail the admin a backtrace\n    panic action = /usr/share/samba/panic-action %d\n\n\n####### Authentication #######\n\n# \"security = user\" is always a good idea. This will require a Unix account\n# in this server for every user accessing the server. See\n# /usr/share/doc/samba-doc/htmldocs/Samba3-HOWTO/ServerType.html\n# in the samba-doc package for details.\n#   security = user\n\n# You may wish to use password encryption.  See the section on\n# 'encrypt passwords' in the smb.conf(5) manpage before enabling.\n;   encrypt passwords = yes\n\n# If you are using encrypted passwords, Samba will need to know what\n# password database type you are using.  \n;   passdb backend = tdbsam\n\n    obey pam restrictions = yes\n\n# This boolean parameter controls whether Samba attempts to sync the Unix\n# password with the SMB password when the encrypted SMB password in the\n# passdb is changed.\n    unix password sync = yes\n\n# For Unix password sync to work on a Debian GNU/Linux system, the following\n# parameters must be set (thanks to Ian Kahan  for\n# sending the correct chat script for the passwd program in Debian Sarge).\n    passwd program = /usr/bin/passwd %u\n    passwd chat = *Enter\\snew\\s*\\spassword:* %n\\n *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\n\n# This boolean controls whether PAM will be used for password changes\n# when requested by an SMB client instead of the program listed in\n# 'passwd program'. The default is 'no'.\n    pam password change = yes\n\n# This option controls how unsuccessful authentication attempts are mapped\n# to anonymous connections\n    map to guest = bad user\n\n########## Domains ###########\n\n# Is this machine able to authenticate users. Both PDC and BDC\n# must have this setting enabled. If you are the BDC you must\n# change the 'domain master' setting to no\n#\n;   domain logons = yes\n#\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the location of the user's profile directory\n# from the client point of view)\n# The following required a [profiles] share to be setup on the\n# samba server (see below)\n;   logon path = \\\\%N\\profiles\\%U\n# Another common choice is storing the profile in the user's home directory\n# (this is Samba's default)\n#   logon path = \\\\%N\\%U\\profile\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the location of a user's home directory (from the client\n# point of view)\n;   logon drive = H:\n#   logon home = \\\\%N\\%U\n\n# The following setting only takes effect if 'domain logons' is set\n# It specifies the script to run during logon. The script must be stored\n# in the [netlogon] share\n# NOTE: Must be store in 'DOS' file format convention\n;   logon script = logon.cmd\n\n# This allows Unix users to be created on the domain controller via the SAMR\n# RPC pipe.  The example command creates a user account with a disabled Unix\n# password; please adapt to your needs\n; add user script = /usr/sbin/adduser --quiet --disabled-password --gecos \"\" %u\n\n# This allows machine accounts to be created on the domain controller via the \n# SAMR RPC pipe.  \n# The following assumes a \"machines\" group exists on the system\n; add machine script  = /usr/sbin/useradd -g machines -c \"%u machine account\" -d /var/lib/samba -s /bin/false %u\n\n# This allows Unix groups to be created on the domain controller via the SAMR\n# RPC pipe.  \n; add group script = /usr/sbin/addgroup --force-badname %g\n\n########## Printing ##########\n\n# If you want to automatically load your printer list rather\n# than setting them up individually then you'll need this\n#   load printers = yes\n\n# lpr(ng) printing. You may wish to override the location of the\n# printcap file\n;   printing = bsd\n;   printcap name = /etc/printcap\n\n# CUPS printing.  See also the cupsaddsmb(8) manpage in the\n# cupsys-client package.\n;   printing = cups\n;   printcap name = cups\n\n############ Misc ############\n\n# Using the following line enables you to customise your configuration\n# on a per machine basis. The %m gets replaced with the netbios name\n# of the machine that is connecting\n;   include = /home/samba/etc/smb.conf.%m\n\n# Most people will find that this option gives better performance.\n# See smb.conf(5) and /usr/share/doc/samba-doc/htmldocs/Samba3-HOWTO/speed.html\n# for details\n# You may want to add the following on a Linux system:\n#         SO_RCVBUF=8192 SO_SNDBUF=8192\n#   socket options = TCP_NODELAY\n\n# The following parameter is useful only if you have the linpopup package\n# installed. The samba maintainer and the linpopup maintainer are\n# working to ease installation and configuration of linpopup and samba.\n;   message command = /bin/sh -c '/usr/bin/linpopup \"%f\" \"%m\" %s; rm %s' &\n\n# Domain Master specifies Samba to be the Domain Master Browser. If this\n# machine will be configured as a BDC (a secondary logon server), you\n# must set this to 'no'; otherwise, the default behavior is recommended.\n#   domain master = auto\n\n# Some defaults for winbind (make sure you're not using the ranges\n# for something else.)\n;   idmap uid = 10000-20000\n;   idmap gid = 10000-20000\n;   template shell = /bin/bash\n\n# The following was the default behaviour in sarge,\n# but samba upstream reverted the default because it might induce\n# performance issues in large organizations.\n# See Debian bug #368251 for some of the consequences of *not*\n# having this setting and smb.conf(5) for details.\n;   winbind enum groups = yes\n;   winbind enum users = yes\n\n# Setup usershare options to enable non-root users to share folders\n# with the net usershare command.\n\n# Maximum number of usershare. 0 (default) means that usershare is disabled.\n;   usershare max shares = 100\n\n# Allow users who've been granted usershare privileges to create\n# public shares, not just authenticated ones\n    usershare allow guests = yes\n    security = user\n    guest ok = yes\n    guest account = pcguest\n    username map = /etc/samba/smbusers\n\n#======================= Share Definitions =======================\n\n# Un-comment the following (and tweak the other settings below to suit)\n# to enable the default home directory shares. This will share each \n# user's home director as \\\\server\\username\n;[homes]\n;   comment = Home Directories\n;   browseable = no\n\n# By default, the home directories are exported read-only. Change the\n# next parameter to 'no' if you want to be able to write to them.\n;   read only = yes\n\n# File creation mask is set to 0700 for security reasons. If you want to\n# create files with group=rw permissions, set next parameter to 0775.\n;   create mask = 0700\n\n# Directory creation mask is set to 0700 for security reasons. If you want to\n# create dirs. with group=rw permissions, set next parameter to 0775.\n;   directory mask = 0700\n\n# By default, \\\\server\\username shares can be connected to by anyone\n# with access to the samba server. Un-comment the following parameter\n# to make sure that only \"username\" can connect to \\\\server\\username\n# The following parameter makes sure that only \"username\" can connect\n#\n# This might need tweaking when using external authentication schemes\n;   valid users = %S\n\n# Un-comment the following and create the netlogon directory for Domain Logons\n# (you need to configure Samba to act as a domain controller too.)\n;[netlogon]\n;   comment = Network Logon Service\n;   path = /home/samba/netlogon\n;   guest ok = yes\n;   read only = yes\n\n# Un-comment the following and create the profiles directory to store\n# users profiles (see the \"logon path\" option above)\n# (you need to configure Samba to act as a domain controller too.)\n# The path below should be writable by all users so that their\n# profile directory may be created the first time they log on\n;[profiles]\n;   comment = Users profiles\n;   path = /home/samba/profiles\n;   guest ok = no\n;   browseable = no\n;   create mask = 0600\n;   directory mask = 0700\n\n[printers]\n    comment = All Printers\n    browseable = no\n    path = /var/spool/samba\n    printable = yes\n;   guest ok = no\n;   read only = yes\n    create mask = 0700\n\n# Windows clients look for this share name as a source of downloadable\n# printer drivers\n[print$]\n    comment = Printer Drivers\n    path = /var/lib/samba/printers\n;   browseable = yes\n;   read only = yes\n;   guest ok = no\n# Uncomment to allow remote administration of Windows print drivers.\n# You may need to replace 'lpadmin' with the name of the group your\n# admin users are members of.\n# Please note that you also need to set appropriate Unix permissions\n# to the drivers directory for these users to have write rights in it\n;   write list = root, @lpadmin\n\n# A sample share for sharing your CD-ROM with others.\n;[cdrom]\n;   comment = Samba server's CD-ROM\n;   read only = yes\n;   locking = no\n;   path = /cdrom\n;   guest ok = yes\n\n# The next two parameters show how to auto-mount a CD-ROM when the\n#   cdrom share is accesed. For this to work /etc/fstab must contain\n#   an entry like this:\n#\n#       /dev/scd0   /cdrom  iso9660 defaults,noauto,ro,user   0 0\n#\n# The CD-ROM gets unmounted automatically after the connection to the\n#\n# If you don't want to use auto-mounting/unmounting make sure the CD\n#   is mounted on /cdrom\n#\n;   preexec = /bin/mount /cdrom\n;   postexec = /bin/umount /cdrom\n\n[share]\n    comment = Ubuntu File Server Share\n    path = /srv/samba/share\n    browseable = yes\n    guest ok = yes\n    read only = no\n    create mask = 0755\n</pre>\n"}]}]
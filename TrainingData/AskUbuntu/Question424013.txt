[{"id":424013,"title":"Ubuntu Server Port 80 not reachable/closed","body":"<p>I am running Ubuntu server 12.04 with Apache2.</p>\n\n<p>My port 80 is not reachable and closed. Any idea how can I open it so I can access to my web admin?</p>\n\n<p>I noticed that port 80 is reachable under LAN, but its not able to reach outside of LAN even I had done port forwarding.</p>\n\n<p>What should I do?</p>\n\n<p>Thanks.</p>\n","related_questions":[{"id":320121,"title":"Simple port forwarding","body":"<p>I am in a bit of trouble as I am trying to setup a reverse proxy with and a second server. My idea was to get the firewall to forward https to the reverse proxy and port 29418 (gerrit ssh) to the second server. Now my cooperate IT guy says: CAN NOT! Either both ports go to server 1 or both ports go to server 2.</p>\n\n<p>Ok, as a work around I tried to setup a port forwarding on the reverse proxy of port 29418 -> server2:29418</p>\n\n<p>Details:</p>\n\n<ul>\n<li>Server1 IP: 10.0.0.132 and 192.168.10.2 on Ubuntu 12.04.2 LTS</li>\n<li>Server2 IP: 10.0.0.133 and 192.168.10.3 on Ubuntu 12.04.2 LTS</li>\n</ul>\n\n<p>Now both https and port 29418 go from the firewall to 10.0.0.132, IT says that's the only way. :(</p>\n\n<p>So please tell me how to forward from 10.0.0.132:29418 -> 192.168.10.3:29418 or 10.0.0.133:29418</p>\n\n<p>When I am working on the 10.0.0.132 I can connect to both 10.0.0.133:29418 and 192.168.10.3:29418 so the ports are open.</p>\n\n<p>-- Update --</p>\n\n<p>My iptables -t nat -L looks like this:</p>\n\n<pre>\nroot@dev:/root# iptables -t nat -L\nChain PREROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nDNAT       tcp  --  anywhere             dev.example.com       tcp dpt:29418 to:10.0.0.133\n\nChain INPUT (policy ACCEPT)\ntarget     prot opt source               destination\n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination\n\nChain POSTROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nroot@dev:/root# cat /proc/sys/net/ipv4/ip_forward\n1\n</pre>\n"},{"id":674620,"title":"Ports not Forwarding to Ubuntu Server","body":"<p>I have set up a simple LAMP and OpenSSH server, which is operating normally. That is, from the intranet. Accessing webpages/ssh is impossible from outside of my network.</p>\n\n<p>I am fairly confident that I have set up my port forwarding properly on my router. I have done it before with Steam, Minecraft, and several other games with great success. My server has access to the internet, I can retrieve packages and ping Google just fine. I have also tested odd ports like 13124 to ensure that it is not my ISP blocking ports.</p>\n\n<p>I've tried setting up iptables (although as far as I know, all ports are open by default):</p>\n\n<pre><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination\nACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:ssh\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:http\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:http-alt\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:13124\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:24113\n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination\n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination\n</code></pre>\n\n<p>I've tried logging packets with tcpdump, but found I was receiving nothing on those ports from external sources. Which leads me back to my router, what could I possibly be doing wrong?</p>\n\n<p>Here is my wireless network info from ifconfig:</p>\n\n<pre><code>wlan0     Link encap:Ethernet  HWaddr 00:14:a5:8c:1b:26\n          inet addr:192.168.1.200  Bcast:192.168.1.255  Mask:255.255.255.0\n          inet6 addr: fe80::214:a5ff:fe8c:1b26/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:11658 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:5339 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:1769099 (1.7 MB)  TX bytes:6433857 (6.4 MB)\n</code></pre>\n\n<p>As well as my network interfaces configuration:</p>\n\n<pre><code># The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet dhcp\n\n# WhiteBox\nauto wlan0\niface wlan0 inet dhcp\ngateway 192.168.1.100\nwireless-essid WhiteBox\nwireless-key XXXXXXXXXX\ndns-nameservers 8.8.8.8 192.168.1.100\n</code></pre>\n\n<p>And my router port forwards (DLink DIR-615 B2, Firmware V 2.25):\n<a href=\"http://i.stack.imgur.com/mI2ZD.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/mI2ZD.png\" alt=\"Port forwarding setup on router for HTTP and SSH\"></a></p>\n\n<p>What is causing inbound connections to never reach my server? What can I do to further debug the setup between my server and my router? Any help is appreciated.</p>\n"},{"id":623732,"title":"Port forwarding to local server","body":"<p>I want to be able to access a server which is running on my local machine via the Internet. I setup port forwarding on my router:</p>\n\n<pre><code>Public Port Range: 80-80\nTarget IP Address: 192.168.0.4\nTarget Port Range: 80-80\n</code></pre>\n\n<p>I checked if the ports are open with <a href=\"http://www.yougetsignal.com/tools/open-ports/\" rel=\"nofollow\">http://www.yougetsignal.com/tools/open-ports/</a> which states: Port 80 is open on ...</p>\n\n<p>I tried it with an Apache server as well with an nodeJS server on port 3000, but I never have access to the server.</p>\n\n<p>I checked if my machine is listening on those ports with <code>netstat</code></p>\n\n<pre><code>netstat -ltn | grep 80\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN\n</code></pre>\n\n<p>What options do I have to get to the bottom of this, any other checks I could run?</p>\n\n<p>If it helps here is the Apache configuration.</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin webmaster@localhost\n    ServerName lebensmittel-schulung.local\n\n    DocumentRoot /home/dominic/workspace/lebensmittel-schulung/public\n    &lt;Directory /&gt;\n        Options FollowSymLinks\n        AllowOverride None\n    &lt;/Directory&gt;\n    &lt;Directory /home/dominic/workspace/lebensmittel-schulung/public&gt;\n        Options Indexes FollowSymLinks MultiViews\n        AllowOverride All\n        Order allow,deny\n        allow from all\n        Require all granted\n    &lt;/Directory&gt;\n\n\n    # Redirect www to non-www\n    RewriteEngine on\n    RewriteCond %{HTTP_HOST} ^www\\.(.+)$ [NC]\n    RewriteRule ^(.*)$ http://%1$1 [L,R=301]\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n\n    # Possible values include: debug, info, notice, warn, error, crit,\n    # alert, emerg.\n    LogLevel warn\n\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    Alias /doc/ \"/usr/share/doc/\"\n    &lt;Directory \"/usr/share/doc/\"&gt;\n        Options Indexes MultiViews FollowSymLinks\n        AllowOverride None\n        Order deny,allow\n        Deny from all\n        Allow from 127.0.0.0/255.0.0.0 ::1/128\n    &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p><em>Also did a factory reset and reboot of my router to avoid a mis-configuration</em></p>\n\n<p>iptables before:</p>\n\n<pre><code>Chain INPUT (policy ACCEPT 1330K packets, 1422M bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 ACCEPT     udp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            udp dpt:53\n    0     0 ACCEPT     tcp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:53\n    0     0 ACCEPT     udp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            udp dpt:67\n    0     0 ACCEPT     tcp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:67\n</code></pre>\n\n<p>iptables after opening port 80 manually</p>\n\n<pre><code>Chain INPUT (policy ACCEPT 68 packets, 9825 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80\n    0     0 ACCEPT     udp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            udp dpt:53\n    0     0 ACCEPT     tcp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:53\n    0     0 ACCEPT     udp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            udp dpt:67\n    0     0 ACCEPT     tcp  --  virbr0 *       0.0.0.0/0            0.0.0.0/0            tcp dpt:67\n</code></pre>\n\n<p>This is the tcpdump output after making a request to my public ip from the same machine the server is running on, though opening port 80 doesn't change anything. I think that this is the outgoing request which gets captured by tcpdump</p>\n\n<pre><code>tcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on wlan0, link-type EN10MB (Ethernet), capture size 65535 bytes\n21:46:42.402748 IP 192.168.0.4.34870 &gt; chello080108157035.6.12.vie.surfer.at.http: Flags [S], seq 2878976956, win 29200, options [mss 1460,sackOK,TS val 4294937394 ecr 0,nop,wscale 7], length 0\n21:46:42.405078 IP chello080108157035.6.12.vie.surfer.at.http &gt; 192.168.0.4.34870: Flags [R.], seq 0, ack 2878976957, win 0, length 0\n21:46:43.473378 IP 192.168.0.4.34871 &gt; chello080108157035.6.12.vie.surfer.at.http: Flags [S], seq 1711479299, win 29200, options [mss 1460,sackOK,TS val 4294937661 ecr 0,nop,wscale 7], length 0\n21:46:43.473897 IP 192.168.0.4.34872 &gt; chello080108157035.6.12.vie.surfer.at.http: Flags [S], seq 2157458117, win 29200, options [mss 1460,sackOK,TS val 4294937662 ecr 0,nop,wscale 7], length 0\n21:46:43.475335 IP chello080108157035.6.12.vie.surfer.at.http &gt; 192.168.0.4.34871: Flags [R.], seq 0, ack 1711479300, win 0, length 0\n21:46:43.476463 IP chello080108157035.6.12.vie.surfer.at.http &gt; 192.168.0.4.34872: Flags [R.], seq 0, ack 2157458118, win 0, length 0\n</code></pre>\n"},{"id":566942,"title":"Orange livebox and ubuntu port forwarding","body":"<p>I installed a LAMP server in my computer to try some php and html scripts and I want to know if I can make those files public so I can see them from other computer with other internet conection. My router is the orange livebox.</p>\n"},{"id":537187,"title":"How can I open ports?","body":"<p>I want to open a port, specifically port <code>32887</code> for <code>TCP</code>, used for Ace of Spades (buildnshoot) game.</p>\n\n<p>I created a server (I can access it from <code>127.0.0.1</code>) but my friends can't join me. It looks like a port problem.</p>\n\n<p>Could you guys help me?</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Did everything camconn told me to do and got this out of <code>iptables -L</code> command:</p>\n\n<pre><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \nACCEPT     udp  --  anywhere             anywhere             udp dpt:32887\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\nACCEPT     tcp  --  anywhere             anywhere             tcp dpt:32887 flags:FIN,SYN,RST,ACK/SYN\n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination    \n</code></pre>\n\n<p>Is this all I have to do?</p>\n"},{"id":251431,"title":"forward port 80 for multiple IP addresses on the same Ubuntu server","body":"<p>I am using an Ubuntu 12.10 server as a router/NAT for an internal network to the internet. I have also configured the server to forward port 80 to a server sitting on my internal network. This all works fine.</p>\n\n<p>What I would like to do now is setup additional port forwarders to addition web servers using port 80 on my network. I have several other static internet addresses I can use externally and just need to setup forwarding to the local servers.</p>\n\n<p>I know I could just create additional Ubuntu servers, configuring each of them with different internet addresses (as well as local addresses on a 2nd NIC) and setting up port forwarding.</p>\n\n<p>Is this possible to do with a single Ubuntu server?</p>\n\n<p>I tried adding more virtual NICs to my single Ubuntu server but ran into routing problems since all these additional NICs were on the same internet subnet.</p>\n\n<p>Is setting up individual ubuntu servers for each port forward I wish to do the only way to accomplish this?</p>\n"},{"id":231914,"title":"cannot access ubuntu server behind huawei router even after port forwarding","body":"<p>I have an ubuntu 12.10 server installed, got a static ip from my ISP. Pinging the ip results in success. I also have a huawei Echo-Life modem. Following <a href=\"http://portforward.com/\" rel=\"nofollow\">this site</a> I was able to set the ports to be forwarded. I also checked this with the guys at huawei. The problem is that when I enter my static ip in the browser, I always get stuck at the modem/router login interface.</p>\n\n<p>Going to the ip address assigned to my ubuntu server (on my network) I can see that nginx serves pages correctly. Another thing is that getting my modem/router interface is only possible via my local network. I asked a friend to try my static ip but he said he got a blank page. I think this means that the gateway is not accessible from the outside world.</p>\n\n<p>I think I'm missing something minimal here as it's not supposed to be this complicated setting up a home server. Any help would be appreciated.</p>\n"},{"id":179226,"title":"Allow port 80 into Ubuntu","body":"<p>I'm trying to create a basic web server.  I am running Ubuntu 12.04 desktop. I have installed LAMP and set up html files, and when I open a browser and navigate to 192.168.1.95 (static internal IP of my server), or 192.168.2.2, the modified index.html file that came with Apache2 appears on screen.  The problem is with connecting through internet, rather than intranet.  I have used a cell phone (WiFi  disabled) to connect through the cell network, as well as giving my external IP to a friend, and asking him to try to open the site.  Each time, however, we receive error <strong><em>502 Bad Gateway - Response Error, a bad response was received from another proxy server or the destination origin server.</em></strong>  </p>\n\n<p>Let me say that I have already gotten disabled the remote configuration option in my router, so that's not the problem, and I have already forwarded port 80 through my router.  Yes, I'm pretty sure I did it right.  In fact, to test that the router wasn't the problem, I connected my server directly to my modem, which does NOT have an internal router, and still got the same error.  A Google search has told me that my ISP (CenturyLink) does not block port 80, and that others with the same ISP have been successful in hosting their own sites from home.  Obviously I'm not very knowledgeable about this subject, but from my understanding, I've ruled out everything except the server, which means that something is either blocking port 80 on the way in, or the data is never making it back out.  My question is this:</p>\n\n<p>Is there something (firewall, etc.) in Ubuntu that could be responsible for such an error?  </p>\n\n<p>I have already enabled, disabled, and opened holes through UFW, and that hasn't made a difference.  One tutorial I read suggested that AppArmor could be a problem, and they suggested that it be uninstalled, so I followed their instructions on how to do so, but I have noticed that there is still an AppArmor folder in /etc/, so I'm not exactly sure what all got done.  If there is any other information you could give me, I would truly appreciate it.  In the event that I overlooked some blatantly obvious solution, I'm really sorry to bother you all, but it hasn't been for lack of effort; I've been working on this for the vast majority of the past two days...</p>\n\n<p>Also,  I'm not sure if it makes any difference, or if this is actually related, but I'm having the same problem with SSH; I can SSH into this system over my local network using username@local_IP, but I can't get it to work over a non-local network (yes, I do realize that I need more than just a local IP)  Maybe this helps narrow down the problem, then again, maybe not...</p>\n\n<p>Thanks in advance for your time and support!!!</p>\n"},{"id":176770,"title":"How to run a command as root at an Ubuntu server start-up?","body":"<p>I use the following simple solution for port forwarding:</p>\n\n<pre><code>sudo su\nnohup redir --lport 80 --caddr 192.168.1.2 --cport 80 &amp;\n</code></pre>\n\n<p>It works this way and doesn't work any other (like <code>sudo nohup...</code> for example).</p>\n\n<p>I'd like this to be done automatically at my Ubuntu 12.04 Server start-up.</p>\n\n<p>Where can I put this?</p>\n"},{"id":12545,"title":"Port Forwarding to Connect to MySQL Database of VirtualBox","body":"<p>I have Ubuntu 10.04 as <strong>host</strong> machine and Ubuntu 10.10 as <strong>guest</strong> machine installed in VirtualBox. </p>\n\n<p>I had success on port forwarding to connect to Apache of guest machine, so that now I can open in host machine web sites published in Web Server(Apache) of guest machine. </p>\n\n<p>I need to do the same with MySql, i.e. access MySql of <strong>guest</strong> machine from <strong>host</strong> machine. </p>\n\n<p>In order to achieve this goal I am executing following commands in <strong>host</strong> machine:</p>\n\n<pre><code>VBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/HostPort\" 3307\nVBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/GuestPort\" 3306\nVBoxManage setextradata Ubuntu \"VBoxInternal/Devices/e1000/0/LUN#0/Config/mysql/Protocol\" TCP\n</code></pre>\n\n<p>where <strong><em>Ubuntu</em></strong> is the name of the host machine.</p>\n\n<p>Guest machine loads and when I try to connect to MySql from host machine it can not connect to it. </p>\n\n<p>What could be the problem here?</p>\n\n<p>Thank you.</p>\n"}]}]
[{"id":454949,"title":"Ubuntu 14.04 System Freezes - Firefox eats a lot of memory with nvidia-prime enabled","body":"<p>I have a clean install of Ubuntu 14.04 on a Dell XPS L502X Laptop with a discrete, optimus-enabled Nidia card.</p>\n\n<p>System was working great until I decided to install bumblebee to enable the Nvidia card (from the universe repository, not the PPA). Then, opening Firefox caused the system to freeze, eating all of the available memory (according to htop). Killing Firefox unfreezes the system.</p>\n\n<p>I tested Nvidia Prime instead of Bumblebee, because I thought it might be a bug in bumblebee, but when the Nvidia card is enabled in prime, Firefox freezes the system, and with the Intel card, it doesn't.</p>\n\n<p>Is this a known issue? Is this happening to other people or with other apps while the Nvidia card is enabled?</p>\n","related_questions":[{"id":709174,"title":"Nvidia Prime not working on Ubuntu Gnome 15.10","body":"<p>Switching the graphics card does not work, if you leave the system, it is impossible to login again. If you reboot, the GDM will not start. I have to boot into rescue mode and perform <code>prime-select intel</code>. How to fix?</p>\n"},{"id":549915,"title":"How to install nVidia drivers with Bumblebee on Ubuntu 14.04","body":"<p>As the title, how can I correctly setup nvidia-optimus technology on Ubuntu?</p>\n"},{"id":354829,"title":"Bumblebee problem after installation","body":"<p>Yesterday I was using Kubuntu 13.10. I had a problem using my Intel and Nvidia graphics cards. I thought this was a KDE problem, so I changed distros to Xubuntu. After the installation I installed Steam and it was working. I was happy. I got this error</p>\n\n<pre><code>ERROR: Could not open display :8   \n</code></pre>\n\n<p>Next I installed an update, and after the update I was trying to install nvidia-prime but after restarting lightdm didn't start. I reinstalled Xubuntu, installed an update, and install the nvidia-319 driver and bumblebee using the following commands:</p>\n\n<pre><code>sudo apt-get install nvidia-319 nvidia-settings-319\nsudo apt-get install bumblebee linux-headers-generic\n</code></pre>\n\n<p>I restarted the computer and installed Steam. After Steam started I got an error exactly like the error I got before on Kubuntu. While using the Intel card and running Steam I got this error:</p>\n\n<pre><code>ERROR: Could not open display :8 \n</code></pre>\n\n<p>Nvidia running using bumblebee was giving me a primus error.</p>\n\n<p>I reinstalled the operating system again and installed updates and Steam is working. \nHow do I install Bumblebee without getting a graphic cards problem? </p>\n"},{"id":497867,"title":"nvidia-prime with 14.04 problems","body":"<p>I have a Dell 17xps with an NVidia Optimus 555M graphics card.</p>\n\n<h3>History</h3>\n\n<p>It's all worked OK with Ubuntu 12.x and bumblebee, but I really want to use 14.04 and nvidia-prime. </p>\n\n<p>I've basically been following these instructions:\n<a href=\"http://askubuntu.com/questions/412452/getting-hybrid-graphics-to-work-nvidia-prime-gt650m\">How to get an Optimus 650 working</a></p>\n\n<p>Everything worked <em>fine</em> until reboot. After reboot,  /dev/nvid* was empty. \nI found someone else talking about this on X.org <a href=\"http://www.x.org/wiki/NVIDIAProprietaryDriver/\" rel=\"nofollow\">here</a> and added the script to my cron at reboot.  </p>\n\n<h3>Symptoms</h3>\n\n<ol>\n<li><p>It boots and ls /dev/nvid* gives results. It prompts me with Unity's login screen. But when I login, it just hangs. I can basically see the mouse and the login background and it just stays there. \nI Ctrl-Alt-F1 and look a the syslog and there's nothing interesting. No video errors at all. </p></li>\n<li><p>i. I installed fluxbox, which I have used before. When I login to that, it seems great. Fluxbox is limited, so GLXGears doesn't like it (anyone know if there's a way around that?), but everything seems to render. I can't tell for sure if I'm on the NVidia side of the card or the Intel, but from the heat of the laptop, it feels like the NVidia side. </p>\n\n<p>ii. In fluxbox, I can open Nvidia-settings. And I don't have an NVidia PRIME section. No clue why? If I try to install nvidia-prime, it tells me it's already installed. But it's not on the settings box. </p></li>\n<li><p>I have no xorg.conf file in /etc/X11... don't I need one? I'm sure I didn't delete it. I remember nvidia-xconfig (I think?) will create one, since fluxbox is loading without one, maybe I'm wrong? I know nvidia-xconfig has broken my system before. </p></li>\n</ol>\n\n<p>I'm running NVIDIA 331.38 drivers. </p>\n\n<p><code>lspci</code> gives me this:</p>\n\n<pre><code>00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)\n01:00.0 VGA compatible controller: NVIDIA Corporation GF116M [GeForce GT 555M/635M] (rev a1)\n</code></pre>\n"},{"id":596357,"title":"ubuntu 14.04 - nvidia prime only works on restart (logout-login doesnt work)","body":"<p>on a fresh ubuntu 14.04 install, xorg-edgers PPA, dist-upgrade (latest xorg from xorg-edgers PPA), nvidia-drivers 346.47 (latest drivers), nvidia-prime 0.6.2 (from official ubuntu repository).</p>\n\n<p>everything works but only after a restart:</p>\n\n<p>if i go to nvidia-settings and change from nvidia -> intel, and then logout - login: the green LED (corresponding to the intel card) on the laptop turns on, but i get \"cant start xserver: FATAL ERROR: no screens found\". if i restart the computer everything is fine.</p>\n\n<p>going to nvidia-settings and change intel -> nvidia, and then logout - login: the yellow led (corresponding to the nvidia card) on the laptop turns on, and im able to login but everything that uses the GPU complains about lacking X extensions (for instance opening nvidia-settings only shows minimal settings, and running glxgears gives \"extensions missing\" errors). but if i restart the computer everything is fine.</p>\n\n<p>tldr: the nvidia-intel switch works fine as long as i restart the computer. but if i only do logout-login it doesn't work. but having to restart every time i switch GPUs is really annoying, is there something i can do?</p>\n\n<p>thanks in advance.</p>\n"},{"id":477553,"title":"Ubuntu 14.04 can&#39;t get nvidia-prime working","body":"<p>Yesterday I upgraded to 14.04 from 13.10 and wanted to try nvidia-prime. However, I am unable to get it working. The message I am getting when I run 'nvidia-settings' at the command line is as follows:</p>\n\n<pre><code>ERROR: Error querying target relations\n\n** Message: PRIME: No offloading required. Abort\n** Message: PRIME: is it supported? no\n\nERROR: nvidia-settings could not find the registry key file. This file should\n   have been installed along with this driver at either\n   /usr/share/nvidia/nvidia-application-profiles-331.38-key-documentation\n   or /usr/share/nvidia/nvidia-application-profiles-key-documentation. The\n   application profiles will continue to work, but values cannot be\n   preopulated or validated, and will not be listed in the help text.\n   Please see the README for possible values and descriptions.\n</code></pre>\n\n<p>I tried installing and uninstalling many times following different suggestions that I could find, but apparently I am doing something wrongly as the guy <a href=\"http://www.webupd8.org/2013/08/using-nvidia-graphics-drivers-with.html\" rel=\"nofollow\">here</a> gets it to work on exactly the same laptop as mine (on 13.10)</p>\n\n<p>Thank you very much</p>\n"},{"id":457446,"title":"Ubuntu 14.04 nvidia-prime &quot;is it supported? no&quot;","body":"<p>I have an Optimus laptop, a Dell XPS 15 L502, which I've had for a few years and have tried various things on (bumblebee, nvidia-prime, linux kernel optimus support).</p>\n\n<p>The graphics card is an NVIDIA GT 540M.</p>\n\n<p>I upgraded to Ubuntu 14.04 a few days ago and wanted to try <code>nvidia-prime</code> again (it wasn't working so great for me on 13.10), but <code>nvidia-settings</code> only tells me that it is not supported.</p>\n\n<p>Software and Updates recognises the Nvidia card and drivers.\nNvidia Settings currently gives me this:</p>\n\n<pre><code>** Message: PRIME: No offloading required. Abort\n** Message: PRIME: is it supported? no\n</code></pre>\n\n<p>I've tried to purge and reinstall nvidia drivers a dozen times, I've tried with and without <code>xorg.conf</code> files, but still always the same thing.</p>\n\n<p>I've followed all the guides I could find on StackOverflow, AskUbuntu, and various other places.</p>\n\n<p>I'm happy to provide parts of certain log files if needed. I haven't been able to glean much from them (though I'm not exactly an expert).</p>\n\n<p>I would be glad if someone could give me any hints as to why this is not working for me while it does seem to work for so many others.</p>\n\n<p><strong>EDIT:</strong> I was having problem with booting into \"low-graphics mode\", but that was due to a bad <code>lightdm</code> configuration that broke when I upgraded. I also had some segmentation fault issues with <code>nvidia-settings</code> installing the wrong version of itself (this was fixed by reinstalling just <code>nvidia-settings</code>).</p>\n\n<p><strong>EDIT:</strong> Have also found this bug report: <a href=\"https://bugs.launchpad.net/ubuntu/+source/nvidia-prime/+bug/1283439\">https://bugs.launchpad.net/ubuntu/+source/nvidia-prime/+bug/1283439</a></p>\n"},{"id":477410,"title":"Unity gone after installing Nvidia Prime","body":"<p>I wanted to replace Bumblebee with Nvidia Prime for more performance. I used these commands:</p>\n\n<pre><code>sudo apt-get purge libvdpau-va-gl1 bumblebee* nvidia*\nsudo apt-get install nvidia-331 nvidia-settings nvidia-prime\n</code></pre>\n\n<p>Then i rebooted. At first everything looked fine. Nvidia drivers was enabled with perfect graphic performance. Then I tried to use power saving mode(Intel card) from Nvidia Settings. It said i have to log out and log in. I did as it said and then, Unity was gone. No launcher, no top bar, no folders and shourtcuts nothing but my wallpaper and cursor. Right clicking or Ctrl + Alt + T didn't work either. I could get unity back when I reinstalled drivers and Prime with commands I gave above. I tried to reinstall Bumblebee, get back to Nouveau drivers, using different versions of drivers but none of them helped. I don't want to reinstall my system just because of this so can anyone help me about this? How can i use Prime properly or at least get back to Bumblebee?</p>\n"},{"id":474798,"title":"unable to load nvidia(bumblebee) in ubuntu 14.04 (only nouveau loads)","body":"<p>Bumblebee stopped working on my system after upgrading to stable version of Ubuntu 14.04.</p>\n\n<p>DUring installation I get this error <em>rmmod: ERROR: Module nouveau is in use</em></p>\n\n<pre><code>Setting up bumblebee (3.2.1-90~trustyppa1) ...\nSelecting 01:00:0 as discrete nvidia card. If this is incorrect,\nedit the BusID line in /etc/bumblebee/xorg.conf.nouveau .\nbumblebeed start/running, process 11133\nProcessing triggers for initramfs-tools (0.103ubuntu4.1) ...\nupdate-initramfs: Generating /boot/initrd.img-3.14.1-031401-generic\nSetting up bumblebee-nvidia (3.2.1-90~trustyppa1) ...\nSelecting 01:00:0 as discrete nvidia card. If this is incorrect,\nedit the BusID line in /etc/bumblebee/xorg.conf.nvidia\nrmmod: ERROR: Module nouveau is in use\nbumblebeed start/running, process 18284\n</code></pre>\n\n<p>It says nouveau is in use. I checked the loaded modules</p>\n\n<pre><code> lsmod | grep nouveau\nnouveau              1097199  1 \nmxm_wmi                13021  1 nouveau\nttm                    85115  1 nouveau\ni2c_algo_bit           13413  2 i915,nouveau\ndrm_kms_helper         52758  2 i915,nouveau\ndrm                   302817  7 ttm,i915,drm_kms_helper,nouveau\nwmi                    19177  3 dell_wmi,mxm_wmi,nouveau\nvideo                  19476  2 i915,nouveau\n</code></pre>\n\n<p>However, I have nouveau in my blacklist </p>\n\n<pre><code>cat /etc/modprobe.d/blacklist.conf | grep nouveau\nblacklist nouveau\nblacklist lbm-nouveau\nalias nouveau off\nalias lbm-nouveau off\n</code></pre>\n\n<p>My grub is also set to nomodeset</p>\n\n<pre><code>cat /etc/default/grub  | grep nomodeset\nGRUB_CMDLINE_LINUX_DEFAULT=\"nomodeset quiet splash\"\n</code></pre>\n\n<p>My graphics card is nvidia optimus</p>\n\n<pre><code>lspci | grep -i vga\n00:02.0 VGA compatible controller: Intel Corporation Core Processor Integrated Graphics Controller (rev 18)\n01:00.0 VGA compatible controller: NVIDIA Corporation GT218M [GeForce 310M] (rev ff)\n</code></pre>\n\n<p>I've raised a bug in launchpad: <a href=\"https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1327598\" rel=\"nofollow\">https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1327598</a></p>\n\n<p><strong>Note</strong>: Nvidia-prime is working for me (partially). Frequent mouse locks. Interestingly, bumblebee works perfectly fine on my fedora 20 partition on this same laptop.</p>\n"},{"id":481495,"title":"Ubuntu 14.04 wont reboot after choosing nvidia drivers (optimus laptop)","body":"<p>Well I decided to give linux again a try. I was excited when I heard that ubuntu was supporting an alternative to bumblebee. But no luck today so far.</p>\n\n<p>The installation goes flawless, I open the utility that install alternative drivers, nvidia 331, i think it is... then I reboot as requested and thats it. The system wont be able to reboot, it is stuck at the gnome symbol at the very begining of the booting proccess, I forgot to mention I use Ubuntu Gnome.</p>\n\n<p>I have tried to install another choice that is listed, 331-updates, with the same luck</p>\n\n<p>I have tried also installing using the terminal, same.\nI would apreciate any help.</p>\n\n<p>I would really like to know how to revert the drivers to nouveau,because every time I have to try... I am reinstalling the whole thing!!! it is kinda embarasing, and time comsuming! thanks folks!</p>\n"}]}]
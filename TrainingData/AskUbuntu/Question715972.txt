[{"id":715972,"title":"HDD Standby - High Load Cycle Count","body":"<p>I know that there are many question about this topic. However, I did not find a solution for my situation.</p>\n\n<p><strong>What I want to achieve:</strong> My HDD (Hitachi Travelstar 5k1000) in my notebook should go into standby after ~5min and the load cycle value should only increase moderately.</p>\n\n<p><strong>My setup:</strong> Ubuntu 14.04 is installed on an SSD and the HDD is only used for data. I checked the APM values for the HDD via <code>sudo hdparm -B /dev/sda</code> and got </p>\n\n<blockquote>\n  <p>/dev/sda:<br>\n   APM_level  = 254</p>\n</blockquote>\n\n<p>for AC and for battery</p>\n\n<blockquote>\n  <p>/dev/sda:<br>\n   APM_level  = 128</p>\n</blockquote>\n\n<p>Right now the HDD never goes into standby mode. However, if my notebook runs on battery, the Load_Cycle_Count increases tremendously (2-3 per <em>minute</em>). </p>\n\n<p>As I understand it, an APM level &lt;=127 allows the HDD to go into standy (=spin down?), so APM=128 prevents standby but still increases LCC heavily. What are my options to achieve my goal?</p>\n\n<p>Maybe related: Up to now I do not use any laptop-mode-tools or TLP etc. If it is useful/helpful I would also appreciate solutions which make use of TLP (for example).</p>\n","related_questions":[{"id":294643,"title":"To control battery at a certain capacity (for ex.20%) then the laptop will be automatically standby or hibernate for long-lasting the battery","body":"<p>I would like to control for setting my battery at a certain capacity (for ex.20%) then the laptop will be automatically standby or hibernate for long-lasting the battery.\nIs there any solution, please?\nBe noted: my Vostrol 3450, ubuntu 13.04, hibernate function is already rehabilitated.</p>\n\n<p>The battery capacity I can find is in the file capacity as below:</p>\n\n<pre><code>/sys/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0C0A:00/power_supply/BAT0/capacity\n</code></pre>\n\n<p>I created the bash script:</p>\n\n<pre><code>#!/bin/bash\n\nload=$(cat /sys/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0C0A:00/power_supply/BAT0/capacity)\nmin_load=20\nif [ $load &lt;= min_load ]; then\n    pm-suspend\nfi\n</code></pre>\n\n<p>On terminal, I perform the cli for test: </p>\n\n<pre><code>sudo /bin/battery-suspend\n</code></pre>\n\n<p>Then the result failed showing: </p>\n\n<pre><code>/bin/battery-suspend: line 5: =: No such file or directory\n</code></pre>\n"},{"id":347854,"title":"How to count battery cycles?","body":"<p>Like most users that have searched know, Manufacturers ACPI implementation is a mess and for most of our laptops, battery info is unavailable or wrong (on a dell inspiron 15z, the rate is divided by 10).</p>\n\n<p><strong>Is there a way (using a perl/python/bash script, an existing package or whatever) to log battery cycles on Ubuntu 12.04?</strong> </p>\n\n<p>(what is a battery cycle ?)</p>\n\n<blockquote>\n  <p>A charge cycle means using all of the battery’s power, but that doesn’t necessarily mean a single charge. For instance, you could listen to your [device] for a few hours one day, using half its power, and then recharge it fully. If you did the same thing the next day, it would count as one charge cycle, not two, so you may take several days to complete a cycle. Each time you complete a charge cycle, it diminishes battery capacity slightly, but you can put [device battery] through many charge cycles before they will only hold 80% of original battery capacity. Apple courtesy\n</blockquote>\n\n<p>My laptop is a Clevo W150HRM, and when I do :\n<code>cat /sys/class/power_supply/BAT0/cycle_count</code>\nI get:\n<code>0</code>\nMy laptop is 2 years old.</p>\n\n<p>Thank you by advance.</p>\n"},{"id":540012,"title":"HDD standby mode does not turn on automatically","body":"<p>I have added the following lines</p>\n\n<pre><code>/dev/hda {\n   spindown_time = 60\n}\n\n/dev/hdb {\n   spindown_time = 60\n}\n\n/dev/hdc {\n   spindown_time = 60\n}\n</code></pre>\n\n<p>to the end of my <code>/etc/hdparm.conf</code> file and rebooted.</p>\n\n<p>Unfortunately, no any effect of these lines observed. For example, <code>/dev/hdb</code> which I rarely use shows</p>\n\n<pre><code>$ sudo smartctl -i -n standby /dev/sdb\nsmartctl 6.2 2013-07-26 r3841 [x86_64-linux-3.13.0-37-generic] (local build)\nCopyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org\n\n=== START OF INFORMATION SECTION ===\nDevice Model:     WDC WD40EFRX-68WT0N0\nSerial Number:    WD-WCC4EFSNCNX5\nLU WWN Device Id: 5 0014ee 26020b658\nFirmware Version: 82.00A82\nUser Capacity:    4,000,787,030,016 bytes [4.00 TB]\nSector Sizes:     512 bytes logical, 4096 bytes physical\nRotation Rate:    5400 rpm\nDevice is:        Not in smartctl database [for details use: -P showall]\nATA Version is:   ACS-2 (minor revision not indicated)\nSATA Version is:  SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s)\nLocal Time is:    Wed Oct 22 05:31:21 2014 MSK\nSMART support is: Available - device has SMART capability.\nSMART support is: Enabled\nPower mode is:    ACTIVE or IDLE\n</code></pre>\n\n<p>How to check/force power conserving works?</p>\n\n<p><strong>UDPATE</strong></p>\n\n<p>I have tried all things, including ones in so called \"duplicate\" question, but they didn't work.</p>\n\n<p>I can put drive into standby mode manually with</p>\n\n<pre><code>hdparm -y /dev/sdb\n</code></pre>\n\n<p>and it will stay in this mode until used. But once it used, it will never go into standby itself.</p>\n\n<p>Is it possible to look standby timer, i.e. timer, which is counting time after last activity? Without this timer, auto standby feature can't work. And if this timer exists, but unavailable, then atuo standby can't be debugged.</p>\n"},{"id":411543,"title":"How to fix: high HDD activity and slower system after few suspend cycles?","body":"<p>After a few cycles of suspending and waking up, on system wakeup HDD activity lasts for ~5-10 minutes (shouldn't be the RAM used instead of HDD?) and even when it is done, the whole system feels slower compared to the state after reboot.</p>\n\n<p>I think it doesn't make a difference if I have any (additional) programs running while suspending.</p>\n\n<hr>\n\n<p>What is causing high HDD activity after a suspend (while the RAM memory is barely filled)?</p>\n\n<p>Why the system feels slower after suspending in comparison to rebooting?</p>\n\n<hr>\n\n<p>This is Ubuntu 12.04 LTS x64 on a notebook 2x 1.6 GHz, 4 GB RAM (max 30% used while suspending), 4 GB swap 80% and ~70GB free HDD space for the system.</p>\n"},{"id":311852,"title":"How can I improve the battery life under 12.04 on my Inspiron 14z?","body":"<p>How do I improve the battery life of my Inspiron 14z under Ubuntu 12.04?</p>\n\n<p>This laptop gets 4-5 hours of battery life using Windows (e.g. <a href=\"http://www.trustedreviews.com/dell-inspiron-14z-ultrabook_Laptop_review_performance-value-and-verdict_Page-3\" rel=\"nofollow\">here</a>). I've removed Windows, installed Ubuntu 12.04 and the initial battery life was only 2 hours. With some tweaks (described below) it's still only ~2.5 hours.</p>\n\n<p>For reference, the laptop is the latest model of the 14z:</p>\n\n<ul>\n<li>i5-3337U processor</li>\n<li>32GB MSATA, 500GB HDD (5400rpm)</li>\n<li>AMD Radeon HD7570M graphics card</li>\n</ul>\n\n<p>I have put ext4 partitions on both the SSD and the HDD, and have mounted <code>/</code> to the SSD and <code>/home</code> to the HDD. I also put a 24gb linux swap partition at the start of the HDD, though I figure this won't be used all that much (the laptop has 8gb of RAM).</p>\n\n<p>After googling around and reading Ask Ubuntu and other sites extensively, I have done the following steps, and they have improved the battery life ~30 minutes (exact improvement not clear, but battery life is still nowhere near 4-5 hours).</p>\n\n<ol>\n<li>Installed Jupiter (and set Performance to \"Power Saving\")</li>\n<li>Installed laptop-mode-tools\n<ul>\n<li><code>cat /proc/sys/vm/laptop_mode</code> now outputs 5 (previously it output 0)</li>\n<li>But it's not clear that this will help: <a href=\"http://askubuntu.com/questions/172391/is-laptop-mode-tools-still-relevant-for-12-04-and-the-3-x-kernels\">AskUbuntu question</a></li>\n</ul></li>\n<li>Turned down the brightness of my screen from full to 1/3</li>\n</ol>\n\n<p>Other things I have heard about but have not tried for fear of frying the laptop or my linux install:</p>\n\n<ul>\n<li>Add \"pcie_aspm=force\" at the end of the line with \"quiet splash\" in /boot/grub/grub.cfg</li>\n<li>Enable ALPM, but it may already be enabled in 12.04?</li>\n<li>Enable i915 framebuffer compression</li>\n<li>Use a propietary driver for the graphics card? Turn off the graphics card? (what would happen if I relied on the internal Intel bridge?)</li>\n<li>Use TLP?</li>\n<li>Spin down the HDD more aggressively (<a href=\"http://askubuntu.com/posts/8078/revisions\">howto</a>, but I think laptop-mode-tools does this already) </li>\n</ul>\n\n<p>The only other thing I've noticed is that plastic just above the F5, F6 and F7 keys gets really hot. According to Jupiter my CPU temperature is only 69 celsius and the System Monitor shows CPU load at 7% so I don't think it's the CPU. Maybe it's the graphics card?</p>\n\n<p>Also, I've set up MongoDB and LAMP on the machine as well. When I run <code>powertop</code> MongoDB is high in the list, but I'm not sure if that's relevant to battery life because I'm not actually <em>doing</em> anything with MongoDB most of the time.</p>\n\n<h2>Edit: Additional info requested by @gertvdijk</h2>\n\n<pre><code>$ lspci -nnk | grep -iEA3 \"(graphics|vga)\"\n00:02.0 VGA compatible controller [0300]: Intel Corporation Ivy Bridge Graphics Controller [8086:0166] (rev 09)\n    Subsystem: Dell Device [1028:057f]\n    Kernel driver in use: i915\n    Kernel modules: i915\n--\n02:00.0 VGA compatible controller [0300]: Advanced Micro Devices [AMD] nee ATI Thames [Radeon 7500M/7600M Series] [1002:6841]\n    Subsystem: Dell Device [1028:057f]\n    Kernel driver in use: radeon\n    Kernel modules: radeon\n</code></pre>\n\n<p>Based on @maggotbrain's answer to the question linked to (<a href=\"http://askubuntu.com/questions/257617/how-can-i-upgrade-the-ubuntu-12-04-2-kernel-to-3-5-0-23\">here</a>), and because I downloaded and ran Ubuntu 12.04.2 so I think I already have the Quantal enablement stack running. I think <code>uname</code> confirms this too?</p>\n\n<pre><code>$ uname --all\nLinux christo-lt4 3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:13:26 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<h2>Edit: AMD drivers</h2>\n\n<p>I initially tried the propietary FGLRX drivers with post-release updates. There does not appear to be a bios level option to turn off the AMD graphics card.</p>\n\n<p>After installing and rebooting, my display looked the same (except Unity launcher icons went back to full size), but I could not run Catalyst. Instead, it exited with the error:</p>\n\n<pre><code>No AMD graphics driver is installed, or the AMD driver is not functioning properly. Please install the AMD driver appropriate for your AMD hardware, or configure using aticonfig.\n</code></pre>\n\n<p>Next, I ran <code>sudo amdconfig --status=all --initial</code> but I could only load low-resolution graphics. This was also the case with <code>sudo amdconfig --initial</code>, so I manually restored my backed up <code>xorg.conf</code>, removed this driver using the \"Additional Drivers\" application and installed the \"Experimental AMD binary Xorg driver and kernel module\".</p>\n\n<p>After rebooting my computer I see that this entry in the list has changed to be \"ATI Fire GL\" (my laptop has an AMD Radeon HD7570M, not an ATI card?), but it also says that the driver is activated but not currently in use. What should I do to get the propietary drivers working on my laptop?</p>\n\n<p>I have also tried the \"experimental behaviour\" FGLRX drivers, but the low-detail error still returns. The only way I've found of fixing this is restoring the original <code>xorg.conf</code></p>\n\n<h2>Recap of solution - battery life up from 1.5-2 hours to 3.5-4 hours or more</h2>\n\n<p><strong>I can't post many links because my reputation on this stack exchange is too low, I'll use titles of questions wherever possible so people can find them using Google</strong></p>\n\n<p>Many thanks to @gertvdijk for his help with this problem and pointers to other solutions (is there some way I can mark something correct and give you reputation points to say \"thank you\"?). I now have my laptop battery life up to ~3.5-4 hours and there may be some further steps I can take as well. To summarise my solution to date, in rough order of impact:</p>\n\n<ol>\n<li>Installed propietary drivers using the 12.04 solution in the Ask Ubuntu question (\"What is the correct way to install ATI catalyst video drivers (fglrx)\"), then used Catalyst application to switch off the AMD</li>\n<li>Jupiter applet - turned brightness down from 100% to 25%, set performance to Power Saving</li>\n<li>Wrote a script to make it easy to turn on/off services that might be battery intensive - <a href=\"https://github.com/cfogelberg/homedir/blob/master/bin/battery-services.sh\" rel=\"nofollow\">here</a></li>\n<li>Turned off bluetooth (I need to leave wifi on)</li>\n<li>Installed laptop-mode-tools - <code>cat /proc/sys/vm/laptop_mode</code> output 0 beforehand and 5 after, so this got turned on, but I don't know if it had any effect (See Ask Ubuntu question: \"Is laptop-mode-tools still relevant for 12.04 and the 3.x kernels\")</li>\n</ol>\n\n<p>Potential other steps I could take, but haven't yet:</p>\n\n<ol>\n<li>Spin the hard disk drive down more aggressively (laptop-mode-tools/Ubuntu 12.04 defaults might do this automatically) (see scottl's answer to \"Tips to extend battery life for laptops and notebooks\")</li>\n<li>See item 3 of ishouvik.com's \"5 ways to extend battery life on Ubuntu\" - this is meant to happen automatically in 12.04 but isn't in my <code>/boot/grub/grub.cfg</code> right now so it might not be turned on</li>\n<li>Other power management tweaks - see Ubuntu wiki page on Power Saving Tweaks\n<ul>\n<li>Enable ALMP (but it may already be enabled? - see Ubuntu wiki page on Kernel power management using ALPM</li>\n<li>Enable i915 framebuffer compression</li>\n</ul></li>\n</ol>\n"},{"id":137577,"title":"Put HDDs in standby after X minutes using hdparm doesn&#39;t work","body":"<p>I use Ubuntu 12.04 on a home server. There are 5 hard drives: one SSD with the OS and 4 HDDs (Samsung HD204UI) configured as a RAID5 using mdadm.</p>\n\n<p>I don't need the RAID very often (say, about once per day in average); it contains multimedia data and some backups, so I decided to put the drives to standby most of the time.</p>\n\n<p>I configured the drives to automatically spin-down after 20 minutes using hdparm, here <code>/dev/sda</code> as an example:</p>\n\n<pre><code>hdparm -S 240 /dev/sda\n</code></pre>\n\n<p>The output of the command confirmed this:</p>\n\n<pre><code>/dev/sdb:\n setting standby to 240 (20 minutes)\n</code></pre>\n\n<p>But the problem is that the drive spins down after about 5 seconds (instead 20 minutes) after the last access, and</p>\n\n<pre><code>hdparm -C /dev/sdb\n</code></pre>\n\n<p>displays:</p>\n\n<pre><code>/dev/sdb:\n drive state is:  standby\n</code></pre>\n\n<p>Why doesn't the drive wait the 20 minutes as configured? Does it have something to do with the RAID setup? (I don't think so...)</p>\n\n<p>This very short timeout is problematic since it is a RAID5 and when I access a file, it is spread block-wise around the four drives. Since drive 1 isn't needed when drive 2 is read, it went asleep when it will be used the next time (after drive 3 has been read from). So the drives keep spinning up and down the whole time resulting in a throughput near zero.</p>\n\n<p>For the people being concerned about the life of my drives: It will be no problem that the drives are spinned up and down once a day in average since I prefer saving energy and heat over health of the drives (I use RAID5 and the content isn't very important).</p>\n"},{"id":251744,"title":"/can you install ubuntu to hdd but it runs completely from ram while hdd is not spinning?","body":"<p>my main purpose is to be able to install ubuntu to the hard disc so that my settings and everything are saved but i want it to load itself to my  ram for faster operation and better battery life while the hdd sleeps </p>\n"},{"id":207819,"title":"High power consumption on latest versions of Linux distributions","body":"<p>I have a Sony Vaio E series and I installed both Ubuntu 12.04 and 12.10. In every case, my battery life is reduced of almost a half with respect to Windows 7. The power consumption with no program running is around 18 W, opening Firefox or Thunderbird goes over 30! </p>\n\n<p>I have tried laptop-mode-tools and Jupiter, tweaks on the kernel suggested on the Ubuntu website <a href=\"https://wiki.ubuntu.com/Kernel/PowerManagement/PowerSavingTweaks\" rel=\"nofollow\">here</a>, but nothing changed. </p>\n\n<p>I ran powertop, but before studying to understand what it says I read about some Linux regression problems on power consumption. In fact, I have the same problem with Fedora 17 and OpenSuse 12.2 on this laptop. My brother has an Acer and he has the same problem. So, I'd like to know if other people have the same issue, or it is just related to some machines.</p>\n\n<p>Thank you!</p>\n"},{"id":125642,"title":"Battery power indicator bug and high power consumption on 12.04","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://askubuntu.com/questions/9817/battery-drain-on-ubuntu-is-fast\">Battery drain on ubuntu is fast</a>  </p>\n</blockquote>\n\n\n\n<p>I have a Samsung NP530U3B-A01:\n - intel core i5 2467M\n - 4gb ram\n - intel hd 3000\n - 500gb hard drive</p>\n\n<p>It's dual boot with windows 7. \nI've seen if i unplug the baterry charger, the battery indicator remains as if is still charging and the oposite happens to.</p>\n\n<p>And the power comsunption is HUGE. In windows 7 i got comsuptions around 7w in idle. In Ubuntu 12.04 is around 18w in idle. </p>\n\n<p>I really like ubuntu but with this power consumption i can only got 1h of battery and i dont want to use an OS that can't give me a nice battery life :(</p>\n"},{"id":25398,"title":"Are there tools to manage the power management for HDD?","body":"<p>I wonder if there are a better tool than the panel at <em>System → Preferences → Power Management</em>  to manage the power consumption for the HDD. Specifically HDD in a laptop.</p>\n"}]}]
[{"id":301787,"title":"Opening a port for listening","body":"<p>I have a small program I created. Here is a relevant piece of it:</p>\n\n<pre><code>void TcpSocket::ConnectSocket()\n{\n    socket = new QTcpSocket(this);\n    socket-&gt;connectToHost(\"localhost\", 77);\n\n    if(socket-&gt;waitForConnected(3000)){\n        qDebug() &lt;&lt; \"Connected\";\n\n        socket-&gt;write(\"Hello Server\\n\\r\\n\");\n        socket-&gt;waitForBytesWritten(1000);\n        socket-&gt;waitForReadyRead(3000);\n        qDebug() &lt;&lt; \"Reading: \" &lt;&lt; socket-&gt;bytesAvailable();\n        qDebug() &lt;&lt; socket-&gt;readAll();\n        socket-&gt;close();\n    }\n    else {\n        qDebug() &lt;&lt; \"Could not connect\";\n    }\n}\n</code></pre>\n\n<p>Basically, I want to open a tcp socket at localhost:77. I want to write some data to it, get a response, and then output the response. However, right now that port is closed, as most ports are in ubuntu by default. So right now it cannot connect to that port to listen on. Well from what I researched, iptables seems to be the only way to open a port for listening. So I run this line on my machine:</p>\n\n<pre><code>sudo iptables -A INPUT -p tcp --dport 77 -j ACCEPT\n</code></pre>\n\n<p>However, the port 77 is still not open. </p>\n\n<pre><code>sudo netstat -tulpn\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      1199/dnsmasq    \ntcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      1004/cupsd      \ntcp        0      0 127.0.0.1:5432          0.0.0.0:*               LISTEN      1157/postgres   \ntcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      1121/mysqld     \ntcp6       0      0 ::1:631                 :::*                    LISTEN      1004/cupsd      \nudp        0      0 127.0.0.1:53            0.0.0.0:*                           1199/dnsmasq    \nudp        0      0 0.0.0.0:68              0.0.0.0:*                           1070/dhclient   \nudp        0      0 0.0.0.0:39617           0.0.0.0:*                           990/avahi-daemon: r\nudp        0      0 0.0.0.0:5353            0.0.0.0:*                           990/avahi-daemon: r\nudp6       0      0 :::57021                :::*                                990/avahi-daemon: r\nudp6       0      0 :::5353                 :::*                                990/avahi-daemon: r\n</code></pre>\n\n<p>netstat doesnt show it to be open. Also I still have the same problem with my program: it cannot connect to 77.</p>\n","related_questions":[{"id":695982,"title":"Listening on port 80 in Ubuntu","body":"<p>I have an Ubuntu 15.04 system with a Java webserver listening on port 3000. Iptables prerouting is setup like this:</p>\n\n<pre><code>iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3000\n</code></pre>\n\n<p>I've also removed apache2 packages from the system with:</p>\n\n<pre><code>apt-get remove apache2\n</code></pre>\n\n<p>However, now i don't get any process listening on port 80 in the system:</p>\n\n<pre><code>tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      259/sshd\ntcp        0      0 0.0.0.0:3000            0.0.0.0:*               LISTEN      4841/java\ntcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      455/master\ntcp        0      0 0.0.0.0:5355            0.0.0.0:*               LISTEN      256/systemd-resolve\n</code></pre>\n\n<p>As a consequence the pages are not accessible from the browser. Can someone please help?</p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE:</strong>\nFor now i've ended up configuring Apache with <code>proxy</code> and <code>proxy_http</code> modules, like so:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ProxyRequests Off\n  ProxyVia Off\n  ProxyPreserveHost On\n\n  &lt;Proxy *&gt;\n    AddDefaultCharset off\n    Order deny,allow\n    Allow from all\n  &lt;/Proxy&gt;\n\n  ProxyPass / http://127.0.0.1:3000/\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>What is weird is that on a similarly configured machine running Ubuntu 14.04 running Apache in order to have some process listening on port 80 was not necessary. On these machines, <code>netstat</code> also would show no processes listening on port 80, yet HTTP requests were somehow forwarded to Java server listening on port 3000. Hmmm.</p>\n"},{"id":710621,"title":"Something is listening on port 53","body":"<p>I want to set up <code>bind9</code>, but something is listening on port 53. It's local address is ubuntu.ubuntu-do:domain. How to disable it, so it wouldn't listen anymore? I think it is <code>dnsmasq</code>, but still I don't know hot to disable it.</p>\n"},{"id":278448,"title":"How to know what program is listening on a given port?","body":"<p>I suspect a program is listening on port 8000 on my machine.</p>\n\n<p>When I run the following command, I get that error:</p>\n\n<pre><code>&gt; python -m SimpleHTTPServer\n# Lots of python error\nsocket.error: [Errno 98] Address already in use\n</code></pre>\n\n<p>If I use another port (8000 is the default), this simple web server runs fine.</p>\n\n<p>If I <code>wget localhost:8000</code>, it returns <code>404 Not Found</code>.</p>\n\n<p>My question is: What can I do, what tools are available to find which program is listening on port 8000? Where is it configured?</p>\n"},{"id":652129,"title":"Port forwarding issue","body":"<p>i have successfully opened port 3306 for remote access to MySQL.</p>\n\n<p>i am trying to open another port (54321) to allow remote tcp/socket communication with a program.</p>\n\n<p>if used these commands:</p>\n\n<pre><code>ufw allow 54321\n</code></pre>\n\n<p>which allows connections from any IP to port 54321</p>\n\n<p>then iptables tells me that this rule is indeed in place</p>\n\n<p>using netcat to test the port:</p>\n\n<pre><code>nc -l 54321\n</code></pre>\n\n<p>and then pinging this port tells me that it is open.</p>\n\n<p>however! when i try to set up my software, which consists a tcp socket listener written in php, the listener starts in listens on socket 54321. using netstat i can see that this is happening. but pining the port reveals that the port is closed, and i have no idea why.</p>\n\n<p>can anyone see any issues here?</p>\n"},{"id":615030,"title":"An application is listening on ports 139 and 445, but those ports are closed. Can an application listen on closed ports?","body":"<p>On the terminal, when using <code>netstat</code>, it claims a program called <code>smbd</code> (which is actually Samba) is listening on ports 139 and 445, but according to a port scan from ShieldsUp, those ports are closed.</p>\n\n<p>Exactly how is an application listening to ports that are closed?</p>\n"},{"id":603043,"title":"Port 2003 not open/listen and can&#39;t access data on Graphite","body":"<p>I'm on Ubuntu Server, and I've installed Graphite and shinken. First I'm trying to get working Graphite (desperatly) but without success.</p>\n\n<p>I've make a netstat to see if my port is open :</p>\n\n<pre><code>netstat -tuplen\nConnexions Internet actives (seulement serveurs)\nProto Recv-Q Send-Q Adresse locale          Adresse distante        Etat       User       Inode       PID/Program name\ntcp        0      0 0.0.0.0:7767            0.0.0.0:*               LISTEN      1001       544010      1816/python\ntcp        0      0 0.0.0.0:7768            0.0.0.0:*               LISTEN      1001       542859      1194/python\ntcp        0      0 127.0.0.1:5432          0.0.0.0:*               LISTEN      107        9068        931/postgres\ntcp        0      0 0.0.0.0:7769            0.0.0.0:*               LISTEN      1001       543251      1432/python\ntcp        0      0 0.0.0.0:7771            0.0.0.0:*               LISTEN      1001       543079      1317/python\ntcp        0      0 0.0.0.0:7772            0.0.0.0:*               LISTEN      1001       543634      1579/python\ntcp        0      0 0.0.0.0:7773            0.0.0.0:*               LISTEN      1001       543810      1694/python\ntcp        0      0 127.0.0.1:44255         0.0.0.0:*               LISTEN      1001       543623      1582/python\ntcp        0      0 127.0.0.1:43007         0.0.0.0:*               LISTEN      1001       542845      1201/python\ntcp        0      0 127.0.0.1:38856         0.0.0.0:*               LISTEN      1001       543911      1793/python\ntcp        0      0 127.0.0.1:57546         0.0.0.0:*               LISTEN      1001       543808      1695/python\ntcp        0      0 127.0.0.1:46282         0.0.0.0:*               LISTEN      1001       543238      1439/python\ntcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      102        9099        855/mysqld\ntcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      0          8098        548/rpcbind\ntcp        0      0 127.0.0.1:34293         0.0.0.0:*               LISTEN      1001       543071      1326/python\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      0          8930        792/sshd\ntcp6       0      0 ::1:5432                :::*                    LISTEN      107        9067        931/postgres\ntcp6       0      0 ::1:7770                :::*                    LISTEN      1001       543920      1792/python\ntcp6       0      0 :::111                  :::*                    LISTEN      0          8101        548/rpcbind\ntcp6       0      0 :::80                   :::*                    LISTEN      0          541053      708/apache2\ntcp6       0      0 :::22                   :::*                    LISTEN      0          8932        792/sshd\nudp        0      0 0.0.0.0:703             0.0.0.0:*                           0          8097        548/rpcbind\nudp        0      0 0.0.0.0:111             0.0.0.0:*                           0          8092        548/rpcbind\nudp6       0      0 :::703                  :::*                                0          8100        548/rpcbind\nudp6       0      0 :::111                  :::*                                0          8099        548/rpcbind\n</code></pre>\n\n<p>And I've trying to follow this solution : <a href=\"http://askubuntu.com/questions/509629/sending-data-to-port-does-not-seem-to-be-working-on-ubuntu-linux\">Sending data to port does not seem to be working on Ubuntu Linux?</a> </p>\n\n<p>But it seems that not working. Is there a way to open the port 2003 please ? Or maybe someone who know graphite have a sugggestion to help me ? I can access to the graphite Web page but anything is display under graphite folder when I make a command test like this echo </p>\n\n<p><code>\"test.count 4</code>date +%s<code>\" | nc -q0 127.0.0.1 2003</code></p>\n\n<p>I can give more info if you want. </p>\n\n<p>Thanks for help</p>\n"},{"id":524282,"title":"Both named and dnsmasq serving DNS on port 53?","body":"<p>Is this considered normal for Ubuntu 14.04 ?</p>\n\n<p><code>netstat -tulpn</code> shows that both bind9 (named) and dnsmasq serve on port 53:</p>\n\n<pre><code> Active Internet connections (only servers) Proto Recv-Q Send-Q Local\n Address           Foreign Address         State       PID/Program name\n tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      4041/named \n tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      3653/dnsmasq\n</code></pre>\n\n<p>Also with UDP:</p>\n\n<pre><code>udp        0      0 127.0.0.1:53            0.0.0.0:*    4041/named\nudp        0      0 127.0.1.1:53            0.0.0.0:*    3653/dnsmasq\n</code></pre>\n\n<p>Notice that only dnsmasq listens outside localhost, over port 67:</p>\n\n<pre><code>udp        0      0 0.0.0.0:67              0.0.0.0:*                           2158/dnsmasq\n</code></pre>\n\n<p>Other functions this server performs are primary DNS zones for a dev team's private domain, routing, NAT and transparent proxy(squid3 &amp; iptables) with DHCP server.</p>\n"},{"id":515937,"title":"What do LISTEN and ports mean in netstat?","body":"<p>I have been monitoring my system lately and I have found some strange things are running on my system. Can anyone please explain what they are and why same program use several processes? Output of <code>netstat</code> and <code>ps -aux</code>:</p>\n\n<pre><code>netstat -antplF\n(Not all processes could be identified, non-owned process info\n will not be shown, you would have to be root to see it all.)\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name&lt;br&gt;\ntcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -      &lt;br&gt;         \ntcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      -     &lt;br&gt;          \ntcp        0      0 127.0.0.1:9050          0.0.0.0:*               LISTEN      -   &lt;br&gt;             \ntcp        0      0 0.0.0.0:445             0.0.0.0:*               LISTEN      -    &lt;br&gt;           \ntcp        0      0 0.0.0.0:139             0.0.0.0:*               LISTEN      -    &lt;br&gt;           \ntcp        0      0 127.0.0.1:587           0.0.0.0:*               LISTEN      -   &lt;br&gt;            \ntcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      -     &lt;br&gt;          \ntcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      -     &lt;br&gt;          \ntcp        0      0 192.168.0.100:44952     144.76.244.204:443      ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:49334     66.196.66.212:443       ESTABLISHED 6796/firefox    &lt;br&gt;\ntcp        0      0 192.168.0.100:40249     69.171.235.19:443       ESTABLISHED 6796/firefox  &lt;br&gt;  \ntcp        0      0 192.168.0.100:51498     173.194.39.246:443      ESTABLISHED 6796/firefox    &lt;br&gt;\ntcp        0      0 192.168.0.100:39152     198.252.206.24:80       ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:49050     2.20.142.212:80         ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:56883     74.125.136.84:443       ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:39153     198.252.206.24:80       ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:50371     142.0.72.109:3389       ESTABLISHED 5777/xfreerdp   &lt;br&gt;\ntcp        0      0 192.168.0.100:56903     66.196.120.54:5050      ESTABLISHED 5809/pidgin     &lt;br&gt;\ntcp        0      0 192.168.0.100:51073     66.196.120.77:5050      ESTABLISHED 5809/pidgin     &lt;br&gt;\ntcp        0      0 192.168.0.100:54875     193.149.89.57:443       ESTABLISHED 6796/firefox    &lt;br&gt;\ntcp        0      0 192.168.0.100:40648     152.163.0.143:80        ESTABLISHED 6796/firefox    &lt;br&gt;\ntcp        0      0 192.168.0.100:53681     173.194.116.106:443     ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        1      0 192.168.0.100:51012     91.189.89.144:80        CLOSE_WAIT  3829/ubuntu-geoip-p&lt;br&gt;\ntcp        1      0 192.168.0.100:44527     91.189.89.31:80         CLOSE_WAIT  3871/gvfsd-http &lt;br&gt;\ntcp        0      0 192.168.0.100:47284     74.125.136.94:443       ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:36697     173.194.66.95:80        ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:37008     173.194.44.52:443       ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:40558     66.196.121.49:5050      ESTABLISHED 5809/pidgin     &lt;br&gt;\ntcp        0      0 192.168.0.100:56115     172.227.184.65:443      ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:35533     66.196.120.117:5050     ESTABLISHED 5809/pidgin     &lt;br&gt;\ntcp        0      0 192.168.0.100:57169     64.4.44.81:443          ESTABLISHED 6796/firefox    &lt;br&gt;\ntcp        0      0 192.168.0.100:58695     198.252.206.25:443      ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp        0      0 192.168.0.100:43395     213.157.220.180:443     ESTABLISHED 2705/chromium-brows&lt;br&gt;\ntcp6       0      0 ::1:631                 :::*                    LISTEN      -    &lt;br&gt;           \ntcp6       0      0 :::445                  :::*                    LISTEN      -    &lt;br&gt;           \ntcp6       0      0 :::139                  :::*                    LISTEN      -    &lt;br&gt;           \ntcp6       0      0 :::111                  :::*                    LISTEN      - &lt;br&gt;              \ntcp6       0      0 :::80                   :::*                    LISTEN      - &lt;br&gt;              \ntcp6       1      0 ::1:33153               ::1:631                 CLOSE_WAIT  -&lt;br&gt;\n</code></pre>\n\n<p>What are the LISTEN ports and IPs at the beginning and the end? Why are they like <code>0.0.0.0:*</code> for any ip and any port? What does it mean? What are they used for, exactly, please?</p>\n"},{"id":331522,"title":"Can&#39;t successfully change port that Apache2 listens for","body":"<p>I am trying to change the port that apache listens to from '80' to '8085' (or any other number).  </p>\n\n<p>I modified <strong>/etc/apache2/ports.conf</strong> :</p>\n\n<pre><code>NameVirtualHost *:8085\nListen 8085\n</code></pre>\n\n<p>And I also modified <strong>/etc/apache2/sites-enabled/000-default</strong> :</p>\n\n<pre><code>&lt;VirtualHost *:8085&gt;\n    ServerAdmin webmaster@localhost\n</code></pre>\n\n<p>The last thing I did was Port Forwarding on my router.  I used to use '80' so I just changed that to '8085'.</p>\n\n<p>Alas, I am unable to reach my apache homepage (the one that says <strong>It Works!</strong> and I am not sure why.  I feel like I have hit all the things that need to be changed.  Any tips? </p>\n\n<p>Also, when i do <code>netstat -tulpn | grep :8085</code> i get:</p>\n\n<pre><code>tcp6       0      0 :::8085                 :::*                    LISTEN      4232/apache2    \n</code></pre>\n\n<p>The port is in RED, is it firewalled?  </p>\n\n<p>I have reloaded and restarted apache and the server.</p>\n\n<p>Thank you in advance</p>\n\n<p>EDIT</p>\n\n<p>Output of <code>iptables -L</code></p>\n\n<pre><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \nfail2ban-apache  tcp  --  anywhere             anywhere             multiport dports http,https\nfail2ban-ssh  tcp  --  anywhere             anywhere             multiport dports 239\n\nChain FORWARD (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination         \n\nChain fail2ban-apache (1 references)\ntarget     prot opt source               destination         \nRETURN     all  --  anywhere             anywhere            \n\nChain fail2ban-ssh (1 references)\ntarget     prot opt source               destination         \nRETURN     all  --  anywhere             anywhere   \n</code></pre>\n\n<p>Hopefully you can get something out of that.<br>\nAdditionally, I do not recall what I seen before I made the changes. I am not sure but I think i should be listening for IPv4.  Literally the only things I have changed are what is noted above.  </p>\n"},{"id":293531,"title":"What is TCP6 773/cupsd ? why is it listening and why the ip is not cleared?","body":"<p>Hello everybody,\n        Testing my open ports i ran command <code>sudo netstat -ntlup</code> with a normal looking output on my ubuntu 12.04 desktop.</p>\n\n<pre>\nActive Internet connections (only servers)\n\nProto Recv-Q Send-Q Local Address           Foreign Address         State      PID/Program name\n\ntcp        0      0 127.0.0.1:7634          0.0.0.0:*               LISTEN      1919/hddtemp    \ntcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      9393/dnsmasq    \ntcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      773/cupsd       \ntcp6       0      0 ::1:631                 :::*                    LISTEN      773/cupsd       \nudp        0      0 127.0.0.1:53            0.0.0.0:*                           9393/dnsmasq\n</pre>\n\n<p>But I can't see the port TCP6 773 is listening at i.e.</p>\n\n<p><code>tcp6       0      0 ::1:631                 :::*                    LISTEN      773/cupsd</code></p>\n\n<p>What is this?</p>\n"}]}]
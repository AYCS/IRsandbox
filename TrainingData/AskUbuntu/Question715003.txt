[{"id":715003,"title":"qsub doesn&#39;t submit jobs and qlogin can&#39;t start interactive shell","body":"<p>I'm a newbie in SGE cluster management, and after adding a new user to the cluster, it seems it can neither submit jobs with qsub nor start an interactive shell with qlogin.</p>\n\n<p>I guess it might have no permissions to access the nodes. I added that user to an access list (with qmon) where other users can work fine. However, there are differences in the Xauthority file of the new user I've added, related to the others, since it shows only the master node but not the others (where my queues run on), while in the case of other users the Xauthority file show the other nodes. Is there any relationship in this? How could I solve this?</p>\n","related_questions":[{"id":679113,"title":"Need help with MAAS","body":"<p>I'm new to MAAS and I'm trying to setup my first cluster.<br>\nMy cluster will consist of 3 servers:  </p>\n\n<p>1x Master [M001] (Web UI, DHCP, PXE boot etc.)<br>\n2x Node [Fancy-Cord &amp; Polished-Ghost] (MySQL, Apache webserver etc.)</p>\n\n<p>Yet, I cannot seem to figure out how it works.<br>\nI have 2 NICs on M001, 1 which is connected to my home network (eth0), and 1 connected to a switch (SW015) for the nodes (eth1).  </p>\n\n<p>when I type <code>ifconfig</code> in the console, it only showsup eth0...</p>\n\n<p><a href=\"http://i.stack.imgur.com/aydLz.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/aydLz.png\" alt=\"My configuration of the cluster interface\"></a></p>\n\n<p>When I bootup one of my (should become) nodes (Fancy-cord of Polished-Ghost, doesn't matter), and have them go for the PXE, it shows:<br>\n<code>pxe-e18 server response timeout</code></p>\n\n<p>also, when I attach a laptop (with windows 8.1) to SW015, it seems DHCP doesn't do anything, how do I fix this? (since I think solving the DHCP issue might help me solve the issue of PXE)</p>\n\n<p>If you need additional information, feel free to ask, but don't expect me to be a wizard knowing where everything is found (I'm VERY new to MAAS)</p>\n\n<p>UPDATE1:<br>\nThis is how my networks tab looks like (<a href=\"http://M001/MAAS/networks/Cluster/edit/\" rel=\"nofollow\">http://M001/MAAS/networks/Cluster/edit/</a>)\n<a href=\"http://i.stack.imgur.com/NCXU0.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/NCXU0.png\" alt=\"This is how my networks tab looks like\"></a></p>\n\n<p>UPDATE2:<br>\nManaged to get a littlebit of progress (I guess)<br>\nInstead of <code>pxe-e18 server response timeout</code> I now get <code>pxe-e51: No DHCP or proxyDHCP offers were received</code></p>\n"},{"id":675443,"title":"MySQL Job cannot start - Can&#39;t find error, need database","body":"<p>I'm in the progress of migrating my linux server as my old one is quite thoroughly screwed. Not only are all the permissions screwed up, but my mysql server won't even start.</p>\n\n<p>At first the error (what I think from what I read) was because /var/mysql was too full. I saw that I had used 19gb/20gb of my storage space, so I upgraded my storage to 45gb, but now it still won't start, and I can't find out why.</p>\n\n<p>I don't really card if it starts or not, however I want to be able to get the databases off the server and onto my new one. However I'm having a hard time doing that also, so I want to be able to start the mysql server, and then just export to .sql and import.</p>\n\n<pre><code>root@vultr:~# sudo /etc/init.d/mysql start\n\nsudo: unable to resolve host vultr.guest\n\nStarting MySQL database server mysqld [fail]\n</code></pre>\n\n<p>I also tried just normal start:</p>\n\n<pre><code>root@vultr:~# service mysql start\n\nstart: Job failed to start\n</code></pre>\n\n<p>Storage on my machine:</p>\n\n<pre><code>Filesystem Size Used Avail Use% Mounted on\n/dev/vda1 45G 19G 24G 45% /\nnone 4.0K 0 4.0K 0% /sys/fs/cgroup\nudev 991M 4.0K 991M 1% /dev\ntmpfs 201M 364K 200M 1% /run\nnone 5.0M 0 5.0M 0% /run/lock\nnone 1001M 0 1001M 0% /run/shm\nnone 100M 0 100M 0% /run/user\n</code></pre>\n\n<p>My var/logs/mysql/error.log: <a href=\"http://pastebin.com/bzg7km7L\" rel=\"nofollow\">http://pastebin.com/bzg7km7L</a></p>\n\n<p>What other commands should I run? or how can I find out what is going wrong and why isn't Mysql starting?</p>\n\n<p>Please help, I've spent all morning trying everything....</p>\n"},{"id":660784,"title":"Unable to set password for the MySQL &quot;root&quot; user, start: Job failed to start","body":"<pre><code>     ┌───────────────────────Configuring mysql-server-5.5─────────────────────────┐\n     │ Unable to set password for the MySQL \"root\" user                           │\n     │                                                                            │\n     │ An error occurred while setting the password for the MySQL                 │\n     │ administrative user. This may have happened because the account already    │\n     │ has a password, or because of a communication problem with the MySQL       │\n     │ server.                                                                    │\n     │                                                                            │ \n     │ You should check the account's password after the package installation.    │\n     │                                                                            │ \n     │ Please read the /usr/share/doc/mysql-server-5.5/README.Debian file for     │ \n     │ more information.                                                          │ \n     │                                                                            │\n     │                                                                            │\n     ├────────────────────────────────────────────────────────────────────────────┤ \n                                      │ &lt; OK &gt; │ \n     └────────────────────────────────────────────────────────────────────────────┘\nstart: Job failed to start \ninvoke-rc.d: initscript mysql, action \"start\" failed. \ndpkg: error processing package mysql-server-5.5 (--configure):\n subprocess installed post-installation script returned error exit status 1 \ndpkg: dependency problems prevent configuration of mysql-server:\n mysql-server depends on mysql-server-5.5; however:\n  Package mysql-server-5.5 is not configured yet.\n\ndpkg: error processing package mysql-server (--configure):\n dependency problems - leaving unconfigured \nProcessing triggers for libc-bin (2.19-0ubuntu6.6) ... \nProcessing triggers for ureadahead (0.100.0-16) ... \nErrors were encountered while processing:\n mysql-server-5.5\n mysql-server \nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p>I issued <code>ps -e | grep mysqld</code> after this but got no output.</p>\n\n<p>I have tried everything below but the problem remains:</p>\n\n<pre><code>dpkg -S etc/mysql\naptitude purge mysql-server --purge-unused\nsudo apt-get remove --purge mysql-server mysql-client mysql-common\nsudo apt-get autoremove\nsudo apt-get autoclean\nsudo rm -rf /var/lib/mysql\nsudo rm -rf /etc/mysql\nsudo dpkg --configure -a\nsudo apt-get update \n</code></pre>\n\n<p>I tried this as well with no luck:</p>\n\n<pre><code>sudo apt-get purge mysql-server mysql-client mysql-common mysql-client-5.5 mysql-server-5.5 \nsudo dpkg -i mysql-5.6.13-debian6.0-i686.deb \nsudo apt-get install mysql-server\n</code></pre>\n\n<p><em>How should I proceed?</em></p>\n"},{"id":639720,"title":"MAAS - Cluster Controller will not commision","body":"<p>I have a 6 drive cluster controller with 2 spans, 3 hdds per, 3 stripes @ 128kb/per.</p>\n\n<p>The server has dual nic's, both macs are reserved to unique static IP's within the router to meet the static range requirement, within the static range defined in the network tab on the maas gui.  The router handles a dhcp range that spans enough ips to cover al nic's and then some, again meetings the definitions set within the network tab for the MAAS.  </p>\n\n<p>I have made a super user and login to the maas fine.<br>\nImages are updated and sync'd\nCommisioning shows a blue success box BUT, sticks on commissioning.  </p>\n\n<p>There is a red error bubble infront of the controller cluster in the nodes tab.  There is no data regarding this error.  </p>\n\n<p>I have set the MAAS to accept all nodes and believe this may be related to a DNSSEC DNS issue and I am using a free DNSEC compliant DNS host 149.20.64.21</p>\n\n<p>Observations:  Another symptom I am seeing is that the cluster is dropping from online to offline rapidly in the main view which shows \"x\" number of nodes.  </p>\n\n<p>I wanted to generate an ssh key and copy to the server.</p>\n\n<p>My problem with the sshkey is when generated, it is saved to a file location and filename of sshkey.pub  -  I cannot open this file, nor change the contents of the named.conf file to disregard the dnssec check.  </p>\n"},{"id":548651,"title":"Prevent user from seeing files","body":"<p>I need to give access to my server to a new user. This user will access one directory used for web server, in order to modify some files there. \nNow, I have created the user on the server, but when I try to log in with his username, I notice that I can see and download not only this users directory (which is a folder on the web-part of the files), but all files on all the other folders too.</p>\n\n<p>Don't know if this is a permission issue on the oter files (wich the user should not have access to), or on this particular user. When creating the user, I made his homedirectory to be /var/www/xxxxx where xxxxx is the actual folder he should have access to. </p>\n\n<p>To be a little clearer about the other folders he can see, they are located at /var/www/yyyy  All files in yyyy is visible for him and should be hidden.  Any thoughts on this?</p>\n"},{"id":87167,"title":"initctl won&#39;t start jobs","body":"<p>I am operating an Ubuntu 11.10 server and one of the PHP scripts calls a bash script for inserting jobs and starting them.</p>\n\n<p>The script copies the job into <code>/etc/init</code></p>\n\n<p>Everything is fine except that the jobs don't get started with </p>\n\n<pre><code>sudo /sbin/initctl start my-tiny-job\n</code></pre>\n\n<p>(I think the reason is unknown job)</p>\n\n<p>When I run the bash script by hand: </p>\n\n<pre><code>php-user$ ./bashscript.sh  \n</code></pre>\n\n<p>then it works! So this means the job file is correct.</p>\n\n<p>Since this is a functionality called from a web interface I really need to know why this doesn't work.</p>\n"},{"id":414530,"title":"Ubuntu cluster management with torque+maui","body":"<p>I am running a small ubuntu cluster with 8 PCs. Regular users should not be able to access the individual PCs. They should only be able to submit computation tasks through qsub.</p>\n\n<p>Also, regular users should have access to storage on the cluster. Ideally, a regular user should not see where his/her files are located on individual PCs. He should see the cluster as a single storage location. And he should have access only to his files. </p>\n\n<p>Moreover, a process running for a particular user should have access to that user's files.</p>\n\n<p>How can I accomplish all this?</p>\n\n<p>Right now the cluster runs on Ubuntu with torque + maui. It has several issues that I need to fix. One of them is that users can ssh to individual PCs and run processes there, violating the queue.</p>\n\n<p>I am new to linux and clusters, so try giving an answer as introductory as possible. Also, links to no-nonsense tutorials on these topics will also be helpful.</p>\n"},{"id":424845,"title":"Ubuntu Server cron job doesn&#39;t work","body":"<p>My script that is supposed to run only when the server is on isn't working correctly when run by cron. If I run it manually, it works.</p>\n\n<pre><code>backup() {\n  if pidof java &amp;&gt; /dev/null; then\n\n     screen -p 0 -S minecraft -X eval \"stuff \\\"say server backing up\\\"\\015\"\n     # We need to first put the server in readonly mode to reduce the chance of backing up half of a chunk.\n     screen -p 0 -S minecraft -X eval \"stuff \\\"save-off\\\"\\015\"\n     screen -p 0 -S minecraft -X eval \"stuff \\\"save-all\\\"\\015\"\n\n     sleep 10\n\n\n     cd ~/Minecraft\n     mkdir backup\n     tar cvfpz backup/Y-$(date +%Y_M-%m_D-%d_T-%H_%M)-world.backup.tar.gz world/\n\n     screen -p 0 -S minecraft -X eval \"stuff \\\"save-on\\\"\\015\"\n     screen -p 0 -S minecraft -X eval \"stuff \\\"say server done backing up\\\"\\015\"\n\n     # Delete old backups\n     echo deleting old backups\n     find . -name '*-world.backup*' -mtime +5 -delete\n\n   else\n      echo Minecraft Server not on\n   fi\n }\n</code></pre>\n\n<p>I'm wondering if anyone knows why it's not stopping the backup if the server is stopped?</p>\n"},{"id":71193,"title":"Trouble authenticating and with groups. Phantom duplicate user account?","body":"<p>I'm sometimes having trouble authenticating and it seems I'm no longer a member of the 'admin' group.  Or I am.... but I have two user accounts with the same name and only one of them is... or something equally weird...</p>\n\n<p>When I start my terminal, the command prompt says I'm myself (user 'casey'):</p>\n\n<pre><code>casey@netbook:~$\n</code></pre>\n\n<p>When I run the <code>groups</code> command without a user argument...\n(\"man groups\" sez \"if no USERNAME is specified, [groups are printed] for the current process\")\n... it says I'm a member of only two groups: 'casey' and 'lock'!</p>\n\n<pre><code>casey@netbook:~$ groups\ncasey lock\n</code></pre>\n\n<p>If I <em>do</em> specify my username, I suddenly see I'm a member of many groups:</p>\n\n<pre><code>casey@netbook:~$ groups casey\ncasey : casey adm dialout cdrom floppy audio dip video plugdev fuse lpadmin admin sambashare lock\n</code></pre>\n\n<p>These are the same groups I see if I <code>su</code> to my own username, and again query <code>groups</code> with no arguments. Notice that the prompt username stays the same:</p>\n\n<pre><code>casey@netbook:~$ su casey\ncasey@netbook:~$ groups\ncasey adm dialout cdrom floppy audio dip video plugdev fuse lpadmin admin sambashare lock\n</code></pre>\n\n<p>But if I <code>exit</code> again:</p>\n\n<pre><code>casey@netbook:~$ exit\nexit\ncasey@netbook:~$ groups\ncasey lock\n</code></pre>\n\n<p>Output of <code>users</code>:</p>\n\n<pre><code>casey@netbook:~$ users\ncasey casey\n</code></pre>\n\n<p>Example of trouble authenticating:</p>\n\n<pre><code>casey@netbook:~$ gksudo gedit /etc/passwd\n</code></pre>\n\n<p>This yielded the following error dialog:</p>\n\n<blockquote>\n  <p>Failed to run gedit '/etc/passwd' as user root.\n  The underlying authorization mechanism (sudo) does not allow you to run this program. Contact the system administrator.</p>\n</blockquote>\n\n<p>Continued:</p>\n\n<pre><code>casey@netbook:~$ su root\nroot@netbook:/home/casey# gedit /etc/passwd\n(gedit:19566): EggSMClient-WARNING **: Failed to connect to the session manager: None of the authentication protocols specified are supported\n**\nGLib-GIO:ERROR:/build/buildd/glib2.0-2.28.6/./gio/gdbusconnection.c:2279:initable_init: assertion failed: (connection-&gt;initialization_error == NULL)\nAborted\nroot@netbook:/home/casey# su casey\ncasey@netbook:~$ gksudo gedit /etc/passwd\n</code></pre>\n\n<p>At this point it launched properly. /-:</p>\n\n<p>Background info: I'm using Natty Narwhal 11.04.  All was normal until the other day when I tried to install \"Vodafone Mobile Connect\", which complained I wasn't a member of groups 'dialout' and 'lock'.  I added myself, but it still said the same thing.  I copied and pasted a proposed solution from a web-page which google translate had mischievously inserted extra spaces into: <code>sudo chmod 0660 / etc / ppp / pap-secrets / etc / ppp / chap-secrets</code>.  ::forehead-slap::  This screwed up permissions non-recursively (thank goodness for that!) on the root directory of my file system.  It was an easy fix with another <code>chmod</code> from my live USB stick. I don't <em>think</em> this is related to my current problem, but worth mentioning just in case.  Incidentally, I can't seem to remove the 'lock' group from the one 'casey' account, nor add it to the other.</p>\n"},{"id":53285,"title":"How can I prevent users from accessing the root directory?","body":"<p>While still allowing my account to access the root directory. I've tried adding myself to the root group with <code>$ sudo adduser myaccount root</code> but when I do <code>$ sudo chmod o-r /etc</code> followed by <code>$ cd /etc</code> <code>$ dir</code> it says permission denied. </p>\n\n<p>Maybe I'm thinking about the wrong solution for my problem. I setup an ssh server with OpenSSH and want to give users the ability to navigate and edit files in a specific folder <code>/home/myaccount/website/deveopment/</code> without giving them the ability to view or edit anything else.</p>\n\n<p>To solve that problem, I'm attempting to disable 'other group' read permissions from every folder in root so that only root can access them. That's when I ran into the above problem. Even after adding myself to root, I still can't access directories with 'other group' read permissions disabled.</p>\n"}]}]
[{"id":715223,"title":"Nslookup returns correct ip, ping and everything else doesnt","body":"<p>At this point, I'm completely stumped.</p>\n\n<p>I can run nslookup:</p>\n\n<pre><code>unpriv@jsg-web:~$ nslookup google.com\n;; Truncated, retrying in TCP mode.\nServer:         8.8.8.8\nAddress:        8.8.8.8#53\n\nNon-authoritative answer:\nName:   google.com\nAddress: 74.125.226.40\n</code></pre>\n\n<p>Ok, returns fine, what about ping (or really anything else):</p>\n\n<pre><code>unpriv@jsg-web:~$ ping google.com\nping: unknown host google.com\n</code></pre>\n\n<p>Contents of /etc/resolv.conf:</p>\n\n<pre><code># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\nnameserver 8.8.8.8\nnameserver 8.8.4.4\nsearch int.justsomegamers.com\n</code></pre>\n\n<p>I know that Google hasn't shut down their Public DNS as I'm using it on my laptop.</p>\n\n<p>So, any ideas?</p>\n","related_questions":[{"id":664670,"title":"Ubuntu Clients Ignore DNS Server on local network","body":"<p>I currently have a dnsmasq DNS server running on my desktop Ubuntu 15.04 installation.  I use it to point to local devices on my network.  For example, I have a record linking kerberos.dgourd.com to 192.168.1.106 (my desktop's IP address).  However, this name never gets resolved.</p>\n\n<p>I setup my router to hand out three DNS servers:</p>\n\n<ol>\n<li>192.168.1.106 (My local DNS server)</li>\n<li>8.8.8.8 (Two Google DNS servers)</li>\n<li>8.8.4.4</li>\n</ol>\n\n<p>On my laptop, also running Ubuntu 15.04, I ran <code>nmcli dev show | grep DNS</code> to make sure it is using the proper nameservers and got this:</p>\n\n<pre><code>IP4.DNS[1]:    192.168.1.106\nIP4.DNS[2]:    8.8.8.8\nIP4.DNS[3]:    8.8.4.4\nIP4.DNS[4]:    192.168.1.1\n</code></pre>\n\n<p>Running <code>dig kerberos.dgourd.com</code> results in no record being returned:</p>\n\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.9.5-9ubuntu0.2-Ubuntu &lt;&lt;&gt;&gt; kerberos.dgourd.com\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN, id: 51586\n;; flags: qr rd ra ad; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;kerberos.dgourd.com.       IN  A\n\n;; Query time: 1 msec\n;; SERVER: 127.0.1.1#53(127.0.1.1)\n;; WHEN: Sat Aug 22 16:31:48 CDT 2015\n;; MSG SIZE  rcvd: 37\n</code></pre>\n\n<p>However, running <code>dig @192.168.1.106 kerberos.dgourd.com</code> results in the proper record being returned:</p>\n\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.9.5-9ubuntu0.2-Ubuntu &lt;&lt;&gt;&gt; @192.168.1.106 kerberos.dgourd.com\n; (1 server found)\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 51972\n;; flags: qr aa rd ra ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;kerberos.dgourd.com.       IN  A\n\n;; ANSWER SECTION:\nkerberos.dgourd.com.    0   IN  A   192.168.1.106\n\n;; Query time: 5 msec\n;; SERVER: 192.168.1.106#53(192.168.1.106)\n;; WHEN: Sat Aug 22 16:36:05 CDT 2015\n;; MSG SIZE  rcvd: 53\n</code></pre>\n\n<p>At this point, I'm completely stumped as to why this is happening.  Sometimes, my computer will spontaneously start properly resolving these addresses, and then revert back to ignoring my DNS server.  Does anyone have any suggestions on what I can do next to further investigate this isssue?</p>\n"},{"id":551925,"title":"DNS Not Working","body":"<p>I have setup an Ubuntu server with a static IP and I cannot get the DNS to work. Pinging any domain (such as google.com) will not redirect me. I have tried editing /etc/resolv.conf, but that didn't work and it just keeps getting overwritten.</p>\n\n<p>I also tried adding the dns-nameservers x.x.x.x x.x.x.x line to /etc/network/interfaces. I tried this using both my ISP's DNS (obtained it from my Windows desktop with ipconfig) and Google's (8.8.8.8 8.8.4.4), but it still won't work.</p>\n"},{"id":674002,"title":"Virtualbox Ubuntu guest cannot connect to internet but can ping host machine","body":"<p>I have Ubuntu 64 bit server installed on a Virtualbox running on Windows 7.\nI set two adapters to this virtual machine.\nadapter 1 is host-only and adapter 2 is NAT.\nAdapter 1 has static ip address meanwhile adapter 2 follows dhcp.\nI tried to ping guest from host and vice versa. Both sides just work fine, however when I tried to ping google.com from guest it's time out. It seems it cannot connect to internet.</p>\n\n<p>Is there anything wrong with the settings ?</p>\n"},{"id":670536,"title":"Is it possible to ping your own domain name?","body":"<p>I know that this is probably a stupid question but I really don't know the answer.</p>\n\n<p>I have a webserver with two domains sharing the same ip address. </p>\n\n<p>I am using nginx with fastcgi and php5-fpm, and I haven't actually configured ip tables. </p>\n\n<p>I have been trying to localise an upstream timeout error.</p>\n\n<p>But the thing is I truly do not know, is it possible to ping your own domain name via ssh? </p>\n\n<p>I can ping my ip address, I can ping localhost and I can ping 127.0.0.1, but I can not ping the domain name. But the thing that bothers me is I don't know if I should be able to.</p>\n\n<p>Is that normal?</p>\n"},{"id":415023,"title":"connect: Network is unreachable? - ping","body":"<p>When I attempt to ping google's dns or any outside the network I get \n<code>connect: Network is unreachable</code>?</p>\n\n<p>I can't update either which I put down to this</p>\n\n<p>I am new to networking... And Ubuntu. But these are results of some commands I thought might help</p>\n\n<pre><code>$ ip a\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN \n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000\n    link/ether 00:0e:7f:a9:10:54 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.0.5/24 brd 192.168.0.255 scope global eth0\n    inet6 fe80::20e:7fff:fea9:1054/64 scope link \n       valid_lft forever preferred_lft forever\n3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN \n    link/ether 86:0b:cb:43:63:a5 brd ff:ff:ff:ff:ff:ff\n    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0\nmcserver@helloworld:~$ \n\n$ vi /etc/resolv.conf:\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\nnameserver 192.168.0.5\nnameserver 8.8.8.8\n\n$ vi /etc/network/interfaces\n# The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet static\n        address 192.168.0.5\n        netmask 255.255.255.0\n        network 192.168.1.0\n        broadcast 192.168.0.255\n        post-up iptables-restore &lt; /etc/iptables.up.rules\n        dns-nameservers 192.168.0.5 8.8.8.\n</code></pre>\n"},{"id":507649,"title":"Ubuntu can not ping Host Name but can ping IP?","body":"<p>well I just went into the Ubuntu world for administration. I found similar threads, except, I am able to ping my own Host name and IP address and my windows can ping my linux host name, but Ubuntu can not ping the windows hostname.</p>\n\n<p>Problem:</p>\n\n<ul>\n<li>I have 4 windows computers and I have 1 Ubuntu Computer</li>\n<li>My windows Computer can ping Ubuntu Computer by Hostname and by IP address. Also, Net \nView (cmd prompt) displays the host name of Ubuntu Computer.</li>\n<li>Ubuntu Computer can only Ping by IP address only Not by hostname. I installed Samba as well. </li>\n<li>Ubuntu Computer can ping itself by IP address and by Hostname</li>\n<li>I can use arp command and will display all the computers IP on the network, but only by IP address.</li>\n</ul>\n\n<p>How is it that I can only ping by IP address and not by hostname to the windows computers? But Ubuntu can ping itself by IP address and Hostname and windows computers can ping Ubuntu by hostname as well?</p>\n"},{"id":517195,"title":"Ubuntu 14.04 - Network problems (wireless and DNS)","body":"<p>I have seen a very similar problem on post: <a href=\"http://askubuntu.com/questions/292622/cannot-resolve-dns-on-12-10-install\">Cannot resolve dns on 12.10 install</a> but with no clear answer and my problem is related to Ubuntu 14.04, another particularity is that this problem started without any configuration change made by me.</p>\n\n<p>Also, I can connect from any other device to my computer through SSH or SAMBA but I cannot ping or do anything from the Ubuntu to my other devices (win7)</p>\n\n<p>Here goes some information</p>\n\n<p><code>route -n</code></p>\n\n<pre><br>Kernel IP routing table\n<br>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Flags&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Metric&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ref&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use Iface\n<br>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wlan0\n<br>192.168.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wlan0\n<br>192.168.2.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vmnet8\n<br>192.168.180.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vmnet1</pre>\n\n<p><code>/etc/resolv.conf</code></p>\n\n<pre><br>\"# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\n<br>\"#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\n<br>nameserver 127.0.1.1\n<br>search spo.virtua.com.br</pre>\n\n<p>As per my version of Ubuntu I understand that resolv.conf is auto configured by resolvconf and I created /etc/resolvconf.conf to try to force some extra configuration</p>\n\n<p><code>/etc/resolvconf.conf</code></p>\n\n<pre><br>nameserver 8.8.8.8\n<br>nameserver 192.168.0.1\n<br>nameserver 127.0.0.1\n<br>nameserver 127.0.1.1\n<br>search spo.virtua.com.br</pre>\n\n<p><code>dig google.com</code></p>\n\n<pre><br>; > DiG 9.9.5-3-Ubuntu > google.com\n<br>;; global options: +cmd\n<br>;; connection timed out; no servers could be reached</pre>\n\n<p>Pinging 8.8.8.8 (Google)</p>\n\n<pre><br>PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\n^C\n<br>--- 8.8.8.8 ping statistics ---\n<br>17 packets transmitted, 0 received, 100% packet loss, time 16126ms</pre>\n\n<p>Pinging my router</p>\n\n<pre><br>PING 192.168.0.1 (192.168.0.1) 56(84) bytes of data.\n^C\n<br>--- 192.168.0.1 ping statistics ---\n<br>9 packets transmitted, 0 received, 100% packet loss, time 8063ms</pre>\n\n<p>Traceroute my router</p>\n\n<pre>traceroute: unknown host 192.168.0.1</pre>\n\n<p>Does anyone know what can I do to fix it?</p>\n"},{"id":552291,"title":"DNS Settings on Ubuntu 14.04","body":"<p>I just upgraded on Ubuntu 14.04 because I did some nasty thing and clumsily delete configuration files on my previous Ubuntu 12.04, and now my network is not working properly.</p>\n\n<p>The POP server of my mail is something like <b>pop.univmtl.ca</b> , it is our university mail server. When I'm outside of the university, the address of the POP server is <b>142.137.XXX.130</b>, and when I am in the university it is supposed to be <b>10.162.XXX.162</b>. The problem is that my mail is not working anymore everytime I connect in the local network of my university. </p>\n\n<p>So I tried to <b>ping pop.univmtl.ca -c4</b>, then I found that the POP server is still <b>142.137.XXX.130</b> eventhough I am inside the university's local network. And when I try to change the POP settings of my mail to the IP of the POP server (<b>10.162.XXX.162</b>), then I can still receive my mail. But I'm not willing to change this address everytime so I was looking to troubleshoot my DNS settings.</p>\n\n<p>I'm not experimented in Ubuntu and networking, but after googling I edited</p>\n\n<blockquote>\n  <p>sudo gedit /etc/dhcp/dhclient.conf</p>\n</blockquote>\n\n<p>and added almost every DNS Server I found when I'm pinging from my tablet, here is the line:</p>\n\n<blockquote>\n  <p>prepend domain-name-servers 10.162.X.50, 10.162.X.51, 206.167.X13.111, 206.167.X53.111, 8.8.8.8, 8.8.4.4;</p>\n</blockquote>\n\n<p>(Sorry for changing some digits to X, I don't know anything about legal issue).</p>\n\n<p>What I The connection information when I open the <em>network-manager</em> GUI looks OK, it appears like the right DNS is used, and when I do  </p>\n\n<blockquote>\n  <p>nmcli dev list iface wlan0 | grep IP4</p>\n</blockquote>\n\n<p>I get :</p>\n\n<pre><code>IP4.DNS[1]:                             10.162.X.50\nIP4.DNS[2]:                             10.162.X.51\nIP4.DNS[3]:                             206.167.X13.111\nIP4.DNS[4]:                             206.167.X53.111\nIP4.DNS[5]:                             8.8.8.8\nIP4.DNS[6]:                             8.8.4.4\nIP4.WINS[1]:                            10.18.X.35\nIP4.WINS[2]:                            10.18.X.37\n</code></pre>\n\n<p>But even with this configuration, <b>ping pop.univmtl.ca -c4</b> still gives me wrong POP Server IP address. <em>nm-tool</em> gave me the same output as above.\nAlso, I tried to <b>sudo gedit /etc/resolvconf/resolv.conf.d</b> and comment the line <em>dns=dnsmasq</em>. That didn't solve the problem.</p>\n\n<p>Please help me, I don't know what else to do! I tried to look for everything that can reset all the network configurations, but my problem is still there. Thank you in advance.</p>\n\n<p>Andrew</p>\n"},{"id":81797,"title":"nslookup finds ip, but ping doesnt","body":"<p>I know this looks like all the other \"can ping via ip but not dns\" questions, but those didnt really help me at all.</p>\n\n<p>Also, having hosts files in all machines is not doable as this server will eventually handle a lot of computers connecting to it.</p>\n\n<p>I have a ldap+dns server set, and I want the computers on my network to authenticate on the ldap server.</p>\n\n<p>The ldap part of it is working just fine and I can ssh into the ldap server with the ldap credentials just fine.</p>\n\n<p>The problem comes with the client machines, the client is set to use the dns server (in this case 192.168.0.243) and if I get in the terminal and do a nslookup it finds the ldap server just fine.</p>\n\n<pre><code>fernando@desktest:~$ nslookup ldap.mynet.local\nServer:     192.168.0.243\nAddress:    192.168.0.243#53\n\nName:   ldap.mynet.local\nAddress: 192.168.0.243\n</code></pre>\n\n<p>but when i ping it doesnt find the ip address. just hangs there looking pretty till i CTRL-C it. of course pinging by ip address works just fine.</p>\n\n<p>here are the zone files for the dns server</p>\n\n<p>fernando@ldap:~$ cat /etc/bind/named.conf.local</p>\n\n<pre><code>zone \"mynet.local\" {\n    type master;\n    file \"/etc/bind/db.mynet.local\";\n};\n\nzone \"0.168.192.in-addr.arpa\" {\n    type master;\n    notify no;\n    file \"/etc/bind/db.192\";\n};\nfernando@ldap:~$ cat /etc/bind/db.mynet.local \n;\n; BIND data file for local loopback interface\n;\n$TTL    604800\n@   IN  SOA ns.mynet.local. root.mynet.local. (\n                  7     ; Serial\n             604800     ; Refresh\n              86400     ; Retry\n            2419200     ; Expire\n         604800 )   ; Negative Cache TTL\n;\n@   IN  NS  ns.mynet.local.\nns  IN  A   192.168.0.243\nserver  IN  A   192.168.0.250\ndesktest    IN  A   192.168.0.249\nremote  IN  A   192.168.0.248\nwinserver   IN  A   192.168.0.247\nweb         IN  A   192.168.0.246\ntempfs  IN  A   192.168.0.245\nldap    IN  A   192.168.0.243\nantenarfb   IN  A   192.168.0.253\nantenapan   IN  A   10.82.223.7\nadslgvt IN  A   192.168.0.1\nfernando@ldap:~$ cat /etc/bind/db.192 \n;\n; BIND reverse data file for local loopback interface\n;\n$TTL    604800\n@   IN  SOA mynet.local. root.mynet.local. (\n                  6     ; Serial\n             604800     ; Refresh\n              86400     ; Retry\n            2419200     ; Expire\n             604800 )   ; Negative Cache TTL\n;\n@   IN  NS  ns.\n1   IN  PTR ns.mynet.local.\n2   IN  PTR server.mynet.local.\n3   IN  PTR desktest.mynet.local.\n4   IN  PTR remote.mynet.local.\n5   IN  PTR winserver.mynet.local.\n6   IN  PTR web.mynet.local.\n7   IN  PTR tempfs.mynet.local.\n8   IN  PTR ldap.mynet.local.\n9   IN  PTR antenarfb.mynet.local.\n10  IN  PTR antenapan.mynet.local.\n11  IN  PTR adslgvt.mynet.local.\nfernando@ldap:~$ \n</code></pre>\n\n<p>I am really at a loss about what to do and any help will be greatly appreciated.</p>\n\n<p>---- edit ----</p>\n\n<p>before anybody asks, yes the server is running :)</p>\n\n<pre><code>root@ldap:/etc/bind# rndc status\nversion: 9.7.0-P1\nCPUs found: 1\nworker threads: 1\nnumber of zones: 16\ndebug level: 0\nxfers running: 0\nxfers deferred: 0\nsoa queries in progress: 0\nquery logging is OFF\nrecursive clients: 0/0/1000\ntcp clients: 0/100\nserver is up and running\n</code></pre>\n\n<p>---- end edit ----</p>\n"},{"id":352246,"title":"Setting dns-nameservers on a Bonded Network Connection","body":"<p>We have a server running Ubuntu 12.04 Server.</p>\n\n<p>There are two network interfaces on this server (eth0 and eth1), which we've bonded as bond0. DNS is not working currently.. if I ping google.com I get cannot resolve host, but I can ping Google's IP addresses fine.</p>\n\n<p>From what I've read, we just need to add <code>dns-nameservers</code> into <code>/etc/network/interfaces</code>, but I'm unsure if it's going to work the same with a bonded connection.</p>\n\n<p>This is on a <strong>live</strong> production server with tons of users, so obviously don't want to screw up the network connection, as I only have SSH access!</p>\n\n<p>Could anyone tell me if this is the correct way to do it? Is it correct to add the nameservers to the bond rather than each individual interface?</p>\n\n<pre><code># This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet manual\nbond-master bond0\n\nauto eth1\niface eth1 inet manual\nbond-master bond0\n\nauto bond0\niface bond0 inet static\naddress 192.168.1.15\ngateway 192.168.1.100\nnetmask 255.255.255.0\ndns-nameservers 8.8.8.8 8.8.4.4 208.67.222.222\nslaves eth0 eth1\n</code></pre>\n\n<p>Or is there an easier way to update the nameservers? We used to put them in resolv.conf but this now gets overwritten on reboots.</p>\n"}]}]
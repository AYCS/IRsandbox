[{"id":715966,"title":"cannot remove directory rm: cannot remove ‘/opt/odoo/.gvfs’: Device or resource busy","body":"<p>I've created a system user using this command</p>\n\n<pre><code>sudo adduser --system --home=/opt/odoo --group odoo\n</code></pre>\n\n<p>and when I tried to remove it later using this command \n<code>userdel -r odoo</code> I got this error</p>\n\n<pre><code>userdel: error removing directory /opt/odoo\n</code></pre>\n\n<p>when I tried to remove it manually <code>sudo rm -rvf /opt/odoo</code> I got this</p>\n\n<pre><code>rm: cannot remove ‘/opt/odoo/.gvfs’: Device or resource busy\n</code></pre>\n","related_questions":[{"id":558669,"title":"Renaming user name","body":"<p>I made a mistake in the username at the time of installation. So I changed the name of the user after logging in by creating a guest account with SUDO rights. But when I checked the list of users using ls /home command I am not seeing the new name for the user instead Old name is appearing. But I use the new name to login. </p>\n\n<p>Is it like I need to change the name inside Home directory separately? Also , if there is any other changes needs to be done .. ? </p>\n"},{"id":677344,"title":"groupdel: cannot remove the primary group of user &#39;administrator&#39;","body":"<p>When I try to delete the group <code>pro1</code> (<code>groupdel pro1</code>) it shows the error: </p>\n\n<blockquote>\n  <p>groupdel: cannot remove the primary group of user 'administrator'</p>\n</blockquote>\n\n<p>And when I create new user from AD server, the user's default group is <code>pro1</code>.</p>\n\n<p>How can I fix this problem? Thanks.</p>\n"},{"id":627706,"title":"Unable to create and delete an user account in the PC","body":"<p>When I try to create a new user account with command <code>sudo adduser test-ser</code>, I receive this error:\n    sudo adduser test-user</p>\n\n\n\n<pre><code>Adding user test-user ...\nAdding new group test-user (1069) ...\nAdding new user 'test-user' (1032) with group 'test-user' ...\nuseradd: existing lock file /etc/subgid.lock without a PID\nuseradd: cannot lock /etc/subgid; try again later.\nadduser: '/usr/sbin/useradd -d /home/test-user -g test-user -s /bin/bash -u 1032 test-user' returned error code 18. Exiting.\n</code></pre>\n\n<p>When I try to delete an already existing account I receive this error:  </p>\n\n<pre><code>sudo deluser --remove-home existinguser  \n</code></pre>\n\n   \n\n<pre><code>Looking for files to backup/remove ...\nRemoving user `existinguser' ...\nWarning: group `existinguser' has no more members.\nuserdel: existing lock file /etc/subgid.lock without a PID\nuserdel: cannot lock /etc/subgid; try again later.\n/usr/sbin/deluser: `/usr/sbin/userdel existinguser' returned error code 18. Exiting.\n</code></pre>\n"},{"id":608031,"title":"Dynamically set user groups for directories and files on a directory","body":"<p>I have made some vhosts which resides on my home folder, and i have given the group access to www-data user. This way the project (a web system) renders on the browser.</p>\n\n<p>This is a symfony based project, so that when i run some console commands some files may be created, but unfortunately it will have my user account as the group account. How can i dynamically change the owner (group owner) of that particular directory, so that on creation of every file: its ownership is set as :</p>\n\n<pre><code>user:www-data\n</code></pre>\n"},{"id":569370,"title":"DB2 Express-C Administration Server installation error","body":"<p>It's my first time trying out DB2 but I ran into a problem when I tried reinstalling V10.5 of DB2 Express-C on Ubuntu 14.04 (had to install then uninstall). It installed smoothly the first time, but after trying to install it again, I get these errors once it \"completes with minor errors\":</p>\n\n<pre><code>Configuring the DB2 Administration Server :.......Failure\n</code></pre>\n\n<p>And</p>\n\n<pre><code>ERROR: An error occurred while updating the configuration parameter \"DASADM_GROUP\" to \"dasadm1\" for the DB2 Administration Server. The return value is \"-8050\"\n</code></pre>\n\n<p>What does \"-8050\" mean? I've deleted all the groups (<code>db2iadm</code> and <code>db2fadm1</code>) and users (<code>db2inst1</code> and <code>db2fenc1</code>) created by the failed install and then retried installing, but I still get the same error.</p>\n\n<p>Is it still safe to use DB2 in this state? logging into <code>db2inst1</code> and doing a command like <code>db2</code> or <code>db2start</code> still activates the command line processor and says that the database manager is already active, respectively, which is as far as I've tested.</p>\n\n<p>Here are some of the things I noticed:</p>\n\n<ol>\n<li>There was a home folder <code>\\home\\dasusr1</code> created (which I also delete when doing reinstallation attempts), but there aren't any users of that name in either <code>/etc/passwd</code> or the User Accounts section of System settings.</li>\n<li>If I do <code>sudo /opt/ibm/db2/V10.5/instance/db2ilist</code>, it shows 2 entries:<code>db2inst2</code> and <code>db2inst1</code>. I think <code>dbinst1</code> was from my first attempt and <code>db2inst2</code> was during my second. During reinstall attempts, I make sure that I name it to <code>dbinst1</code>, but why does it still detect the second one even after deletion of <code>/opt/ibm</code>? I tried to do a <code>db2idrop db2inst2</code>, but the output says that <code>db2inst2</code> doesn't exist.</li>\n</ol>\n"},{"id":552475,"title":"Cannot edit group-owned files as user belonging to that group","body":"<p>I'm running an Ubuntu 14.04.1 LTS server on Digital Ocean. I'm trying to make it so I can edit files in <code>/srv/www</code> from my normal user account, without needing to be root.</p>\n\n<p>Currently, <code>/srv/www</code> is owned by <code>www-data:www-data</code>:</p>\n\n<pre><code>sudo chown -R www-data:www-data /srv/www \n</code></pre>\n\n<p>I've also set the permissions on all files to <code>664</code>, and on directories to <code>755</code>:</p>\n\n<pre><code>sudo find /srv/www/ -type f -exec sudo chmod 644 {} \\;\nsudo find /srv/www/ -type d -exec sudo chmod 755 {} \\;\n</code></pre>\n\n<p>And I added my user, <code>shea</code>, to the <code>www-data</code> group:</p>\n\n<pre><code>sudo adduser shea www-data\n</code></pre>\n\n<p>However, when I try to <code>touch /srv/www/foo</code>, I receive the following error:</p>\n\n<pre><code>touch: cannot touch ‘/srv/www/foo’: Permission denied\n</code></pre>\n\n<p>It works fine if I prepend <code>sudo</code> to that command, but I'd rather not do that all the time; plus it doesn't work over SFTP.</p>\n\n<p>Changing the owner to <code>shea:www-data</code> allows me to write to the files, but then WordPress cannot update plugins and themes.</p>\n\n<pre><code>sudo chown -R shea:www-data /srv/www\n</code></pre>\n\n<p>Is there anyway that <code>www-data</code> and <code>shea</code> users can both have access to <code>/srv/www</code>? I was under the impression that adding both users to a group would do the trick, but I can't seem to get it working.</p>\n"},{"id":551484,"title":"Uninstalling hadoop on Ubuntu 14.04, files/directories left over","body":"<p>I'm trying to completely uninstall Hadoop on my Ubuntu partition (14.04 Trusty Tahr) and am running into an issue I haven't seen before. I completely removed the directory that hadoop was installed to and the <code>hadoop</code> user's home directory. I also deleted the user and tried to delete the group but bash said the group didn't exist (although it told me that the group wouldn't have any more members in it once I deleted the user, thought that was wierd).</p>\n\n<p>Now, when trying to find any remaining directories or hadoop-related files - I get the following.</p>\n\n<pre><code>$ locate hadoop\n/home/hadoop\n/opt/hadoop\n/opt/hadoop-2.5.1\n$ cd /home/hadoop\nbash: cd: /home/hadoop: No such file or directory\n$ cd /opt/hadoop\nbash: cd: /opt/hadoop: No such file or directory\n$ cd /opt\n$ ls -laF\ntotal 24\ndrwxr-xr-x  6 root     root     4096 Nov 19 09:54 ./\ndrwxr-xr-x 23 root     root     4096 Oct  5 23:59 ../\ndrwxr-xr-x  2 clickpkg clickpkg 4096 Jun 29 23:44 click.ubuntu.com/\ndrwxr-xr-x  8 jxb      jxb      4096 Nov  4 23:36 eclipse/\ndrwxr-xr-x  5      501 staff    4096 Mar 18  2014 LightTable/\ndrwxrwxr-x  9     2000     2000 4096 Mar 18  2014 scala/\n</code></pre>\n\n<p>It says there is still some hadoop left on my system but I can't find it.</p>\n\n<ol>\n<li>There is no <code>hadoop</code> directory or file in my <code>/home</code> or <code>/opt</code> directories. What does the above mean?</li>\n<li>How can I be sure that I removed the <code>hadoop</code> group?</li>\n</ol>\n"},{"id":505243,"title":"How to remove unused or outdated folders?","body":"<p>I administrate a multi-user system that has had quite a lot of user turnover. The users who have left us still have a folder in the folder /home. I would like to remove the folders for the users that are no longer with us, but I don't want to have to sort through each and every folder and remove them one by one using '-rm'. </p>\n\n<p>Is there a command to remove folders that have not been accessed in a certain amount of time? </p>\n\n<p>Thanks!</p>\n"},{"id":457185,"title":"My password can log me in, but nothing else (&quot;user is not in the sudoers file&quot; error when I try)","body":"<p>I recently got a new user account for Ubuntu 12.04 on Linux after becoming unable to log in to one of my earlier accounts. I can log in to this account easily enough, but when I try to use the password to install software through the Ubuntu Software Center, it reads:</p>\n\n<blockquote>\n  <p>Your authentication attempt was unsuccessful. Please try again.</p>\n</blockquote>\n\n<p>I tried installing the software through the terminal with this:</p>\n\n<blockquote>\n  <p>sudo apt-get install</p>\n</blockquote>\n\n<p>But when I entered my password, I got this message:</p>\n\n<blockquote>\n  <p>[username] is not in the sudoers file. This incident will be reported.</p>\n</blockquote>\n\n<p>I searched the forums for a solution, and I found <a href=\"http://askubuntu.com/questions/151200/my-main-username-is-not-in-the-sudoers-file\">this thread</a>, which told me to open a root terminal. I don't know how to do this, but I found out I could get a root terminal by entering this in a normal terminal:</p>\n\n<blockquote>\n  <p>sudo -i</p>\n</blockquote>\n\n<p>Upon doing this, I was asked to enter my sudo password, and I got the same message as before. What am I missing or doing wrong?</p>\n"},{"id":78741,"title":"Degrading administrative privilege to standard with single admin user account","body":"<p>I recently met with a severe issue with user accounts. On my system, there is only one administrator user, named vivek. I added another user with name vivi and changed its privilege to administrator. Afterwards, I changed the privilege for the vivek account to standard user. </p>\n\n<p>Since vivek is being the current user, I dropped with all administrator privileges. No password was set for the new administrator user vivi and hence it was disabled by default. I no longer access to any administrative activities. Later I corrected this by editing etc/group file. </p>\n\n<p>Isn't this a severe bug? Being the current administrator user, how could I degrade myself to a standard user and got out from administrator's seat? I did not get any warning messages indicating no other administrators exists to manage my system. I suggest this warning should be included there in user accounts when an administrator user changes his privilege without any enabled administrators. Your thoughts?</p>\n"}]}]
[{"id":715703,"title":"How to keep read value after break","body":"<p>Evening, </p>\n\n<p>I am trying to have the mysqlpass entry stay throughout the script, without the break getting rid of it. But I can't figure out how. </p>\n\n<pre><code>while true; do\n  read -p \"Password for MySQL \" mysqlpass\n  echo \"Confirm Password \"\n  read -p \"Re-enter password: \" mysqlpassverify\n  if [ $mysqlpass == $mysqlpassverify ]; then\n    echo \"Success\"\n    break\n  else\n    echo \"failed, please try again\"\n    echo\n  fi\ndone\n</code></pre>\n\n<p><a href=\"https://github.com/keyxmakerx/Setup/blob/master/guac.sh\" rel=\"nofollow\">Link to github</a></p>\n\n<p>*Also as a side note, I'm not sure how secure this is, if anyone can recommend anything. </p>\n\n<hr>\n\n<p>When I test I get the following. </p>\n\n<pre><code>./test.sh ; echo \"the pass is $mysqlpass\" \nPassword for MySQL test                  \nConfirm Password                         \nRe-enter password: test                  \nSuccess                                  \nthe pass is \n</code></pre>\n\n<p>Thanks for all the help people have provided me, although I still don't seem to quite grasp the resolution. </p>\n","related_questions":[{"id":713003,"title":"How to use Read command in shell script while run script on remote machine","body":"<p>I want to run my shell script on a remote machine and I need user want to give value for some variable for that we use Read command while run script on local machine but I use the same command while run the script on remote machine but it's not working for me. How to use Read command for run script on remote machine?</p>\n\n<p>sample code :</p>\n\n<pre><code>restore (){\n        echo \"Restore\"\n}\n\ndeploy () {\n        echo \"Deploy\"\n}\n\n\necho \"Select any option to proceed...\"\nread opt\ncase $opt in\n\n        restore)\n        restore;\n        break;;\n\n        deploy)\n        deploy;\n        break;;\nesac\n</code></pre>\n\n<p>This code work fine for when run scripts on local machine.</p>\n\n<p>Thanks in advance !</p>\n"},{"id":344407,"title":"How to read complete line in &#39;for&#39; loop with spaces","body":"<p>I am trying to run a <code>for</code> loop for file and I want to display whole line.\nBut instead its displaying last word only. I want the complete line.</p>\n\n<pre><code>for j in `cat ./file_wget_med`\n\ndo\necho $j\n\ndone\n</code></pre>\n\n<p>result after run:</p>\n\n<pre><code>Found.\n</code></pre>\n\n<p>Here is my data:</p>\n\n<pre><code>$ cat file_wget_med\n2013-09-11 14:27:03 ERROR 404: Not Found.\n</code></pre>\n"},{"id":697798,"title":"Shell Script - How to run script after mysql is ready?","body":"<p>I have a script (in a <code>.sh</code> file) to run once everytime i logged in. But I have to make sure that mysql service is already running before the main script in my <code>.sh</code> executed. <br>\nHere is my draft:<br></p>\n\n<pre><code>function check_mysql(){\n    // script for checking mysql\n    return status\n}\nmysqlstatus = check_mysql()\nwhile mysqlstatus == false {\n    mysqlstatus = check_mysql()\n}\n// once mysqlstatus == true\n// my main script\n// my main script\n// my main script\n// my main script\n</code></pre>\n\n<p>How to write the above draft in shell script?</p>\n"},{"id":646020,"title":"How to subtract float values in shell script","body":"<p>I have a script which uses float values but some how i am not able to subtract two floats.</p>\n\n<p>This is the sample code</p>\n\n<pre><code>#!/bin/bash\n\np=\"1\"\nh=\"10\"\nm=$(echo \"3.5\"| bc -l)\nfor (( c=$p; c&lt;=$h; c++ ))\ndo\n   r=$(echo \"($p-$m)\"| bc -l)\n\n   echo \"Z $c $m $r\"\ndone\n</code></pre>\n\n<p>and this is the result</p>\n\n<pre><code>Z 1 3.5 -2.5\nZ 2 3.5 -2.5\nZ 3 3.5 -2.5\nZ 4 3.5 -2.5\nZ 5 3.5 -2.5\nZ 6 3.5 -2.5\nZ 7 3.5 -2.5\nZ 8 3.5 -2.5\nZ 9 3.5 -2.5\nZ 10 3.5 -2.5\n</code></pre>\n"},{"id":598570,"title":"How to Keep Text Consistent in A Shell Script","body":"<p>Good Day!</p>\n\n<p>I am creating a Shell Script so I can then use it to do X (Won't tell)</p>\n\n<p>This is my Current Script</p>\n\n<pre><code>clear\necho Ahmad A Kazi\necho IDNO: BD_3456\necho \necho Data Clear Program\necho c 2015 Ahmad A Kazi\necho\necho First Update\necho \napt-get update\necho\necho Purge Programs\necho\napt-get purge cmake -y\napt-get purge libtool -y\napt-get purge libcurl4-openssl-dev -y\napt-get purge libjansson-dev -y\n</code></pre>\n\n<p>This is Just Part of The Script because rest is Proprietary</p>\n\n<p>I want this to be there on top of the Script Output and not Change it's position the Whole Time, this text below should be consistently on the Top The Whole Time</p>\n\n<pre><code>===========================================\nAhmad A Kazi\nCopyright 2015, The DNACoin Developers\n\n===========================================\n</code></pre>\n\n<p>For Example</p>\n\n<pre><code>===========================================\nAhmad A Kazi\nCopyright 2015, The DNACoin Developers\n\n===========================================\n\nSome thing else is going on......\n</code></pre>\n\n<p>This Something Else should not end up Removing My Name and Copyright\nAlso, how to print Time and keep on self updating....</p>\n\n<p>Please help!</p>\n\n<p>Thank You</p>\n"},{"id":614888,"title":"Bash sed to read auth into debconf-set-selections for Vagrant VM","body":"<p>I have a <code>Vagrantfile</code> that uses a bash script to set up a VM. I can't get the script to set a password for MySQL using <code>debconf-set-selections</code> with output from an <code>.auth</code> file.</p>\n\n<p>Below is an example of the <code>.auth</code> file:</p>\n\n<pre><code># MySQL password\njimmy\n</code></pre>\n\n<p>Below is the script used by Vagrant <code>bootstrap.sh</code>:</p>\n\n<pre><code># MySQL password\nmypass=$(sed '2q;d' .auth)\ndebconf-set-selections &lt;&lt;&lt; \"mysql-server mysql-server/root_password $mypass\"\ndebconf-set-selections &lt;&lt;&lt; \"mysql-server mysql-server/root_password $mypass\"\n</code></pre>\n\n<p>The error given(twice):</p>\n\n<pre><code>==&gt; default: warning: Unknown type jimmy, skipping line 1\n</code></pre>\n"},{"id":595524,"title":"How to execute a number of lines using xargs","body":"<p>I have a large sql dump that has 1 insert statement per line. I want to be able to pipe this to xargs so that I can slow down the writes. Basically I want to execute a number of lines, sleep, then continue to execute and so forth.</p>\n\n<p>I current have this:</p>\n\n<pre><code>cat file.sql | xargs -n50 -d \"\\n\" sh -c '(echo \"$@\" | mysql db_name); sleep 10'\n</code></pre>\n\n<p>But the problem is that I believe somewhere in the file, there's a <code>\\n</code> that's causing sql to break. I'm using <code>INSERT IGNORE</code> and this is resulting to missing rows.</p>\n\n<p>I don't want to go through the file and fix the <code>\\n</code>. Is there a way to use line instead of <code>\\n</code>?</p>\n\n<p>I've tried:</p>\n\n<pre><code>cat file.sql | xargs -L 50 sh -c '(echo \"$@\" | mysql db_name); sleep 10'\n</code></pre>\n\n<p>but I'm getting:</p>\n\n<pre><code>xargs: unmatched single quote; by default quotes are special to xargs unless you use the -0 option\n</code></pre>\n"},{"id":455886,"title":"Value of if command outcomes","body":"<p>I'm pretty new to Ubuntu linux, let's say all of linux because I installed it a few days ago. I'm sorry for my mistakes in my use of English, because I live in the Netherlands.</p>\n\n<p>Well I tried to do some programming, writing a script, but I encountered a problem which I haven't been able to solve yet. Well I was writing a script, and I want this script to automatically install a few things for me. Well I was doing and tried to make as less nests as I could, and I finished my script, but I thought. Why wouldn't I try to put a few lines in it which check if the programs are correctly installed. So I wondered how I could do it and I came up with the following:</p>\n\n<p>Because I'm new to programming I wanted it to be so advanced as I could by myself. So I decided to try to work with shell functions. These functions check if the correct file is there, and the outcome of these functions has to be a value which I can use later. Here an example:</p>\n\n<pre><code>function isitthere\n{\nif [ -f &lt;thefile&gt; ]; then\ntrue\nelse\nfalse\nfi\n}\n\nif [ $(isitthere) = \"true\" ]; then\necho \"Your program is properly installed\"\nelse\necho \"Your program isn't properly installed.\nfi\n</code></pre>\n\n<p>In this example are true and false my values, and as you see, I try to re-use them in my second command. I know this can be done much more easily, but I want to know if it is possible, and if it is possible how. Because in one part of my script doing it like this makes it much easier. Is there any way you can give a value to your if command and use that value later in your next if command?\nThanks.</p>\n"},{"id":452313,"title":"How to check the number of fields given to the `read` command?","body":"<p>I have a quick question relating to <code>$#</code> in the shell scripts.</p>\n\n<p>So, I can use <code>$#</code> at the command line to check the number of a shell script arguments given by the user.</p>\n\n<p>Example:</p>\n\n<pre><code>#  ./shellScript varONE varTWO\n#  $#\n&gt;  2  &lt;--  so output 2 here reflects varONE and varTWO\n</code></pre>\n\n<p>Is any command I can use for <code>read</code> command?</p>\n\n<p>For example:</p>\n\n<pre><code>#!/bin/bash\nread -p \"please input value\" var1 var2\necho $#  &lt;--  however here will return 0 even user input two values at command line\n</code></pre>\n\n<p>Is any other command I can use here to return 2 so that I can perform a check on the user's input variables? Like:</p>\n\n<pre><code>[ $# -lt 2 ] &amp;&amp; echo \"failed\"\n</code></pre>\n"},{"id":417798,"title":"How to concate strings in a bash script to use in SQL-Statement?","body":"<p>I would like to do the following in a bash script:  </p>\n\n<ol>\n<li>read some filenames out of an file with filenames  </li>\n<li>set a variable input path  </li>\n<li>concat 1. and 2.   </li>\n<li>use 3. in sql-statement</li>\n</ol>\n\n<p>Here my code:</p>\n\n<pre><code> #!/bin/bash\n INPath=\"/home/bono/RD/BV-OUT/\"\n\n while \n read line\n do\n RD=\"$line\"\n RDFile=\"$INPath$RD\"\n\n echo -e $RDFile\n\n ###MYSQLs:\n mysql -u root -D RD --local-infile &lt;&lt; EOF\n   LOAD DATA LOCAL INFILE '$RDFile'\n     INTO TABLE bv_tmp_all FIELDS TERMINATED BY ';' LINES TERMINATED BY '\\r\\n';\n EOF\n ##### EOSQL\n\n done &lt; /home/bono/RD/BV-OUT/allto468\n</code></pre>\n\n<p>The echo shows the right path and filenamen but mysql always says:  </p>\n\n<pre><code>not found (Errcode: 2 - File or Directory not found)  \n</code></pre>\n\n<p>I've tried different ways to concate the two strings but none worked :(  </p>\n\n<p>The following code works with mysql (without the concate) but it is not what I need: </p>\n\n<pre><code> #!/bin/bash\n\n while \n read line\n do\n\n RDFile=\"/home/bono/RD/BV-OUT/468-R11\"\n\n echo -e $RDFile\n\n ###MYSQLs:\n mysql -u root -D RD --local-infile &lt;&lt; EOF\n   LOAD DATA LOCAL INFILE '$RDFile'\n     INTO TABLE bv_tmp_all FIELDS TERMINATED BY ';' LINES TERMINATED BY '\\r\\n';\n EOF\n ##### EOSQL\n\n done &lt; /home/bono/RD/BV-OUT/allto468\n</code></pre>\n\n<p>What is wrong with the concate?</p>\n"}]}]
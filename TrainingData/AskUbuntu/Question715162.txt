[{"id":715162,"title":"Ubuntu failing to fall asleep (tpm error)","body":"<p>I'm having a problem with my laptop not suspending randomly (seems to be about 50% of the time). Once it starts having this issue, the only fix is to reboot fully. This happens when I both close the lid or press the sleep button on the keyboard.</p>\n\n<p>If I restart, the problem is fixed but usually resurfaces later in the day.</p>\n\n<p>Here is the output of dmesg at the time of the suspend command.</p>\n\n<pre><code>[12815.768330] tpm_tis 00:04: Error (28) sending savestate before suspend\n[12815.768335] __pnp_bus_suspend(): tpm_pm_suspend+0x0/0x1c0 returns 28\n[12815.768338] dpm_run_callback(): pnp_bus_suspend+0x0/0x20 returns 28\n[12815.768340] PM: Device 00:04 failed to suspend: error 28\n[12815.768341] PM: Some devices failed to suspend, or early wake event detected\n</code></pre>\n\n<p>I'm running 14.04 on kernel 3.19.0-42</p>\n","related_questions":[{"id":708344,"title":"TPM 2.0 on Debian/Ubuntu","body":"<p>We are running one of the newest Intel NUCs with TPM 2.0 chip (what the vendor is, I haven't been able to figure out). At the moment I am just trying to load the drivers to get it visible to the system, but no dice so far</p>\n\n<p>I have tried Linux Kernels 3.2, 3.16 and 4.2. According to <a href=\"http://kernelnewbies.org/Linux_4.0\" rel=\"nofollow\">kernelnewbies</a> kernel 4.0 is when TPM 2.0 drivers were introduced.</p>\n\n<p>My current steps to load drivers:</p>\n\n<ul>\n<li><code>ls -la /lib/modules/`uname -r`/kernel/drivers/char/tpm</code> to list available tpm drivers</li>\n<li><code>modprobe &lt;items from above&gt;</code>. Plenty of people say that tpm_tis is the only thing they needed, but no dice for me</li>\n<li>Checking <code>/sys/class/tpm</code> on 4.* and <code>/sys/class/misc/</code>on 3.* for tpm0 hardware</li>\n<li>Running <code>tcsd -f</code> just gives me a communication error</li>\n<li>Triple checked the BIOS to see if TPM is enabled. It was actually enabled out of the box which apparently it isn't supposed to be?</li>\n</ul>\n\n<p>Output of <code>ls -la /lib/modules/`uname -r`/kernel/drivers/char/tpm</code>:</p>\n\n<pre><code>total 248\ndrwxr-xr-x 3 root root  4096 Dec 10 18:38 .\ndrwxr-xr-x 7 root root  4096 Dec 10 18:38 ..\ndrwxr-xr-x 2 root root  4096 Dec 10 18:38 st33zp24\n-rw-r--r-- 1 root root 10984 Nov 18 05:26 tpm_atmel.ko\n-rw-r--r-- 1 root root 11760 Nov 18 05:26 tpm_crb.ko\n-rw-r--r-- 1 root root 11160 Nov 18 05:26 tpm_i2c_atmel.ko\n-rw-r--r-- 1 root root 14904 Nov 18 05:26 tpm_i2c_infineon.ko\n-rw-r--r-- 1 root root 20816 Nov 18 05:26 tpm_i2c_nuvoton.ko\n-rw-r--r-- 1 root root 24808 Nov 18 05:26 tpm_infineon.ko\n-rw-r--r-- 1 root root 66552 Nov 18 05:26 tpm.ko\n-rw-r--r-- 1 root root 15784 Nov 18 05:26 tpm_nsc.ko\n-rw-r--r-- 1 root root 31624 Nov 18 05:26 tpm_tis.ko\n-rw-r--r-- 1 root root 14072 Nov 18 05:26 xen-tpmfront.ko\n</code></pre>\n\n<p>Any additional steps / direction / tips would be greatly appreciated. </p>\n\n<p><strong>Update</strong></p>\n\n<p>I managed to get 4.4 kernel installed, it manages to load up drivers (I see tpm0 in <code>/sys/class/tpm/tpm0</code> now). But running <code>tcsd -f</code> give me the following error:</p>\n\n<pre><code>TCSD TDDL ioctl: (25) Inappropriate ioctl for device\nTCSD TDDL Falling back to Read/Write device support.\nTCSD TCS ERROR: TCS GetCapability failed with result = 0x1e\n</code></pre>\n\n<p>Also to make sure that I have the latest version of Trousers I compiled that from source as well, still no dice. One thing I have noticed is that inside <code>tpm0</code> there is no <code>pcrs</code> file</p>\n"},{"id":648035,"title":"Ubuntu 15.04/kernel 4.0.1, tpm error (7) occured","body":"<p>I have installed Ubuntu 15.04. Once I had installed all updates, I ran into this error:</p>\n\n<pre><code>[  4.124110] tpm_tis 00:00: A TPM error (7) occurred attempting to read a pcr (I took a picture but it blurs the rest of the error)\nstarting version 219\n</code></pre>\n\n<p>This error does not seem to interrupt start-up, but this error does occur after an unsuccessful startup (When I press power button, it starts, turns purple and shortly after black, and the fans go to low speed)</p>\n\n<p>I do not have an Nvidia graphics card, I have ATI radeon HD 3200  (no drivers for any newer kernels)</p>\n\n<p>What I have tried:</p>\n\n<ul>\n<li>Reinstall ubuntu</li>\n<li>delete everything associated with nvidia</li>\n<li>updated kernel to 4.0.1</li>\n<li>update, upgrade, dist-upgrade</li>\n</ul>\n\n<p>I have googled this, but none of the solutions worked for me. And most of them were about a nvidia card causing this error.</p>\n\n<p>Also, after booting into empty, Ubuntu loading takes forever (over 2minutes).</p>\n"},{"id":663733,"title":"Suspend option is not working in Ubuntu 14.04","body":"<p>I'm new in the world of linux.</p>\n\n<p>I'm trying to learn it using Ubuntu 14.04 LTS version.</p>\n\n<p>My question is how to make the 'Suspend' option to work?</p>\n\n<p>Whenever i click that option from my laptop, the screen becomes black at first, then my login screen comes after 2-3 seconds.</p>\n\n<p>Nothing happens after that. I have tried almost every answers from the forums and lastly posting here.</p>\n\n<p>I'm using Lenovo Z570. Thanks in advance.</p>\n"},{"id":496237,"title":"sh: echo: I/O error on pm-suspend Ubuntu 14.04","body":"<p>I just installed Ubuntu 14.04 on my Fujitsu Lifebook U772 after a long hiatus with Opensuse and after the install, it appears that <code>pm-suspend</code> works out of the box. A few days of setting up later, however, suspend stopped working, with the menu option of Suspend only resulting in the screen momentarily going black then returning to the lock screen.</p>\n\n<p>I manually tried to suspend the machine from a terminal using <code>sudo pm-suspend</code> but still to no avail. I started looking over the <code>pm-suspend</code> log at <code>/var/log/pm-suspend.log</code>, and I noticed something strange:</p>\n\n<pre><code>Running hook /usr/lib/pm-utils/sleep.d/00logging suspend suspend:\nLinux deathbook 3.13.0-30-generic #55-Ubuntu SMP Fri Jul 4 21:40:53 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\nModule                  Size  Used by\nvboxpci                23194  0 \nvboxnetflt             27613  0 \nvboxnetadp             25670  0 \nvboxdrv               339502  3 vboxnetadp,vboxnetflt,vboxpci\npci_stub               12622  1 \nctr                    13049  1 \nccm                    17773  1 \nbnep                   19624  2 \nrfcomm                 69160  0 \nbluetooth             395423  10 bnep,rfcomm\nbinfmt_misc            17468  1 \nnls_iso8859_1          12713  1 \narc4                   12608  2 \niwldvm                232285  0 \nintel_rapl             18773  0 \nuvcvideo               80885  0 \nhid_generic            12548  0 \nx86_pkg_temp_thermal    14205  0 \nvideobuf2_vmalloc      13216  1 uvcvideo\nintel_powerclamp       14705  0 \nvideobuf2_memops       13362  1 videobuf2_vmalloc\ncoretemp               13435  0 \nvideobuf2_core         40664  1 uvcvideo\nvideodev              134688  2 uvcvideo,videobuf2_core\nkvm_intel             143060  0 \nmac80211              626557  1 iwldvm\nusbhid                 52570  0 \nkvm                   451511  1 kvm_intel\ni2400m_usb             36521  0 \nhid                   106148  2 hid_generic,usbhid\ni2400m                107913  1 i2400m_usb\nwimax                  34704  1 i2400m\ncrct10dif_pclmul       14289  0 \nsnd_hda_codec_hdmi     46207  1 \ncrc32_pclmul           13113  0 \nghash_clmulni_intel    13216  0 \naesni_intel            55624  2 \nsnd_hda_codec_realtek    61438  1 \naes_x86_64             17131  1 aesni_intel\ni915                  783703  4 \nsnd_hda_intel          52355  3 \nsnd_hda_codec         192906  3 snd_hda_codec_realtek,snd_hda_codec_hdmi,snd_hda_intel\nlrw                    13286  1 aesni_intel\niwlwifi               169932  1 iwldvm\nsnd_hwdep              13602  1 snd_hda_codec\nsnd_pcm               102099  3 snd_hda_codec_hdmi,snd_hda_codec,snd_hda_intel\ngf128mul               14951  1 lrw\ndrm_kms_helper         53081  1 i915\nsnd_page_alloc         18710  2 snd_pcm,snd_hda_intel\nsnd_seq_midi           13324  0 \nglue_helper            13990  1 aesni_intel\ndrm                   303102  5 i915,drm_kms_helper\ncfg80211              484040  3 iwlwifi,mac80211,iwldvm\nablk_helper            13597  1 aesni_intel\nsnd_seq_midi_event     14899  1 snd_seq_midi\ncryptd                 20359  3 ghash_clmulni_intel,aesni_intel,ablk_helper\nsnd_rawmidi            30144  1 snd_seq_midi\ni2c_algo_bit           13413  1 i915\nsnd_seq                61560  2 snd_seq_midi_event,snd_seq_midi\nsnd_seq_device         14497  3 snd_seq,snd_rawmidi,snd_seq_midi\nsnd_timer              29482  2 snd_pcm,snd_seq\nmei_me                 18627  0 \nmei                    82276  1 mei_me\nsnd                    69238  17 snd_hda_codec_realtek,snd_hwdep,snd_timer,snd_hda_codec_hdmi,snd_pcm,snd_seq,snd_rawmidi,snd_hda_codec,snd_hda_intel,snd_seq_device,snd_seq_midi\nrtsx_pci_ms            18151  0 \nsoundcore              12680  1 snd\nmemstick               16966  1 rtsx_pci_ms\njoydev                 17381  0 \nmac_hid                13205  0 \nlpc_ich                21080  0 \nfujitsu_laptop         18947  0 \nvideo                  19476  1 i915\nserio_raw              13462  0 \nparport_pc             32701  0 \nppdev                  17671  0 \nlp                     17759  0 \nparport                42348  3 lp,ppdev,parport_pc\nrtsx_pci_sdmmc         23274  0 \ne1000e                254433  0 \npsmouse               102222  0 \nahci                   25819  5 \nlibahci                32168  1 ahci\nrtsx_pci               45956  2 rtsx_pci_ms,rtsx_pci_sdmmc\nptp                    18933  1 e1000e\npps_core               19382  1 ptp\n             total       used       free     shared    buffers     cached\nMem:       3905144    2586540    1318604     356556       6452     531508\n-/+ buffers/cache:    2048580    1856564\nSwap:      8190472          0    8190472\n/usr/lib/pm-utils/sleep.d/00logging suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/00powersave suspend suspend:\n/usr/lib/pm-utils/sleep.d/00powersave suspend suspend: success.\n\nRunning hook /etc/pm/sleep.d/10_grub-common suspend suspend:\n/etc/pm/sleep.d/10_grub-common suspend suspend: success.\n\nRunning hook /etc/pm/sleep.d/10_unattended-upgrades-hibernate suspend suspend:\n/etc/pm/sleep.d/10_unattended-upgrades-hibernate suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/50unload_alx suspend suspend:\n/usr/lib/pm-utils/sleep.d/50unload_alx suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/60_wpa_supplicant suspend suspend:\nSelected interface 'wlan0'\nOK\n/usr/lib/pm-utils/sleep.d/60_wpa_supplicant suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/75modules suspend suspend:\nUnloading kernel module vboxdrv...Done.\n/usr/lib/pm-utils/sleep.d/75modules suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/90clock suspend suspend:\n/usr/lib/pm-utils/sleep.d/90clock suspend suspend: not applicable.\n\nRunning hook /usr/lib/pm-utils/sleep.d/94cpufreq suspend suspend:\n/usr/lib/pm-utils/sleep.d/94cpufreq suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95anacron suspend suspend:\nstop: Unknown instance: \n/usr/lib/pm-utils/sleep.d/95anacron suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95hdparm-apm suspend suspend:\n/usr/lib/pm-utils/sleep.d/95hdparm-apm suspend suspend: not applicable.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95led suspend suspend:\n/usr/lib/pm-utils/sleep.d/95led suspend suspend: not applicable.\n\nRunning hook /usr/lib/pm-utils/sleep.d/98video-quirk-db-handler suspend suspend:\nKernel modesetting video driver detected, not using quirks.\n/usr/lib/pm-utils/sleep.d/98video-quirk-db-handler suspend suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/99video suspend suspend:\nkernel.acpi_video_flags = 0\n/usr/lib/pm-utils/sleep.d/99video suspend suspend: success.\n\nRunning hook /etc/pm/sleep.d/novatel_3g_suspend suspend suspend:\n/etc/pm/sleep.d/novatel_3g_suspend suspend suspend: success.\n\nFri Jul 11 07:17:01 PHT 2014: performing suspend\nsh: echo: I/O error\nFri Jul 11 07:17:03 PHT 2014: Awake.\nFri Jul 11 07:17:03 PHT 2014: Running hooks for resume\nRunning hook /etc/pm/sleep.d/novatel_3g_suspend resume suspend:\n/etc/pm/sleep.d/novatel_3g_suspend resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/99video resume suspend:\n/usr/lib/pm-utils/sleep.d/99video resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/98video-quirk-db-handler resume suspend:\n/usr/lib/pm-utils/sleep.d/98video-quirk-db-handler resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95led resume suspend:\n/usr/lib/pm-utils/sleep.d/95led resume suspend: not applicable.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95hdparm-apm resume suspend:\n\n/dev/sda:\n setting Advanced Power Management level to 0xfe (254)\n APM_level  = 254\n\n/dev/sdb:\n setting Advanced Power Management level to 0xfe (254)\n APM_level  = 254\n/usr/lib/pm-utils/sleep.d/95hdparm-apm resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/95anacron resume suspend:\n/usr/lib/pm-utils/sleep.d/95anacron resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/94cpufreq resume suspend:\n/usr/lib/pm-utils/sleep.d/94cpufreq resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/90clock resume suspend:\n/usr/lib/pm-utils/sleep.d/90clock resume suspend: not applicable.\n\nRunning hook /usr/lib/pm-utils/sleep.d/75modules resume suspend:\nReloaded unloaded modules.\n/usr/lib/pm-utils/sleep.d/75modules resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/60_wpa_supplicant resume suspend:\nSelected interface 'wlan0'\nOK\n/usr/lib/pm-utils/sleep.d/60_wpa_supplicant resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/50unload_alx resume suspend:\n/usr/lib/pm-utils/sleep.d/50unload_alx resume suspend: success.\n\nRunning hook /etc/pm/sleep.d/10_unattended-upgrades-hibernate resume suspend:\n/etc/pm/sleep.d/10_unattended-upgrades-hibernate resume suspend: success.\n\nRunning hook /etc/pm/sleep.d/10_grub-common resume suspend:\n/etc/pm/sleep.d/10_grub-common resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/00powersave resume suspend:\n/usr/lib/pm-utils/sleep.d/00powersave resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/00logging resume suspend:\n/usr/lib/pm-utils/sleep.d/00logging resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/000record-status resume suspend:\n/usr/lib/pm-utils/sleep.d/000record-status resume suspend: success.\n\nRunning hook /usr/lib/pm-utils/sleep.d/000kernel-change resume suspend:\n/usr/lib/pm-utils/sleep.d/000kernel-change resume suspend: success.\n\nFri Jul 11 07:17:04 PHT 2014: Finished.\n</code></pre>\n\n<p>More specifically, it was along these lines (this is the part where the system actually performs the suspend):</p>\n\n<pre><code>Fri Jul 11 07:17:01 PHT 2014: performing suspend\nsh: echo: I/O error\nFri Jul 11 07:17:03 PHT 2014: Awake.\nFri Jul 11 07:17:03 PHT 2014: Running hooks for resume\nRunning hook /etc/pm/sleep.d/novatel_3g_suspend resume suspend:\n/etc/pm/sleep.d/novatel_3g_suspend resume suspend: success.\n</code></pre>\n\n<p>I think the weird part here is the <code>sh: echo: I/O error</code> that shows up every time the system does a suspend, as you can see, the system immediately awakens after the error.</p>\n\n<p>I've tried a lot of workarounds that include the following:</p>\n\n<ul>\n<li>Disabling Virtualbox's <code>vboxdrv</code> modules as I have read that they sometimes interfere with a host machine's ability to suspend</li>\n<li>Disabling all devices that could wake the system in <code>/proc/acpi/wakeup</code></li>\n<li>Replacing the <code>errors=remount ro</code> option for <code>/</code> in <code>/etc/fstab</code> to <code>errors=continue</code></li>\n</ul>\n\n<p>Despite all of those the problem still persists. Could it be an issue with the kernel? Back when I was still using Opensuse 12.3 I was stuck in kernel 3.7, and now here in Ubuntu 14.04 I'm using kernel 3.13. Though I kind of doubt that the kernel might be the issue since 3.13 came out of the box and suspend still worked at that time.</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>I've found that the cause for the echo that causes the I/O fail is in line 321 of <code>/usr/lib/pm-utils/pm-functions</code>. I got this by turning on verbose logging and debugging for <code>pm-suspend</code>, and disabling all hooks (by moving them temporarily to another directory).</p>\n\n<p>This is the line in question:</p>\n\n<pre><code> do_suspend() { echo -n \"mem\" &gt;/sys/power/state; }\n</code></pre>\n\n<p>As I understand it, this <code>echo</code> is crucial because it's the interface between <code>pm-suspend</code> and the low-level functions in the kernel that handle suspends. The issue now is why would an I/O error occur at that moment. I'll try to manually perform the command on a terminal and see if an I/O error still occurs.</p>\n"},{"id":550311,"title":"Power Presets - Ubuntu 14.04","body":"<p>Hello Ubuntu Community,</p>\n\n<p>On Windows, I was able to set different power plans (\"Never Off\", \"Charging\", etc.) which allowed me to change suspend/screen turn off settings with the click of a button. However, I'm not sure exactly how to do this on Ubuntu.</p>\n\n<p>Anybody know how to do this?</p>\n\n<p>Thanks!</p>\n"},{"id":532707,"title":"HP Pavilion G6 Won&#39;t Suspend with Ubuntu 14.04","body":"<p>My HP Pavilion g6-2268ca with Ubuntu 14.04 won't suspend.  when the lid shuts the fan never cuts off.  i've checked my settings under power management and everything looks good.  when I manually click suspend, the screen goes dark for a second and then pops back up.<br>\nOriginally the computer's screen would stay black after the lid was closed, so i followed the directions here:  <a href=\"http://ubuntuforums.org/showthread.php?t=1978290\" rel=\"nofollow\">http://ubuntuforums.org/showthread.php?t=1978290</a> to fix that.  but now when i close the lid, fan continues, if the power cord is not installed, the battery will die.  if the cord is installed, the computer will be pretty hot because it isn't suspending.  </p>\n\n<p>also after making the changes suggested here:  <a href=\"http://askubuntu.com/questions/453372/suspend-is-not-working-after-updating-to-ubuntu-14-04-from-13-10\">suspend is not working after updating to Ubuntu 14.04 from 13.10</a>\nI now start the computer and i get the following error: \"could not apply stored configuration for monitors Error on line 1 char 1: Document must begin with an element (e.g. )\"</p>\n"},{"id":510741,"title":"Failed to suspend due to nouveau failure","body":"<p>There are many questions about failed suspension on ubuntu (<a href=\"http://askubuntu.com/questions/196893/how-do-i-prevent-immediate-wake-up-from-suspend-version-ii\">[1]</a><a href=\"http://askubuntu.com/questions/144932/why-does-my-laptop-resume-immediately-after-suspend\">[2]</a>), but each \nof them seem so specific that I'm posting mine.\nIn my case, sometimes (very randomly) my XP15 does not suspend.\nI'm running Ubuntu 14.04 updated to current date.\nMy syslog states:</p>\n\n<pre>\nAug 12 23:20:24 ged kernel: [32564.982253] Suspending console(s) (use no_console_suspend to debug)\nAug 12 23:20:24 ged kernel: [32564.982580] sd 1:0:0:0: [sdb] Synchronizing SCSI cache\nAug 12 23:20:24 ged kernel: [32564.982615] sd 0:0:0:0: [sda] Synchronizing SCSI cache\nAug 12 23:20:24 ged kernel: [32564.984880] sd 0:0:0:0: [sda] Stopping disk\nAug 12 23:20:24 ged kernel: [32564.985451] sd 1:0:0:0: [sdb] Stopping disk\nAug 12 23:20:24 ged kernel: [32565.032197] nouveau  [     DRM] suspending display...\nAug 12 23:20:24 ged kernel: [32565.032205] nouveau  [     DRM] unpinning framebuffer(s)...\nAug 12 23:20:24 ged kernel: [32565.032208] nouveau  [     DRM] evicting buffers...\nAug 12 23:20:24 ged kernel: [32565.032210] nouveau  [     DRM] waiting for kernel channels to go idle...\nAug 12 23:20:24 ged kernel: [32565.032250] nouveau  [     DRM] suspending client object trees...\nAug 12 23:20:24 ged kernel: [32565.033027] nouveau  [     DRM] suspending kernel object tree...\nAug 12 23:20:24 ged kernel: [32567.035761] nouveau E[   PDISP][0000:01:00.0][0xc000857c][ffff88042386bb80] fini timeout, 0xc2061008\nAug 12 23:20:24 ged kernel: [32567.035764] nouveau E[   PDISP][0000:01:00.0][0xc000857c][ffff88042386bb80] failed suspend, -16\nAug 12 23:20:24 ged kernel: [32567.035766] nouveau E[     DRM] 0xd1500000:0xd15c7c00 suspend failed with -16\nAug 12 23:20:24 ged kernel: [32567.035804] nouveau E[     DRM] 0xdddddddd:0xd1500000 suspend failed with -16\nAug 12 23:20:24 ged kernel: [32567.035922] nouveau E[     DRM] 0xffffffff:0xdddddddd suspend failed with -16\nAug 12 23:20:24 ged kernel: [32567.036633] nouveau E[     DRM] 0xffffffff:0xffffffff suspend failed with -16\nAug 12 23:20:24 ged kernel: [32567.036757] nouveau  [     DRM] resuming display...\nAug 12 23:20:24 ged kernel: [32567.036785] nouveau E[     DRM] bo ffff880036980000 pinned elsewhere: 0x00000002 vs 0x00000004\nAug 12 23:20:24 ged kernel: [32567.036788] [drm:drm_helper_resume_force_mode] *ERROR* failed to set mode on crtc ffff88041f020000\nAug 12 23:20:24 ged kernel: [32567.044935] pci_pm_suspend(): nouveau_pmops_suspend+0x0/0xb0 [nouveau] returns -16\nAug 12 23:20:24 ged kernel: [32567.044939] dpm_run_callback(): pci_pm_suspend+0x0/0x150 returns -16\nAug 12 23:20:24 ged kernel: [32567.044945] PM: Device 0000:01:00.0 failed to suspend async: error -16\nAug 12 23:20:24 ged kernel: [32567.045007] PM: Some devices failed to suspend, or early wake event detected\n</pre>\n\n<p>As it seems the problem is on the video card.\nThe result from <code>lspci | grep VGA</code> returns.</p>\n\n<pre><code>00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)\n01:00.0 VGA compatible controller: NVIDIA Corporation GF108M [GeForce GT 540M] (rev a1)\n</code></pre>\n\n<p>Which is strange, is that I'm not using the NVIDIA card (since both nouveau and official drivers are not stable in my machine).</p>\n\n<p>Any hints for a next step?</p>\n"},{"id":493734,"title":"Sleep mode not working on ubuntu 14.04","body":"<p>My Asus doesn't go to sleep mode if I ask it to on Ubuntu 14.04. Sometimes it works after some updates, then it stops working after another update...</p>\n\n<p>This is the message I get on a black screen for 3 seconds when I try to put it on sleep :\n\"Some devices failed to suspend, or early wake event detected\"</p>\n"},{"id":458503,"title":"Audio unmutes when coming out of suspend in Ubuntu 14.04?","body":"<p>Since upgrading to Ubuntu 14.04, whenever I wake my laptop out of suspend, its previous volume settings are forgotten and the volume is unmuted and set to 100%. Obviously, this is annoying if I open my laptop in a public space. This also occurs whenever I turn my laptop on (i.e. it doesn't remember that I turned it off with its volume controls muted). What should I modify so that my laptop remembers its pre-suspend volume settings?</p>\n\n<p>Edit: I'm running Ubuntu 14.04 Trusty Tahr on a Dell Inspiron N5110.</p>\n"},{"id":39303,"title":"Resume from Suspend fails on Samsung X360 laptop","body":"<p>I just upgraded to Natty and after the upgrade on the laptop suspend is no longer working as before.</p>\n\n<p>Before 11.04 I closed the lid, the laptop powered down. When I opened the lid and pressed the power button for a short time it would power up again and I could log in and continue working. </p>\n\n<p>Now there are 2 problems:</p>\n\n<p>a) no power down on lid closed (I am using the 'suspend' from the menu - no idea what this is called in unity -> upper right corner in the panel). <strong>Update:</strong> it does power down I found out it just takes a very long time to trigger (30 seconds or longer)</p>\n\n<p>b) much worse: no power up after suspend. I need to turn off the laptop completely and reboot. I checked and all tools that I know of are installed: acpi-support, laptop-mode-tools, pm-tools </p>\n\n<p>I have no idea how this could be fixed.</p>\n\n<p>The laptop is a Samsung X360 if that helps any. I am not using any proprietary graphics drivers. (I think the graphics card is intel based)</p>\n\n<p>Update: I found the following line in several logfiles in <code>/var/log</code></p>\n\n<pre><code>May  8 09:34:40 MyLaptop kernel: [    1.095713] i2c-core: driver [adp5520] using legacy suspend method\n</code></pre>\n\n<p>Update 2: this is how suspend looked in /var/log/messages before natty:</p>\n\n<pre>\n[11905.244790] PM: late suspend of devices complete after 32.636 msecs\n[12832.968226] Suspending console(s) (use no_console_suspend to debug)\n[12833.232083] PM: suspend of drv:HDA Intel dev:0000:00:1b.0 complete after 119.668 msecs\n[12833.268081] PM: suspend of drv:sky2 dev:0000:06:00.0 complete after 159.422 msecs\n[12833.268122] PM: suspend of drv:pcieport dev:0000:00:1c.3 complete after 155.763 msecs\n[12833.340925] PM: suspend of drv:sd dev:0:0:0:0 complete after 355.982 msecs\n[12833.340964] PM: suspend of drv:scsi dev:target0:0:0 complete after 355.898 msecs\n[12833.340986] PM: suspend of drv:scsi dev:host0 complete after 355.666 msecs\n[12833.420083] PM: suspend of drv:ahci dev:0000:00:1f.2 complete after 308.204 msecs\n[12833.420116] PM: suspend of drv: dev:pci0000:00 complete after 307.034 msecs\n[12833.420146] PM: suspend of devices complete after 451.541 msecs\n[12833.420150] PM: suspend devices took 0.452 seconds\n[12833.452789] PM: late suspend of devices complete after 32.627 msecs\n</pre>\n\n<p>Current kernel running (output from uname -A)</p>\n\n<p>2.6.38-8-generic-pae #42-Ubuntu </p>\n"}]}]
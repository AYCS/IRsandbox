[{"id":715235,"title":"Ubuntu 12.04 LTS on mac mini 2009 installs but will not boot","body":"<p>So I got this old mini that Im trying to install on a mac mini, it appears to install fine but I get the error message </p>\n\n<p>error: unknown filesystem\nEntering rescue mode...\ngrub rescue></p>\n\n<p>When i type ls\n(hd0) (hd0,gpt3) (hd0,gpt2) (hd0,gpt1)</p>\n\n<p>It's been a bit of nightmare even to get even this far would appreciate any help.</p>\n","related_questions":[{"id":711175,"title":"Cannot boot my mac partition","body":"<p>I have installed Ubuntu 15.10 on my Mac Mini. It works fine and using my Mac bluetooth keyboard I used to be able to enter the Mac boot menu by holding down the Mac Command key (so I could still select to boot OSX).</p>\n\n<p>For some reason that no longer works and I have checked the batteries.</p>\n\n<p>So instead I am now trying to add my Mac Partition to grub, I have found this guide:\n<a href=\"https://www.maketecheasier.com/create-a-mac-entry-in-grub2/\" rel=\"nofollow\">https://www.maketecheasier.com/create-a-mac-entry-in-grub2/</a></p>\n\n<p>Running <code>sudo fdisk -l</code> I get:</p>\n\n<pre><code>Device         Start       End   Sectors   Size Type\n/dev/sda1         40    409639    409600   200M EFI System\n/dev/sda2     409640 488591383 488181744 232.8G Apple HFS/HFS+\n/dev/sda3  488591384 489860919   1269536 619.9M Apple boot\n/dev/sda4  489861120 491814911   1953792   954M Linux swap\n/dev/sda5  491814912 976771071 484956160 231.3G Linux filesystem\n</code></pre>\n\n<p>Based on the above guide I have then added the following to: <strong>/etc/grub.d/40_custom</strong>:</p>\n\n<pre><code>menuentry \"MacOS X Snow Leopard\" {\n        insmod hfsplus\n        set root=(hd0,2) #change X to the Mac SL partition\n        multiboot /boot\n}\n</code></pre>\n\n<p>Followed by:</p>\n\n<pre><code>sudo update-grub\n</code></pre>\n\n<p>But after I reboot it just goes directly to Ubuntu, it seems the above has no effect.</p>\n\n<p>Below is the content/end of <strong>/boot/grub/grub.cfg</strong></p>\n\n<pre><code>### BEGIN /etc/grub.d/40_custom ###\n# This file provides an easy way to add custom menu entries.  Simply type the\n# menu entries you want to add after this comment.  Be careful not to change\n# the 'exec tail' line above.\nmenuentry \"MacOS X Snow Leopard\" {\n        insmod hfsplus\n        set root=(hd0,2) #change X to the Mac SL partition\n        multiboot /boot\n}\n### END /etc/grub.d/40_custom ###\n\n### BEGIN /etc/grub.d/41_custom ###\nif [ -f  ${config_directory}/custom.cfg ]; then\n  source ${config_directory}/custom.cfg\nelif [ -z \"${config_directory}\" -a -f  $prefix/custom.cfg ]; then\n  source $prefix/custom.cfg;\nfi\n### END /etc/grub.d/41_custom ###\n</code></pre>\n\n<p>And the content of <strong>/etc/default/grub</strong>:</p>\n\n<pre><code># If you change this file, run 'update-grub' afterwards to update\n# /boot/grub/grub.cfg.\n# For full documentation of the options in this file, see:\n#   info -f grub -n 'Simple configuration'\n\nGRUB_DEFAULT=0\nGRUB_HIDDEN_TIMEOUT=0\nGRUB_HIDDEN_TIMEOUT_QUIET=true\nGRUB_TIMEOUT=10\nGRUB_DISTRIBUTOR=`lsb_release -i -s 2&gt; /dev/null || echo Debian`\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\nGRUB_CMDLINE_LINUX=\"\"\n\n# Uncomment to enable BadRAM filtering, modify to suit your needs\n# This works with Linux (no patch required) and with any kernel that obtains\n# the memory map information from GRUB (GNU Mach, kernel of FreeBSD ...)\n#GRUB_BADRAM=\"0x01234567,0xfefefefe,0x89abcdef,0xefefefef\"\n\n# Uncomment to disable graphical terminal (grub-pc only)\n#GRUB_TERMINAL=console\n\n# The resolution used on graphical terminal\n# note that you can use only modes which your graphic card supports via VBE\n# you can see them in real GRUB with the command `vbeinfo'\n#GRUB_GFXMODE=640x480\n\n# Uncomment if you don't want GRUB to pass \"root=UUID=xxx\" parameter to Linux\n#GRUB_DISABLE_LINUX_UUID=true\n\n# Uncomment to disable generation of recovery mode menu entries\n#GRUB_DISABLE_RECOVERY=\"true\"\n\n# Uncomment to get a beep at grub start\n#GRUB_INIT_TUNE=\"480 440 1\"\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"id":451772,"title":"Unknown filesystem, grub rescue","body":"<p>When I try to boot I get this message:\nerror: unknown filesystem.\nEntering rescue mode...\ngrub rescue> </p>\n\n<p>results of:\ngrub rescue> ls</p>\n\n<p>Is as follows:</p>\n\n<p>(hd0) (hd0,msdos1)</p>\n"},{"id":665404,"title":"How would I set up dual-booting on a 2009 Mac Mini with Ubuntu as primary partition and OSX as secondary?","body":"<p>I have an old 2009 Mac Mini that I am going to switch over Linux (Ubuntu Mate to be more accurate). However I would like to have the ability to boot to OSX still having Ubuntu as the main partition (automatically booting into Ubuntu). I have found guides online about setting up a dual boot with OSX as the primary partition but I was looking for Ubuntu to be the main OS. Does anyone know how I would set this up or is there a guide online that I have overlooked?</p>\n\n<p>It's not a big problem as I don't mind having it single boot but I would like the option if it is possible. Cheers!</p>\n"},{"id":651452,"title":"Can&#39;t get Ubuntu to boot from EFI in Mac","body":"<p>I am trying to get an old ca. 2006 macbook (<a href=\"https://support.apple.com/kb/SP23?locale=en_US\" rel=\"nofollow\">technical specs here)</a> to boot Ubuntu 14.04.2 LTS.  I'm on day two of this now, having wiped the hard drive numerous times and reinstalled from the disk around 8 times now.  I'm still fairly new to the Linux world.</p>\n\n<p>I have been following <a href=\"http://heeris.id.au/2014/ubuntu-plus-mac-pure-efi-boot/\" rel=\"nofollow\">the instructions here</a> to get things going, and after much struggling, I got all the way to running <code>grub-install</code> and <code>htfs-bless</code>.  This is supposed to enable the boot-up process on my mac to recognize Ubuntu during startup (so that I don't have to manually boot from GRUB, which is what I have to do now).</p>\n\n<p>I run the following command (as root)</p>\n\n<pre><code>grub-install --target x86_64-efi --boot-directory=/boot --efi-directory=/boot/efi --bootloader-id=\"$(lsb_release -ds)\"\n</code></pre>\n\n<p>It returns the following:</p>\n\n<pre><code>Installing for x86_64-efi platform.\nFatal: Couldn't open either sysfs or procfs directories for accessing EFI variables.\nTry: 'modprobe efivars' as root.\nFatal: Couldn't open either sysfs or procfs directories for accessing EFI variables.\nTry: 'modprobe efivars' as root.\nInstallation finished.  No error reported.\n</code></pre>\n\n<p>So it reports a fatal error (twice), but then finishes the installation with no errors.  No idea.</p>\n\n<p>It suggests that I try <code>modprobe efivars</code> from root, which I of course do.  It returns nothing (which it isn't supposed to), but then running again produces the exact same error.</p>\n\n<p>I go ahead and run</p>\n\n<pre><code>hfs-bless \"/boot/efi/EFI/$(lsb_release -ds)/System/Library/CoreServices/boot.efi\"\n</code></pre>\n\n<p>which completes without comment.  The fact that it completes suggests that the <code>grub-install</code> created the proper file system under my distro's folder.  So this is a good sign.</p>\n\n<p>The next step in my instructions tell me to reboot, to make sure I boot straight to Ubuntu.  This doesn't happen.  It also says that I should see Ubuntu show up under the mac bootloader screen, and I do not.</p>\n\n<p>After re-booting manually from GRUB, I get back in and try to continue with the instructions, and here I hit the wall.  I type</p>\n\n<pre><code>efibootmgr\n</code></pre>\n\n<p>and am met with the same error </p>\n\n<pre><code>Fatal: Couldn't open either sysfs or procfs directories for accessing EFI variables.\nTry 'modprobe efivars' as root.\n</code></pre>\n\n<p>So I try <code>modprobe efivars</code> as root, and when I run again, I get the same error again.</p>\n\n<p>Some searching suggests the problem is that I am booting in BIOS and not in EFI.  The obviously solution is to boot in EFI instead, but I have no idea how to do that.  There is no BIOS partition on my machine; there is only an EFIBoot partition.  There is no longer a Mac OSX system on my machine; there is only Ubuntu 14.04.2 LTS.</p>\n\n<p>Sometimes I'm able to get Ubuntu to boot up, other times I have to do it manually.  I can't get an Ubuntu disk image to show up in the Mac bootloader, and I can't access EFI variables.</p>\n\n<p>If there is some file I could manually edit from the command line that would get me to boot in EFI, that could help me solve this issue.</p>\n\n<p>Any help on this would be greatly appreciated.</p>\n"},{"id":588561,"title":"Is there a way to boot into grub on a mac rather then OSX?","body":"<p>I have successfully installed Ubuntu 14.04.2 on a Mac Mini(late 2014).Now I can get to the new installation by  pressing<kbd>Alt</kbd> > EFI BOOT to get to <strong>GRUB</strong> and selecting Ubuntu to boot the OS. My question is How can I boot into <strong>GRUB</strong> without pressing <kbd>Alt</kbd> ><strong>GRUB</strong>. I would like <strong>GRUB</strong> to come up before anything else. </p>\n\n<p>I know some tools like <strong>reFIND</strong> to dual boot with OS X. but, I don't want to install <strong>reFIND</strong> because of various issues like when I install it (My screen goes to black whenever I preform a full shutdown, reFIND still appears but, due to the monitor being off for some reason I cannot see my boot menu. The only way I am able to get my monitor working is to bypass reFIND(which I removed) by reseting the <strong>NVRAM</strong>(Windows Key + <kbd>Alt</kbd>+<kbd> R</kbd> +<kbd>P</kbd>).</p>\n\n<p><strong>What I want:</strong></p>\n\n<p>I would like <strong>GRUB</strong> to show up like <strong>reFIND</strong>  show up on boot without being triggered by startup manager (or other). I have moved <code>/boot/efi/EFI/Ubuntu/grubx64.efi</code> to <code>/boot/efi/EFI/boot/bootx64.efi</code>. I  have tried <strong>refind</strong> but, encountered problems.Note: Both <strong>OS X</strong> and <strong>Ubuntu</strong> installed in EFI mode(and that's the way I'd like to keep it).</p>\n\n<p>So is this even possible?</p>\n"},{"id":564845,"title":"Installed Ubuntu 14.10 on MacBook Pro (5,5) without rEFIt or rEFInd, hangs on purple screen","body":"<p>I recently inherited a mid 2009 13\" MacBook Pro.  I wanted to install Ubuntu 14.10 on the machine rather than OS X.  I've previously had success with Ubuntu 13.10 on a 2006 MacBook by booting to live USB and installing over the current OS, so I tried this method again with admittedly limited research.</p>\n\n<p>While installing 64-bit Ubuntu 14.10 on the MacBook Pro 2009, everything seemed to go fine.  However, when I rebooted the machine in an attempt to launch Ubuntu for the first time, I was greeted by GRUB, selected Ubuntu, and then dropped to a purple screen.  Nothing changed after 30 minutes -- still a purple screen.  Repeated attempts to boot into Ubuntu 14.10 produce the same results.  </p>\n\n<p>In hindsight, it looks like I probably should have installed rEFIt or rEFInd on the machine prior to installing Ubuntu, as the 2009 MacBook uses EFI rather than BIOS.  Is this required even when you're not setting up a dual boot?</p>\n\n<p>Thus far, I have tried two routes to solve the issue.  First, I tried to boot back to Ubuntu live USB, but to no avail.  The GRUB menu appears as usual, but when I select either \"Try Ubuntu\" or \"Install Ubuntu\", the screen goes black and hangs there.</p>\n\n<p>My second attempt was to create a bootable USB of OS X Yosemite.  This too is getting hung up.  When I select the option to load from USB, the Apple symbol appears on the screen with a progress bar.  The progress bar has been hung at ~25% for the last 45 minutes or so.  I have yet to have the option of installing the OS.</p>\n\n<p>What is the best way to get my machine running again?  I would be happy to have either OS X or Ubuntu installed at this point.</p>\n\n<p><strong>EDIT - UPDATE:</strong></p>\n\n<p>I followed the <a href=\"http://askubuntu.com/questions/470492/ubuntu-14-04-black-screen-when-installing\">advice</a> of infostacker on AskUbuntu. I plugged in my live USB (Ubuntu 14.10, created on Windows 7 with Unetbootin), hit 'e' on the GRUB menu while the 'Try Ubuntu without installing' text was highlighted, and added to the 'linux' line of the boot command: 'quiet splash acpi=off nolapic nomodeset'. This got me the purple screen that you typically see upon booting Ubuntu with the moving dots (the splash screen?). Once it got past the moving dots stage where you'd expect the Unity desktop to pop up, I was greeted with some text. The final line of text where the system appears to get hung reads:</p>\n\n<p><code>(initramfs) Unable to find a medium containing a live file system</code></p>\n\n<p>Here's a <a href=\"https://lh4.googleusercontent.com/-Me6FQu7ZwO0/VJsKpYXQVmI/AAAAAAAAbuQ/uSaRvfPwJhA/w863-h647-no/14%2B-%2B1\" rel=\"nofollow\">picture</a> of the entire screen.  I can't embed because I'm a noob.</p>\n\n<p>When I try to run Ubuntu off of the hard drive (i.e. without the live USB) using the same command, I get different results. I get a purple screen that reads like this:</p>\n\n<pre><code>Booting a command list\n\nLoading Linux 3.16.0-28-generic ...\nLoading initial ramdisk ...\n</code></pre>\n\n<p>It hangs on the last step to infinity and beyond.</p>\n\n<p><strong>EDIT - UPDATE 2:</strong>\nI am able to boot into Ubuntu if I edit the GRUB script. When I append <code>quiet splash</code> with <code>nolapic</code> I am able to boot without issue.</p>\n\n<p>My first move upon booting was to install the proprietary NVIDIA 331 driver, which is the tested driver and claims to be suggested for my system. I then removed the open source driver using <code>sudo apt-get --purge remove xserver-xorg-video-nouveau</code>. </p>\n\n<p>Upon normal reboot, I get stuck at the purple screen again. It seems the only way to boot the system is with the <code>nolapic</code> parameter. What could be the underlying cause of this?</p>\n"},{"id":444871,"title":"Can I install Ubuntu on a Mac? (NO Dual Boot just Ubuntu)","body":"<p>I have googled for quite a while now and haven't found the answer. My question is, can I install Ubuntu on a mac and leaving out the Mac OS. I just want it to boot ubuntu and nothing else. Maybe a strange question but I got that Mac Book Pro (2012) for cheap and I just cannot get into Mac OS and I'd rather just have Ubuntu on it using the whole disk.</p>\n\n<p>I have read of problems with Mac booting into GRUB without rEFIt or similar.\nIs it possible?</p>\n\n<p>Regards\nanni</p>\n"},{"id":384682,"title":"Install full Ubuntu 12.04 on USB and boot on mac","body":"<p>I will be very specific because I have tried asking this question multiple times and people get confused. I would like to install full Ubuntu 12.04 onto a flashdrive and be able to boot from the flashdrive on a Mac.</p>\n\n<p>I am able to make a USB install disk and boot from my mac with no problem. I am able to make a full install of ubuntu on a USB drive and boot from a non-mac computer with no problem.</p>\n\n<p>I would like to put a full install of ubuntu on a USB drive (not just the install disk with try ubuntu, the full thing) and be able to boot it on a mac.</p>\n\n<p>I have tried this by running the installation and creating an ext4 partition at / and a swap partition. It boots up great on a windows computer but not on my mac. I know mac can book ubuntu on usb because it boots the usb install disk fine and I can use ubuntu in the try ubuntu option.</p>\n\n<p>One idea I had was to take my bootable ubuntu usb drive (which is the try ubuntu install one), since I know it boots and somehow turn it into a full ubuntu install.</p>\n\n<p>Any ideas would be greatly appreciated.</p>\n"},{"id":209672,"title":"Installing Ubuntu 12.10 on Mac Mini (End 2009)","body":"<p>I am trying to installing Ubuntu 12.10 on my Mac Mini (End 2009). This sounds like a often asked question and I all ready read lots of stuff about it, but now I am confused.</p>\n\n<p>While some people say, there are heavy problems by installing Ubuntu on a Mac Mini, such as components (like Sound card, graphic card, …) don't work very well, others say, that it should work perfectly fine.</p>\n\n<p>I figured out that installing Ubuntu on a Mac isn't as easy (can't just download the .iso and use unetboot, …) as it is on a PC.</p>\n\n<p>So, is it possible to install Ubuntu 12.10 on a Mac Mini 2009 (end), so everything works well?</p>\n"},{"id":267760,"title":"grub error: out of disk when booting 12.04 server with hardware RAID5 and gpt","body":"<p>I'm trying to do a new install of 12.04 server on one node of a Dell PowerEdge C6145 with the following spec:</p>\n\n<pre><code>48 cores\n512GB RAM\nLSI MegaRAID 9265 controller\n4x2TB disks, configured with RAID5 giving 6TB in total\nAmerican Megatrends v02.69 BIOS\n</code></pre>\n\n<p>Booting from a USB with Ubuntu Server 12.04.2 LTS \"Precise Pangolin\" - Release amd64 (20130214)\nExpert Mode is turned on (using F6) and doing a clean install of ubuntu server</p>\n\n<p>Its a standard installation except for a manual parition of the disks.  I created a new empty gpt partition table on the disk, and added three partitions:</p>\n\n<pre><code>#1 10MB, beginning of disk, /boot, Reserved BIOS boot area\n#2 512GB, end of dist, /swap, swap area\n#3 max, /, Mount point: /, Mount options: defaults, label: data\n\nSummary:\nSCSI6 (2,0,0) (sda) - 6.0 TB LSI MR9265-8i\n     1.0 MB   FREE SPACE\n#1   9.4 MB f biosgrub    /boot\n#3   5.5 TB f ext4        /        /\n#2 512.0 GB f swap        /swap    swap\n     1.0 MB   FREE SPACE\n</code></pre>\n\n<p>I selected linux-generic-lts-quantal as the kernel to install, and \"generic: include all available drivers\" when asked to select drivers to include in initrd.</p>\n\n<p>For additional software:</p>\n\n<pre><code>Restricted software: No\nSoftware from universe component: Yes\nSoftare from multiverse component: No\nBackported software: Yes\n</code></pre>\n\n<p>When installing the GRUB boot loader, selected Yes to install it to the master boot record.  No errors produced and installer skipped over the next item in the main menu \"Continue without boot loader\"</p>\n\n<p>At \"Finish the installation\", standard message saying Installation complete and going to reboot</p>\n\n<p>On reboot, get:</p>\n\n<pre><code>error: out of disk.\ngrub rescue&gt;\n</code></pre>\n\n<p>typing ls</p>\n\n<pre><code>(hd0) (hd0, gpt3) (hd0,gpt2) (hd0,gpt1)\n</code></pre>\n\n<p>typing ls (hd0,gpt3)</p>\n\n<pre><code>error: bad filename.\n</code></pre>\n\n<p>typing ls (hd0,gpt2)</p>\n\n<pre><code>error: unknown filesystem.\n</code></pre>\n\n<p>typing ls (hd0,gpt1)</p>\n\n<pre><code>error: unknown filesystem.\n</code></pre>\n\n<p>Rebooting from ubuntu USB and selecting Rescue a broken system:\nwent through various steps until Enter rescue mode reached</p>\n\n<p>/dev/sda3 selected as device to use as root file system\nSelected Execute a shell in /dev/sda3</p>\n\n<pre><code>$df -l\nFilesystem   1K-blocks    Used   Available Use%  Mounted on\n/dev/sda3   5316685816  901368  5047839028   1%  /\ndevtmpfs     264147596       0   264147596   0%  /dev\n/dev/sdb1   5316685816  901368  5047839028   1%  /media/cdrom\ndevpts       264147596       0   264147596   0%  /dev/pts\nnone          52837212     212    52837000   1%  /run\n</code></pre>\n\n<p>ls /boot shows initrd.img-3.5.0-23-generic and vmlinuz-3.5.0-23-generic and populated grub directory, including grub.cfg.  Also /etc/default/grub looks reasonable</p>\n\n<p>Back in the installer, selected \"Reinstall GRUB boot loader\"\nSelected /dev/sda and no error or message produced</p>\n\n<p>Rebooting the system again, and I still get the same \"error: out of disk\" grub error</p>\n\n<p>Booting from the USB again and selecting \"Rescue a broken system\".  Went through the various steps until \"Enter rescue mode\" reached.  Selected \"Execute a shell in /dev/sda3\"</p>\n\n<p>Ran 'grub-install /dev/sda' and got the message:</p>\n\n<pre><code>Installation finished. No error reported\n</code></pre>\n\n<p>Ran 'update-grub' and got:</p>\n\n<pre><code>Generating grub.cfg...\nFound linux image: /boot/vmlinuz-3.5.0-23-generic\nFound initrd image: /boot/initrd.img-3.5.0-23-generic\nFound memtest86+ image: /boot/memtest86+.bin\ndone\n</code></pre>\n\n<p>Rebooting still gives the same  \"error: out of disk\" grub error.</p>\n\n<p>Apologies for the length of this.  Any help would be very much appreciated</p>\n\n<p>kieran</p>\n\n<p>Some additional details from the grub rescue> prompt.  Typing set gives:</p>\n\n<pre><code>prefix=(hd0,gpt3)/boot/grub\nroot=hd0,gpt3\n</code></pre>\n\n<p>Typing ls / or ls (hd0,gpt3)/ gives:</p>\n\n<pre><code>./ ../ lost+found/ etc/ media/ initrd.img var/ lib/ usr/ proc/ dev/ run/ root/ tmp/ home/ mnt/ sbin/ bin/ lib64/ selinux/ sys/ srv/ opt/ umlinuz\n</code></pre>\n\n<p><strong>There is no /boot directory.</strong> Typing ls (hd0,gpt3)/root/ gives:</p>\n\n<pre><code>./ ../ .profile .bashrc\n</code></pre>\n\n<p>But typing ls (hd0,gpt3)/etc/ gives</p>\n\n<pre><code>error: out of disk.\n</code></pre>\n\n<p>There are similar mixed results with other directories.</p>\n"}]}]
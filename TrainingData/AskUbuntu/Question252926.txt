[{"id":252926,"title":"Why doesn&#39;t deleting files increase available space?","body":"<p>Recently I got a message about \"0 bytes free\" on a certain partition.</p>\n\n<p>So I looked and, sure enough:</p>\n\n<pre><code>$ df\nFilesystem     1K-blocks      Used Available Use% Mounted on\n/dev/sda1       65190604  10920296  50959160  18% /\nudev              966544         4    966540   1% /dev\ntmpfs             389532       744    388788   1% /run\nnone                5120         0      5120   0% /run/lock\nnone              973828       152    973676   1% /run/shm\n/dev/sda5      397327316 391010276         0 100% /media/8b5e40d0-95b3-4e60-831c-e9b9aeadbfa4\n</code></pre>\n\n<p>there are 0 bytes available on that partition.</p>\n\n<p>So I deleted a bunch of files I didn't need on this machine, and emptied the trash.\nI expected the \"Used\" to get smaller and the \"Available\" to get larger by the same amount.</p>\n\n<p>But what actually happened was</p>\n\n<pre><code>$ df\nFilesystem     1K-blocks      Used Available Use% Mounted on\n/dev/sda1       65190604  10921184  50958272  18% /\nudev              966544         4    966540   1% /dev\ntmpfs             389532       744    388788   1% /run\nnone                5120         0      5120   0% /run/lock\nnone              973828       152    973676   1% /run/shm\n/dev/sda5      397327316 390986836         0 100% /media/8b5e40d0-95b3-4e60-831c-e9b9aeadbfa4\n</code></pre>\n\n<p>the \"Used\" actually did get smaller, but the \"Available\" is still zero.</p>\n\n<p>I rebooted the machine, and I still see 0 in the \"Available\" column.</p>\n\n<p>Why is \"Available\" always zero, even when I delete a bunch of files so \"Used\" gets smaller?</p>\n\n<p>Why doesn't deleting files increase available space?</p>\n\n<p>I am running Ubuntu 12.04 LTS.</p>\n\n<pre><code>$ df -hi\nFilesystem     Inodes IUsed IFree IUse% Mounted on\n/dev/sda1        4.0M  512K  3.5M   13% /\nudev             205K   486  204K    1% /dev\ntmpfs            208K   390  208K    1% /run\nnone             208K     3  208K    1% /run/lock\nnone             208K     7  208K    1% /run/shm\n/dev/sda5         25M  975K   24M    4% /media/8b5e40d0-95b3-4e60-831c-e9b9aeadbfa4\n</code></pre>\n","related_questions":[{"id":712190,"title":"Files in &quot;/usr/lib/debug/usr/lib/&quot; taking a lot of space, how to free it?","body":"<p>Contents of /usr/lib/debug/usr/lib/x86_64-linux-gnu:</p>\n\n<p><code>$ du -sh * |grep G</code></p>\n\n<pre><code>1,6G    libwebkit2gtk-3.0.so.25.10.11\n1,4G    libwebkitgtk-3.0.so.0.22.14\n1,3G    webkit2gtk-3.0\n</code></pre>\n\n<p>my / partition is only 15gb and almost full (df -h):</p>\n\n<pre><code>Filesystem      Size  Used Avail Use% Mounted on\n/dev/sdb5        19G   15G  3,2G  82% /\n</code></pre>\n\n<p>I found that the last file (webkit2gtk) belongs to the package libwebkitgtk-3.0-0-dbg, still not sure what the others are. How can I tell which package uses these files and how can I know if they are 'safe' to remove?</p>\n"},{"id":356902,"title":"Why doesn&#39;t this show the hidden files/folders?","body":"<p>I was looking through my system with <code>du -sch ./*</code> to find the big useless files I may have stockpiled with no reason, when I found this:</p>\n\n<pre><code>$ du -sch ./*\ndu: cannot read directory ‘./drbunsen/.gvfs’: Permission denied\ndu: cannot read directory ‘./drbunsen/.cache/dconf’: Permission denied\n18G ./drbunsen\n18G total\n\n$ cd drbunsen/\n$ du -sch ./*\n601M ./Desktop\n20K ./Documents\n598M ./Downloads\n4.0K ./flash\n4.0K ./Music\n8.0M ./Pictures\n4.0K ./Public\n4.0K ./Templates\n4.0K ./Ubuntu One\n8.0K ./Videos\n11G ./VirtualBox VMs\n6.9M ./workspace\n12G total\n</code></pre>\n\n<p>How do I make hidden files visible? <code>du -sch ./.*</code> gives the same result as <code>du -sch ./*</code>.</p>\n"},{"id":532763,"title":"Possible problems when 0 bytes remaining","body":"<p>over the past few months I have been getting that \"XYZ MB remaining, ... Examine/Ignore\" popup screen. Since this is an old ubuntu 10.04 on a small partition, it never troubled me much - after all, the amount it was complaining about was 586MB or such.</p>\n\n<p>But recently I noticed the number has been going down and today I just saw ~180MB and decided to take action. I have a few \"housekeeping / space freeing scripts\" that i run when I think something's suspicious and that has been keeping me good for now. Today I also ran Computer Janitor and BleachBit to help things out. </p>\n\n<p>Somewhere during bleachbit execution the 0 bytes dialog showed up. My question as a mostly windows user is - if my computer is really down to 0 bytes remaining (opening Desktop shows 668.5MB remaining in the statusbar) is it going to die like any windows machine would? I don't think it would, since it's been running fairly good with a pitifully small amount for a decent amount of time but I'd rather ask than being sorry.</p>\n\n<p>This old ubuntu is really keeping my \"skype/email\" laptop stable and secure. I would hate losing it or having to update/reinstall anything. I think I actually freed up some space but if it really is down to 0 bytes, I'm kinda scared of restarting the machine. I'm mostly skeptical because gtkdiskfree shows that my /dev/sda5 mounted at \"/\" has 1.25GB free, while Nautilus shows that it has 668.9MB free, being at the root of \"File System\"</p>\n\n<p>Please give some useful advice :)</p>\n\n<p>EDIT:<br>\nCurrently, \"df -h\" looks like this  </p>\n\n<pre><code>shark@DEVSHARK:~$ df -h  \nFilesystem            Size  Used Avail Use% Mounted on  \n/dev/sda5              12G   11G  1.1G  92% /  \nnone                  1.5G  344K  1.5G   1% /dev  \nnone                  1.5G  112K  1.5G   1% /dev/shm  \nnone                  1.5G  196K  1.5G   1% /var/run  \nnone                  1.5G     0  1.5G   0% /var/lock  \nnone                  1.5G     0  1.5G   0% /lib/init/rw  \n</code></pre>\n\n<p>This is my freespace.sh script I mentioned earlier  </p>\n\n<pre><code>#big files  \necho 'Identifying big files...'  \nsudo find / -name '*' -size +1G  \n\n#big folders  \necho 'Identifying big folders...'  \nsudo du -h --max-depth=1 / | grep '[0-9]G\\&gt;'  \n\n#lost trash  \necho 'Identifying lost trash...'  \nsudo find / -type d -name '*Trash*' | sudo xargs du -h | sort  \n\n#cleanup packages  \necho 'Cleaning up packages...'  \nsudo apt-get clean  \nsudo apt-get autoclean  \nsudo apt-get autoremove  \n\n#autotrash  \necho 'Autotrash-ing trash...'  \nsudo autotrash --min-free=1024  \n\necho 'I hope you got some free space back.'  \n</code></pre>\n"},{"id":433657,"title":"Increase space for Ubuntu Server on VirtualBox","body":"<p>I am running Ubuntu Server in VirtualBox (I am on a Mac) as a web development server. My Mysql server has stopped starting (and wont start) and I highly suspect it is because I have no disk space left so I am trying to increase the space available.</p>\n\n<p><a href=\"http://askubuntu.com/questions/88647/how-do-i-increase-the-hard-disk-size-of-the-virtual-machine\">I used the disk resizer utility</a> (<code>VBoxManage modifyhd Ubuntu\\ Server.vdi  --resize 80000</code>) to increase the disk size and then I booted into Ubuntu live and, using GParted, created a new 30gb partition. I made it an <code>ext2</code> filesystem. </p>\n\n<p>But when I boot I first see that this hasn't helped:</p>\n\n<p><img src=\"http://i.stack.imgur.com/weIvM.png\" alt=\"enter image description here\"></p>\n\n<p>And here is the output from <code>fdisk -l</code>:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Q57ZE.png\" alt=\"enter image description here\"></p>\n\n<p>I am stuck at this part - how do I now tell my machine that it can use the new space so I don't get disk space errors?</p>\n\n<p>UPDATE:</p>\n\n<p>I deleted the 30gb partition I made and tried to just resize but I am unable to use Gparted to resize the partition because Gparted says lvm2 is not supported(?):</p>\n\n<p><img src=\"http://i.stack.imgur.com/fYsIn.png\" alt=\"enter image description here\"></p>\n"},{"id":426880,"title":"why is / taking up 7 GB of space (running du)","body":"<p>So I am new to Ubuntu and Linux in general. I am trying to determing what is taking so much disk space so I run the following command.</p>\n\n<pre><code>du / -h -d 2 | sort -hr\n</code></pre>\n\n<p>which outputs the following</p>\n\n<pre><code>7.3G    /\n5.1G    /var\n3.8G    /var/www\n1.1G    /usr\n635M    /var/lib\n573M    /var/cache\n570M    /lib\n474M    /lib/modules\n354M    /usr/share\n308M    /usr/src\n262M    /usr/lib\n135M    /usr/bin\n118M    /var/log\n</code></pre>\n\n<p>What does the first line of output mean? why or how could <code>/</code> (nothing?) be taking up 7gb of space?</p>\n"},{"id":205915,"title":"Deleting a large file does not free up space","body":"<p>I deleted a large file (6 GB) located in my home directory but the free space is not increased. </p>\n\n<p>I have tried looking the file in trash folder by typing <code>cd ~/.local/share/Trash/files</code> but it's not listed there. I have tried running <code>sudo apt-get clean</code> but the problem isn't solved. I have also tried <code>sudo lsof +L1</code> to see if any other process are using it but it's not showing up there either.</p>\n\n<p>Anyone have any suggestions? </p>\n"},{"id":204326,"title":"Problem with hard drive space","body":"<p>I have a problem, my .private is using the 100% of my free hard drive space, i have no idea of how to solve this...</p>\n\n<p>Why is file is using every bit on my hd, how can i fix it?</p>\n\n<p>This is the menssage of space using on the terminal:</p>\n\n<pre>\nandrey@andrey-vaio:~$ df -k\nS.ficheros            1K-bloques     Usado Disponible Uso% Montado en\n/dev/sda3               53876204   7128424   44010988  14% /\nudev                     1848456         4    1848452   1% /dev\ntmpfs                     757452       920     756532   1% /run\nnone                        5120         0       5120   0% /run/lock\nnone                     1893624       396    1893228   1% /run/shm\n/dev/sda1              249920700 236820380     405008 100% /home\n/home/andrey/.Private  249920700 236820380     405008 100% /home/andrey\n/dev/sr0                 4482226   4482226          0 100% /media/disk\n</pre>\n\n<p>I have my home on a particion and the OS on other, the big problem is that now a couldn't save documents because i don't have free space.</p>\n"},{"id":163350,"title":"wrong disk usage report on /","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://askubuntu.com/questions/17467/what-is-taking-up-so-much-space-on-my-disk-beside-the-filesystem\">What is taking up so much space on my disk, beside the filesystem?</a>  </p>\n</blockquote>\n\n\n\n<p>I asked this on stackoverflow, but maybe here is a better place.</p>\n\n<p>On my ubuntu 11.10, /dev/sda3 (150GB) is mounted on / and /dev/sda1 (80GB) is mounted on /home. My entire disk has 250GB and the system is reporting I am running out of disk space. Here is the output of df -h:</p>\n\n<pre><code>Filesystem            Size  Used Avail Use% Mounted on\n/dev/sda3             149G  141G     0 100% /\nudev                  3.9G  4.0K  3.9G   1% /dev\ntmpfs                 1.6G  860K  1.6G   1% /run\nnone                  5.0M     0  5.0M   0% /run/lock\nnone                  3.9G  508K  3.9G   1% /run/shm\n/dev/sda1              74G   15G   56G  21% /home\n</code></pre>\n\n<p>Ubuntu disk usage analyzer report the same thing. But this is weird because I believe I never used that much space on /. I also check every individual directory under / ( exclude /home ), and they don't use that much space:</p>\n\n<pre><code>8.8M    bin\n4.0K    dev\n0   initrd.img\n0   initrd.img.old\n828M    lib\n15M lib32\n4.0K    lib64\n4.0K    media\n0   proc\n9.2M    sbin\n0   sys\n1.1G    var\n108M    boot\n18M etc\n4.0K    mnt\n40K root\n4.0K    selinux\n72K tmp\n0   vmlinuz\n0   vmlinuz.old\n16K lost+found\n133M    opt\n1004K   run\n4.0K    srv\n5.9G    usr      \n</code></pre>\n\n<p>Any one could give me some idea what is using up the space? Thanks in advance. </p>\n\n<p>one thing to add is that I turned the ufw log to full, then I noticed some extreme large log files. But I deleted the log files and turned the ufw log to low again. not sure if that's the problem.</p>\n"},{"id":156113,"title":"Why does 12.04 upgrade abort with out of space error when  I have lots of it?","body":"<p>When upgrading Ubuntu from 11.10 to 12.04 I discovered an unexpected problem. The upgrade was stopped because there wasn't enough free space for the installation. I managed to free some space and do the upgrade but now a prompt appears after logging in saying I'm out of space. This prompt asks me if I want to examine the problem. The \"Disk Usage Analyser\" is opened. In the top it says:</p>\n\n<p>Total filesystem capacity: 47.0 GB (used: 13.5 GB available: 33.4 GB)</p>\n\n<p>Folder  --    Usage  --  Size </p>\n\n<ul>\n<li>/  --   100% -- 12.5 GB</li>\n<li><ul>\n<li>usr -- 44.8 % -- 5.6 GB</li>\n</ul></li>\n<li><ul>\n<li>home -- 30.3 % -- 3.8 GB</li>\n</ul></li>\n<li><ul>\n<li>lib -- 13.0 % -- 1.6 GB</li>\n</ul></li>\n<li><ul>\n<li>var -- 9.1 % -- 1.1 GB</li>\n</ul></li>\n<li><ul>\n<li>boot 2.5 % 309.5 GB</li>\n</ul></li>\n<li><ul>\n<li>and a lot of small contributors like: etc, opt, sbin, bin etc.</li>\n</ul></li>\n</ul>\n\n<p>I do not really understand this problem since the analyser in the top says that I have 33.4 GB left in this file system. What can I do to make Ubuntu use the remaining space?</p>\n\n<p>Running \n<code>df -i</code> \nin the terminal gives:</p>\n\n<pre>\nFilesystem      Inodes  IUsed   IFree IUse% Mounted on\n/dev/sda7       610800 576874   33926   95% /\nudev            213451    563  212888    1% /dev\ntmpfs           218524    486  218038    1% /run\nnone            218524      3  218521    1% /run/lock\nnone            218524      7  218517    1% /run/shm\n/dev/sda8      2264752  16371 2248381    1% /home\n</pre>\n\n<p>The output of \n<code>df -h</code></p>\n\n<pre>\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/sda7       9,3G  7,8G  1,1G  88% /\nudev            993M  4,0K  993M   1% /dev\ntmpfs           401M  884K  400M   1% /run\nnone            5,0M     0  5,0M   0% /run/lock\nnone           1003M  152K 1002M   1% /run/shm\n/dev/sda8        35G  4,0G   29G  13% /home\n/dev/sda2       101G   64G   37G  64% /media/A2C8E28BC8E25CD3\n</pre>\n\n<p>Running\n<code>sudo fdisk -l</code>\ngives</p>\n\n<pre>\nDisk /dev/sda: 160.0 GB, 160041885696 bytes\n255 heads, 63 sectors/track, 19457 cylinders, total 312581808 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000080\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1              63       96389       48163+  de  Dell Utility\n/dev/sda2   *       98304   210434488   105168092+   7  HPFS/NTFS/exFAT\n/dev/sda3       210436094   312576704    51070305+   f  W95 Ext'd (LBA)\n/dev/sda5       306279288   312576704     3148708+  dd  Unknown\n/dev/sda6       210436096   214341631     1952768   82  Linux swap / Solaris\n/dev/sda7       214343680   233873407     9764864   83  Linux\n/dev/sda8       233875456   306278399    36201472   83  Linux\n\nPartition table entries are not in disk order\n</pre>\n"},{"id":159417,"title":"Deleted files not increasing available free space as reported by df -h","body":"<p>I am writing data munging scripts (python and bash), to munge data and import large quantities of text files into a database.</p>\n\n<p>I am currently in the test phase, so I am generating several K's of files and deleting them (the files consume about 20G of space). After a test run, I delete the files (sometimes without having imported into the database).</p>\n\n<p>I notice that there is a steady decrease in the amount of free space on my disk (as reported by <code>df -h</code>). I don't understand this, as I use rm * (in the data directory), and in the cases where I use Nautilus, I empty the Trash bin as well.</p>\n\n<p>Similarly, I notice that when I import the data into the (postgresql) database, and then delete the data from the tables using <code>DELETE FROM tablename;</code>, the size consumed in the postgresql data directory does not go down either.</p>\n\n<p>Currently, I have lost approximately 200G from hard drive, and I need to reclaim that - but don't know what to do to reclaim it - any ideas?.</p>\n\n<p>I am running Ubuntu 10.0.4 LTS + postgresql 8.4</p>\n\n<p>[[Update]]</p>\n\n<p><code>du -c / | 2&gt;/dev/null | grep total</code> produces this output:</p>\n\n<pre><code>4   /usr/src/linux-headers-2.6.32-38-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-41-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-36-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-30-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-35-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-31-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-27-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-28-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-40-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-34-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-37-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-33-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-39-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-29-generic/include/config/mtdram/total\n4   /usr/src/linux-headers-2.6.32-32-generic/include/config/mtdram/total\n187426036   total\n</code></pre>\n\n<p><code>df -hi</code> produces this output:</p>\n\n<pre><code>Filesystem            Inodes   IUsed   IFree IUse% Mounted on\n/dev/sda1                29M    1.8M     27M    7% /\nnone                    491K     776    490K    1% /dev\nnone                    492K       6    492K    1% /dev/shm\nnone                    492K      76    492K    1% /var/run\nnone                    492K       2    492K    1% /var/lock\nnone                    492K       1    492K    1% /lib/init/rw\n/dev/sdb1                30M    3.0K     30M    1% /mydata\n/dev/sdc1                  0       0       0    -  /media/Cruzer\n</code></pre>\n"}]}]
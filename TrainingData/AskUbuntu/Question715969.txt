[{"id":715969,"title":"Howlong foremost take time to recover?","body":"<p>My 190 GB Data is hangup/lost in lvm, \nIts running more then <strong>10 Hours</strong>. I am used code as </p>\n\n<pre><code>sudo foremost -t all -i /input image location /output location\n</code></pre>\n\n<p>If there has any change ?. I am really panic give idea. </p>\n","related_questions":[{"id":13981,"title":"recover LVM after hdd crash","body":"<p>Yesterday, one hdd of my LVM crashed (smart-error)<br>\n<br>\nThe Machine has the following setup:<br>\n - 4 hdds<br>\n - 1 Partition Raid10 (System, 4*50GB)<br>\n - 1 Partition normal (/boot, 200MB, sda)<br>\n - 1 Partition LVM2 (Data, 4*~850GB)<br>\n - Ubuntu 10.04 Server (headless)<br>\n<br>\nNow my lvm won't mount anymore, Ubuntu asks me to skip or manually recover on bootup. When I press S the system starts, but without my lvm getting mounted.<br>\n<br>\nNow my system partition does not seam to be affected (/proc/mdstat looks as usual) an /boot works fine, too.<br>\n<br>\nWhat I will try now is to <br>\n - buy a new hdd<br>\n - Integrate the hdd in my lvm<br>\n - Try to remove the sda-part of the lvm (copy it over to the new sde, or whatever lvm wants)<br>\n - Do the raid stuff (I think I'll find out how to do that, otherwise I'll ask a separate question)<br>\n<br>\nNow my problems:<br>\n - How can I remove sda from the lvm (remove meaning copy contents and mark partition as not in use so I can unplug the drive)?<br>\n - If I am not able to remove the partition normally, are there any tools to recover the files on this partition, so I could manually copy them to the \"new\" lvm?<br>\n<br>\nThank you for your help<br>\n<br>\nEDIT:<br>\nseparated solution from Question</p>\n"},{"id":667282,"title":"recover lost files after online LVM resize","body":"<p>I did the following 5 days ago which may have triggered the problem.</p>\n\n<pre><code>sudo lvextend -L +20GB /dev/vg1/filme\nsudo resize2fs /dev/vg1/filme\n</code></pre>\n\n<p>Now I realize, that almost all files disappeared. Only the directory structure and some newer files are still available. </p>\n\n<pre><code>Output from: e2fsck -nfv /dev/vg1/filme\n\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n\n   49906 inodes used (0.07%, out of 69148672)\n       0 non-contiguous files (0.0%)\n      17 non-contiguous directories (0.0%)\n         # of inodes with ind/dind/tind blocks: 0/0/0\n         Extent depth histogram: 49891/7\n 5893268 blocks used (2.13%, out of 276576256)\n       0 bad blocks\n       1 large file\n\n      10 regular files\n   49887 directories\n       0 character device files\n       0 block device files\n       0 fifos\n       0 links\n       0 symbolic links (0 fast symbolic links)\n       0 sockets\n   49897 files\n</code></pre>\n\n<p>Any hint how to recover the files and how to analyze what went wrong?</p>\n"},{"id":588530,"title":"Recover the directory structure of a lost LVM Logical volume?","body":"<p>I am aware of the huge amount of data recovery questions on this site, and reading all of them I think my case is unique enough to warrant a new question.</p>\n\n<h3>how it came to be</h3>\n\n<p>I set up a LVM with individual LV for each part of the system over two disks</p>\n\n<pre><code>$ lsblk\nNAME            MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nsda               8:0    0 931.5G  0 disk \n└─sda1            8:1    0 931.5G  0 part \n  └─datavg-data 254:4    0 543.8G  0 lvm  /data\nsdb               8:16   0 111.8G  0 disk \n├─sdb1            8:17   0   487M  0 part /boot/efi\n├─sdb2            8:18   0   244M  0 part /boot\n└─sdb3            8:19   0 111.1G  0 part \n  ├─notapc-root 254:0    0   5.5G  0 lvm  /\n  ├─notapc-usr  254:1    0   8.5G  0 lvm  /usr\n  ├─notapc-var  254:2    0   4.8G  0 lvm  /var\n  └─notapc-home 254:3    0  91.2G  0 lvm  /home\n</code></pre>\n\n<p>(I can give you the output of <code>lvdisplay</code> too, but I though it to long and unimportant</p>\n\n<p><code>apt</code>/<code>dpkg</code> started complaining about a lack of space on <code>/var</code>, <code>/</code> etc. so I decided to size them up. I also decided to decrease the size of my home partition, as most it was just symlinks (e.g. ~/Downloads to /data/username/Downloads/ anyway. So I just used lvreduce <em>&lt; whoops></em> <strong>before shrinking the filesystem</strong> <em>&lt; /whoops></em>.\nas expected, the filesystem could not be mounted on reboot. Since there was no important data I simply <code>dd if=/dev/mapper/notapc-home of=/data/brokenhome.bak</code> and made a new FS on the LV.</p>\n\n<p>I later discovered that I never symlinked my projects folder to <code>/data</code>, which means it never landed on a Backup (I only backup <code>/data</code>), which made me really glad I dd'd it.</p>\n\n<p>unfortunately I really struggled finding programs that could help me recover the partition. Testdisk would require my disk to still be intact, and I could not find more programs that can rebuild more than the partition table. <code>Strings</code> finds tons of stuff, which made me think maybe my project files could be recovered.</p>\n\n<p>How do I recover a LVM LV partition with 2G missing from the end from a file image of the partition?</p>\n"},{"id":580047,"title":"Recover partially overwritten LVM disk","body":"<p><strong>Background</strong></p>\n\n<p>Ive got 3 HDDs on my system:</p>\n\n<p>/dev/sda1 165 GB mounted at /</p>\n\n<p>/dev/sdb1 320 GB LVM Volume 1 of VG HOME</p>\n\n<p>/dev/sdc1 750 GB LVM Volume 2 of VG HOME</p>\n\n<p><strong>What happened</strong></p>\n\n<p>I was trying to copy a ISO file to a USB-Stick. For some reason i typed 'b' instead of 'd' and pressed enter. I canceled the dd process about 10 seconds later, but it was too late. It already wrote about 550 Mb on /dev/sdb.</p>\n\n<p>I can access my system (cause / wasnt hurt) but all my home data is away. Is there a method to recreate the logical volume consisting of the intact /dev/sdc and the damaged /dev/sdb?</p>\n\n<p>Thankyou!</p>\n"},{"id":219151,"title":"Is It Possible To Recover A Partial LVM Logical Volume?","body":"<p><strong>Background</strong></p>\n\n<p>It is an Ubuntu 12.04 VirtualBox VM with 5 virtual HDDs (VDI), NOTE this is just a test VM, so not well planned ahead:</p>\n\n<ol>\n<li><code>ubuntu.vdi</code> for / (/dev/mapper/ubuntu-root AKA /dev/ubuntu/root) and /home (/dev/mapper/ubuntu-home)</li>\n<li><code>weblogic.vdi</code> - /dev/sdb (mounted on /bea for weblogic and other stuff)</li>\n<li><code>btrfs1.vdi</code> - /dev/sdc (part of btrfs -m raid1 -d raid1 configuration)</li>\n<li><code>btrfs2.vdi</code> - /dev/sdd (part of btrfs -m raid1 -d raid1 configuration)</li>\n<li><code>more.vdi</code> - /dev/sde (added this virtual HDD because / ran out of inodes and it wasn't easy to figure out what to delete so as to free up inodes, so I just added the new virtual HDD, created PV, added it to existing volume group ubuntu, grew the root logical volume to work around the inode issue -_-)</li>\n</ol>\n\n<p><strong>What happened?</strong></p>\n\n<p>Last Friday, before finishing up I wanted to free up some disk space on that box, for some reason I thought the more.vdi was useless and tried to detach it from the VM, I then clicked delete (should have clicked keep files damn!) by mistake when detaching. Unfortunately I didn't have backup for it. All too late.</p>\n\n<p><strong>What I have tried</strong></p>\n\n<p>Tried to undelete (use testdisk and photorec) the vdi files but it takes too long and recovered heaps of .vdi files that I didn't want (huge, filled the disk, damn!). I finally gave up. Fortunately most of data is on separate ext4 partition and btrfs volumes.</p>\n\n<p>Out of curiosity, I still tried to mount the logical volumes and see if it is possible to at least recover the /var and /etc</p>\n\n<p>I tried to use system rescue cd to boot and activate the volume groups, I got:</p>\n\n<pre><code>Couldn't find device with uuid xxxx.\nRefusing activation of the partial LV root. Use --partial to override.\n1 logical volume(s) in volume group \"ubuntu\" now active.\nI was able to mount home LV but not root LV.\n</code></pre>\n\n<p>I am wondering if it is possible to access the root LV any more. Under the bonnet, data (on LV root - /) was striped to more.vdi (PV), I know it's almost impossible to to recover.</p>\n\n<p>But I am still curious about how system administrator/DevOps guys deal with this sort of situation;-)</p>\n\n<p>Thanks in advance.</p>\n"},{"id":483584,"title":"Recover data from formatted LVM (Luks, Ext3) after Ubuntu installed over it","body":"<p>I have a 1TB HDD and some days ago I did a mess</p>\n\n<p>That disk had:</p>\n\n<ul>\n<li>One EXT3 partition ( / )</li>\n<li>One EXT3 partition ( /boot )</li>\n<li>One <strong>LUKS LVM</strong> which had a EXT3 partition of about 200 GB</li>\n</ul>\n\n<p>I wanted to replace Linux Mint 14 with Ubuntu 14.04, so I booted Ubuntu 14.04 from USB and did the installation wizard.\nThe wizard asked me \"Replace Linux Mint 14 with Ubuntu 14.04\", so I did, I also checked to add LVM and to crypt user directory. I set up a password and I installed it.</p>\n\n<p>The installation blocked itself almost at end, and by rebooting via USB i noticed that the HDD was formatted and there was just the <code>/boot</code> and the <code>/</code> (my LUKS LVM was formatted and replaced with those two partitions)</p>\n\n<p>I have</p>\n\n<ul>\n<li>The disk itself</li>\n<li>The <code>dd image</code> of the disk <strong>after</strong> the disaster (a 1TB img)</li>\n<li>The passphrase to unlock both the LVM: the oldest one (which I want to recover) and the newest one (to unlock the root partition)</li>\n</ul>\n\n<p><strong>Question</strong><br>\nHow can I recover my precious data?</p>\n"},{"id":376200,"title":"Recover LVM without boot HDD","body":"<p>I have scoured the 'net for an answer and am here as a last resort;\nI have a \"NAS\" running Ubuntu Server. It boots from a 250G HDD and there are 4 X 1T HDDs formatted as LVM.</p>\n\n<p>The boot HDD crashed and there is no backup</p>\n\n<p>The LVM has a backup but is a few days out of date. Ideally I'd like to recover the LVM HDDs.</p>\n\n<p>Is there a relatively simple way to do that?</p>\n"},{"id":302953,"title":"Recover data in external harddisk (which still shows 1.2/2Tb as used) accidentally erased using Startup Disk Creator","body":"<p><strong>I accidentally erased a 2 TB harddisk while trying to create ubuntu startup disk on my 2GB pendrive. Instead of erasing the 2 GB pendrive I think I erased the 2TB external hardisk using the Startup Disk Creator.</strong> It took only less than 5 seconds for the startup disk creator to erase my 2TB external harddisk. Also when I open the affected external <strong>2TB drive there are no files visible, but the properties of the disk shows 1.2TB of the space as used</strong> (same as the size of the data I had stored in it previously before accident). <strong>Please see this <a href=\"http://goo.gl/xCNc3\" rel=\"nofollow\">image</a></strong>. </p>\n\n<p>So I believe that the original data is somewhere in broken/invisible formats inside the disk. That is my only hope. I don't have a alternate 2TB harddisk to take a backup or to perform testing. I can neither avail or afford one right now in my place. So I don't want to mess up further by choosing a wrong recovery method on the original affected disk. My clients would be mad to listen to these stories for delays in my current deliverable, but getting fired or loosing business is the least of my problems now. This external hardisk is more important and is everything I had in my life and career.</p>\n\n<p>To recover the data, <strong>I have already gathered ideas about testdisk and photorec</strong> from <a href=\"http://askubuntu.com/questions/120799/recover-1tb-disk-erased-with-startup-disk-creator\">this</a> posting and several others in google. I didn't try any of them on the affected hard disk. But <strong>I did try both testdisk and photorec on other portable devices for testing purpose.</strong> For instance, I tested them on a pendrive and <strong>retrieved files like a broken pieces</strong> from postmortem. <strong>It will be of no use</strong>, if that is what the recovery tools can provide it will be too impossible for me to rearrange, rename and understand the data/files of total size which is around 1.5 TB. The data involves most possible formats of images, sounds, videos, scripts, programs, codes, design files etc.. Isn't there a way to just undo this accident (that took only 5 seconds) and get back all my files as it is? Because the properties of the external <strong>drive still shows 1.2 Tb as used and only 800 GB out of 2 TB as free.</strong></p>\n\n<p>I would loose 10 years of my life's work, designs, programs, all critical files, projects and priceless family memories. I am a living dead if I can't get back my data. Most of the post with similar issues are dated 2012 or before, so I believe there should have been <strong>some technology improvements to undo this by now.</strong> I know I am foolish to have something that I considered worth more than my life in one single external Hard disk. But it had been that way ever since I started computing and I never faced any single issue so far. I was using windows and only recently I switched to ubuntu. And I made this mess while using ubuntu's in-built Startup disk creator. Infact the hard-disk was only my backup and I used to have the working copies in my laptop. But my bad time, I had also crashed my laptop recently while I was trying to render an animation using Blender and this week I lost the main backup data in hard-disk too. I can never recover from this tragedy and I request that <strong>if anyone knows a solution to recover data and files from the 2Tb hard-disk data, please share me.</strong></p>\n\n<p><strong>Please help!</strong> Should I run testdisk or photorec on my external Hard disk? Can it restore all the files as it is? Or do we have any other solution to resolve this, as my hard-disk is not totally empty and it's properties shows 1.2Tb as used space?</p>\n\n<p>regards,</p>\n\n<p>K</p>\n"},{"id":210955,"title":"Recovering broken drive","body":"<p>i have a 320 GB external drive which isnt detected automatically when i plug it (neither on Windows7 nor Ubuntu 10.04) Under Windows i can recover the Data with Photorec (but it doesnt preserve names or folder structure, which renders it useless since there are around 200 GB of data) RecoverMyFiles (demo, costs way to much to buy) can also view everything, but the drive makes clicking noises when being accessed  (around 10-20 clicks per minute).</p>\n\n<p>So i switched to Ubuntu and the drive is shown when running fdisk, with no apparent errors, it also stopped clicking. following the steps at <a href=\"https://help.ubuntu.com/community/DataRecovery\" rel=\"nofollow\">https://help.ubuntu.com/community/DataRecovery</a> i used ddrescue to copy whatever i can get to a healthy external drive and it finished without errors but produced only 2 files totaling 3 GB on the healthy drive which i couldnt access. I unmounted the drive and now i cant mount it again with \"mount -t vfat /dev/sdb1 /media/backup\"</p>\n\n<p>I have no idea what to do now. The data is not corrupted but i dont know how to access it. I am afraid to use testdisk because its not very user friendly and i dont want to make irreversible changes that im going to regret later.</p>\n\n<p>Here are the exact commands i used and the fdisk -l output: <a href=\"http://pastebin.com/3XU3hUVK\" rel=\"nofollow\">http://pastebin.com/3XU3hUVK</a></p>\n\n<p>How do I A) make the healthy drive accessible again and read the data created by ddrescue or B) reformat the healthy drive to be accessible again. and mount the broken drive so i can copypaste everything (or do it with testdisk)</p>\n"},{"id":180918,"title":"Recover LVM setup by reinstalling Ubuntu","body":"<p>If I have a LVM set up on my \"data\" disks, will reinstalling Ubuntu on the OS disk allow me to recover the original LVM set up?</p>\n\n<p>I'm slightly worried that I won't be able to see any data on my disks after a reinstall.</p>\n"}]}]
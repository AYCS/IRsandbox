[{"id":715208,"title":"Restore original permissions to the var folder?","body":"<p>I use Ubuntu desktop 15.10 and very new to Linux. Today afternoon I've mistakenly played with the permissions of the var folder which everyone here knows very well.</p>\n\n<p>I changed it several times to 777 and 755 recursively (and maybe one time even to 644 to its unlikely).</p>\n\n<p>I don't have any serious problems due to these changes, but one - I can't do <code>curl sS https://getcomposer.org/installer | php</code> to install a program called Composer (even as sudo).</p>\n\n<p>That's the error:</p>\n\n<p><a href=\"http://i.stack.imgur.com/fVxgl.png\" rel=\"nofollow\"><img src=\"http://i.stack.imgur.com/fVxgl.png\" alt=\"enter image description here\"></a></p>\n\n<p>My main question is - Is there a way to restore the permissions of var and all it's relevant subfolders to the original permissions that comes with the OS?</p>\n","related_questions":[{"id":386928,"title":"default permissions for /var/www","body":"<p>I was trying to open a file and write to it with PHP at /var/www folder\nbut it wasn't working so I did\n<code> sudo chmod 777 var/www </code><br>\nnow I want to set the permissions for var/www to the default.<br>\nwhat are the default permissions for var/www?</p>\n"},{"id":679844,"title":"`mkdir()`: Permission denied to create folders with PHP","body":"<p>I have this PHP script:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$dir = FCPATH . 'uploads' . DIRECTORY_SEPARATOR . 'posts'; // is in CodeIngiter\nif (!is_dir($dir)) {\n    mkdir($dir, 755);\n}\n</code></pre>\n\n<p>Which creates a folder for storing posts' images. However I'm getting this error / warning:</p>\n\n<pre><code>Severity: Warning\nMessage:  mkdir(): Permission denied\n</code></pre>\n\n<p>and I can't create the folder.</p>\n\n<p>How can I fix this? My folder structure looks like this:</p>\n\n<pre><code>/opt/lampp/htdocs/www/my-site/public/ (uploads/posts) // all folders inside files will generate in php\n</code></pre>\n\n<p>Some further information: if I comment this code, manually create the <code>posts</code> folder and then try to upload a file I get an error saying that the destination path is not writable.</p>\n\n<p>Output of <code>ls -l /opt/lampp/htdocs/www/my-site/</code>:</p>\n\n<pre><code>drwxrwxr-x 15 lykos lykos 4096 Sep 17 23:08 application\ndrwxrwxrwx 6 lykos lykos 4096 Sep 29 22:00 public\ndrwxrwxr-x 8 lykos lykos 4096 Sep 7 12:31 system\n</code></pre>\n\n<p>Output of <code>ls -l /opt/lampp/htdocs/www/my-site/public</code>:</p>\n\n<pre><code>drwxr-xr-x 4 lykos lykos 4096 Sep 18 21:48 css\ndrwxr-xr-x 2 lykos lykos 4096 Sep 27 19:18 img\n-rwxrwxr-x 1 lykos lykos 9872 Sep 17 23:04 index.php\ndrwxr-xr-x 8 lykos lykos 4096 Sep 27 20:06 js\ndrwxr-xr-x 2 lykos lykos 4096 Sep 29 20:34 uploads\n</code></pre>\n"},{"id":653795,"title":"fopen with a+ fails due to permissions","body":"<p>In php, I am calling fopen(filename, 'a+') in a directory that belongs to www-data and has permissions 777.</p>\n\n<p>The resulting permissions of the file created by fopen are 644, and so I get FALSE for the file handle.</p>\n"},{"id":30629,"title":"How can I recursively change the permissions of files and directories?","body":"<p>I have ubuntu installed on my local computer with apache / php / mysql.</p>\n\n<p>I now have a directory at /var/www - inside which I have several of my ongoing projects. I also work with opensource ( drupal, magento, sugarcrm ).</p>\n\n<p>The problem I am facing is changing file permission with terminal. Sometime I need to change the permission of entire folder and its subsequent sub-folders and files. I have to individually change using </p>\n\n<pre><code>sudo chmod 777 foldername\n</code></pre>\n\n<p>How can I do this recursively.</p>\n\n<p>Also why do I have to always do it <strong>777</strong>, I tried <strong>755</strong> for folders and <strong>644</strong> for files, but that won't work.</p>\n"},{"id":470092,"title":"Change Folder Permissions and All Sub-Folders","body":"<p>I'm working on a <code>PHP</code> website at the moment and I'm doing a LOT of writing to files and directories.  Whenever these files are made, they're automatically owned by Daemon and I have to go into Terminal and execute\n<code>sudo chown varosion /opt/lampp/htdocs/apps/&lt;folder&gt;</code> in order to edit or delete these files.  Is there anyway to take full ownership of the entire <code>lampp</code> folder and all future changes made to it?  If that's not possible, is there anyway to change <code>PHPs</code> default ownership?</p>\n\n<p>EDIT: I just found the option \"Change Permissions For Enclosed Files\", I'm not sure if this has solved my problem but it sounds like it.</p>\n"},{"id":460097,"title":"What are the best practices when setting files and folder permissions as a php developer under ubuntu?","body":"<p>I have created and set the permissions to some files and folders under /var/www/mywebsite. </p>\n\n<blockquote>\n  <p>For files 644 and for folders 755.</p>\n</blockquote>\n\n<p>I am the owner of those files and folders, since I created them under that directory. </p>\n\n<p>However, I am not able to write and save the files under /var/www/mywebsite</p>\n\n<p>If I change permissions to 777 I can edit them normally but if I upload them to my server, files keep their permissions as 777 and I have to change them back to 755 and 644. This adds an extra step for total development process, and I was wondering if there is a better practice when working with a php projects and ubuntu. Should I move the web folder of apache to another directory, for example home and work from there?</p>\n\n<p>Here is the output of ls -l /var/www</p>\n\n<pre><code>themhz@hal9000:~$ ls -l /var/www\ntotal 10\ndrwxr-sr-x 18 themhz   root       4096 Μάι   3 05:58 mywebsite\ndrwsr-sr-x 18 themhz   root       4096 Οκτ  28  2013 agorasite.gr\ndrwsr-xr-x 17 themhz   themhz     4096 Οκτ  28  2013 agorasite\ndrwsr-xr-x 17 themhz   root       4096 Δεκ   9  2012 aimodosia\nlrwxrwxrwx  1 root     root         22 Φεβ  14 09:25 apc.php -&gt; /usr/share/php/apc.php\ndrwsr-xr-x  3 themhz   root       4096 Αύγ  30  2011 apolo\n-rw-r--r--  1 themhz   root     297307 Φεβ  20  2013 background5.jpg\ndrwxr-sr-x  3 themhz   root       4096 Αύγ  17  2013 backups\ndrwsr-xr-x 10 themhz   root       4096 Ιούλ  2  2012 booking\n</code></pre>\n\n<p>Any advises or suggestions for best practices when developing php applications and setting up a dev working system? </p>\n\n<p>My system is running Ubuntu 12.04 </p>\n\n<p>thank you</p>\n"},{"id":416399,"title":"Problems with the /var/www folder","body":"<p>I am new to Ubuntu, I've installed 12.04. I used to use wamp server on Windows, and after changing OS I moved some files from www folder to <code>/var/www</code> on Ubuntu. But when I try to view that folder in a browser it doesn't display anything. </p>\n\n<p>Probably there is a problem with permission issues. What are proper permissions for <code>/var/www</code> folder? Here are my <code>/var</code> folder permissions:</p>\n\n<pre><code>drwxrwxr-x  4 root root     1024 Feb  4 20:06 www\n</code></pre>\n\n<p>I have run</p>\n\n<pre><code>chmod -R 755 /var/www  \nchown -R root /var/www\n</code></pre>\n\n<p>Right now that <code>/var/www</code> folder is empty, but how can I configure apache to show files under that folder in browser?</p>\n"},{"id":378527,"title":"Coordino permission issues?","body":"<p>I have downloaded the <a href=\"https://github.com/Datawalke/Coordino\" rel=\"nofollow\">Coordino</a> and wanted to run it on Ubuntu, tried to run it but its giving the following errors</p>\n\n<pre><code>Warning: require(app/webroot/index.php): failed to open stream: Permission denied in /var/www/namal-geeks.com/index.php on line 55\n\nFatal error: require(): Failed opening required 'app/webroot/index.php' (include_path='.:/usr/share/php:/usr/share/pear:/var/www/namal-geeks.com:/var/www/namal-geeks.com/app/') in /var/www/namal-geeks.com/index.php on line 55\n</code></pre>\n\n<p>Tried to change the permission of the folders by using </p>\n\n<pre><code>sudo chmod -R 775 Coordino-directory        //using 775 as  Rinzwind mentioned it could be a security problem \n</code></pre>\n\n<p>but that didn't worked\nseems it requires a file and cant get it because of permissions looked into the file and line where error is</p>\n\n<pre><code>line\n 55    require APP_DIR . DS . WEBROOT_DIR . DS . 'index.php';\n</code></pre>\n\n<p>I am not sure how do I solve the problem ?\n<br/>Help !</p>\n"},{"id":208217,"title":"Change permission for ALL folders and files","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://askubuntu.com/questions/46331/how-to-avoid-using-sudo-when-working-in-var-www\">How to avoid using sudo when working in /var/www?</a>  </p>\n</blockquote>\n\n\n\n<p>I've been around Ubuntu for not too long now and I'm getting tired of a thing I used to accept. When I installed Apache and PHP on Ubuntu it was done with <code>root</code> meaning it got permission. So I changed that to me. Now I've just copied a big number of files, (PHP), to be viewed and edited in these directories. Now my problem: I can not view the files from <code>var/www/</code> because it requires, for some reason, everyone to have access to the files. Not only me, or my group but everyone. No one else is using the computer but me, so I'm cool with it. Though I need a command to change ALL files permission recursively. When I've browsed the questions already been answered I find for example <code>chown -R viktor:viktor /var/www/</code>, or using <code>sudo</code> as well.</p>\n\n<p>This worked on the single <code>var/www</code> and the folders inside but not the files inside the folders and very odd I notice I can't do the same thing on example <code>/var/www/dev/</code>.</p>\n"},{"id":137181,"title":"Correcting /var permissions to it&#39;s original state","body":"<p>Ok I just royally screwed up my <code>/var</code> folder's permissions.</p>\n\n<p>I thought I was inside <code>/var/www</code> and did a <code>chmod xxx ./*</code> on the parent folder /var instead.</p>\n\n<p>Now all the permissions inside <code>/var</code> are messed up. What can I do to correct it?</p>\n"}]}]
[{"id":714767,"title":"Faild to bootstrap during Openstack autopilot installation","body":"<p>I'm installing Openstack autopilot on Ubuntu 15.04 server. I've installed Maas and join nodes successfully. I tested Maas connection by installing juju and deploying service. but when I want to install openstack it encounters error in bootstraping.</p>\n\n<p>I follow instructions at <a href=\"http://www.ubuntu.com/download/cloud/install-openstack-with-autopilot\" rel=\"nofollow\">http://www.ubuntu.com/download/cloud/install-openstack-with-autopilot</a> </p>\n\n<p>I debug installation and get these:</p>\n\n<p><strong>config.yaml</strong></p>\n\n<pre><code>headless: true\ninstall_type: OpenStack Autopilot\nlandscapecreds:\n  admin_email: user@mail.com\n  admin_name: admin\n  maas_apikey: Zjuya8thTT4pmhV5rB:nvg9jNtxrswCBeAebp:dsPP6Cyububc84RykUYhXSDEKGAk3AVn\n  maas_server: 10.1.0.100\n  system_email: user@mail.com\nmaascreds:\n  api_host: 10.1.0.100\n  api_key: Zjuya8thTT4pmhV5rB:nvg9jNtxrswCBeAebp:dsPP6Cyububc84RykUYhXSDEKGAk3AVn\nopenstack_password: Sajjad123\nopenstack_release: kilo\nubuntu_series: trusty\n</code></pre>\n\n<p><strong>command</strong></p>\n\n<pre><code>DEBUG_JUJU_BOOTSTRAP=1 sudo -E openstack-install -c config.yaml --debug\n</code></pre>\n\n<p><strong>commands.log</strong></p>\n\n<pre><code>[INFO: 12-30 01:18:40] Starting OpenStack Installer v0.99.24\n[INFO: 12-30 01:18:40] Start command: ['/usr/bin/openstack-install', '-c', 'config.yaml', '--debug']\n[INFO: 12-30 01:18:40] Running Kilo release\n[INFO: 12-30 01:18:40] Performing a OpenStack Autopilot install\n[INFO: 12-30 01:21:48] Bootstrapping Juju\n[INFO: 12-30 01:21:49] Bootstrapping Juju\n[ERROR: 12-30 01:22:11] Fatal error\nTraceback (most recent call last):\n  File \"/usr/share/openstack/cloudinstall/controllers/installbase.py\", line 150, in start\n    self.do_install()\n  File \"/usr/share/openstack/cloudinstall/controllers/installbase.py\", line 134, in do_install\n    self.loop, self.ui, self.config).run()\n  File \"/usr/share/openstack/cloudinstall/controllers/install/landscape.py\", line 80, in run\n    self._do_install_existing_maas()\n  File \"/usr/share/openstack/cloudinstall/controllers/install/landscape.py\", line 42, in _do_install_existing_maas\n    self.config, self.landscape_tasks).do_install()\n  File \"/usr/share/openstack/cloudinstall/controllers/install/multi.py\", line 131, in do_install\n    raise Exception(\"Problem with juju bootstrap.\")\nException: Problem with juju bootstrap.\n[INFO: 12-30 01:22:11] Stopping eventloop\n[INFO: 12-30 01:22:11] Cleanup, saving latest config object.\n</code></pre>\n\n<p>when I tried to bootstrap manually. I got these error:</p>\n\n<p><strong>command:</strong></p>\n\n<pre><code> JUJU_HOME=~/.cloud-install/juju/ juju bootstrap --debug\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>2015-12-29 22:10:53 INFO juju.cmd cmd.go:129 Bootstrap failed, destroying environment\n2015-12-29 22:10:53 INFO juju.provider.common destroy.go:22 destroying environment \"maas\"\n2015-12-29 22:10:53 INFO juju.provider.common destroy.go:33 destroying instances\n2015-12-29 22:10:54 INFO juju.provider.common destroy.go:53 destroying storage\n2015-12-29 22:10:54 ERROR juju.cmd supercommand.go:429 failed to bootstrap environment: cannot start bootstrap instance: gomaasapi: got error back from server: 500 INTERNAL SERVER ERROR (('UNHANDLED', 'Unknown Error [sajjad-maas:pid=774:cmd=CreateHostMaps:ask=b3]'))\n</code></pre>\n\n<p>Thank you in advanced for your help.</p>\n\n<p>Regards\nSajjad</p>\n","related_questions":[{"id":711189,"title":"Problem in installing OpenStack AutoPilot test Drive on Vmware workstation, juju can&#39;t connect to websocket to register service","body":"<p>I've problem installing OpenStack AutoPilot on vmware workstation.</p>\n\n<p>I download OpenStack Autopilot test drive from ubuntu website. It's alright configuring Maas and adding nodes and about 80% of adding region. but in the task of adding units, it takes long time to infinity.</p>\n\n<p>I do it for several time and that not pass this level  and jobs remain In progress state.</p>\n\n<p>I checked the log file for juju and I saw this error it could not connect to websecket in client with juju bootstrap.</p>\n\n<p>for example my machine name is client1 and the job title \"Add unit to 'mysql' service on 'client1.myautopilot'\"</p>\n\n<p>I check log file /var/log/juju/unit-mysql-0.log file, last lines of this file are as follow:</p>\n\n<pre><code>2015-12-19 10:58:58 INFO juju.worker.dependency engine.go:293 starting \"api-caller\" manifold worker in 3s...\n2015-12-19 10:59:01 DEBUG juju.worker.dependency engine.go:301 starting \"api-caller\" manifold worker\n2015-12-19 10:59:01 DEBUG juju.worker.dependency engine.go:268 \"api-caller\" manifold requested \"api-info-gate\" resource\n2015-12-19 10:59:01 DEBUG juju.worker.dependency engine.go:268 \"api-caller\" manifold requested \"agent\" resource\n2015-12-19 10:59:01 INFO juju.api apiclient.go:262 dialing \"wss://client1.myautopilot:17070/environment/8a4d79c6-fa15-408c-817b-f0204b5a7783/api\"\n2015-12-19 10:59:21 INFO juju.api apiclient.go:270 error dialing \"wss://client1.myautopilot:17070/environment/8a4d79c6-fa15-408c-817b-f0204b5a7783/api\": websocket.Dial wss://client1.myautopilot:17070/environment/8a4d79c6-fa15-408c-817b-f0204b5a7783/api: dial tcp: lookup client1.myautopilot: no such host\n2015-12-19 10:59:21 WARNING juju.worker.dependency engine.go:304 failed to start \"api-caller\" manifold worker: cannot open api: unable to connect to \"wss://client1.myautopilot:17070/environment/8a4d79c6-fa15-408c-817b-f0204b5a7783/api\"\n2015-12-19 10:59:21 INFO juju.worker.dependency engine.go:351 \"api-caller\" manifold worker stopped: cannot open api: unable to connect to \"wss://client1.myautopilot:17070/environment/8a4d79c6-fa15-408c-817b-f0204b5a7783/api\" \n</code></pre>\n\n<p>Please help me to solve this problem.</p>\n\n<p>Thanks in advanced</p>\n"},{"id":710560,"title":"Installation of Openstack via autopilot with only one Disk per Node","body":"<p>I plan to use autopilot to install a Openstack cloud on a bunch of servers, which have single SSDs installed. The requirements say, 2 disks per node are required, as stated here: <a href=\"http://www.ubuntu.com/download/cloud/install-openstack-with-autopilot\" rel=\"nofollow\">http://www.ubuntu.com/download/cloud/install-openstack-with-autopilot</a>. \nThe machines are currently in production use and we have a limited time frame to get everything up and running, so i have no chance to just give it a try, so after this lengthy preamble my question is:</p>\n\n<p>Is it possible to install Openstack with autopilot on nodes, that have just one physical disk? </p>\n"},{"id":653329,"title":"Openstack-install juju bootstrap error","body":"<p>I am attempting to setup an Openstack cloud via Ubuntu's instructions. My MAAS server is up and running with my equipment properly checked in. When I run <code>sudo openstack-install</code> with \"Landscape OpenStack Autopilot\" as my selection, after I enter the admin email, name, MAAS server IP and API, the script fails with \"A fatal error has occured: Problem with juju bootstrap.\" Here is the content from my command.log:</p>\n\n<pre><code>[DEBUG â¢ 07-27 11:15:26] â¢ cloudinstall.multi_install â¢ (multi_install.py, do_install, 137)]\n   Bootstrapping Juju: JUJU_HOME=/home/cgaeth/.cloud-install/juju juju  bootstrap\n[DEBUG â¢ 07-27 11:15:27] â¢ cloudinstall.multi_install â¢ (multi_install.py, do_install, 143)]\n   Problem during bootstrap: '{'output': 'error: cannot parse \"/home/cgaeth/.cloud-install/juju/environments.yaml\": YAML error: line 7: found character that cannot start any token\\n', 'status': 2}'\n[DEBUG â¢ 07-27 11:15:27] â¢ cloudinstall.utils â¢ (utils.py, global_exchandler, 63)]\n   Traceback (most recent call last):\n  File \"/usr/share/openstack/cloudinstall/utils.py\", line 78, in run\n    super().run()\n  File \"/usr/lib/python3.4/threading.py\", line 868, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/share/openstack/cloudinstall/machinewait.py\", line 127, in do_continue\n    self.installer.do_install()\n  File \"/usr/share/openstack/cloudinstall/multi_install.py\", line 144, in do_install\n    raise Exception(\"Problem with juju bootstrap.\")\nException: Problem with juju bootstrap.\n</code></pre>\n\n<p>Now line 7 in the <code>environments.yaml</code> file is the MAAS API key. I have checked the file and the key is correct. Has anyone else run into this? </p>\n"},{"id":643843,"title":"Canonical openstack deployment, an issue with JuJU","body":"<p>I'm deploying canonical openstack in my lab environment on following topology:</p>\n\n<pre><code>    --------------\n    MAAS + DHCP VM \n    --------------\n   |-Switch-|\n     |_ Server 1\n     |_ Server 2\n     |_ Server 3\n     |_ Server 4\n     |_ Server 5\n</code></pre>\n\n<p>MaaS 1.8 is deployed on VM and all discovered servers are in the \"ready\" state. When I launch <code>openstack-install</code>, juju return an error code that bootstrap was failed. After launching <code>juju bootstrap --debug --keep-broken</code> I figured out the failure point:</p>\n\n<blockquote>\n  <p>`2015-07-02 16:04:39 INFO juju.replicaset replicaset.go:78 Initiating\n  replicaset with config replicaset.Config{Name:\"juju\", Version:1,\n  Members:[]replicaset.Member{replicaset.Member{Id:1,\n  Address:\"muted-button.maas:37017\", Arbiter:(*bool)(nil),\n  BuildIndexes:(*bool)(nil), Hidden:(*bool)(nil),\n  Priority:(*float64)(nil),\n  Tags:map[string]string{\"juju-machine-id\":\"0\"},\n  SlaveDelay:(*time.Duration)(nil), Votes:(*int)(nil)}}}</p>\n  \n  <p>2015-07-02 16:04:39 WARNING juju.replicaset replicaset.go:98 Initiate:\n  fetching replication status failed: cannot get replica set status:\n  can't get local.system.replset config from self or any seed\n  (EMPTYCONFIG)</p>\n</blockquote>\n\n<p>The message is repeated many times in the log and last message is:</p>\n\n<blockquote>\n  <p>2015-07-02 16:05:55 INFO juju.worker.peergrouper initiate.go:78\n  finished MaybeInitiateMongoServer 2015-07-02 16:05:55 ERROR juju.cmd\n  supercommand.go:430 cannot initiate replica set: cannot get replica\n  set status: can't get local.system.replset config from self or any\n  seed (EMPTYCONFIG) \n  2015-07-02 16:05:50 WARNING juju.cmd.juju\n  bootstrap.go:223 bootstrap failed but --keep-broken was specified so\n  environment is not being destroyed. When you are finished diagnosing\n  the problem, remember to run juju destroy-environment --force to clean\n  up the environment. \n  2015-07-02 16:05:50 ERROR juju.cmd\n  supercommand.go:430 failed to bootstrap environment: subprocess\n  encountered error code 1</p>\n</blockquote>\n\n<p>Full JuJu log may be found <a href=\"http://pastebin.ru/XWdA6Fas#\" rel=\"nofollow\">here</a> </p>\n\n<p>Please kindly assist determine the a cause of issue and how to fix it.</p>\n"},{"id":634454,"title":"Install Openstack Kilo using the OpenStack Autopilot?","body":"<p>Is there a way to install Kilo Openstack using the openstack installer?\n<a href=\"http://www.ubuntu.com/download/cloud/install-ubuntu-openstack\" rel=\"nofollow\">http://www.ubuntu.com/download/cloud/install-ubuntu-openstack</a></p>\n\n<p>Is there a way to do it without using a box for landscape with kilo? one of the 3 options is multi,landscape, single. \n<a href=\"http://ubuntu-cloud-installer.readthedocs.org/en/latest/multi-installer.guide.html\" rel=\"nofollow\">http://ubuntu-cloud-installer.readthedocs.org/en/latest/multi-installer.guide.html</a></p>\n\n<p>Does the MaaS machine need to be ubuntu 15.04, or just the images that the nodes go to?</p>\n"},{"id":630997,"title":"Landscape Openstack-installer fails during juju bootstrap","body":"<p>I've got my MAAS and behind my server I've got my 5 nodes all are ready to use (status ready in MAAS) </p>\n\n<p>First I used MAAS and JUJU without Landscape and it works perfectly fine.\nJuju bootstrap OK.\nUse charm OK. I installed charm like mysql and wordpress.\nAfter that I destroyed my bootstrap environment to use the autopilot.</p>\n\n<p>I used this:</p>\n\n<pre><code>sudo add-apt-repository ppa:cloud-installer/stable\n\nsudo apt install openstack\n\nsudo openstack-install\n</code></pre>\n\n<p>I launched all these commands on my Maas server. </p>\n\n<p>But I've got this an error \"Problem with JuJu bootstrap\"</p>\n\n<p>Here is my ~/.cloud-install/commands.log</p>\n\n<pre><code>[DEBUG • 06-01 18:19:46] • cloudinstall.ui.dialog • (dialog.py, _build_widget, 93)]\n   Num items: 2, items: &lt;ListBox selectable box widget&gt;\n[DEBUG • 06-01 18:19:56] • cloudinstall.ui.dialog • (dialog.py, submit, 111)]\n   Callback on : OrderedDict([('password', &lt;EditInput selectable flow widget&gt;), ('confirm_password', &lt;EditInput selectable flow widget&gt;)])\n[DEBUG • 06-01 18:20:48] • cloudinstall.ui • (__init__.py, submit, 214)]\n   Callback on : OrderedDict([('Landscape OpenStack Autopilot', (&lt;RadioButton selectable flow widget 'Landscape OpenStack Autopilot' state=True&gt;, 'Benefit from best practices in c$\n[INFO  • 06-01 18:20:48] • cloudinstall.install • (install.py, do_install, 129)]\n   Performing a Landscape OpenStack Autopilot install\n[DEBUG • 06-01 18:20:48] • cloudinstall.ui.dialog • (dialog.py, _build_widget, 93)]\n   Num items: 4, items: &lt;ListBox selectable box widget&gt;\n[DEBUG • 06-01 18:23:07] • cloudinstall.ui.dialog • (dialog.py, submit, 111)]\n   Callback on : OrderedDict([('admin_email', &lt;EditInput selectable flow widget&gt;), ('admin_name', &lt;EditInput selectable flow widget&gt;), ('maas_server', &lt;EditInput selectable flow w$\n[DEBUG • 06-01 18:23:07] • cloudinstall.landscape_install • (landscape_install.py, _save_lds_creds, 81)]\n   Existing MAAS defined, doing a LDS installation with existing MAAS.\n[DEBUG • 06-01 18:24:23] • cloudinstall.utils • (utils.py, ssh_genkey, 819)]\n   ssh keys exist for this user, they will be used instead.\n[DEBUG • 06-01 18:24:23] • cloudinstall.multi_install • (multi_install.py, do_install, 137)]\n   Bootstrapping Juju: JUJU_HOME=/home/tibo/.cloud-install/juju juju  bootstrap\n[DEBUG • 06-01 18:32:54] • cloudinstall.multi_install • (multi_install.py, do_install, 143)]\n   Problem during bootstrap: '{'status': 1, 'output': 'Bootstrapping environment \"maas\"\\nBootstrap failed, destroying environment\\nERROR failed to bootstrap environment: Juju cann$\n[DEBUG • 06-01 18:32:54] • cloudinstall.utils • (utils.py, global_exchandler, 63)]\n   Traceback (most recent call last):\n  File \"/usr/share/openstack/cloudinstall/utils.py\", line 78, in run\n    super().run()\n  File \"/usr/lib/python3.4/threading.py\", line 868, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/share/openstack/cloudinstall/machinewait.py\", line 127, in do_continue\n    self.installer.do_install()\n  File \"/usr/share/openstack/cloudinstall/multi_install.py\", line 144, in do_install\n    raise Exception(\"Problem with juju bootstrap.\")\nException: Problem with juju bootstrap.\n</code></pre>\n\n<p>I don't know what is my problem.</p>\n"},{"id":593285,"title":"Landscape&#39;s Openstack deployment fails at Configure Availability Zones","body":"<p>Using the current Landscape's “OpenStack Beta” option to deploy OpenStack on my MAAS setup.  I get to 98% completion, with 1 failure on “Configure availability zones”.  My settings utilized KVM, Open vSwitch, and I currently utilize Ceph for both object and block storage.  When I look at the <em>/var/log/landscape/job-handler-1.log</em> on the landscape machine is see over 100 errors about:</p>\n\n<blockquote>\n  <p>2015-03-05 21:18:38 INFO root RetryingCall for '_get_nova_info' failed, trying 103 more time(s): \n  2015-03-05 21:18:38 INFO root Traceback: : Missing 4 nova-compute units<br>\n  /usr/lib/python2.7/threading.py:783:__bootstrap<br>\n  /usr/lib/python2.7/threading.py:810:__bootstrap_inner<br>\n  /usr/lib/python2.7/threading.py:763:run<br>\n  --- &lt; exception caught here> ---<br>\n  /usr/lib/python2.7/dist-packages/twisted/python/threadpool.py:191:_worker<br>\n  /usr/lib/python2.7/dist-packages/twisted/python/context.py:118:callWithContext<br>\n  /usr/lib/python2.7/dist-packages/twisted/python/context.py:81:callWithContext<br>\n  /usr/lib/python2.7/dist-packages/storm/twisted/transact.py:76:_wrap<br>\n  /opt/canonical/landscape/canonical/landscape/model/openstack/jobs.py:751:_get_nova_info</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><strong>NOTE</strong>: The line number in jobs.py is off as I've added some print statements for debugging.  It's the assert in the _get_nova_info() function near line #741 (if memory serves), and yes I'm using the newest version of landscape as of today from the landscape ppa for trusty.</p>\n</blockquote>\n\n<p>So I modified <em>/opt/canonical/landscape/canonical/landscape/model/openstack/jobs.py</em>'s <strong>_get_nova_info()</strong> function to print out the length of the <strong>nova_compute_hostnames</strong> and I got <strong>zero</strong>. So I chased that into <em>/opt/canonical/landscape/canonical/landscape/model/openstack/region.py</em>'s <strong>get_nova_compute_hostnames()</strong> and found that <strong>self.juju_environment.get_computer_ids().count()</strong> was also <strong>zero</strong>.  So I added a call to <strong>self.juju_environment.has_computers()</strong> and got <strong>false</strong>.  Then I ran <strong>self.juju_environment.get_juju_home()</strong> and got <em>/var/lib/landscape/juju-homes/20</em>.  (Yes this is my 20th attempt on my 2nd rebuild of the landscape box, I've been at this for awhile).  So I ran <strong>juju status</strong> utilizing the juju home mentioned above and all looked well. All 5 machines and services were started, no pending or error states. (including the 4 nova-compute nodes)  Any ideas?  I'm somewhat new to landscape, MAAS, JUJU, &amp; python so my debugging is a bit slow.</p>\n\n<hr>\n\n<h1><strong>UPDATE 1:</strong></h1>\n\n<p>Per the request I've got the 2 logs (although my home is now #23)  <a href=\"http://pastebin.com/gv0BLSqL\" rel=\"nofollow\">juju status</a> and <a href=\"http://pastebin.com/CRnTSs2j\" rel=\"nofollow\">broker.log</a> .  I think I now know what my problem is per the snippet of broker.log below. (Thanks dpb for pointing me there)  My MAAS machine is giving out the DHCP address to my landscape LXC, but my landscape LXC is not in the MAAS controlled DNS as it's not provisioned by MAAS.  Therefore the provisioned machines cannot connect to the landscape server by name.  </p>\n\n<p>So that leads me to a related question, is there a good way to have MAAS auto update the DNS with machines that aren't provisioned (or under MAAS control)? If not I'll have to give it a static IP outside my DHCP range and manually set the DNS.</p>\n\n<blockquote>\n  <p>2015-03-06 17:09:50,665 INFO     [MainThread] Broker started with config /etc/landscape/client.conf<br>\n  2015-03-06 17:09:52,382 INFO     [MainThread] Starting urgent message exchange with <a href=\"https://landscape/message-system\" rel=\"nofollow\">https://landscape/message-system</a>.<br>\n  2015-03-06 17:09:52,389 ERROR    [PoolThread-twisted.internet.reactor-1] Error contacting the server at <a href=\"https://landscape/message-system\" rel=\"nofollow\">https://landscape/message-system</a>.<br>\n  Traceback (most recent call last):<br>\n   File \"/usr/lib/python2.7/dist-packages/landscape/broker/transport.py\", line 71, in exchange<br>\n     message_api)<br>\n   File \"/usr/lib/python2.7/dist-packages/landscape/broker/transport.py\", line 45, in _curl<br>\n     headers=headers, cainfo=self._pubkey, curl=curl))<br>\n   File \"/usr/lib/python2.7/dist-packages/landscape/lib/fetch.py\", line 109, in fetch<br>\n     raise PyCurlError(e.args[0], e.args<a href=\"http://pastebin.com/gv0BLSqL\" rel=\"nofollow\">1</a>)<br>\n  PyCurlError: Error 6: Could not resolve host: landscape<br>\n  2015-03-06 17:09:52,390 INFO     [MainThread] Message exchange failed.<br>\n  2015-03-06 17:09:52,391 INFO     [MainThread] Message exchange completed in 0.01s.   </p>\n</blockquote>\n\n<hr>\n\n<h1><strong>UPDATE 2:</strong></h1>\n\n<p>My setup is a bit limited as I was only given 6 machines (5 nodes and 1 controller) to show the capabilities of OpenStack/Landscape so I can't use a dedicated machine for landscape.  I was using the <a href=\"http://askubuntu.com/questions/549809/how-do-i-install-landscape-for-personal-use\">landscape-server-quickstart</a> in a <a href=\"https://help.ubuntu.com/community/LXC\" rel=\"nofollow\">LXC</a> on my MAAS controller so I can quickly blow it away and start over fresh.</p>\n\n<p>so I blew away the landscape setup and set the LXC to a static IP, then modified the DNS (controlled by MAAS) to have the static DNS entry for my landscape server.  Then I installed Landscape Dedicated Server on the LXC using the landscape-server-quickstart method mentioned above.  </p>\n\n<p>After this re-install (mainly to clean out all my debug mess) I was finally able to install OpenStack though landscape.  Thanks.</p>\n"},{"id":554329,"title":"problem with juju on Ubuntu Openstack - Canonical Distribution","body":"<p>During the installation of Ubuntu Openstack - Canonical Distribution (step 4 <a href=\"http://ubuntu.com/download/cloud/install-ubuntu-openstack\" rel=\"nofollow\">ubuntu.com/download/cloud/install-ubuntu-openstack</a>) I've received an error with Juju. \nJuju made the bootstrapping of the node, the ubuntu installer started but at the end of the procedure the node went in shut down. I've tried to resolve that editing the environments.yaml file and added the bootstrap-timeout to 3600, (all vnode use the fastpath-installer), </p>\n\n<p><strong>sudo nano /usr/share/openstack/templates/juju-env/maas.yaml</strong></p>\n\n<p>like that </p>\n\n<pre><code>default: maas\n\nenvironments:\n  maas:\n    type: maas\n    maas-server: 'http://x.x.x.x/MAAS/'\n    maas-oauth: 'LnLE8w3grRK6hLcVgF:xxxxxxx'\n    admin-secret: richardsith\n    default-series: trusty\n    authorized-keys-path: ~/.ssh/id_rsa.pub\n    apt-http-proxy: 'http://x.x.x.x:8000/'\n    lxc-clone: true\n    bootstrap-timeout: 3600\n\n  openstack:\n    type: openstack\n    use-floating-ip: true\n    use-default-secgroup: true\n    network: ubuntu-net\n    auth-url: http://keystoneurl:5000/v2.0/\n    tenant-name: ubuntu\n    region: RegionOne\n    auth-mode: userpass\n    username: ubuntu\n    password: richardsith\n</code></pre>\n\n<p>and then I run the command </p>\n\n<pre><code> $: sudo openstack-install\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/cXy8a.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/2AgwR.png\" alt=\"enter image description here\"></p>\n\n<p>after that the node made the reboot and during the boot I saw that</p>\n\n<p><img src=\"http://i.stack.imgur.com/wz7Bi.png\" alt=\"enter image description here\"></p>\n\n<p>after some minutes the installer went head</p>\n\n<p><img src=\"http://i.stack.imgur.com/YSXBk.png\" alt=\"enter image description here\"></p>\n\n<p>the node means ready but after few seconds went down, and on .commands.log the log is this </p>\n\n<p><a href=\"http://paste.ubuntu.com/9284133/\" rel=\"nofollow\">http://paste.ubuntu.com/9284133/</a></p>\n\n<p>I've also try to make the bootstrapping manually with debug with juju receiving the following log <a href=\"http://paste.ubuntu.com/9342625/\" rel=\"nofollow\">http://paste.ubuntu.com/9342625/</a></p>\n"},{"id":589618,"title":"Installing Landscape and launch the OpenStack Autopilot","body":"<p>Try <a href=\"http://www.ubuntu.com/download/cloud/install-ubuntu-openstack\" rel=\"nofollow\">Installing The Canonical Distribution of Ubuntu Open Stack</a> but stuck on step 4. Setup <em>Landscape</em> and launch the <em>OpenStack Autopilot</em>, it always fails.  Attached is the output of <code>~/.cloud-install/commands.log</code></p>\n\n<p>I was only able to get this far after running on the <em>MaaS</em> host</p>\n\n<pre><code>sudo apt-get install juju-core juju-local\n</code></pre>\n\n<p>Was this a mistake?</p>\n\n<p>Looking at the host that is used, this is the output after <code>openstack-install</code> fails,  along with output of ~<code>/.cloud-install/commands.log</code>:</p>\n\n<ul>\n<li><a href=\"http://pastebin.com/H5GxGNpb\" rel=\"nofollow\">1st attempt</a></li>\n<li><a href=\"http://pastebin.com/yH3eZ8kW\" rel=\"nofollow\">2nd attempt</a></li>\n<li><a href=\"http://pastebin.com/qBtgRVCn\" rel=\"nofollow\">running node</a></li>\n</ul>\n\n<p>Like all nodes in <em>MaaS</em>, they are e3-12xx 16GB RAM, Two 1TB disks and Two NIC with IPMI, MaaS is able to control their power, all are set to PXE boot, with all other options disabled</p>\n"},{"id":578686,"title":"can&#39;t bootstrap in Landscape OpenStack Autopilot","body":"<p>I use MAAS to make landscape openstack outopilot. I use <code>sudo openstack-install</code> but failed. This is my commands.log</p>\n\n<pre><code>INFO • 01-28 11:21:33 [LINE:156, FUNC:&lt;module&gt;] • cloudinstall • cloud-install $\nDEBUG • 01-28 11:21:33 [LINE:111, FUNC:main_loop] • cloudinstall.install • loop$\nINFO • 01-28 11:21:33 [LINE:71, FUNC:status_context] • cloudinstall.core • Get $\nDEBUG • 01-28 11:21:33 [LINE:93, FUNC:_build_widget] • cloudinstall.ui.dialog •$\nDEBUG • 01-28 11:21:39 [LINE:111, FUNC:submit] • cloudinstall.ui.dialog • Callb$\nINFO • 01-28 11:21:39 [LINE:71, FUNC:status_context] • cloudinstall.core • Choo$\nDEBUG • 01-28 11:21:41 [LINE:214, FUNC:submit] • cloudinstall.ui • Callback on $\nINFO • 01-28 11:21:41 [LINE:71, FUNC:status_context] • cloudinstall.core • Plea$\nDEBUG • 01-28 11:21:41 [LINE:93, FUNC:_build_widget] • cloudinstall.ui.dialog •$\nDEBUG • 01-28 11:26:02 [LINE:111, FUNC:submit] • cloudinstall.ui.dialog • Callb$\nDEBUG • 01-28 11:26:02 [LINE:81, FUNC:_save_lds_creds] • cloudinstall.landscape$\nINFO • 01-28 11:26:02 [LINE:71, FUNC:status_context] • cloudinstall.core • Wait$\nDEBUG • 01-28 11:27:13 [LINE:650, FUNC:ssh_genkey] • cloudinstall.utils • ssh k$\nINFO • 01-28 11:27:13 [LINE:71, FUNC:status_context] • cloudinstall.core • Boot$\nDEBUG • 01-28 11:27:13 [LINE:139, FUNC:do_install] • cloudinstall.multi_install$\nDEBUG • 01-28 12:27:34 [LINE:145, FUNC:do_install] • cloudinstall.multi_install$\nDEBUG • 01-28 12:27:34 [LINE:51, FUNC:global_exchandler] • cloudinstall.utils •$\n  File \"/usr/share/openstack/cloudinstall/utils.py\", line 66, in run\n    super().run()\n  File \"/usr/lib/python3.4/threading.py\", line 868, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/share/openstack/cloudinstall/machinewait.py\", line 127, in do_cont$\n    self.installer.do_install()\n  File \"/usr/share/openstack/cloudinstall/multi_install.py\", line 146, in do_in$\n    raise Exception(\"Problem with juju bootstrap.\")\nException: Problem with juju bootstrap.\n</code></pre>\n\n<p>How can I fix it's ?</p>\n"}]}]
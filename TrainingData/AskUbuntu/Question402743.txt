[{"id":402743,"title":"Keyboard layout incorrect on login","body":"<p>My keyboard layout is supposed to be the Swiss-French keyboard (QWERTZ, pretty similar to the English QWERTY). Here is what is really happening:</p>\n\n<ul>\n<li>When the login screen appears, the keyboard layout is correct (QWERTZ). I know that because I can enter my password.</li>\n<li>When I log in, the keyboard layout switches to QWERTY, even though the only configured layout is QWERTZ. The icon in the tray displays <em>Swiss French</em> and there is no other choice in the drop-down menu.</li>\n<li>When I click the already selected option <em>Swiss French</em> in the drop-down menu, it realizes its mistake and gives me the correct QWERTZ keyboard layout.</li>\n</ul>\n\n<p>Additional information:</p>\n\n<ul>\n<li>I'm using 13.10 on an Acer Aspire V3-571G laptop.</li>\n<li>Only my (cursed?) session has this problem on the computer.</li>\n</ul>\n\n<p>Update: appears to persist in 14.04.</p>\n","related_questions":[{"id":547922,"title":"Unrecognized keyboard layout after login","body":"<p>Two of my computers running Ubuntu randomly ignore the configured keyboard layout and fall back to <em>qwerty</em>.</p>\n\n<p>On one computer the configured layout is \"Français\" (French), on the other it is a bépo (dvorak-like layout for French). On both computers the layout was selected at installation time in order to make it the default system-wide. On both computers the login screen always uses the right layout. It's only once that the user is logged in that the keyboard starts working as a <em>qwerty</em></p>\n\n<p>One computer uses <em>LightDM</em> and <em>Unity</em>, the other uses <em>GNOME Display Manager</em> and <em>GNOME 3.8</em>. The problem occurred with <em>Ubuntu 14.04</em> and is still in <em>14.10</em>.</p>\n\n<p>So far I tried to erase my <code>~/.gnome*</code> and <code>~/.config</code> directories and to reinstall the system, without success. I have also ensured that the session settings were copied in the system settings in the control panel.</p>\n\n<p>Do you have any hint to solve this problem?</p>\n\n<p><strong>Edit:</strong> also, even if the layout is incorrect in the session, it is still correct in a terminal opened with <code>ctrl+alt+F1</code>.</p>\n"},{"id":123010,"title":"Keyboard Layouts missing in Keyboard Layout --Precise upgrade","body":"<p>This is from a <a href=\"https://bugs.launchpad.net/ubuntu/+source/console-setup/+bug/881222\" rel=\"nofollow\">bug</a> I reported that never got a response. That was a 11.10 upgrade and now with a Precise upgrade, the issue continues with the Precise upgrade.</p>\n\n<hr>\n\n<h2>Symptom</h2>\n\n<p>I can't add alternative keyboard layouts.</p>\n\n<h2>Steps to reproduce</h2>\n\n<ol>\n<li>Go to Keyboard Layout</li>\n<li>Press the + button</li>\n<li>Nothing at all appears. That is, no selections to choose from.</li>\n</ol>\n\n<p>Realize the + button is faded, despite that the other buttons (- and others) light up.</p>\n\n<h2>Expected results</h2>\n\n<p>Alternative keyboard layouts should appear to choose from.</p>\n\n<hr>\n\n<p>This is what I've done since then without results that stick.  </p>\n\n<p>Thinking that the problem is linked to the fact that I uninstalled other-than-English language support with BleachBit, I did the following:</p>\n\n<ul>\n<li>reinstalled language-selector-gnome</li>\n<li>reinstalled language-pack-en-base</li>\n</ul>\n\n<p>I went back to Keyboard Layout and the + button is still faded.</p>\n\n<p>I even went so far as to add Spanish locale to see if I could add another layout, but this didn't make a difference. I can't add any layouts to the ones I already have installed (US alternative, US International, English Mac, and the International alt/Gr version).</p>\n\n<p>I tried the following:</p>\n\n<pre><code>dpkg-reconfigure locales\nupdate-locale LANG=en_US.UTF-8\n</code></pre>\n\n<p>Although it did seem to update my locale settings, when I went back to Keyboard Layout, the + button was still faded.</p>\n\n<p>I haven't tried <code>dpkg-reconfigure localeconfig</code> because this is not installed and apparently <code>xkeyboard-config</code> is an EOL.</p>\n\n<p><code>xkb-data</code> looks promising from the description in the Software Center:</p>\n\n<blockquote>\n  <p>\"This package contains configuration data used by the X Keyboard Extension (XKB), which allows selection of keyboard layouts when using a graphical interface.\"</p>\n</blockquote>\n\n<p>A quick wajig reinstall <code>xkb-data</code> proved my hopes wrong.</p>\n\n<p>It seems the only thing that temporarily allowed me to install more layouts was <code>sudo dpkg-reconfigure keyboard-configuration</code>. I selected the colemak layout to see if it took. I ran it but by the time I rebooted, the change didn't stick.</p>\n\n<p>I just reinstalled <code>iso-codes</code>, and for a few minutes I saw that the keyboard applet showed  colemak I had installed previously with. I relogged back in and it was gone, but colemak shows in <code>cat /etc/default/keyboard</code> but not in Xorg. A quick <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd> showed me that it did take, but only in console. </p>\n\n<pre><code>XKBMODEL=\"pc104\"\nXKBLAYOUT=\"us\"\nXKBVARIANT=\"colemak\"\nXKBOPTIONS=\"terminate:ctrl_alt_bksp\"\n</code></pre>\n\n<p>Somehow I don't think <code>sudo dpkg-reconfigure keyboard-configuration</code> was meant to (only?) change the console layout.</p>\n\n<p>I'm just reading <code>/etc/default/keyboard</code> and it says the following:</p>\n\n<pre><code># If you change any of the following variables and X is configured to\n# use this file, then the changes will become visible to X only if udev\n# is restarted.  You may need to reboot the system.\n</code></pre>\n\n<p>I can assume that X is listening, at least until I reboot, when changes are thrown away. So, I assume there is a conflict between more than one file or sets of files as to which layouts take predominance.</p>\n\n<p>Any ideas anyone? This one has me stumped.</p>\n\n<p>Oh, and I wonder if this Keyboard input method system menu selection under Language Support has anything to do with this. I would assume no.</p>\n\n<h3>Aside</h3>\n\n<p>Another solution, if I weren't already using my own <code>.Xmodmap</code> file would be to do something like <code>sudo xmodmap /usr/share/xmodmap/xmodmap.uk</code>.</p>\n"},{"id":705517,"title":"Editing keyboard layout in kubuntu 14.04","body":"<p>I am trying to edit my keyboard layout (Russian). \nWhat I've done is edited file: </p>\n\n<pre><code>/usr/share/X11/xkb/symbols/ru\n</code></pre>\n\n<p>I did not make any big change, just replaced one key with another, so I am pretty sure there is no mistake in this file.</p>\n\n<p>But it works only partially. After first changing layout using ALT+SPACE key, my changed layout starts to work as it is was before changes. When I use system tray icon only to change keyboard layout, everything's fine. But after first changing layout using ALT+SPACE key, even tray icon stops working.</p>\n\n<p>So my question is, how to make changed keyboard layout work properly?</p>\n"},{"id":653352,"title":"Unable to switch keyboard to Dvorak layout","body":"<p>Ubuntu 14.04 Trusty, running Xfce4 &amp; xfce4-xkb-plugin. The plugin only shows one layout. When I got to Keyboard Settings -> Layouts, the keyboard model drop down is empty and so are the \"change layout option\" and \"compose key\" dropdowns.\nI'm not able to add or delete keyboard layouts.</p>\n\n<p>If I open the ibus \"Keyboard Input Methods\" -> Input Methods tab, I can add Dvorak layout, but switching to it makes no difference.</p>\n\n<p>I selected ibus as my input method in im-config.\nPlease advice</p>\n"},{"id":574398,"title":"Keyboard layout changes after login","body":"<p>In my system with Ubuntu 14.04 system, I've recognized that my keyboard layout changes after I log in. Normally I use <strong>only</strong> Turkish keyboard layout, I can use it during login screen appears but after that it turns back to English layout even regarding indicator shows \"Tr\", regarding to Turkish.</p>\n\n<p>Each time I have to; </p>\n\n<ul>\n<li>remove Turkish layout</li>\n<li>add English layout (temporarily)</li>\n<li>add Turkish layout again</li>\n<li>remove English one</li>\n</ul>\n\n<p>Could you tell me how can I fix it, what's the reason of the issue?</p>\n"},{"id":537835,"title":"deleted the compiled keyboard layouts","body":"<p>First of all, I'm new to Linux (using Ubuntu, and got 1 day of exp :p) so even though I think I know how to fix the problem, I don't know how to actually do it. </p>\n\n<p>I wanted to change the keyboard layout, so I went into \n/usr/share/X11/xkb/symbols/\nand changed the 'us' file.</p>\n\n<p>first I remapped 'a' to 'q' as a test,\nand then deleted the pre-compiled (?) layouts in /var/lib/xkb/</p>\n\n<p>To see the effect I should restart Xorg, but I have no idea how to do that, so I just restarted the computer. </p>\n\n<p>The test worked perfectly, so I went on and tried to remap '-' to altgr. \nafter that I rebooted again, but this time the /var/lib/xkb/ folder was empty and my keyboard did not work at all.</p>\n\n<p>I imagine 'altgr' is an invalid keyword, and it throws an error when trying to compile the new layouts, and thats the reason the folder is empty. </p>\n\n<p>How do I fix this? I saved the broken version of the 'us' file on the Desktop, and the original working compiled files as well, but I can't type my password in, in the Terminal without a keyboard, so I don't know how to move the working compiled files from the Desktop, or delete the broken 'us' script. </p>\n\n<p>I imagine by deleting the broken 'us' script I could pick another layout language, and it would compile without an error.</p>\n\n<p>As I write the last sentence I realize I might be able to disable the US layout and only use the Danish one. I'll try that and delete this post if it works (doubt it)</p>\n\n<p>Hope someone can help me out. This is written on the live CD. </p>\n\n<p>@dschinn1001: \nI use the newest ubuntu version, think it's 14.04 with unity.\nthe problem is not finding a working layout. What I want is to use the dvorak layout, but change it, so '-' work as a modifier key, so I can press '- plus a' and get '$'.</p>\n\n<p>I don't write here to get help with that, I'm sure I can figure that out myself with a bit of practice. What I want is a way to do this -> 'sudo mv old_dir new_dir' or whatever the real command is, but without a working keyboard. I can write the text using googles on-board keyboard, and copy/past but I can't press enter(in the Terminal), and i can't type my sudo password. I found a command I could C/P to into the Terminal that worked as 'enter' but it didn't work with my sudo password</p>\n\n<ul>\n<li>Lukas Hansen</li>\n</ul>\n"},{"id":486444,"title":"How do you change keyboard layouts from the login screen in Xubuntu?","body":"<p>I've set up multiple user accounts in Xubuntu 14.04. I (the admin) am a dvorak user so I have English US dvorak as the default layout, but the other user is a qwerty user. I've added English US standard as an optional layout from within my account, and as the only layout from within the other user's account. However, dvorak seems to be the only layout ever available at the login or lock screen page (no matter who's account is selected, who was last logged in, etc). There's a drop-down menu that lists English US, English UK, English Canada, etc, at the login screen, but they all seem to be set to dvorak. How do I add an option to switch between the two layouts at the login screen?</p>\n"},{"id":244849,"title":"Cannot login to Ubuntu 12.04 after upgrade with weird keyboard layout","body":"<p>Well I just upgraded Ubuntu 11.10 to Ubuntu 12.04 LTS and surprisingly enough I cannot login because the password is not correct. I realized that the reason is that the keyboard layout is Farsi and therefore it does not accept it. Farsi layout was my third choice of layout in Ubuntu 11.10 but now it is the only choice.</p>\n\n<p>What are the options to bypass this issue?</p>\n"},{"id":181254,"title":"Is there a way to completely remove particular keyboard layout from my Xubuntu?","body":"<p>I have a problem with keyboard layouts in my Xubuntu. It's described in <a href=\"http://askubuntu.com/questions/177525/keyboard-layouts-plugin-forgets-settings-unable-find-workaround/177709\">my previous question</a>. I tried many settings and special commands and it seemed to work (that is why I selected my previous question as solved), but then I realized every now and then (no idea when exactly and why) it switches to <strong>Czech QWERTZ</strong> again. After a while, it's back to Czech QWERTY. That's insane and totally against logic. My setting is <strong>EN US / CZ QWERTY</strong> everywhere.</p>\n\n<p>I realized there is probably no peaceful solution. So I ask: <strong>Is there a way to completely remove Czech QWERTZ keyboard layout from my computer</strong>? Send it to a black hole at the opposite side of universe or something similar?</p>\n"},{"id":60504,"title":"How to change the keyboard-layout in the console, with special characters?","body":"<p>I want to use the dvorak-fr-bepo keymap in the console (tty1 to 6) when I type <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>F1</kbd>. In particular, I need the special characters as \"Ê\" or \"ç\" since there are some in my password.</p>\n\n<p>So directly when I installed Ubuntu, I chose for the Bépo layout when asked.</p>\n\n<p>Nonetheless, the consequence is that I am able to type basic characters, but not special ones. For instance, when I typed <kbd>B</kbd><kbd>É</kbd><kbd>P</kbd><kbd>O</kbd> I got only \"bpo\".\nOn the contrary, when I used to use a French Azerty layout, I could type the special characters.</p>\n\n<p>How do I definitely set a different keyboard-layout in the console?</p>\n"}]}]
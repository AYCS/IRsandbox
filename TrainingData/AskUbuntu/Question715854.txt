[{"id":715854,"title":"mdmsetup returns exit status 1","body":"<p>I'd like to install and use <code>mdm</code> over <code>lightdm</code> with Cinnamon.</p>\n\n<p>I've installed <code>mdm</code>, but <code>gksudo mdmsetup</code> just opens a dialogue requesting authentication, then immediately exits with code <code>1</code>. There's nothing in any system logs.</p>\n\n<p>Am I missing a package, or should I configure by hand?</p>\n","related_questions":[{"id":682392,"title":"How do I restore sddm after corrupted update?","body":"<p>A week ago I had a power failure in the middle of an upgrade.  System now has um ... \"issues.\"  Below are the configuration, status, symptoms, etc.  Please help however you can.</p>\n\n<p>System:  kubuntu 15.04, kernel ...-30, 16gb ram, UEFI boot (dual boot, still win 8) with grub, dual nvidia 970 for video and sound to a 4k monitor.</p>\n\n<p>Symptoms:<br>\nOriginally it was hosed. I reinstalled linux-generic to get it to wake up.  It threw lots of \"failed to load kernel module\" and a reinstall of systemd took care of that.  Worked my way through the boot log messages so that now it comes up in single-user mode fine.</p>\n\n<p>But sddm dies.  It tries to come up, but throws segmentation error (11).  </p>\n\n<p>The log messages are:</p>\n\n<pre><code>sddm.log--\n   * Unrecognized OpenGL Version\n   * Cannot create children for parents of a different thread\n   * org.freedescktop.Udisk2 had owner ''\n\nkern.log--\n   * ... not configured to drive a VGA console\n</code></pre>\n\n<p>Other errors:\nFrequently get <code>Error Initializing Authority ... g-io-err-quark 1</code>.  By frequently, I mean when running commands like <code>systemctl</code> or <code>reboot</code>.</p>\n\n<p>I tried several things that have been suggested here, and none of them have affected the startx problem:</p>\n\n<ul>\n<li><p>start over with a boot disk (got the infamous \"wubi\" problem, and figured I was better off working with what I had)</p></li>\n<li><p>fix fstab  (cleaned up boot log)</p></li>\n<li><p>update QT  </p></li>\n<li>update Mesa</li>\n<li>re-install nvidia-346  </li>\n<li>update policykit-1</li>\n<li><p>update apport</p></li>\n<li><p>manually start sddm (no effect)</p></li>\n<li>install lightdm (starts x but won't log me on)</li>\n<li>install xdm (won't bring up any usable window-forced reboot)</li>\n</ul>\n\n<p>None of that has made any difference.  Sddm still fails and I still get the above-listed errors.</p>\n\n<p>Throwing myself at your mercy.  What am I missing?  What to try next?</p>\n"},{"id":639109,"title":"Minimal Display Manager sought","body":"<p>After getting a 3G modem for my laptop, I've started using Network Manager to manage my connections, and I quite like it. However, it is slightly annoying to have to be root to make any changes, especially since the applications (nm-applet, nm-connection-editor) do not ask for elevation - I have to launch them manually with \"sudo\". If I understand correctly this is because my minimal install lacks a login manager (I log in at a prompt and <code>startx</code>) and thus DBus privileges are not being set. So I tried installing both LightDM and GDM, but <strong>my god the bl0at</strong>! Pulseaudio required for DBus? <em>I don't think so.</em> Here's the shocking package list generated by <code>apt-get install lightdm</code>: </p>\n\n<pre><code>The following NEW packages will be installed\n  apg cheese-common cups-pk-helper dialog evolution-data-server\n  evolution-data-server-common evolution-data-server-online-accounts geoclue\n  geoclue-ubuntu-geoip gir1.2-gnomebluetooth-1.0 gir1.2-ibus-1.0 gkbd-capplet\n  gnome-bluetooth gnome-control-center-shared-data gnome-desktop3-data\n  gnome-screensaver gnome-session-bin gnome-settings-daemon-schemas\n  gnome-user-share gsettings-ubuntu-schemas gstreamer1.0-clutter hwdata ibus\n  ibus-gtk ibus-gtk3 im-config indicator-bluetooth indicator-datetime\n  indicator-keyboard indicator-power indicator-session indicator-sound\n  libaccount-plugin-1.0-0 libaccount-plugin-generic-oauth\n  libaccount-plugin-google libaccounts-glib0 libaccounts-qt5-1 libcamel-1.2-45\n  libcanberra-pulse libcheese-gtk23 libcheese7 libclutter-1.0-0\n  libclutter-1.0-common libclutter-gst-2.0-0 libclutter-gtk-1.0-0\n  libcogl-common libcogl-pango15 libcogl15 libebackend-1.2-7 libebook-1.2-14\n  libebook-contacts-1.2-0 libecal-1.2-16 libedata-book-1.2-20\n  libedata-cal-1.2-23 libedataserver-1.2-18 libfftw3-single3 libgdata-common\n  libgdata13 libgnome-desktop-3-7 libgnomekbd-common libgnomekbd8\n  libgoa-1.0-0b libgoa-1.0-common libgweather-3-6 libgweather-common\n  libibus-1.0-5 liblightdm-gobject-1-0 liboauth0 libopenobex1 libpulsedsp\n  libqt5core5a libqt5dbus5 libqt5gui5 libqt5network5 libqt5opengl5\n  libqt5positioning5 libqt5printsupport5 libqt5qml5 libqt5quick5\n  libqt5sensors5 libqt5sql5 libqt5sql5-sqlite libqt5test5 libqt5webkit5\n  libqt5widgets5 libqt5xml5 librest-0.7-0 libsignon-extension1 libsignon-glib1\n  libsignon-plugins-common1 libsignon-qt5-1 libsystemd-journal0\n  libtimezonemap1 libunity-control-center1 liburl-dispatcher1 libwacom-common\n  libwacom2 libxcb-icccm4 libxcb-image0 libxcb-render-util0 libxcb-xkb1\n  libxkbcommon-x11-0 lightdm mousetweaks nautilus-data obex-data-server\n  obexd-client pulseaudio pulseaudio-module-x11 pulseaudio-utils rtkit\n  session-migration signon-keyring-extension signon-plugin-oauth2 signon-ui\n  signond ubuntu-system-service unity-control-center\n  unity-control-center-signon unity-greeter unity-settings-daemon\n0 to upgrade, 121 to newly install, 0 to remove and 47 not to upgrade.\nNeed to get 18.7 MB/32.1 MB of archives.\nAfter this operation, 128 MB of additional disk space will be used.\nDo you want to continue? [Y/n] Most definitely NOT!\nAbort.\n</code></pre>\n\n<p>I don't want any of those things, thank you! Surely there must be a better way to gain permissions for editing Network Manager config? </p>\n\n<p><strong>Edit:</strong> I should add that I tried changing <code>/etc/dbus-1/system.d/org.freedesktop.NetworkManager.conf</code> from <code>at_console=\"true\"</code> to <code>group=\"netdev\"</code>, but that seemed to have no effect. Yes, I am a member of <code>netdev</code>. </p>\n\n<p><strong>Edit:</strong> And the irony of seeing a <code>libclutter</code> in the list is not lost on me. This is clearly a terrible, awful, cluttery mess... What were they thinking? </p>\n"},{"id":596907,"title":"Login Loop - unable to run unity - not Xauthority ownership but may be related to display?","body":"<p>All,  I was trying to get VNC working, making lots of changes that I don't recall now when I discovered after a restart that I could not login to Ubuntu 14.04. I believe I authenticate ok, but get returned to the login screen. I can log in as Guest and via Alt-F1 console.</p>\n\n<p>I Googled the errors and tried lots of things but without success and am now clueless.  see the output below.  Note that XFCE does load ok, but I want to get back my lightdm.</p>\n\n<p>I could really do with some advice and explanation as to what is going on here.\nRegards\nMartin</p>\n\n<blockquote>\n  <p>-rwxr-xr-x    1 martin martin     50 Mar 14 22:13 .Xauthority*\n  (I went a little overboard granting permissions for this file - just in case.)</p>\n  \n  <p>martin@thrio:~$ cat .xsession-errors<br>\n  Script for ibus started at run_im.<br>\n  Script for auto started at run_im.<br>\n  Script for default started at run_im.<br>\n  init: gnome-session (Unity) main process (2745) terminated with status 1<br>\n  init: Disconnected from notified D-Bus bus<br>\n  init: logrotate main process (2596) killed by TERM signal<br>\n  init: update-notifier-crash (/var/crash/_usr_lib_ibus_ibus-ui-gtk3.1000.crash) main process > (2645) killed by TERM signal<br>\n  init: update-notifier-crash (/var/crash/_usr_lib_unity_unity-panel-service.1000.crash) main > process (2646) killed by TERM signal<br>\n  init: upstart-dbus-session-bridge main process (2697) terminated with status 1<br>\n  init: xsession-init main process (2705) killed by TERM signal<br>\n  init: hud main process (2715) killed by TERM signal<br>\n  init: unity-panel-service main process (2753) killed by TERM signal<br>\n  init: window-stack-bridge main process (2620) killed by KILL signal  </p>\n  \n  <p>martin@thrio:~$ unity --replace<br>\n  stop: Unknown job: unity-panel-service<br>\n  start: Unknown job: unity-panel-service<br>\n  compiz (core) - Info: Loading plugin: core<br>\n  compiz (core) - Info: Starting plugin: core<br>\n  Invalid MIT-MAGIC-COOKIE-1 keycompiz (core) - Fatal: Couldn't open display :0<br>\n  compiz (core) - Info: Stopping plugin: core<br>\n  compiz (core) - Info: Unloading plugin: core  </p>\n</blockquote>\n\n<p>It may be related to the display setting: I was originally trying to get VNC to work and trying to turn of the default encryption which appears not to work and some of the instructions I was trying to follow related to the display </p>\n\n<p>From /var/log/lightdm/lightdm.log  </p>\n\n<pre><code>[+522.72s] DEBUG: Session pid=2785: Authenticate result for user martin: Success  \n[+522.72s] DEBUG: Session pid=2785: User martin authorized  \n[+522.72s] DEBUG: Session pid=2785: Greeter requests session Ubuntu  \n522.72s] DEBUG: Seat: Stopping greeter; display server will be re-used for user session  \n[+522.72s] DEBUG: Session pid=2785: Sending SIGTERM  \n[+522.73s] DEBUG: Session pid=2785: Exited with return value 0  \n[+522.73s] DEBUG: Seat: Session stopped  \n[+522.73s] DEBUG: Seat: Greeter stopped, running session  \n[+522.73s] DEBUG: Registering session with bus path /org/freedesktop/DisplayManager/Session1  \n[+522.73s] DEBUG: Session pid=2845: Running command /usr/sbin/lightdm-session gnome-session   --session=Ubuntu  \n[+522.73s] DEBUG: Creating shared data directory /var/lib/lightdm-data/martin  \n[+522.73s] DEBUG: Session pid=2845: Logging to .xsession-errors  \n[+522.74s] DEBUG: Activating VT 7  \n[+522.74s] DEBUG: Activating login1 session c4  \n[+524.24s] DEBUG: User /org/freedesktop/Accounts/User1000 changed  \n[+528.25s] DEBUG: Session pid=2845: Exited with return value 0  \n[+528.25s] DEBUG: Seat: Session stopped  \n[+528.25s] DEBUG: Seat: Stopping display server, no sessions require it  \n[+528.25s] DEBUG: Sending signal 15 to process 2778  \n[+528.36s] DEBUG: Process 2778 exited with return value 0  \n[+528.36s] DEBUG: DisplayServer x-0: X server stopped  \n[+528.36s] DEBUG: Releasing VT 7  \n[+528.36s] DEBUG: DisplayServer x-0: Removing X server authority /var/run/lightdm/root/:0  \n[+528.36s] DEBUG: Seat: Display server stopped  \n[+528.36s] DEBUG: Seat: Active display server stopped, starting greeter  \n[+528.36s] DEBUG: Seat: Creating greeter session  \n[+528.36s] DEBUG: Seat: Creating display server of type x  \n[+528.36s] DEBUG: Using VT 7  \n[+528.36s] DEBUG: Seat: Starting local X display on VT 7  \n[+528.36s] DEBUG: DisplayServer x-0: Logging to /var/log/lightdm/x-0.log  \n[+528.36s] DEBUG: DisplayServer x-0: Writing X server authority to /var/run/lightdm/root/:0  \n[+528.36s] DEBUG: DisplayServer x-0: Launching X Server  \n[+528.36s] DEBUG: Launching process 3516: /usr/bin/X -core :0 -seat seat0   -auth /var/run/lightdm/root/:0 -nolisten tcp vt7 -novtswitch  \n[+528.36s] DEBUG: DisplayServer x-0: Waiting for ready signal from X server :0  \n[+528.43s] DEBUG: Got signal 10 from process 3516  \n[+528.43s] DEBUG: DisplayServer x-0: Got signal from X server :0  \n[+528.43s] DEBUG: DisplayServer x-0: Connecting to XServer :0  \n[+528.43s] DEBUG: Seat: Display server ready, starting session authentication  \n[+528.43s] DEBUG: Session pid=3523: Started with service 'lightdm-greeter', username 'lightdm'  \n[+528.44s] DEBUG: Session pid=3523: Authentication complete with return value 0: Success  \n[+528.44s] DEBUG: Seat: Session authenticated, running command  \n[+528.44s] DEBUG: Session pid=3523: Running command /usr/lib/lightdm/lightdm-greeter-  session /usr/sbin/unity-greeter  \n[+528.44s] DEBUG: Creating shared data directory /var/lib/lightdm-data/lightdm  \n[+528.44s] DEBUG: Session pid=3523: Logging to /var/log/lightdm/x-0-greeter.log  \n[+528.45s] DEBUG: Activating VT 7  \n[+528.45s] DEBUG: Activating login1 session c5  \n[+528.57s] DEBUG: Session pid=3523: Greeter connected version=1.10.4  \n[+528.69s] DEBUG: Session pid=3523: Greeter start authentication for martin  \n[+528.69s] DEBUG: Session pid=3583: Started with service 'lightdm', username 'martin'  \n[+528.70s] DEBUG: Session pid=3583: Got 1 message(s) from PAM  \n[+528.70s] DEBUG: Session pid=3523: Prompt greeter with 1 message(s)  \n[+529.73s] DEBUG: User /org/freedesktop/Accounts/User1000 changed  \n\nmartin@thrio:~$ uname -r  \n3.13.0-46-generic  \nmartin@thrio:~$ lsmod|grep fglrx  \nmartin@thrio:~$   \n\nmartin@thrio:/var/log$ lshw -c video  \nWARNING: you should run this program as super-user.  \n  *-display              \n       description: VGA compatible controller  \n       product: Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller  \n       vendor: Intel Corporation  \n       physical id: 2  \n       bus info: pci@0000:00:02.0  \n       version: 06  \n       width: 64 bits  \n       clock: 33MHz  \n       capabilities: vga_controller bus_master cap_list rom  \n       configuration: driver=i915 latency=0  \n       resources: irq:48 memory:f7400000-f77fffff memory:e0000000-efffffff ioport:f000  (size=64)  \nWARNING: output may be incomplete or inaccurate, you should run this program as super-user.  \nmartin@thrio:/var/log$ modinfo  \nmodinfo: ERROR: missing module or filename.  \n</code></pre>\n\n<p><strong>Additional info following review of</strong> \n</p>\n\n<p><em>\"Have you installed drivers some? Could you connect from some TTY (Ctrl+Alt+F1..F6) with any user?\"</em>\nNo drivers - yes to TTY login  </p>\n\n<p><em>\"Moved all files there to my /home dir (to have a copy) and tried to login using kdm (I use Kubuntu). To select kdm as login screen, I executed sudo dpkg-reconfigure lightdm and selected kdm. With kdm you can select a previous session or a default one. This was the way to go.\"</em>  </p>\n\n<p>installed KDM (sudo apt-get install KDM) - during install I had an option to choose KDM or lightDM, chose lightDM. Rebooted - no change<br>\nmoved home dir /home/martin to /home/martinbak and rebooted - no change  </p>\n\n<pre><code>martin@thrio:~$ sudo dpkg-reconfigure kdm and rebooted - entered KDM shell - error \"cannot enter home directory. using /.\" - still would not log in .  \nmartin@thrio:~$ sudo dpkg-reconfigure lightdm and switched back to lightdm - rebooted - same login loop  \nmartin@thrio:/home$ sudo mv martinbak martin and rebooted.  \n</code></pre>\n\n<p>Chown .Xauthority - This was checked previously and is correct<br>\nChown /tmp - This was checked previously and is correct<br>\n<em>\" If not both, I'd recommend you either<br>\n1.dpkg-reconfigure lightdm<br>\n2.or uninstall, reinstall it.\"</em>  </p>\n\n<p>dpkg-reconfigure has been tried<br>\nmartin@thrio:~$ sudo apt-get purge lightdm<br>\n\"Removing lightdm (1.10.4-0ubuntu2) ...<br>\nPurging configuration files for lightdm (1.10.4-0ubuntu2) ...<br>\nRemoving user <code>lightdm' ...<br>\nWarning: group</code>lightdm' has no more members.<br>\n**userdel: user lightdm is currently used by process 2092<br>\n/usr/sbin/deluser: `/usr/sbin/userdel lightdm' returned error code 8. Exiting.<br>\ndpkg: error processing package lightdm (--purge):<br>\n subprocess installed post-removal script returned error exit status 1<br>\nProcessing triggers for man-db (2.6.7.1-1ubuntu1) ...<br>\nErrors were encountered while processing:<br>\n lightdm<br>\nE: Sub-process /usr/bin/dpkg returned an error code (1)\"  **\nmartin@thrio:~$ sudo apt-get install lightdm  </p>\n\n<p>It does not look like a clean removal and re-install.  </p>\n\n<p><em>\"After almost giving up I looked at the .xsession-errors and noticed I had a typo in my .profile\"</em>  </p>\n\n<p>I have not edited this file but if there was a problem I would not know what I was looking for.  </p>\n\n<pre><code>`martin@thrio:~$ cat .profile  \n# ~/.profile: executed by the command interpreter for login shells.  \n# This file is not read by bash(1), if ~/.bash_profile or ~/.bash_login  \n# exists.  \n# see /usr/share/doc/bash/examples/startup-files for examples.  \n# the files are located in the bash-doc package.  \n\n# the default umask is set in /etc/profile; for setting the umask  \n# for ssh logins, install and configure the libpam-umask package.  \n#umask 022  \n\n# if running bash  \nif [ -n \"$BASH_VERSION\" ]; then  \n    # include .bashrc if it exists  \n    if [ -f \"$HOME/.bashrc\" ]; then  \n        . \"$HOME/.bashrc\"  \n    fi  \nfi  \n\n# set PATH so it includes user's private bin if it exists  \nif [ -d \"$HOME/bin\" ] ; then  \n    PATH=\"$HOME/bin:$PATH\"  \nfi  \nmartin@thrio:~$ ` \n\n_sudo mv ~/.Xauthority ~/.Xauthority.backup  \nsudo service lightdm restart_  \n\nmartin@thrio:~$ mv ~/.Xauthority ~/.Xauthority.bak  \nmartin@thrio:~$ sudo service lightdm restart  \n[sudo] password for martin:  \nlightdm stop/waiting  \nlightdm start/running, process 3032  \nmartin@thrio:~$  \n</code></pre>\n\n<p>still stuck in login loop  </p>\n\n<p><em>\"Reinstalled xubuntu-desktop and it's fixed now\"</em>  </p>\n\n<pre><code>martin@thrio:~$ sudo apt-get purge xubuntu-desktop  \nReading package lists... Done  \nBuilding dependency tree  \nReading state information... Done  \nPackage 'xubuntu-desktop' is not installed, so not removed  \n0 to upgrade, 0 to newly install, 0 to remove and 0 not to upgrade.  \nmartin@thrio:~$  \n</code></pre>\n\n<p>_\"Then, type sudo apt-get install gdm . Let it install and type sudo dpkg-reconfigure gdm and follow the prompts to set it as your login manager.<br>\nPress Ctrl + Alt+ F7 to get back to the login screen which should now look different. Does logging in work? If it does, your problem is solved!  </p>\n\n<p>If it doesn't, go back to the fullscreen terminal and type sudo dpkg-reconfigure lightdm to set LigthDM as you login manager again. Now you know that this is a problem with your graphics drivers  for sure.\"_  </p>\n\n<p><code>sudo apt-get install gdm</code> and restarted - login loop.  (So this suggests a problem with graphics driver - recall that I had   </p>\n\n<pre><code>martin@thrio:~$ lsmod|grep fglrx  \nmartin@thrio:~$  \n</code></pre>\n\n<p>Should I get some output for this search?   </p>\n"},{"id":624012,"title":"LightDM 14.10: Desktop showing but status bar and quick launch bar not showing","body":"<p>When I boot into my main account the status bar and the quick launch bar are not showing (the desktop with the icons work correctly though). When I boot with the guest account everything works as expected. I tried to start/stop lightdm, reset settings but none of these resolved my problem. What are the steps to repair LightDM?</p>\n"},{"id":65856,"title":"How does one exit the X server?","body":"<p>The command <code>sudo service gdm stop</code> would successfully disable the X server in Ubuntu 11.04 temporarily. </p>\n\n<p>However, this same command no longer works in Ubuntu 11.10, because \"gdm\" is an \"unrecognized service\" according to Terminal. How, then, do I disable the X server in Ubuntu 11.10?</p>\n"},{"id":398966,"title":"How to return the login screen of the original unity ubuntu?","body":"<p>I've installed the LightDM GTK+ Greeter 1.7.0 as below</p>\n\n<pre><code>sudo add-apt-repository ppa:lightdm-gtk-greeter-team/stable\nsudo apt-get update\nsudo apt-get install lightdm-gtk-greeter\n</code></pre>\n\n<p>(<a href=\"http://www.smdavis.us/2013/12/28/lightdm-gtk-greeter-1-7-0-released/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=lightdm-gtk-greeter-1-7-0-released&amp;utm_reader=feedly\" rel=\"nofollow\">http://www.smdavis.us/2013/12/28/lightdm-gtk-greeter-1-7-0-released/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=lightdm-gtk-greeter-1-7-0-released&amp;utm_reader=feedly</a>)</p>\n\n<p>Now I want to return to the original login screen of unity ubuntu. Please show me a way.\nTasks done but have no result:</p>\n\n<pre><code>sudo ppa-purge ppa:lightdm-gtk-greeter-team/stable.\nsudo apt-fast remove lightdm-gtk-greeter\nsudo apt-fast install --reinstall lightdm.\n</code></pre>\n"},{"id":116830,"title":"How to return to the GUI?","body":"<p>I am very new to Linux and Ubuntu. I use Ubuntu 11.10.</p>\n\n<p>I was trying to exit the X server (in order to install some Nvidia drivers) and I typed in the terminal:</p>\n\n<pre><code>sudo service lightdm stop\n</code></pre>\n\n<p>How can I return to the Ubuntu interface?</p>\n"},{"id":278762,"title":"ubuntu 12.04 login returns to login","body":"<p>This is not a resolution issue,  I am on a netbook, that has been working fine for years,  I have no nvidia graphics,  guest user works just fine with the existing graphics and adding a new user has worked just fine with the existing graphics.</p>\n\n<p>I've tried all but one of the answers in the resolution (create new user and copy everything over, workaround).</p>\n\n<p>12.04 installed on my dell notebook.  Has been running just great for ages, prior to 12.04 it was running the previous LTS ubuntu since mid2010.  Everything worked just fine.</p>\n\n<p>Yesterday could not login from the greeter screen, lightdm.  Login name/password is accepted but after a second or so returns to login screen.</p>\n\n<p>I can login a guest session just fine and all works OK there, unity working well, no graphic problems, all O.K..  And when there using ctrl/alt/F1 get to a prompt and login to CLI also just fine, see all my files in the encryptfs home directory, so password is OK.</p>\n\n<p>because all is OK on the new account and the guest session I don't think there is a problem with Xorg.conf.</p>\n\n<p>I've deleted .Xauthority, no joy.</p>\n\n<p>My home folder has the correct permissions drwxr-xr-x and owned by me.</p>\n\n<p>The wallpaper is owned by me but readable by all.</p>\n\n<p>My hard disc, whilst quite full, still has over 5GB available df -h</p>\n\n<p>I've tried sudo dpkg --configure -a; and \nsudo apt-get update;  I don't want to upgrade from 12.04.</p>\n\n<p>I dont have nvidia so am not going to try their drivers.  The existing driver works fine on the new account.</p>\n\n<p>I don't want to follow the password reset procedure as the password is not a problem, works fine on tty and no Invalid Password message comes when I try gui login.</p>\n\n<p>I suspect that there is something amiss with gdm, perhaps a permissions issue when logging in as myself. here is :0-greeter.log</p>\n\n<pre><code>gnome-session[2146]: WARNING: Failed to start app: Unable to start application: Failed to execute child process \"/usr/lib/at-spi/at-spi-registryd\" (No such file or directory)\n(gnome-settings-daemon:2152): color-plugin-WARNING **: failed to create directory on startup: Error creating directory: Permission denied\ngnome-session[2146]: WARNING: Failed to start app: Unable to start application: Failed to execute child process \"gnome-power-manager\" (No such file or directory)\n(gnome-settings-daemon:2152): color-plugin-WARNING **: failed to create profile from EDID data: Error creating directory: Permission denied\n(gnome-settings-daemon:2152): color-plugin-WARNING **: failed to create profile from EDID data: Error creating directory: Permission denied\ngdm-simple-greeter[2177]: Gtk-WARNING: Overriding tab label for notebook\ngdm-simple-greeter[2177]: Gtk-WARNING: Overriding tab label for notebook\ngdm-simple-greeter[2177]: Gtk-WARNING: Overriding tab label for notebook\ngdm-simple-greeter[2177]: Gtk-WARNING: Overriding tab label for notebook\ngdm-simple-greeter[2177]: Gtk-WARNING: Overriding tab label for notebook\ngdm-simple-greeter[2177]: Gtk-WARNING: /build/buildd/gtk+3.0-3.4.2/./gtk/gtkwidget.c:7117: widget not within a GtkWindow\ngdm-simple-greeter[2177]: Gtk-CRITICAL: gtk_widget_get_preferred_height_for_width: assertion `width &gt;= 0' failed\ngdm-simple-greeter[2177]: Gtk-CRITICAL: gtk_widget_get_preferred_height_for_width: assertion `width &gt;= 0' failed\ngdm-simple-greeter[2177]: Gtk-WARNING: gtk_widget_size_allocate(): attempt to allocate widget with width -47 and height -47\nWindow manager warning: Buggy client sent a _NET_ACTIVE_WINDOW message with a timestamp of 0 for 0x1000007 (Login Wind)\nWindow manager warning: meta_window_activate called by a pager with a 0 timestamp; the pager needs to be fixed.\ngdm-simple-greeter[2177]: Gtk-CRITICAL: gtk_widget_get_preferred_height_for_width: assertion `width &gt;= 0' failed\ngdm-simple-greeter[2177]: Gtk-CRITICAL: gtk_widget_get_preferred_height_for_width: assertion `width &gt;= 0' failed\ngdm-simple-greeter[2177]: Gtk-WARNING: gtk_widget_size_allocate(): attempt to allocate widget with width -47 and height -47\ngdm-simple-greeter[2177]: CRITICAL: get_column_number: assertion `i &lt; gtk_tree_view_get_n_columns (treeview)' failed\ngdm-simple-greeter[2177]: CRITICAL: get_column_number: assertion `i &lt; gtk_tree_view_get_n_columns (treeview)' failed\nWindow manager warning: Buggy client sent a _NET_ACTIVE_WINDOW message with a timestamp of 0 for 0x1000007 (Login Wind)\nWindow manager warning: meta_window_activate called by a pager with a 0 timestamp; the pager needs to be fixed.\nWindow manager warning: Buggy client sent a _NET_ACTIVE_WINDOW message with a timestamp of 0 for 0x1000007 (Login Wind)\nWindow manager warning: meta_window_activate called by a pager with a 0 timestamp; the pager needs to be fixed.\nWindow manager warning: Buggy client sent a _NET_ACTIVE_WINDOW message with a timestamp of 0 for 0x1000007 (Login Wind)\nWindow manager warning: meta_window_activate called by a pager with a 0 timestamp; the pager needs to be fixed.\nWindow manager warning: Buggy client sent a _NET_ACTIVE_WINDOW message with a timestamp of 0 for 0x1000007 (Login Wind)\nWindow manager warning: meta_window_activate called by a pager with a 0 timestamp; the pager needs to be fixed.\nWindow manager warning: CurrentTime used to choose focus window; focus window may not be correct.\nWindow manager warning: Got a request to focus the no_focus_window with a timestamp of 0.  This shouldn't happen!\n** (gnome-settings-daemon:2152): WARNING **: Name taken or bus went away - shutting down\ng_dbus_connection_real_closed: Remote peer vanished with error: Underlying GIOStream returned 0 bytes on an async read (g-io-error-quark, 0). Exiting.\ngdm-simple-greeter[2177]: Gdk-WARNING: gdm-simple-greeter: Fatal IO error 11 (Resource temporarily unavailable) on X server :0.\n(gnome-settings-daemon:2152): libappindicator-WARNING **: Unable to send signal for NewStatus: The connection is closed\n(gnome-settings-daemon:2152): Gdk-WARNING **: gnome-settings-daemon: Fatal IO error 0 (Success) on X server :0.\n</code></pre>\n\n<p>Here's a section from lightdm.log</p>\n\n<pre><code>[+11.23s] DEBUG: Started session 1830 with service 'lightdm', username 'chris'\n[+11.25s] DEBUG: Session 1830 got 1 message(s) from PAM\n[+11.25s] DEBUG: Prompt greeter with 1 message(s)\n[+13.58s] DEBUG: Continue authentication\n[+18.58s] DEBUG: Session 1830 authentication complete with return value 0: Success\n[+18.58s] DEBUG: Authenticate result for user chris: Success\n[+18.62s] DEBUG: User chris authorized\n[+18.64s] DEBUG: Greeter requests session ubuntu-2d\n[+18.64s] DEBUG: Using session ubuntu-2d\n[+18.64s] DEBUG: Stopping greeter\n[+18.64s] DEBUG: Session 1168: Sending SIGTERM\n[+18.77s] DEBUG: Session 1168 exited with return value 0\n[+18.77s] DEBUG: Greeter quit\n[+18.82s] DEBUG: Dropping privileges to uid 1000\n[+18.82s] DEBUG: Restoring privileges\n[+18.89s] DEBUG: Dropping privileges to uid 1000\n[+18.89s] DEBUG: Writing /home/chris/.dmrc\n[+18.89s] DEBUG: Restoring privileges\n[+18.98s] DEBUG: Starting session ubuntu-2d as user chris\n[+18.98s] DEBUG: Session 1830 running command /usr/sbin/lightdm-session gnome-session --session=ubuntu-2d\n[+19.12s] DEBUG: Registering session with bus path /org/freedesktop/DisplayManager/Session0\n[+19.12s] DEBUG: Greeter closed communication channel\n[+22.35s] DEBUG: Session 1830 exited with return value 0\n[+22.35s] DEBUG: User session quit\n[+22.35s] DEBUG: Stopping display\n</code></pre>\n\n<p>The bit around 19s interests me,  an Ubuntu-2d session starts and then vary rapidly exits.</p>\n\n<p>Here's  /var/log/lightgm/x-0-greeter.log</p>\n\n<pre><code>Activating service name='org.a11y.atspi.Registry'\n[+0.00s] DEBUG: unity-greeter.vala:895: Starting unity-greeter 0.2.9 UID=118 LANG=en_GB.UTF-8\n\n[+0.00s] DEBUG: unity-greeter.vala:898: Setting cursor\n[+0.00s] DEBUG: unity-greeter.vala:902: Creating background surface\n[+0.00s] DEBUG: unity-greeter.vala:905: Loading command line options\n[+0.00s] DEBUG: unity-greeter.vala:933: Setting GTK+ settings\nSuccessfully activated service 'org.a11y.atspi.Registry'\n\n** (at-spi2-registryd:1979): WARNING **: Failed to register client: GDBus.Error:org.freedesktop.DBus.Error.ServiceUnknown: The name org.gnome.SessionManager was not provided by any .service files\n\n** (at-spi2-registryd:1979): WARNING **: Unable to register client with session manager\n[+0.16s] DEBUG: unity-greeter.vala:956: Creating Unity Greeter\n[+0.16s] DEBUG: Connecting to display manager...\n[+0.16s] DEBUG: Wrote 17 bytes to daemon\n[+0.16s] DEBUG: Read 8 bytes from daemon\n[+0.16s] DEBUG: Read 120 bytes from daemon\n[+0.16s] DEBUG: Connected version=1.2.3 default-session=ubuntu show-manual-login=false hide-users=false has-guest-account=true\n[+0.45s] DEBUG: menubar.vala:318: LANG=en_GB.UTF-8 LANGUAGE=(null)\n[+0.49s] CRITICAL: g_error_free: assertion `error != NULL' failed\n[+0.51s] DEBUG: get entries\n[+0.51s] DEBUG: menubar.vala:511: Adding indicator object 0x84d41ec at position 0\n[+0.53s] DEBUG: Evaluating bitmask for '%H:%M'\n[+0.53s] DEBUG: Checking against 1 possible times\n[+0.57s] DEBUG: Guessing max time width: 36\n[+0.57s] DEBUG: get entries\n[+0.57s] DEBUG: menubar.vala:511: Adding indicator object 0x853101c at position 1\n[+0.58s] WARNING: IndicatorObject class does not have an accessible description.\n[+0.62s] WARNING: IndicatorObject class does not have an accessible description.\n[+0.62s] DEBUG: get entries\n[+0.62s] DEBUG: get entries\n[+0.62s] DEBUG: menubar.vala:511: Adding indicator object 0x844cd2c at position 2\n[+0.62s] DEBUG: menubar.vala:335: LANG=en_GB.UTF-8 LANGUAGE=(null)\n[+0.66s] DEBUG: Loaded session /usr/share/xsessions/ubuntu-2d.desktop (Ubuntu 2D, This session logs you into Ubuntu 2D Mode)\n[+0.66s] DEBUG: Ignoring session /usr/share/xsessions/gnome-shell.desktop\n[+0.66s] DEBUG: Loaded session /usr/share/xsessions/xterm.desktop (Recovery Console, Failsafe session with only xterm)\n[+0.66s] DEBUG: Loaded session /usr/share/xsessions/ubuntu.desktop (Ubuntu, This session logs you into Ubuntu)\n[+0.66s] DEBUG: Ignoring session /usr/share/xsessions/gnome.desktop\n[+0.66s] DEBUG: Loaded session /usr/share/xsessions/xsession.desktop (User Defined Session, Custom ~/.xsession script)\n[+0.66s] DEBUG: session-chooser.vala:42: Adding session xterm (Recovery Console)\n[+0.67s] DEBUG: session-chooser.vala:42: Adding session ubuntu (Ubuntu)\n[+0.67s] DEBUG: session-chooser.vala:42: Adding session ubuntu-2d (Ubuntu 2D)\n[+0.67s] DEBUG: session-chooser.vala:42: Adding session xsession (User Defined Session)\n[+1.38s] DEBUG: Setting keyboard layout to 'gb'\n[+1.49s] DEBUG: main-window.vala:98: Screen is 800x600 pixels\n[+1.49s] DEBUG: main-window.vala:104: Monitor 0 is 800x600 pixels at 0,0\n[+1.49s] DEBUG: main-window.vala:104: Monitor 1 is 800x600 pixels at 0,0\n[+1.51s] DEBUG: Loading users from org.freedesktop.Accounts\n[+1.51s] DEBUG: Loading user /org/freedesktop/Accounts/User1000\n[+1.57s] DEBUG: Loading user /org/freedesktop/Accounts/User1001\n[+1.65s] DEBUG: Loading sessions from org.freedesktop.DisplayManager\n[+1.65s] DEBUG: unity-greeter.vala:332: Adding/updating user chris (chris)\n[+1.65s] DEBUG: unity-greeter.vala:332: Adding/updating user guest (guest)\n[+1.65s] DEBUG: unity-greeter.vala:189: Adding guest account entry\n[+1.70s] DEBUG: Starting authentication for user chris...\n[+1.70s] DEBUG: Wrote 21 bytes to daemon\n[+1.70s] DEBUG: unity-greeter.vala:959: Showing greeter\n[+1.70s] DEBUG: unity-greeter.vala:357: Showing main window\n[+1.71s] DEBUG: New style for time label\n[+1.72s] DEBUG: Evaluating bitmask for '%H:%M'\n[+1.72s] DEBUG: Checking against 1 possible times\n[+1.72s] DEBUG: Guessing max time width: 36\n[+1.77s] DEBUG: background.vala:315: Regenerating backgrounds\n[+1.77s] DEBUG: background.vala:67: Making background /usr/share/backgrounds/warty-final-ubuntu.png at 800x600\n[+1.78s] DEBUG: New style for time label\n[+1.78s] DEBUG: Evaluating bitmask for '%H:%M'\n[+1.78s] DEBUG: Checking against 1 possible times\n[+1.78s] DEBUG: Guessing max time width: 36\n[+1.79s] DEBUG: unity-greeter.vala:972: Starting main loop\n[+1.79s] DEBUG: Read 8 bytes from daemon\n[+1.79s] DEBUG: Read 35 bytes from daemon\n[+1.79s] DEBUG: Prompt user with 1 message(s)\n[+2.04s] DEBUG: background.vala:67: Making background /home/chris/Pictures/steelEnds.JPG at 800x600\n[+2.04s] DEBUG: background.vala:144: Error loading background: Failed to open file '/home/chris/Pictures/steelEnds.JPG': Permission denied\n[+2.07s] DEBUG: Num devices: '2'\n\n[+2.07s] DEBUG: get_primary_device: got data from object /org/freedesktop/UPower/devices/line_power_ACAD\n[+2.07s] DEBUG: get_primary_device: got data from object /org/freedesktop/UPower/devices/battery_BAT1\n[+2.07s] DEBUG: put_primary_device: got data from object /org/freedesktop/UPower/devices/battery_BAT1\n[+2.07s] DEBUG: set_accessible_desc: setting accessible description to 'Battery (charged)'\n[+2.07s] DEBUG: Num devices: '2'\n\n[+2.07s] DEBUG: menu_add_device: got data from object /org/freedesktop/UPower/devices/line_power_ACAD\n[+2.07s] DEBUG: menu_add_device: got data from object /org/freedesktop/UPower/devices/battery_BAT1\n[+2.08s] DEBUG: icon_policy is: 0 (present==0, charge==1, never==2)\n[+2.08s] DEBUG: count_batteries found 1 batteries (0 are charging/discharging)\n[+2.08s] DEBUG: should_be_visible: yes\n[+2.08s] DEBUG: refresh_entry_accessible_desc: setting entry 0x844ccd4 accessible description to 'Battery (charged)'\n[+2.08s] DEBUG: get entries\n[+2.08s] DEBUG: get entries\n[+2.08s] DEBUG: get entries\n[+2.08s] DEBUG: menubar.vala:511: Adding indicator object 0x844ccd4 at position 2\n[+2.09s] WARNING: Getting layout failed: GDBus.Error:org.freedesktop.DBus.Error.UnknownMethod: No such interface `com.canonical.dbusmenu' on object at path /com/canonical/indicator/users/menu\n[+2.16s] DEBUG: Setting keyboard layout to 'gb'\n[+2.33s] DEBUG: notify visible signal received\n[+2.33s] CRITICAL: ido_calendar_menu_item_set_date: assertion `IDO_IS_CALENDAR_MENU_ITEM(menuitem)' failed\n[+2.35s] DEBUG: New calendar item\n[+2.37s] DEBUG: indicator-sound: new_volume_slider_widget\n[+2.39s] DEBUG: indicator-sound: new_voip_slider_widget\n[+2.50s] DEBUG: unity-greeter.vala:315: starting system-ready sound\n[+2.60s] DEBUG: background.vala:116: Render of background /home/chris/Pictures/steelEnds.JPG complete\n[+2.60s] CRITICAL: background_loader_create_pattern: assertion `image != NULL' failed\n[+2.62s] DEBUG: background.vala:116: Render of background /usr/share/backgrounds/warty-final-ubuntu.png complete\n</code></pre>\n\n<p>Thanks nerof61\nTried sudo chown -R chris:chris /home/chris</p>\n\n<p>some errors  </p>\n\n<pre><code>chown: changing ownership of '/home/chris/.cache/compizconfig-1/staticswitcher.pb ': Input/output error  \nchown: changing ownership of '/home/chris/compiz-1/session/10d1c......... ': Input/output error\n</code></pre>\n\n<p>Logging in still has the same issue, no change.</p>\n\n<p>Looking at both these files, they are both owned chris:chris, 0 bytes long and both were last modified two days ago when the machine was last working correctly.  I'll have a think about this, perhaps I should re-install compiz.</p>\n\n<p>I've been thinking around problems with X.  Checked /hoe/chris/.xsession-errors, not aa lot of help to me, hopefully someone can point me the right way?</p>\n\n<pre><code>openConnection: connect:  No such file or directory \ncannot connect to br1tty at: 0\n/home/chris/gnupg/gpg-agent-info-chris-laptop: Syntax error. '(' unexpected\n</code></pre>\n\n<p>Will add more as I find it.</p>\n\n<p>I've tried adding a user, john, from the tty.  Once done, I then re-booted and tried to login, exactly the same issues even with john, password accepted then kicked back to login screen virtually straight away.  I'm still OK with a guest session though and no issues with ctrl/alt/F1</p>\n\n<p>Later.  I notice that the home directory for the new user, john, is owned by root.  using sudo chown john:john john  I changed the ownership of the home directory.  Now I can log in just as normal as john so making some progress.</p>\n\n<p>I'm really struggling with this and any help appreciated.</p>\n"},{"id":164905,"title":"AwesomeWM returning to lightdm after trying to log in","body":"<p>I recently installed AwesomeWM, everything was going fine til I tried to edit the rc.lua. It wouldn't let me save from AwesomeWM so I opened up Unity and saved it from there and when I tried to log back into Awesome it just keeps throwing me back to the lightdm login screen.</p>\n\n<p>I have tried <code>sudo apt-get remove awesome</code>and then reinstalling it. I have tried getting a working rc.lua from google and neither of these work.</p>\n\n<p>I don't really know what to do. It just keeps throwing me back to the login box, unity and 2d are both working fine. Very strange inded.</p>\n"},{"id":128637,"title":"Login returns to login screen","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://askubuntu.com/questions/63696/ubuntu-resolution-issue-causing-login-screen-loop\">Ubuntu - resolution issue causing login screen loop</a>  </p>\n</blockquote>\n\n\n\n<p>So, after much googling and searching this very site, I've seem to have encountered another problem. </p>\n\n<p>During the upgrade, when asked to use new configuration files or keep my locally modified ones, I told the upgrade to use the new, which I believe is my mistake. I have no idea as how to undo it. </p>\n\n<p>This, I think, has lead to the problem of me not being able to login. I created a secondary user account, and for awhile I could login to that one, but now I can only login via GUI as guest. I can Ctrl Alt F1 to terminal and login that way, but I cannot get in via GUI, no matter which desktop option I use. I've tried sudo dpkg-reconfigure lightdm and sudo dpkg-reconfigure gdm, to no avail. I've also tried ps ax | grep lightdm, sudo apt-get clean/purge/autoremove etc., and sudo stop lightdm, sudo Xorg -configure (which I have no idea on what to edit) then sudo start lightdm, which brings up an error of it not being able to start. When I do try to login, whether I have it set to automatically login, enter my password and hit enter or click on the >, it goes to a black screen with some text that appears really quick and then returns to the login screen. </p>\n\n<p>EDIT: </p>\n\n<pre><code>Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-24-generic i686). \n\n\nOutput of ls -l /home: \ntotal 8\ndr-x ------ 4 phil 4096 Apr 30 15:50 phil\ndrwxr -xr-x 25 phil2 phil2 4096 Apr 30 16:40 phil2\n</code></pre>\n\n<p>I think this is caused because I had tried to comment out some stuff in the above file due to duplicates, and this is the first time this error has come up. </p>\n\n<p>Output of sudo Xorg -configure: \nFatal server error:\nServer is already active for display 0\nIf this server is no longer running, remove /tmp/.X0-lock and start again.\nddxSigGiveUp: Closing log. </p>\n\n<p>I tried adding the Mate Desktop environment (GNOME 2.0), and still cannot login under my primary account or the secondary account I created. </p>\n\n<p>I managed to unencrypt and move my files from my encrypted home folder under my primary account, but that hasn't fixed the problems either. Wiping out and starting fresh really isn't an option.</p>\n\n<p>Acer Aspire One D250 model, Intel Atom N270 1.60 GHz, 1GB RAM, and plenty of hard drive space. </p>\n\n<p>Wiped out my Backtrack 4 installation and partitions, and expanded it for use by my primary (12.04 LTS). </p>\n"}]}]
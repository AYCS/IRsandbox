[{"id":715918,"title":"Unable to update/add plugin on wordpress and upload a file using SFTP at the same time in AWS ubuntu instance","body":"<p>I'm having difficulties in updating/adding a wordpress theme or plugin and uploading a file using ftp at the same time. using following terminal commands:-</p>\n\n<ul>\n<li><strong>Change ownership(for ftp upload) ⇒</strong> <code>sudo chown -R ubuntu /var/www/html</code>  </li>\n<li><strong>allow wordpress to upload files, themes and plugins(upload from\nfront-end and admin) ⇒</strong> <code>sudo chown -R www-data /var/www/html/</code>  </li>\n</ul>\n\n<p>I have to run different commands each time I take an action.</p>\n\n<p>thanks is advance</p>\n","related_questions":[{"id":698083,"title":"Possible Permissions Issue With Wordpress Plugins on Ubuntu Server","body":"<p>So I just fired up a new Digital Ocean droplet running Ubuntu 15.10x64 and I'm setting up a Wordpress environment. I am setting it up from scratch without a Wordpress image.</p>\n\n<p>I followed a lot of the tutorials on Digital Ocean to get setup, and the site is running pretty well. I did not setup an extra layer of security with a 'wp-user' user and group because I was getting a lot of permissions issues when doing that.</p>\n\n<p>I can upload images, etc. fine and install plugins. However, I noticed that the there may be something wrong with permissions for plugins. I am running Wordfence for security and a plugin called Backupwordpress for DB and full site backups.</p>\n\n<p>Backupwordpress writes the backups to <code>wp-content/uploads/backupwordpress..</code> but when I run a backup it runs as if its completing a backup, but the backup never shows. When I check the <code>uploads</code> folder there is nothing there... No errors, nothing.</p>\n\n<p>My uploads folder is owned by <code>$username:www-data</code> as well as the <code>backupwordpress</code> folder with the permissions: <code>drwxrwxr-x</code></p>\n\n<p>I've also noticed that Wordfence won't run any security scans, but again no actual errors.</p>\n\n<p>The plugins folder has permissions of <code>drwxr-xr-x</code>.</p>\n\n<p>Any idea what I'm doing wrong? I use these plugins on a very regular basis (literally everyday) and have never encountered this so it must be my server environment. Also, are there any security issues I may have created while trouble shooting based on these usergroups and permissions?</p>\n\n<p>Running a LAMP stack on Ubuntu 15.10x64.</p>\n\n<p>Thank you so much.</p>\n"},{"id":574870,"title":"Wordpress can&#39;t upload files","body":"<p>I have installed LAMP stack and Wordpress on a local apache2 server using the tutorials here-</p>\n\n<ol>\n<li><p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu\" rel=\"nofollow\">https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu</a></p></li>\n<li><p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-on-ubuntu-14-04\" rel=\"nofollow\">https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-on-ubuntu-14-04</a></p></li>\n</ol>\n\n<p>But when I try to upload a media file (image/sound) I get the error-</p>\n\n<pre><code>The uploaded file could not be moved to wp-content/uploads/2015/01.\n</code></pre>\n\n<p>What might be wrong? I have added my user to www-data group and <strong>chown</strong>'d the directory <strong>/var/www/</strong>  as well.</p>\n"},{"id":567985,"title":"permiss in Apache2 Ubuntu","body":"<p>Please help me for permiss in Ubuntu.\nI setup Apache2 on Ubuntu 14.04 and I was config documentRoot to /mnt/Data/public_html</p>\n\n<p>I was changed owner: sudo chown -R user_name:www-data /mnt/Data/public_html</p>\n\n<p>I install wordpress, when install new plugin, the plugin always have owner is www-data and I cant edit plugin's file, I must run command <strong>sudo chmod - R 777 /mnt/Data/public_html</strong> every time install new plugin.</p>\n\n<p>Please let me know solution. I dont want must chmod every time install new plugin, I want all new plugin or any file upload via wordpress admin panel will have current user is owner.</p>\n\n<p>Please help me.\nThanks all.</p>\n"},{"id":228184,"title":"local wordpress installation, plugin installation and file permissions","body":"<p>I have a local wordpress installation and got everything working, until I tried to install a new plugin. Trying to activate the plugin, wordpress asked me for FTP connection information, which I understood to be a failure of write-access to the plugins directory. Apache runs as <code>www-data</code>, so I ran <code>sudo chown -R www-data: /var/www/wordpress</code> to make the wordpress directory writable for Apache. But now, I cannot edit the files as user anymore. Changing file permissions back to <code>chown -R user: /var/www/wordpress/wp-content/themes</code>, the wordpress dashboard complains again, that it doesn't have sufficient access.</p>\n\n<p>I tried various \"solutions\" online, but none have worked so far. Do I really need to install something like proftp and create an FTP user &amp; password for my local server? Or can I circumvent the problem with some nifty file permission settings, which allow both me and Apache to access/write the files?</p>\n"},{"id":513630,"title":"Cannot Write to www and update wordpress at same time","body":"<p>I have LAMP installed on my Ubuntu 14.04 server and am using apache as a web server.  I am going to be using the web server for Wordpress primarily.  The problem I am running into is that I cannot update Wordpress or add plugins the standard way.  It keeps asking me for my FTP credentials.  </p>\n\n<p>I did some Googling and was able to fix the Wordpress update problem by changing ownership of the www folder to www-data:www-data.  The problem with doing this, though, is I no longer am able to edit the shared files through Samba. When I change ownership to user:www-data I can modify the files but cannot update Wordpress without it asking for FTP. The folder is chmod 755 and I DO NOT want to go to 777. </p>\n\n<p>So... can anyone help point me in the right direction to correct this? I am brand new to Ubuntu and would really appreciate any pointers. </p>\n\n<p>Thanks!</p>\n"},{"id":493259,"title":"Getting SFTP to update Wordpress","body":"<p>It took me  a while to figure out how to install SFTP, and set up a user, sftpwp, that was restricted to it's own home directory and to using only those commands that are internal to SFTP.  I created a symbolic link between /var/www in the home directory of user sftpwp.</p>\n\n<p>This is on Ubuntu 12.04.  (I don't run the more recent releases of Ubuntu because they don't seem to like the KVM I use to access this machine directly).</p>\n\n<p>Alas, I get the following error when I try to update Wordpress.</p>\n\n<blockquote>\n  <p>Could not copy file.: wordpress/wp-admin/includes/update-core.php</p>\n</blockquote>\n\n<p>I know SFTP is working, and observed Wordpress' panel saying it successfully downloaded an update file: but then it stopped at the above error.</p>\n\n<p>I tried to get help on the Wordpress forum, but was told that because this is an administrative issue, it was off topic for the Wordpress fora.</p>\n\n<p>So, what might be the problem: restricting the user sftpwp to only what is internal to sftp, or restricting it to it's home directory, or is it some other permissions issue?  And, what would be the fix?  Please remember, I am not an administrator, but rather a programmer.</p>\n\n<p>Thanks,</p>\n\n<p>Ted</p>\n"},{"id":417447,"title":"wordpress upload permission on nginx &amp; ubuntu","body":"<p>I have a problem with permission on nginx/ubuntu VPS.</p>\n\n<p>keep getting the error:</p>\n\n<blockquote>\n  <p>“asr.jpg” has failed to upload due to an error Unable to create\n  directory uploads/2014/02. Is its parent directory writable by the\n  server?</p>\n</blockquote>\n\n<p>here are my uploads folder settings:</p>\n\n<p><code>drwxrwxr-x  8 www-data www-data 4096 Feb  6 14:41 uploads</code></p>\n\n<p>Any sugestions please?</p>\n"},{"id":52691,"title":"Permissions problem when upgrading Wordpress to 3.2 through the admin interface","body":"<p>I'm using 10.04 server I'm trying to upgrade Wordpress through the admin interface.  I have a vsftpd server running and it is accepting local connections.  For my FTP credentials I supplied the following:</p>\n\n<ul>\n<li>Hostname: 127.0.0.1:21</li>\n<li>Username and Password: The user supplied has write access to the /var/www directory structure.</li>\n<li>Using plain ole FTP, not secure.</li>\n</ul>\n\n<p>When I submit the upgrade, the following message is returned after a bit of time (1-2 minutes):</p>\n\n<pre><code>Downloading update from http://wordpress.org/wordpress-3.2.zip…\n\nUnpacking the update…\n\nCould not create directory.: /var/www/wordpress/wp-content/upgrade/wordpress-3.tmp\n\nInstallation Failed\n</code></pre>\n\n<p>I'm assuming this is a permissions issue, but I haven't been able to figure it out.  Even setting the directories chmod 777 doesn't work.  Any ideas?  Thanks!</p>\n\n<p>Edit: Testing with ftp 127.0.0.1 gives the following:</p>\n\n<pre><code>$ ftp 127.0.0.1\nConnected to 127.0.0.1.\n220 (vsFTPd 2.2.2)\nName (127.0.0.1:wpuser): \n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp&gt; mkdir /var/www/wordpress/wp-content/upgrade/test/\n550 Permission denied.\n</code></pre>\n\n<p>Perhaps something is wrong with my vsftpd settings?  Here is the vsftpd.conf file:</p>\n\n<pre><code>listen=YES\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\ndirmessage_enable=YES\nuse_localtime=YES\nxferlog_enable=YES\nconnect_from_port_20=YES\nsecure_chroot_dir=/var/run/vsftpd/empty\npam_service_name=vsftpd\nrsa_cert_file=/etc/ssl/private/vsftpd.pem\n</code></pre>\n\n<p>Edit Part 2:</p>\n\n<p>I cannot submit an answer yet because I don't have enough reputation.  This is how I fixed it though:</p>\n\n<p>I finally fixed the issue, although it may not be the best solution.  Keep in mind the FTP service is not accessible to the outside Internet.</p>\n\n<p>So Wordpress tries to use FTP to create the directories and files needed for the upgrade.  It does this when uploading plugins or themes as well.  Because I also couldn't create a directory over FTP, I decided to try the following in the vsftpd config:</p>\n\n<pre><code>anon_upload_enable=YES\nanon_mkdir_write_enable=YES\n</code></pre>\n\n<p>I restarted the server and everything worked.  Now, I assume that this can be a security issue of some sort, but the anon account is disabled (anonymous_enable=NO).</p>\n\n<p>Also, as an aside and a response to both the other suggestions about directory permissions, here is what I tried permissions-wise on the server.</p>\n\n<ul>\n<li>All wordpress directories 775</li>\n<li>All wordpress files 664</li>\n<li>Owner: my user, Group: users</li>\n<li>www-data user added to the users group (just a test, did not work obviously)</li>\n</ul>\n\n<p>So I <em>think</em> www-data had write access to the necessary directories, but it still did not work. That's why I started exploring the FTP server issues.</p>\n\n<p>I welcome any comments on this.</p>\n"},{"id":147282,"title":"Require assistance with failed to open stream: Permission denied in","body":"<p>I have set up (actually migrated) wordpress on ubuntu 10.04 with apache2 and everything works great. However, I'm getting the following error when using a plugin to upload files to the server:</p>\n\n<blockquote>\n  <p>[Wed Jun 06 13:12:29 2012] [error] [client xx.xxx.xxx.xxx] PHP\n  Warning: \n  fopen(/home/user/public/website.com/public/wp-content/plugins/cforms/abspath.php):\n  failed to open stream: Permission denied in\n  /home/user/public/website.com/public/wp-content/plugins/cforms/lib_functions.php\n  on line 164, referer:\n  <a href=\"http://website.com/wp-admin/plugins.php?deactivate=true&amp;plugin_status=all&amp;paged=1&amp;s=\" rel=\"nofollow\">http://website.com/wp-admin/plugins.php?deactivate=true&amp;plugin_status=all&amp;paged=1&amp;s=</a></p>\n</blockquote>\n\n<p>I've taken a bit too much on I think. I'm not a developer at all, but I thought it would be fun to try and set myself up with a Linode VPS. </p>\n\n<p>I suspect that there is some sort of permissions problem. www-data is my php user. Could it be that www-data is lacking permissions? And how do I go about troubleshooting this?</p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"id":26829,"title":"How come I can not install plugins on my local Wordpress install?","body":"<p>I got <strong>WordPress</strong> up and running fine on <strong>Ubuntu 10.04</strong> by using <a href=\"http://www.ubuntugeek.com/installing-wordpress-3-0-on-ubuntu-10-04-lucid-lynx.html/comment-page-3#comment-92106\" rel=\"nofollow\">this source</a> except that when I try to update and install themes/plugins I get this following error message in wp-admin page:</p>\n\n<blockquote>\n  <p>Installing Plugin: WordPress.com Stats\n  1.8.1 Downloading install package from <a href=\"http://downloads.wordpress.org/plugin/stats.1.8.1.zip\" rel=\"nofollow\">http://downloads.wordpress.org/plugin/stats.1.8.1.zip</a>…</p>\n  \n  <p>Unpacking the package…</p>\n  \n  <p>Could not create directory.\n  /var/www/wordpress/wp-content/upgrade/stats.tmp/stats</p>\n  \n  <p>Actions: Return to Plugin Installer</p>\n</blockquote>\n\n<p>At first I thought I had to setup an FTP account but searched more and I found some information that says that I need to change the permissions of the wp-content folder which is located in the directory:</p>\n\n<pre><code>/var/www/wordpress/wp-content\n</code></pre>\n\n<p>I tried changing it by doing:</p>\n\n<pre><code>sudo chmod -R 777 wp-content/\n</code></pre>\n\n<p>but when I tried installing a plugin I got the same error message. I also tried passing it <strong>755</strong> as a permission but still got the same thing. I settled on <strong>755</strong> because it is more secure I have read.</p>\n\n<p><strong>How can I solve this problem safely and securely?</strong></p>\n"}]}]
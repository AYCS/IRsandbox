[{"id":716033,"title":"Vagrant up (with Ansible) problems. Failed to boot the virtual machine","body":"<p>I'm using ubuntu 15.04, and i wanted to install  vagrant with ansible. \nWhen i vagrant up i get the following error message: </p>\n\n<p><a href=\"http://i.stack.imgur.com/3TfqP.png\" rel=\"nofollow\">This is my vagrant file</a></p>\n\n<p>==> default: Successfully added box 'ubuntu/vivid64' (v20151219.0.0) for 'virtualbox'!</p>\n\n<p>==> default: Importing base box 'ubuntu/vivid64'...</p>\n\n<p>==> default: Matching MAC address for NAT networking...</p>\n\n<p>==> default: Checking if box 'ubuntu/vivid64' is up to date...</p>\n\n<p>==> default: Setting the name of the VM: vagrant-ansible_default_1451749958531_44597</p>\n\n<p>==> default: Clearing any previously set forwarded ports...</p>\n\n<p>==> default: Clearing any previously set network interfaces...</p>\n\n<p>==> default: Preparing network interfaces based on configuration...</p>\n\n<pre><code>default: Adapter 1: nat\n</code></pre>\n\n<p>==> default: Forwarding ports...</p>\n\n<pre><code>default: 80 (guest) =&gt; 8080 (host) (adapter 1)\ndefault: 22 (guest) =&gt; 2222 (host) (adapter 1)\n</code></pre>\n\n<p>==> default: Booting VM...</p>\n\n<p>==> default: Waiting for machine to boot. This may take a few minutes...\nThe guest machine entered an invalid state while waiting for it\nto boot. Valid states are 'starting, running'. The machine is in the\n'poweroff' state. Please verify everything is configured\nproperly and try again.\nIf the provider you're using has a GUI that comes with it,\nit is often helpful to open that and watch the machine, since the\nGUI often has more helpful error messages than Vagrant can retrieve.\nFor example, if you're using VirtualBox, run <code>vagrant up</code> while the\nVirtualBox GUI is open.\nThe primary issue for this error is that the provider you're using\nis not properly configured. This is very rarely a Vagrant issue.****</p>\n\n<p>I installed ansible with following commands: </p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install software-properties-common\nsudo apt-add-repository ppa:ansible/ansible\nsudo apt-get update\nsudo apt-get install ansible\n</code></pre>\n\n<p>I used this link to set up my vagrant and playbook.yml file:</p>\n\n<p><a href=\"https://adamcod.es/2014/09/23/vagrant-ansible-quickstart-tutorial.html\" rel=\"nofollow\">https://adamcod.es/2014/09/23/vagrant-ansible-quickstart-tutorial.html</a></p>\n","related_questions":[{"id":714131,"title":"Trying to establish internet connection of Ubuntu Server on virtual box","body":"<p>There are probably easier ways to go about this but i specifically want to go down this path (mostly for learning but let me know if there is something better).</p>\n\n<p>A bit of background, i am only slightly familiar with linux and networking and so to learn a bit about both i have chosen to try and build a linux fileserver (mostly for movies). For the time being i am only using virtual box as it is easier to configure in my free time.</p>\n\n<p>I have a virtual box setup with ubuntu server.  It has two eth interfaces. Eth0 is so that i can ssh to the server (i want to do this when i install onto a real machine).  And i created eth1 so that I can access the internet, eth1 in virtual box is set up as a bridge network to my laptops (host machine) wireless (which is my main means of connecting to the net with this machine)</p>\n\n<p>Forgive me as my practical knowledge of networking is limited. My understanding of Bridge, NAT, gateway... is limited to wikipedia, linux.com and ms technet's introduction to computer networking (which is actually pretty good).  If anyone has any good resources please throw them at me (i dont mind reading) I have just been stuck on this particular puzzle for the past couple of days</p>\n\n<p><a href=\"http://i.stack.imgur.com/5U269.png\" rel=\"nofollow\">ifconfig and ipconfig on host and vm</a>\n<a href=\"http://i.stack.imgur.com/zmPq5.png\" rel=\"nofollow\">interfaces set up on vm and virtualbox</a></p>\n\n<p>Thanks for your help</p>\n\n<p>Andrew</p>\n"},{"id":293816,"title":"In VirtualBox, how do I set up host-only virtual machines that can access the Internet?","body":"<p>In setting up virtual machines with VirtualBox, I often want the following characteristics</p>\n\n<ul>\n<li>vm has a static ip  </li>\n<li>host can access vm without port forwarding  </li>\n<li>vm can access the internet  </li>\n<li>I can move my laptop from network to network (e.g. from home to office to coffeeshop) without worrying about securing or reconfiguring the vm  </li>\n</ul>\n\n<p>None of the VirtualBox network connection methods staisfies these requirements on their own.</p>\n\n<ul>\n<li><p>NAT<br>\nRequires port forwarding if you want to connect to the vm from the host.</p></li>\n<li><p>Host-only<br>\nThe vm can not access the internet, unless the host is a router.</p></li>\n<li><p>Bridged<br>\nExposes the vm to the network; not portable.</p></li>\n</ul>\n"},{"id":630625,"title":"Question with connecting to Docker container on virtualized Ubuntu server","body":"<p>As a web designer I have been using VirtualBox to set up temporary work servers for my projects. Lately I've been  trying to reduce the number of virtual machines on my laptop(due to limitations of SSD capacity) and I thought learning and using Docker may be beneficial in terms of system storage, deployment of finished work, and in futureproofing my skillsets.\nUntil now, I have been using host-only adapter in addition to NAT to connect to APM server in my virtualmachine from my host(which is usualy Windows).</p>\n\n<p>The following is /etc/network/interfaces setting I normally use:</p>\n\n<pre><code># The loopback network interface\nauto lo\niface lo inet loopback\n\n# The primary network interface\nauto eth0\niface eth0 inet dhcp\n\n# VBOX Host-only adapter\nauto eth1\niface eth1 inet static\n  network    192.168.56.0\n  address    192.168.56.80\n  netmask    255.255.255.0\n</code></pre>\n\n<p>I am thinking about IP aliasing to assign more IPs to the Host-only adapter(<code>192.168.56.81, 192.168.56.82...</code>) and routing each of them to each of the containers, which will each be running one of my projects. It looks like Docker gets to have its own network interface, <code>docker0</code>, which cannot be accessed from the VirtualBox host machine. From what I can tell, I have a few possible approaches:  </p>\n\n<ol>\n<li>route the connection from the host to the host-only adapter to the\ndocker0 interface</li>\n<li>somehow find a way to connect to the docker0 interface from the host\nmachine, or</li>\n<li>somehow find a way to connect the containers to host-only interfaces</li>\n</ol>\n\n<p>I want to know which one of these approaches is the most viable way for me to take.<br>\nI am not sure if my question if clear enough. Please let me know if I should be providing more information in order to make this question answerable.</p>\n"},{"id":631948,"title":"virtualization and security vis PCI DSS security","body":"<p>I have a couple questions about the effect of virtualization and the security of both the host and guest systems.  The OS on both is Ubuntu server 14.04.</p>\n\n<p>I opted for use of Oracle's Virtualbox.  I have found creating the VMs relatively straight forward.</p>\n\n<p>I am using iptables to drop all traffic that is not explicitly permitted (only ssh and HTTPS are permitted, except for the database server and web server behind the inner firewall of our DMZ, which will also allow 3306 for mysql.</p>\n\n<p>One of the requirements, if I understand things correctly, requires suitable logging.  I was planning on using the variant of the iptables DROP directive that supports logging requests that are dropped.  But the question is, where is that log placed in the directory tree, and what is the best practice for maintaining a <strong>real time 'backup'</strong> of that log, as well as the logs for the Apache web server and mysql database server, both local AND off site (that is, an machine in my office, or the office of a colleague, located in locations well away from the host we're using.  Of course, such a real time backup must be managed over a secure channel.</p>\n\n<p>Further, in reviewing the PCI documentation related to use of virtual machines, mention is made of potential risks if the virtualization is not correctly configured.  Alas, no information is given as to what the potential mistakes in configuration of the virtualization technology can be.  As I have not attempted to manually alter the default configuration of VirtualBox, can someone point me to those things I ought to examine regarding configuration of these virtual boxes, and how to ensure that our use of virtualbox does not present a vulnerability for either the host or the individual virtual machines?</p>\n\n<p>For extra security, we configured two additional virtual machines running the latest pfsense (which, as you know is built on FreeBSD).  In your considered opinion and experience, is the combination of pfsense with careful configuration of iptables on both the host and each virtual machine sufficient to ensure that both the virtual machines and the host are as secure as they can be made?</p>\n"},{"id":579892,"title":"VMs connected user ip problem","body":"<p>I have a server and on the server running ubuntu 14.04 Vbox 4.3, and php virtualbox 4.3.1.\nSo my problem is -</p>\n\n<p>I run TS3 servers, and Gameservers from the VMs and if someone connect the server and i check his IP it shown 10.0.2.2. For everyone who connect...\nI use NAT as network adapter, with default settings. same on windows same on ubuntu VM\nI ordered an additional IP from the host where my server is, but i can't set it up to the vm, cause if use bridge adapter on server there is no internet on the VM...\nThanks for your help guys!</p>\n"},{"id":400629,"title":"How can I access to guest machine via ssh which has Bridged Adapter","body":"<p>I'm sorry for the mistakes I've made, I'm not Englishman.</p>\n\n<p>I have Ubuntu 13.10 and Virtualbox installed Ubuntu Server 13.10 (<strong>Bridged Adapter</strong>). Guest machine has nginx, mariaDB, php etc. - hence web server. So at the host machine I successfully connect to vm server through browser and everything works ok. Now I want to set up ssh connection between guest and host.\nHow can I implement it?</p>\n\n<p>I think something tie with port forwarding and network type on guest, but I don't have enough knowledge to understand what I do wrong. Googling direct me to host-only network type on guest machine and configuring its IP to static instead of DHCP.\nPlease, help)</p>\n"},{"id":291009,"title":"Host-only network with Virtual box and Windows host machine: cannot find device eth1","body":"<p><strong>(ANSWER BELOW)</strong></p>\n\n<p>I have problem with implementing Host-Only network in Virtualbox. my host machine is running under Windows 7 Ultimate, and guest OS is Ubuntu Server 12.04.2 64bit.</p>\n\n<p>I configure virtual box host-only adapter.</p>\n\n<p><img src=\"http://i.stack.imgur.com/Q1fsr.png\" alt=\"Virtual box host-only adapter configuration\">   </p>\n\n<p><img src=\"http://i.stack.imgur.com/9oYTz.png\" alt=\"VirtualBox Host-only adapter - DHCP Server disabled\"></p>\n\n<p>As you can see DHCP Server is disabled and i try both enabled and disabled but problem still there.</p>\n\n<p>Below is result of </p>\n\n<pre><code>ipconfig /all\n</code></pre>\n\n<p>from Windows CMD</p>\n\n<p><img src=\"http://i.stack.imgur.com/OLrIF.png\" alt=\"Windows ipconfig /all Results\"></p>\n\n<p>Now My Virtual Machine Network Settings</p>\n\n<p><img src=\"http://i.stack.imgur.com/5c6gM.png\" alt=\"Virtual Machine Network Settings\"></p>\n\n<p>When i run VM the ubuntu force some problem with network configuration as image below</p>\n\n<p><img src=\"http://i.stack.imgur.com/xHtZP.png\" alt=\"Ubutnu Booting Network configuration problem \"></p>\n\n<p>My /etc/network/interfaces file as below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/KgSHX.png\" alt=\"/etc/network/interfaces content\"></p>\n\n<p>When i restart networking service, show \"Cannot find device eth1, Failed to bring up eth1 as below: </p>\n\n<p><img src=\"http://i.stack.imgur.com/sA7E0.png\" alt=\"restart networking error\"></p>\n\n<p>if i go with \"ifdown\" options, response as bleow:</p>\n\n<p><img src=\"http://i.stack.imgur.com/qP4hJ.png\" alt=\"enter image description here\"></p>\n\n<p>any help will be appreciated </p>\n\n<p>Thanks in advance</p>\n\n<hr>\n\n<h2>ANSWER</h2>\n\n<p>VirtualBox network adapter name on guest machine is not fixed all the time, each time you have disable and enable host adapter from VB prefrences, the network device name post-appended number will increase . \nFor example, if you disable and enable network host-only adapter five times, the new network name should be eth4, and if it was eight times , network name will should be eth7 and so on. </p>\n\n<p>if you don't know what is your current network device name, use:</p>\n\n<pre><code>ifconfig -a \n</code></pre>\n\n<p>it will print all available network adapters ( devices ), find your new name and reconfigure /etc/network/interfaces file with new name. </p>\n\n<p>for DHCP configuration use code below with changing eth5 with your current device name</p>\n\n<pre><code>auto eth5\niface eth5 inet dhcp\n</code></pre>\n\n<p>And for static ip you can code below: ( you still need to change eth5 with your device name, and also the static ip, no need to change netmask in most situations):</p>\n\n<pre><code>auto eth5\niface eth5 inet static\n        address 192.168.56.101\n        netmask 255.255.255.0\n</code></pre>\n\n<p>I hope this will help somebody else. </p>\n"},{"id":287624,"title":"SSH to the Ubuntu host machine from a Ubuntu VirtualBox guest?","body":"<p>I would like to SSH into my host (Kubuntu 12.04 64 bit) machine from a VirtualBox guest running Ubuntu 12.04 32 bit. The host has the latest VirtualBox from the Ubuntu repos (4.1.12). The guest was a preconfigured VM I downloaded from <a href=\"http://virtualboximages.com/Ubuntu+12.04+i386+Lamp+Tomcat+Server+Virtual+Computer\" rel=\"nofollow\">VirtualBoxImages.com</a>.</p>\n\n<p>The problem is that my sshd_config does not allow login except with PubkeyAuthentication and I need to be able to use PasswordAuthentication from this VirtualBox guest (for reasons that are probably outside the scope of this question).</p>\n\n<p>my /etc/ssh/sshd_config file probably needs to look like this:</p>\n\n<pre><code>PasswordAuthentication no\n\nMatch Address 192.168.56.0/24\n    PasswordAuthentication yes\n</code></pre>\n\n<p>When I add the match block to sshd_config, ssh terminates with a message like this:\ninit: ssh main process (7352) terminated with status 255</p>\n\n<p>Why? What am I doing wrong? I have used match blocks almost identical to that in the past, so I'm baffled.</p>\n\n<p>This question is relevant but it didn't help me:\n<a href=\"http://askubuntu.com/questions/101670/how-can-i-allow-ssh-password-authentication-from-only-certain-ip-addresses\">How can I allow SSH password authentication from only certain IP addresses?</a></p>\n\n<p>I can guess my issue might be related to the VirtualBox network interface...</p>\n\n<p>In VirtualBox I'm using \"Host Only\" for Adapter 1 (with the default vboxnet0). With this, the host has an interface vboxnet0 with IP 192.168.56.1. That's the reason for my match block IP address above.</p>\n\n<p>(I also set up Adapter 2 as \"NAT\" so my guest can have outside Internet access). For testing I set Promiscuous mode to \"Allow All.\" I can ping both ways. And I can SSH from the host to the guest (the opposite way of the connection I want).</p>\n\n<p>The host runs denyhosts, but while testing I stopped that service.</p>\n"},{"id":31412,"title":"How do I remotely access my ubuntu virtual machine?","body":"<p>I have an Ubuntu Desktop edition virtual machine and I would like to access it via ssh remotely but if I'm not logged onto the virtual machine I cannot access it remotely via ssh. Only when I'm logged onto the virtual machine's ubuntu, can I access it remotely. Is there a way around this? </p>\n\n<p>Is this the ubuntu vm's configuration, or the virtual box's, or...?</p>\n\n<p>Thank you so much!</p>\n"},{"id":7839,"title":"About the architecture of Virtual-Machine","body":"<p>System information:</p>\n\n<pre><code>Ubuntu SMP Thu Sep 16 16:05:42 UTC 2010 x86_64 GNU/Linux\n</code></pre>\n\n<p>Virtual Marchine:</p>\n\n<pre><code>VirtualBox 3.1.6_OSE r59338 linux.amd64\n</code></pre>\n\n<p>I wanna to install a virtual system with x86-64 in Virtual Box,But it seemed that it is impossible to do this.</p>\n\n<p>The virtual machine tips me it only detected an i686 CPU.</p>\n\n<p>Is there any link between the architecture of host and that of the client virtual OS?</p>\n\n<p><code>kvm-ok</code>result:</p>\n\n<pre><code>INFO: Your CPU supports KVM extensions\nINFO: /dev/kvm does not exist\nHINT: sudo modprobe kvm_amd\nKVM acceleration can NOT be used\n</code></pre>\n\n<p><code>sudo modprobe kvm_amd</code>result</p>\n\n<pre><code>FATAL: Error inserting kvm_amd (/lib/modules/2.6.32-24-server/kernel/arch/x86/kvm/kvm-amd.ko): Operation not supported\n</code></pre>\n\n<p><code>kvm-ok</code>again:</p>\n\n<pre><code>INFO: Your CPU supports KVM extensions\nINFO: KVM is disabled by your BIOS\nHINT: Enter your BIOS setup and enable Virtualization Technology (VT),  and then hard poweroff/poweron your system\nKVM acceleration can NOT be used\n</code></pre>\n\n<p>But another problem happened,the VirtualBox displayed an error windows.:</p>\n\n<pre><code>VT-x/AMD-V hardware-acceleration has been enabled,but it is in the ineffective status. So the VirtualBox won't detect the CPU of 64bit,and fail to start.Please confirm the  support has been enabled.\n</code></pre>\n\n<p>How to check the CPU whether support the <code>VT-x/AMD-V</code>technology?And start it in BIOS?But another Virtual OS (<strong>32bit</strong>)also  enable this technology,and works well.</p>\n"}]}]
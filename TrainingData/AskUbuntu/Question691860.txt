[{"id":691860,"title":"How-to upgrade LXC container after `do-release-upgrade` to Wily?","body":"<p>I have just done a <code>do-release-upgrade -m server</code> from</p>\n\n<blockquote>\n  <p><code>Linux boson 3.19.0-31-generic #36-Ubuntu SMP Wed Oct 7 15:04:02 UTC 2015 x86_64 Linux-3.19.0-31-generic-x86_64-with-Ubuntu-15.04-vivid</code> </p>\n</blockquote>\n\n<p>to </p>\n\n<blockquote>\n  <p><code>Linux boson 4.2.0-16-generic #19-Ubuntu SMP Thu Oct 8 15:35:06 UTC 2015 x86_64 Linux-4.2.0-16-generic-x86_64-with-Ubuntu-15.10-wily</code></p>\n</blockquote>\n\n<p>I had imagined that the LXC containers would automagically be upgraded too. However, although <code>uname -r</code> returns <code>4.2.0-16-generic</code> which confirms that the kernel is on Wily, doing an <code>apt-get update</code> shows that the container is still pointed at the Vivid repository.</p>\n\n<p><code>do-release-upgrade</code> while attached to the container returns <code>bash: do-release-upgrade: command not found</code>.</p>\n\n<p>How do I upgrade the LXC containers too? Is there a tool available?</p>\n\n<p>(I don't have X installed)</p>\n","related_questions":[{"id":707743,"title":"How can I kill a stuck LXC container?","body":"<p>I have a new unprivileged LXC container that I just cannot seem to stop. <code>lxc-stop -n dl</code> hangs. <code>lxc-stop -k --nolock -n dl</code> hangs. <code>lxc-ls</code> hangs. <code>lxc-attach -n dl</code> hangs. Nothing works on this container.</p>\n\n<p>I have restarted <code>lcxfs</code>. All that did was upset a privileged container. This is what the current processes for this container look like (from the host).</p>\n\n<pre><code>lxc-start,24434\n  └─systemd,24446 --system --deserialize 9\n      ├─agetty,25258 --noclear --keep-baud console 115200 38400 9600 vt220\n      ├─agetty,25846 --noclear --keep-baud pts/1 115200 38400 9600 vt220\n      ├─agetty,25878 --noclear --keep-baud pts/3 115200 38400 9600 vt220\n      ├─agetty,25906 --noclear --keep-baud pts/2 115200 38400 9600 vt220\n      ├─agetty,25934 --noclear --keep-baud pts/0 115200 38400 9600 vt220\n      ├─rsyslogd,26016 -n\n      │   ├─{rsyslogd},26043\n      │   └─{rsyslogd},26044\n      └─systemd-journal,25962\n</code></pre>\n\n<p>And the process states:</p>\n\n<pre><code>$ ps aux | grep -P '24434|24446|25258|25846|25878|25906|25934|25934|26016|26043|26044|25962'\noli      24434  0.0  0.0  43400  3552 ?        Ss   10:56   0:00 [lxc monitor] /home/oli/.local/share/lxc dl\n100000   24446  0.0  0.1  36896  4972 ?        Ss   10:56   0:00 /lib/systemd/systemd --system --deserialize 9\n100000   25258  0.0  0.0  15676  2504 pts/0    Ss+  10:56   0:00 /sbin/agetty --noclear --keep-baud console 115200 38400 9600 vt220\n100000   25846  0.0  0.0  15676  2496 pts/1    Ss+  11:33   0:00 /sbin/agetty --noclear --keep-baud pts/1 115200 38400 9600 vt220\n100000   25878  0.0  0.0  15676  2380 pts/3    Ss+  11:33   0:00 /sbin/agetty --noclear --keep-baud pts/3 115200 38400 9600 vt220\n100000   25906  0.0  0.0  15676  2416 pts/2    Ss+  11:33   0:00 /sbin/agetty --noclear --keep-baud pts/2 115200 38400 9600 vt220\n100000   25934  0.0  0.0  15676  2332 pts/0    Ss+  11:33   0:00 /sbin/agetty --noclear --keep-baud pts/0 115200 38400 9600 vt220\n100000   25962  0.0  0.0  35256  3500 ?        Ss   11:33   0:00 /lib/systemd/systemd-journald\n100104   26016  0.0  0.0 182640  3244 ?        Ssl  11:33   0:00 /usr/sbin/rsyslogd -n\n</code></pre>\n"},{"id":691051,"title":"How to get the list of the unsupported packages mentioned during the OS upgrade?","body":"<p>While running <code>sudo do-release-upgrade</code>, I got a message saying:</p>\n\n<blockquote>\n  <p>16 installed packages are no longer supported by Canonical. You can still get support from the community. </p>\n</blockquote>\n\n<p>I know I probably shouldn't be worried, but how can I get a list of those packages before starting the upgrade?</p>\n\n<p>The following is the complete output of <code>do-release-upgrade</code> before choosing continue: <a href=\"http://paste.ubuntu.com/12990830/\" rel=\"nofollow\">http://paste.ubuntu.com/12990830/</a></p>\n\n<p>For better convenience, this is the most important part of it: </p>\n\n<pre><code>Calculating the changes\n\nDo you want to start the upgrade? \n\n\n16 installed packages are no longer supported by Canonical. You can \nstill get support from the community. \n\n61 packages are going to be removed. 204 new packages are going to be \ninstalled. 1617 packages are going to be upgraded. \n\nYou have to download a total of 1,220 M. This download will take \nabout 55 minutes with your connection. \n\nInstalling the upgrade can take several hours. Once the download has \nfinished, the process cannot be canceled. \n\n Continue [yN]  Details [d]\n</code></pre>\n"},{"id":691037,"title":"How to deal with upstart vs systemd warnings during update to Wily?","body":"<p>I am upgrading to Wily atm and I noticed a bunch of <code>upstart</code> warnings like this:</p>\n\n<pre><code>initctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\ninsserv: warning: script 'binfmt-support' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `binfmt-support'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `binfmt-support'\n</code></pre>\n\n<p>Yet, the upgrading is still continuing. Does this mean, I don't need to worry about all unfinished configurations? Or should I do something to correct this?</p>\n\n<p>I will transition from <code>upstart</code> to <code>systemd</code> as mentioned <a href=\"http://askubuntu.com/q/614970/258487\">here</a>, but do I need to do anything else?</p>\n\n<hr>\n\n<pre><code>binfmt-support:\n  Installed: 2.1.5-1\n  Candidate: 2.1.5-1\n  Version table:\n *** 2.1.5-1 0\n        500 http://archive.ubuntu.com/ubuntu/ wily/main amd64 Packages\n        100 /var/lib/dpkg/status\n\nsudo gparted\n======================\nlibparted : 3.2\n======================\n</code></pre>\n\n<hr>\n\n<pre><code>sudo apt-get install --reinstall binfmt-support \nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\n0 to upgrade, 0 to newly install, 1 reinstalled, 0 to remove and 0 not to upgrade.\nNeed to get 0 B/49.5 kB of archives.\nAfter this operation, 0 B of additional disk space will be used.\n(Reading database ... 382720 files and directories currently installed.)\nPreparing to unpack .../binfmt-support_2.1.5-1_amd64.deb ...\nUnpacking binfmt-support (2.1.5-1) over (2.1.5-1) ...\nProcessing triggers for ureadahead (0.100.0-19) ...\nProcessing triggers for systemd (225-1ubuntu9) ...\nProcessing triggers for man-db (2.7.4-1) ...\nSetting up binfmt-support (2.1.5-1) ...\nupdate-binfmts: warning: current package is openjdk-8, but binary format already installed by openjdk-7\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\ninsserv: warning: script 'binfmt-support' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `binfmt-support'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `binfmt-support'\n</code></pre>\n"},{"id":646625,"title":"lxc launch hangs for lxd","body":"<p>New to lxd, and follow the article <a href=\"https://insights.ubuntu.com/2015/04/28/getting-started-with-lxd-the-container-lightervisor/\" rel=\"nofollow\">https://insights.ubuntu.com/2015/04/28/getting-started-with-lxd-the-container-lightervisor/</a> , also refer the <a href=\"https://github.com/lxc/lxd\" rel=\"nofollow\">https://github.com/lxc/lxd</a> for upgrading to latest lxd</p>\n\n<p>I can get the result from <code>lxc image list images:</code> command</p>\n\n<pre><code>root@lxd:~# lxc image list images:\n+--------------------------------+--------------+--------+-------------------------+---------+-------------------------------+\n|             ALIAS              | FINGERPRINT  | PUBLIC |       DESCRIPTION       |  ARCH   |          UPLOAD DATE          |\n+--------------------------------+--------------+--------+-------------------------+---------+-------------------------------+\n|                                | 8d552ca0de3c | yes    | Centos 6 (amd64)        | x86_64  | Jun 17, 2015 at 11:17am (CST) |\n|                                | f7d9e7940fbb | yes    | Centos 6 (amd64)        | x86_64  | Jun 18, 2015 at 11:17am (CST) |\n....\n</code></pre>\n\n<p>While I try to launch the container by </p>\n\n<pre><code>root@lxd:~# lxc launch images:ubuntu/trusty/i386 ubuntu-32\nCreating container...\n</code></pre>\n\n<p>It just hangs there, any suggestion for the problem or where is the log message for debug ?</p>\n\n<p>below is the env.</p>\n\n<pre>\nroot@lxd:~# lxc --version\n0.7\nroot@lxd:~# lxd --version\n0.13\nroot@lxd:~# uname -a\nLinux lxd 3.19.0-15-generic #15-Ubuntu SMP Thu Apr 16 23:32:37 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nroot@lxd:~# cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=15.04\nDISTRIB_CODENAME=vivid\nDISTRIB_DESCRIPTION=\"Ubuntu 15.04\"\n</pre>\n"},{"id":528161,"title":"How to make a HDD device file /dev/sdxY available in lxc container?","body":"<p>I created a lxc container with <code>sudo lxc-create -n ubuntu-trusty-amd64 -t ubuntu -- --arch amd64 --release trusty</code> on Ubuntu 14.04 with lxc 1.0.5-0ubuntu0.1 and realized that there're no device files in <code>/dev/</code> for my HDDs. How can I make them available (via device file or a similar workaround) in the lxc so that I can mount the device?</p>\n\n<p>I figured (with muru's link in comments) that adding</p>\n\n<pre><code>lxc.hook.autodev = /path/to/script\n</code></pre>\n\n<p>to a config file (which BTW?) is necessary and <code>script</code> contains a <code>mknod</code> statement, but I don't understand the usage of <code>mknod</code>. </p>\n\n<p><code>ls -a /dev/</code> in the lxc gives</p>\n\n<pre><code>.         dsp1   loop3   midi03      port   ram15   rmidi0     stderr  tty7\n..        dsp2   loop4   midi1       ptmx   ram16   rmidi1     stdin   tty8\nagpgart   dsp3   loop5   midi2       pts    ram2    rmidi2     stdout  tty9\naudio     fd     loop6   midi3       ram    ram3    rmidi3     tty     urandom\naudio1    full   loop7   mixer       ram0   ram4    sequencer  tty0    zero\naudio2    kmem   lxc     mixer1      ram1   ram5    shm        tty1\naudio3    kmsg   mem     mixer2      ram10  ram6    smpte0     tty2\naudioctl  log    midi0   mixer3      ram11  ram7    smpte1     tty3\nconsole   loop0  midi00  mpu401data  ram12  ram8    smpte2     tty4\ncore      loop1  midi01  mpu401stat  ram13  ram9    smpte3     tty5\ndsp       loop2  midi02  null        ram14  random  sndstat    tty6\n</code></pre>\n\n<p>I tried to mount the device file (although it seems strange). Therefore the mountpoint under <code>/var/lib/lxc/&lt;name&gt;/rootfs/dev/</code> has to be created. Creating a file with <code>touch</code> doesn't work because the host can't mount a device file under a file. Creating a directory with <code>mkdir</code> on the host works, but doesn't allow to mount it in the lxc because it's recognized as directory.</p>\n\n<p>It should be possible to create a <code>dd</code> image of the device using the device file <em>inside</em>  the lxc, for example.</p>\n"},{"id":598395,"title":"Ping to LXC container","body":"<p>Please, I try to do ping 10.0.3.8 (ip of LXC container) from VMB but it didn’t work ! \nHave you an idea please ?</p>\n\n<p>Here is an explanation of what I want do: (red arrow)</p>\n\n<p>The blue arrows means that the ping works correctly. The red arrow means that there is a problem: i try from VMB (192.168.1.7) to ping 10.0.3.8 i have this message blocked : ping 10.0.3.8 PING 10.0.3.8 (10.0.3.8) 56(84) bytes of data. --- 10.0.3.8 ping statistics --- 68 packets transmitted, 0 received, 100% packet loss, time 67214ms –</p>\n\n<p><img src=\"http://i.stack.imgur.com/Q4YB5.jpg\" alt=\"enter image description here\">\nThanks a lot.</p>\n\n<p>Best Regards.</p>\n"},{"id":500589,"title":"setting macvlan bridge for lxc containers","body":"<p>I am trying to create containers which can be accessed from outside. So i've chosen the macvlan mode of networking which can assign an IP to the containers in the same network as the host.<br>\nI have added the following in my <code>/etc/network/interfaces</code>:</p>\n\n<pre><code>auto macvlan0\n\niface macvlan0 inet static\n\npre-up route del default\n\npre-up route del -net aa.bb.cc.0 netmask 255.255.255.0\n\npre-up ip link add link eth0 name macvlan0 type macvlan mode bridge\n\naddress 192.168.171.141\nthis creates a macvlan bridge by the name macvlan0 but i am not able to ping it from inside the container\n\nthis is the conf file of my container (i've mentioned only the nerworking part)\n\n lxc.network.type = macvlan\n\n lxc.network.macvlan.mode = bridge\n\n lxc.network.flags = up\n\n lxc.network.link = eth0\n\n lxc.network.ipv4 = aa.bb.cc.155/24\n</code></pre>\n\n<p>Can anyone tell me what I am doing wrong?</p>\n"},{"id":432176,"title":"Snapshot of a LXC container","body":"<p>Please, is it possible to migrate a container to a new node and restart it there ? \nAnd How? should i take a snapshot of the container or i transfer the repository to the new node ?</p>\n\n<p>(Beginner with LXC container)</p>\n\n<p>Thank you so much.</p>\n"},{"id":381099,"title":"How to log into lxc container?","body":"<p>I recently installed the 32 bit lxc container on a 64 bit Ubuntu 12.04 system.\nWhen I run the command <code>sudo lxc-start -n my32bitbox</code> I am greeted with a login prompt. I\nenter the default login and password which is: login= ubuntu ; password= ubuntu; but I am still unable to log on to the container. How can I resolve this issue?</p>\n"},{"id":368552,"title":"lxc containers hangs after upgrade to 13.10","body":"<p>I have 3 lxc containers.  They were all working fine on 12.10 and I upgraded the containers with do-release-upgrade on the containers to 13.04 and 13.10 and that worked great.  Then I upgraded the host to 13.04 and then 13.10 and now the 3 containers hang with this:</p>\n\n<p>Update: Everything I've said is still true but lxc-ls shows the containers as running so they are running they are just stuck somewhere while trying to start up.  The /var/log/syslog, kern.log and auth.log don't get updated but wtmp and upstart do.  Some files in the /var/log/upstart directory have errors but not sure which one really matters.  Ah-ha!</p>\n\n<pre><code>    &gt;lxc-start -n as1 -l DEBUG -o $(tty)\n      lxc-start 1383145786.513 INFO     lxc_start_ui - using rcfile /var/lib/lxc/as1/config\n      lxc-start 1383145786.513 WARN     lxc_log - lxc_log_init called with log already initialized\n      lxc-start 1383145786.513 INFO     lxc_apparmor - aa_enabled set to 1\n\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/2' (5/6)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/13' (7/8)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/14' (9/10)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/15' (11/12)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/17' (13/14)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/18' (15/16)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/19' (17/18)\n      lxc-start 1383145786.514 DEBUG    lxc_conf - allocated pty '/dev/pts/20' (19/20)\n      lxc-start 1383145786.514 INFO     lxc_conf - tty's configured\n      lxc-start 1383145786.514 DEBUG    lxc_start - sigchild handler set\n      lxc-start 1383145786.514 DEBUG    lxc_console - opening /dev/tty for console peer\n      lxc-start 1383145786.514 DEBUG    lxc_console - using '/dev/tty' as console\n      lxc-start 1383145786.514 DEBUG    lxc_console - 6242 got SIGWINCH fd 25\n      lxc-start 1383145786.514 DEBUG    lxc_console - set winsz dstfd:22 cols:177 rows:53\n      lxc-start 1383145786.514 INFO     lxc_start - 'as1' is initialized\n      lxc-start 1383145786.522 DEBUG    lxc_start - Not dropping cap_sys_boot or watching utmp\n\n      lxc-start 1383145786.524 DEBUG    lxc_conf - mac address of host interface 'vethB4L35W' changed to private fe:7c:96:a0:ae:29\n      lxc-start 1383145786.525 DEBUG    lxc_conf - instanciated veth 'vethB4L35W/vethVC61K2', index is '26'\n      lxc-start 1383145786.529 DEBUG    lxc_cgroup - cgroup 'memory.limit_in_bytes' set to '20G'\n      lxc-start 1383145786.529 DEBUG    lxc_cgroup - cgroup 'cpuset.cpus' set to '12-23'\n      lxc-start 1383145786.529 INFO     lxc_cgroup - cgroup has been setup\n      lxc-start 1383145786.555 DEBUG    lxc_conf - move 'eth0' to '6249'\n      lxc-start 1383145786.555 INFO     lxc_conf - 'as1' hostname has been setup\n      lxc-start 1383145786.575 DEBUG    lxc_conf - 'eth0' has been setup\n      lxc-start 1383145786.575 INFO     lxc_conf - network has been setup\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .44 42 252:0 / / rw,relatime - ext4 /dev/mapper/limitorderbook1-root rw,errors=remount-ro,data=ordered\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .52 44 0:5 / /dev rw,relatime - devtmpfs udev rw,size=32961632k,nr_inodes=8240408,mode=755\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /dev.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .61 52 0:11 / /dev/pts rw,nosuid,noexec,relatime - devpts devpts rw,mode=600,ptmxmode=000\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /dev/pts.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .68 44 0:15 / /run rw,nosuid,noexec,relatime - tmpfs tmpfs rw,size=6594456k,mode=755\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /run.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .69 68 0:18 / /run/lock rw,nosuid,nodev,noexec,relatime - tmpfs none rw,size=5120k\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /run/lock.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .72 68 0:19 / /run/shm rw,nosuid,nodev,relatime - tmpfs none rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /run/shm.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .73 68 0:21 / /run/user rw,nosuid,nodev,noexec,relatime - tmpfs none rw,size=102400k,mode=755\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /run/user.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .76 44 0:14 / /sys rw,nosuid,nodev,noexec,relatime - sysfs sysfs rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .77 76 0:16 / /sys/fs/cgroup rw,relatime - tmpfs none rw,size=4k,mode=755\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .78 77 0:20 / /sys/fs/cgroup/cpuset rw,relatime - cgroup cgroup rw,cpuset,clone_children\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpuset.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .79 77 0:23 / /sys/fs/cgroup/cpu rw,relatime - cgroup cgroup rw,cpu\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpu.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .80 77 0:24 / /sys/fs/cgroup/cpuacct rw,relatime - cgroup cgroup rw,cpuacct\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpuacct.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .81 77 0:25 / /sys/fs/cgroup/memory rw,relatime - cgroup cgroup rw,memory\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/memory.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .82 77 0:26 / /sys/fs/cgroup/devices rw,relatime - cgroup cgroup rw,devices\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/devices.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .83 77 0:27 / /sys/fs/cgroup/freezer rw,relatime - cgroup cgroup rw,freezer\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/freezer.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .84 77 0:28 / /sys/fs/cgroup/blkio rw,relatime - cgroup cgroup rw,blkio\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/blkio.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .85 77 0:29 / /sys/fs/cgroup/perf_event rw,relatime - cgroup cgroup rw,perf_event\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/perf_event.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .94 77 0:30 / /sys/fs/cgroup/hugetlb rw,relatime - cgroup cgroup rw,hugetlb\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/hugetlb.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .95 77 0:31 / /sys/fs/cgroup/systemd rw,nosuid,nodev,noexec,relatime - cgroup systemd rw,name=systemd\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/cgroup/systemd.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .96 76 0:17 / /sys/fs/fuse/connections rw,relatime - fusectl none rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/fuse/connections.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .98 76 0:6 / /sys/kernel/debug rw,relatime - debugfs none rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/kernel/debug.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .101 76 0:10 / /sys/kernel/security rw,relatime - securityfs none rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/kernel/security.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .102 76 0:22 / /sys/fs/pstore rw,relatime - pstore none rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /sys/fs/pstore.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .103 44 0:3 / /proc rw,nosuid,nodev,noexec,relatime - proc proc rw\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /proc.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .104 44 9:2 / /data rw,relatime - ext4 /dev/md2 rw,errors=remount-ro,data=ordered\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /data.\n      lxc-start 1383145786.575 INFO     lxc_conf - looking at .105 44 8:1 / /boot rw,relatime - ext2 /dev/sda1 rw,errors=continue\n.\n      lxc-start 1383145786.575 INFO     lxc_conf - now p is . /boot.\n      lxc-start 1383145786.576 DEBUG    lxc_conf - mounted '/data/srv/lxc/as1' on '/usr/lib/x86_64-linux-gnu/lxc'\n      lxc-start 1383145786.576 DEBUG    lxc_conf - mounted 'none' on '/usr/lib/x86_64-linux-gnu/lxc//dev/pts', type 'devpts'\n      lxc-start 1383145786.576 DEBUG    lxc_conf - mounted 'none' on '/usr/lib/x86_64-linux-gnu/lxc//proc', type 'proc'\n      lxc-start 1383145786.576 DEBUG    lxc_conf - mounted 'none' on '/usr/lib/x86_64-linux-gnu/lxc//sys', type 'sysfs'\n      lxc-start 1383145786.576 DEBUG    lxc_conf - mounted 'none' on '/usr/lib/x86_64-linux-gnu/lxc//run', type 'tmpfs'\n      lxc-start 1383145786.576 INFO     lxc_conf - mount points have been setup\n      lxc-start 1383145786.577 INFO     lxc_conf - console has been setup\n      lxc-start 1383145786.577 INFO     lxc_conf - 8 tty(s) has been setup\n      lxc-start 1383145786.577 INFO     lxc_conf - rootfs path is ./data/srv/lxc/as1., mount is ./usr/lib/x86_64-linux-gnu/lxc.\n      lxc-start 1383145786.577 INFO     lxc_apparmor - I am 1, /proc/self points to 1\n\n      lxc-start 1383145786.577 DEBUG    lxc_conf - created '/usr/lib/x86_64-linux-gnu/lxc/lxc_putold' directory\n      lxc-start 1383145786.577 DEBUG    lxc_conf - mountpoint for old rootfs is '/usr/lib/x86_64-linux-gnu/lxc/lxc_putold'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - pivot_root syscall to '/usr/lib/x86_64-linux-gnu/lxc' successful\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/dev/pts'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/run/lock'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/run/shm'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/run/user'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/cpuset'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/cpu'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/cpuacct'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/memory'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/devices'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/freezer'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/blkio'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/perf_event'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/hugetlb'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup/systemd'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/fuse/connections'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/kernel/debug'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/kernel/security'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/pstore'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/proc'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/data'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/boot'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/dev'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/run'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys/fs/cgroup'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold/sys'\n      lxc-start 1383145786.577 DEBUG    lxc_conf - umounted '/lxc_putold'\n      lxc-start 1383145786.577 INFO     lxc_conf - created new pts instance\n      lxc-start 1383145786.578 DEBUG    lxc_conf - drop capability 'sys_boot' (22)\n      lxc-start 1383145786.578 DEBUG    lxc_conf - capabilities have been setup\n      lxc-start 1383145786.578 NOTICE   lxc_conf - 'as1' is setup.\n      lxc-start 1383145786.578 DEBUG    lxc_cgroup - cgroup 'memory.limit_in_bytes' set to '20G'\n      lxc-start 1383145786.578 DEBUG    lxc_cgroup - cgroup 'cpuset.cpus' set to '12-23'\n      lxc-start 1383145786.578 INFO     lxc_cgroup - cgroup has been setup\n      lxc-start 1383145786.578 INFO     lxc_apparmor - setting up apparmor\n      lxc-start 1383145786.578 INFO     lxc_apparmor - changed apparmor profile to lxc-container-default\n      lxc-start 1383145786.578 NOTICE   lxc_start - exec'ing '/sbin/init'\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .15 20 0:14 / /sys rw,nosuid,nodev,noexec,relatime - sysfs sysfs rw\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /sys.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .16 20 0:3 / /proc rw,nosuid,nodev,noexec,relatime - proc proc rw\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /proc.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .17 20 0:5 / /dev rw,relatime - devtmpfs udev rw,size=32961632k,nr_inodes=8240408,mode=755\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /dev.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .18 17 0:11 / /dev/pts rw,nosuid,noexec,relatime - devpts devpts rw,mode=600,ptmxmode=000\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /dev/pts.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .19 20 0:15 / /run rw,nosuid,noexec,relatime - tmpfs tmpfs rw,size=6594456k,mode=755\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /run.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .20 1 252:0 / / rw,relatime - ext4 /dev/mapper/limitorderbook1-root rw,errors=remount-ro,data=ordered\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .22 15 0:16 / /sys/fs/cgroup rw,relatime - tmpfs none rw,size=4k,mode=755\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /sys/fs/cgroup.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .23 15 0:17 / /sys/fs/fuse/connections rw,relatime - fusectl none rw\n.\n      lxc-start 1383145786.578 INFO     lxc_conf - now p is . /sys/fs/fuse/connections.\n      lxc-start 1383145786.578 INFO     lxc_conf - looking at .24 15 0:6 / /sys/kernel/debug rw,relatime - debugfs none rw\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/kernel/debug.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .25 15 0:10 / /sys/kernel/security rw,relatime - securityfs none rw\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/kernel/security.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .26 19 0:18 / /run/lock rw,nosuid,nodev,noexec,relatime - tmpfs none rw,size=5120k\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /run/lock.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .27 19 0:19 / /run/shm rw,nosuid,nodev,relatime - tmpfs none rw\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /run/shm.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .28 22 0:20 / /sys/fs/cgroup/cpuset rw,relatime - cgroup cgroup rw,cpuset,clone_children\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpuset.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .29 19 0:21 / /run/user rw,nosuid,nodev,noexec,relatime - tmpfs none rw,size=102400k,mode=755\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /run/user.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .30 15 0:22 / /sys/fs/pstore rw,relatime - pstore none rw\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/pstore.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .31 22 0:23 / /sys/fs/cgroup/cpu rw,relatime - cgroup cgroup rw,cpu\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpu.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .32 22 0:24 / /sys/fs/cgroup/cpuacct rw,relatime - cgroup cgroup rw,cpuacct\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/cpuacct.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .33 22 0:25 / /sys/fs/cgroup/memory rw,relatime - cgroup cgroup rw,memory\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/memory.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .34 22 0:26 / /sys/fs/cgroup/devices rw,relatime - cgroup cgroup rw,devices\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/devices.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .35 22 0:27 / /sys/fs/cgroup/freezer rw,relatime - cgroup cgroup rw,freezer\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/freezer.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .36 22 0:28 / /sys/fs/cgroup/blkio rw,relatime - cgroup cgroup rw,blkio\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/blkio.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .37 22 0:29 / /sys/fs/cgroup/perf_event rw,relatime - cgroup cgroup rw,perf_event\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/perf_event.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .38 22 0:30 / /sys/fs/cgroup/hugetlb rw,relatime - cgroup cgroup rw,hugetlb\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/hugetlb.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .39 20 9:2 / /data rw,relatime - ext4 /dev/md2 rw,errors=remount-ro,data=ordered\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /data.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .40 20 8:1 / /boot rw,relatime - ext2 /dev/sda1 rw,errors=continue\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /boot.\n      lxc-start 1383145786.579 INFO     lxc_conf - looking at .41 22 0:31 / /sys/fs/cgroup/systemd rw,nosuid,nodev,noexec,relatime - cgroup systemd rw,name=systemd\n.\n      lxc-start 1383145786.579 INFO     lxc_conf - now p is . /sys/fs/cgroup/systemd.\n      lxc-start 1383145786.579 NOTICE   lxc_start - '/sbin/init' started with pid '6249'\n      lxc-start 1383145786.579 WARN     lxc_start - invalid pid for SIGCHLD\n&lt;4&gt;init: ureadahead main process (7) terminated with status 5\n&lt;4&gt;init: console-font main process (94) terminated with status 1\n</code></pre>\n\n<p>And it will just sit there like that for hours at least.  The container becomes pingable but I can't ssh and if I try lxc-console -n as1 I get a blank screen.</p>\n\n<p>If I do lxc-stop -n as1 or ^C in the window where it has hung I get:</p>\n\n<pre><code>^CTERM environment variable not set.\n&lt;4&gt;init: plymouth-upstart-bridge main process (192) terminated with status 1\n&lt;4&gt;init: hwclock-save main process (187) terminated with status 70\n * Asking all remaining processes to terminate...\n   ...done.\n * All processes ended within 1 seconds...\n   ...done.\n * Deactivating swap...\n   ...fail!\nmount: cannot mount block device /dev/md2 read-only\n * Will now restart\n</code></pre>\n\n<p>But after 20 minutes it hasn't restarted.  Any ideas why these containers are hanging?</p>\n"}]}]
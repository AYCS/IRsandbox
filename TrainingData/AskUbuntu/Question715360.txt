[{"id":715360,"title":"postgres: unrecognized service","body":"<p>After reading this <a href=\"http://serverfault.com/questions/483216/postgresql-unrecognized-even-though-its-installed\">question</a> I did:</p>\n\n<pre><code>gsamaras@gsamaras:~$ sudo apt-get install postgresql\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\npostgresql is already the newest version.\nThe following packages were automatically installed and are no longer required:\n  account-plugin-windows-live asymptote asymptote-doc freeglut3 gdebi-core\n  gksu latex-beamer latex-xcolor libgksu2-0 libgsl0ldbl liblouis-data\n  liblouis2 libpoppler-qt4-4 libsigsegv2 libupstart1 linux-headers-3.16.0-30\n  linux-headers-3.16.0-30-generic linux-headers-3.16.0-40\n  linux-headers-3.16.0-40-generic linux-image-3.16.0-30-generic\n  linux-image-3.16.0-40-generic linux-image-extra-3.16.0-30-generic\n  linux-image-extra-3.16.0-40-generic pgf preview-latex-style prosper ps2eps\n  python-imaging-tk python3-brlapi python3-louis python3-pyatspi\n  python3-speechd texlive-extra-utils texlive-font-utils\n  texlive-generic-recommended texlive-lang-english texlive-latex-extra\n  texlive-latex-extra-doc texlive-latex-recommended\n  texlive-latex-recommended-doc texlive-pictures texlive-pictures-doc\n  texlive-pstricks texlive-pstricks-doc texmaker-data\nUse 'apt-get autoremove' to remove them.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\ngsamaras@gsamaras:~$ sudo service postgres restart\npostgres: unrecognized service\ngsamaras@gsamaras:~$ sudo apt-get install postgresql-server\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage postgresql-server is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'postgresql-server' has no installation candidate\n</code></pre>\n\n<p>Any idea?</p>\n","related_questions":[{"id":638725,"title":"install postgres 9.4 on ubuntu 14.04-2","body":"<p>I need to install <strong>postgresql</strong> 9.4 server but I only can find version 9.3. wit apt.</p>\n\n<p>How can I install or upgrade it? </p>\n"},{"id":684744,"title":"Postgres 9.4 running but &quot;service status&quot; reports it down","body":"<p>Ubuntu 14.04.3 LTS and a new installation of Postgres 9.4 (with <code>apt-get install postgresql-9.4</code>, nothing fancy). Postgres was started with <code>pg_ctl start</code> by the postgres user.</p>\n\n<p>The status command reports the service as down:</p>\n\n<pre><code>[root@box ~]# service postgresql status\n9.4/main (port 5432): down\n</code></pre>\n\n<p>However, the server <em>is</em> running; I can see it's listening on 5432 and I can connect to it with psql.</p>\n\n<pre><code>[root@box ~]# netstat -a -n -p | grep 5432\ntcp        0      0 127.0.0.1:5432          0.0.0.0:*               LISTEN      19377/postgres\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45724         ESTABLISHED 20280/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45725         ESTABLISHED 20281/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45732         ESTABLISHED 20288/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45726         ESTABLISHED 20282/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45729         ESTABLISHED 20285/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45723         ESTABLISHED 20279/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45730         ESTABLISHED 20286/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45731         ESTABLISHED 20287/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45728         ESTABLISHED 20284/postgres: ice\ntcp        0      0 127.0.0.1:5432          127.0.0.1:45727         ESTABLISHED 20283/postgres: ice\nunix  2      [ ACC ]     STREAM     LISTENING     4295677  19377/postgres      /var/run/postgresql/.s.PGSQL.5432\n</code></pre>\n\n<p>psql connection:</p>\n\n<pre><code>[postgres@box~]$ psql\nPassword:\npsql (9.4.5)\n\npostgres=# \\conninfo\nYou are connected to database \"postgres\" as user \"postgres\" via socket in \"/var/run/postgresql\" at port \"5432\".\n</code></pre>\n\n<p>Do I need to do anything else to run Postgres as a service?</p>\n"},{"id":634603,"title":"PostgreSQL 9.4 hangs during installation at &quot;Removing obsolete dictionary files:&quot;","body":"<p>Good day.</p>\n\n<p>I am trying to install PostgreSQL on an Ubuntu server (15.04) 64 bit.  I checked/updated the sources.list and ran:</p>\n\n<pre><code># apt-get update\n</code></pre>\n\n<p>followed by:</p>\n\n<pre><code># apt-get install postgresql\n</code></pre>\n\n<p>The installation started until it came to \"Removing obsolete dictionary files:\" where it hangs:</p>\n\n<pre>\n# apt-get install postgresql\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following extra packages will be installed:\n  libpq5 postgresql-9.4 postgresql-client-9.4 postgresql-client-common postgresql-common ssl-cert\nSuggested packages:\n  postgresql-doc oidentd ident-server locales-all postgresql-doc-9.4 openssl-blacklist\nThe following NEW packages will be installed:\n  libpq5 postgresql postgresql-9.4 postgresql-client-9.4 postgresql-client-common postgresql-common ssl-cert\n0 upgraded, 7 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 3,934 kB of archives.\nAfter this operation, 16.3 MB of additional disk space will be used.\nDo you want to continue? [Y/n] \nGet:1 http://mirror.hetzner.de/ubuntu/packages/ vivid-updates/main libpq5 amd64 9.4.2-0ubuntu0.15.04 [77.5 kB]\nGet:2 http://mirror.hetzner.de/ubuntu/packages/ vivid/main postgresql-client-common all 166bzr2 [26.9 kB]\nGet:3 http://mirror.hetzner.de/ubuntu/packages/ vivid-updates/main postgresql-client-9.4 amd64 9.4.2-0ubuntu0.15.04 [817 kB]\nGet:4 http://mirror.hetzner.de/ubuntu/packages/ vivid/main ssl-cert all 1.0.35 [17.4 kB]\nGet:5 http://mirror.hetzner.de/ubuntu/packages/ vivid/main postgresql-common all 166bzr2 [151 kB]\nGet:6 http://mirror.hetzner.de/ubuntu/packages/ vivid-updates/main postgresql-9.4 amd64 9.4.2-0ubuntu0.15.04 [2,839 kB]\nGet:7 http://mirror.hetzner.de/ubuntu/packages/ vivid/main postgresql all 9.4+166bzr2 [5,104 B]\nFetched 3,934 kB in 0s (14.4 MB/s)     \nPreconfiguring packages ...\nSelecting previously unselected package libpq5:amd64.\n(Reading database ... 57554 files and directories currently installed.)\nPreparing to unpack .../libpq5_9.4.2-0ubuntu0.15.04_amd64.deb ...\nUnpacking libpq5:amd64 (9.4.2-0ubuntu0.15.04) ...\nSelecting previously unselected package postgresql-client-common.\nPreparing to unpack .../postgresql-client-common_166bzr2_all.deb ...\nUnpacking postgresql-client-common (166bzr2) ...\nSelecting previously unselected package postgresql-client-9.4.\nPreparing to unpack .../postgresql-client-9.4_9.4.2-0ubuntu0.15.04_amd64.deb ...\nUnpacking postgresql-client-9.4 (9.4.2-0ubuntu0.15.04) ...\nSelecting previously unselected package ssl-cert.\nPreparing to unpack .../ssl-cert_1.0.35_all.deb ...\nUnpacking ssl-cert (1.0.35) ...\nSelecting previously unselected package postgresql-common.\nPreparing to unpack .../postgresql-common_166bzr2_all.deb ...\nAdding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'\nUnpacking postgresql-common (166bzr2) ...\nSelecting previously unselected package postgresql-9.4.\nPreparing to unpack .../postgresql-9.4_9.4.2-0ubuntu0.15.04_amd64.deb ...\nUnpacking postgresql-9.4 (9.4.2-0ubuntu0.15.04) ...\nSelecting previously unselected package postgresql.\nPreparing to unpack .../postgresql_9.4+166bzr2_all.deb ...\nUnpacking postgresql (9.4+166bzr2) ...\nProcessing triggers for man-db (2.7.0.2-5) ...\nProcessing triggers for systemd (219-7ubuntu5) ...\nProcessing triggers for ureadahead (0.100.0-19) ...\nSetting up libpq5:amd64 (9.4.2-0ubuntu0.15.04) ...\nSetting up postgresql-client-common (166bzr2) ...\nSetting up postgresql-client-9.4 (9.4.2-0ubuntu0.15.04) ...\nupdate-alternatives: using /usr/share/postgresql/9.4/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\nSetting up ssl-cert (1.0.35) ...\nSetting up postgresql-common (166bzr2) ...\nAdding user postgres to group ssl-cert\n\nCreating config file /etc/postgresql-common/createcluster.conf with new version\n\nCreating config file /etc/logrotate.d/postgresql-common with new version\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\nRemoving obsolete dictionary files:\n</pre>\n\n<p>I left it, but quit after a while.  After getting rid of the locks, I tried running:</p>\n\n<pre><code># dpkg --configure -a\n</code></pre>\n\n<p>which continued and got stuck at exactly the same place (\"Removing obsolete...).</p>\n\n<p>It seems to be something to do with \"aspell\", but I have no idea what exactly. Any help would be appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>I tried changing the locale and got this:</p>\n\n<pre>\n# locale\nLANG=en_US.UTF-8\nLANGUAGE=en_US:en\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=\n# LANG=POSIX\n# apt-get install postgresql\nE: dpkg was interrupted, you must manually run 'dpkg --configure -a' to correct the problem. \n# dpkg --configure -a\nSetting up postgresql-common (166bzr2) ...\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\n  en_gb\nRemoving obsolete dictionary files:\n</pre>\n"},{"id":371722,"title":"Can&#39;t uninstall postgresql package due failing to start service?","body":"<p>I simply don't understand what's going on.</p>\n\n<pre><code>sudo apt-get remove postgresql\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage 'postgresql' is not installed, so not removed\n0 upgraded, 0 newly installed, 0 to remove and 35 not upgraded.\n1 not fully installed or removed.\nAfter this operation, 0 B of additional disk space will be used.\nSetting up postgresql-9.1 (9.1.10-0ubuntu13.04) ...\n * Starting PostgreSQL 9.1 database server                                                                                                                                                            * The PostgreSQL server failed to start. Please check the log output:\n2013-11-05 12:40:58 PST FATAL:  could not create lock file \"/var/run/postgresql/.s.PGSQL.5432.lock\": Permission denied\n                                                                                                                                                                                              [fail]\ninvoke-rc.d: initscript postgresql, action \"start\" failed.\ndpkg: error processing postgresql-9.1 (--configure):\n subprocess installed post-installation script returned error exit status 1\nErrors were encountered while processing:\n postgresql-9.1\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p>I mean, why is it trying to start the server. Right I'm a bit of a unix noob and a huge postgres noob so bear with me, but randomly starting the server while I'm trying to uninstall it seems so random. Just don't get it.</p>\n\n<p>How can I completely and utterly uninstall postgresql?</p>\n"},{"id":319236,"title":"Postgres uninstall: &quot;server.key has group or world access&quot; error","body":"<p>I'm trying to uninstall postgresql, but its really complaining. I suspect something is broken. I'm on 12.04, installed via apt-get. </p>\n\n<pre><code>sudo apt-get remove postgresql\n</code></pre>\n\n<p>returns:</p>\n\n<blockquote>\n  <p>Reading package lists... Done \n  Building dependency tree Reading state information... Done\n  Package postgresql is not installed, so not removed 0 upgraded, 0 newly installed, 0 to remove and 9 not upgraded.\n  2 not fully installed or removed. After this operation, 0 B of\n  additional disk space will be used. Setting up postgresql-common\n  (129ubuntu1) ...  * Starting PostgreSQL 9.1 database server<br>\n  * The PostgreSQL server failed to start. Please check the log output: 2013-07-12 11:13:30 </p>\n  \n  <p>BST FATAL:  private key file \"server.key\" has\n  group or world access 2013-07-12 11:13:30 </p>\n  \n  <p>BST DETAIL:  File must be\n  owned by the database user or root, must have no write permission for\n  \"group\", and must have no permissions for \"other\".</p>\n  \n  <p>invoke-rc.d: initscript postgresql, action \"start\" failed.\n  dpkg: error processing postgresql-common (--configure):\n   subprocess installed post-installation script returned error exit status 1\n  dpkg: dependency problems prevent configuration of postgresql-9.1:\n   postgresql-9.1 depends on postgresql-common (>= 115~); however:\n    Package postgresql-common is not configured yet.\n  dpkg: error processing postgresql-9.1 (--configure):\n   dependency problems - leaving unconfigured</p>\n</blockquote>\n\n<p>Now I have tried to fix the server.key file; I copied the snake oil file to <code>/var/lib/postgresql/9.1/main/server.key</code> then I have modded it: </p>\n\n<pre><code>chmod 700 server.key\nchown postgres:postgres server.key\n</code></pre>\n\n<p><strong>sanity check:</strong> </p>\n\n<pre><code>ls -l server.key\n</code></pre>\n\n<blockquote>\n  <p>-rwx------ 1 postgres postgres 887 Jul 12 10:07 server.key</p>\n</blockquote>\n\n<p>But it still complains that the file has group access. </p>\n\n<p>Would appreciate any help to remove this, forced reinstall with <code>install -f</code> doesn't help. :(</p>\n"},{"id":531307,"title":"postgres-xc will not install due to broken packages","body":"<p>On a 14.04 installation, postgresql was installed via\n<code>sudo apt-get install postgresql postgresql-contrib libpq-dev</code>  </p>\n\n<p>This installation is meant to be a slave but cannot start up without running pg_resetxlog.  Even though <code>/usr/lib/postgresql/9.3/bin/</code> has pg_resetxlog, the system requires installing 'postgres-xc'.</p>\n\n<pre><code>apt-get install postgres-xc\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nSome packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\nThe following information may help to resolve the situation:\n\nThe following packages have unmet dependencies:\n postgres-xc : Depends: postgres-xc-client but it is not going to be installed\nE: Unable to correct problems, you have held broken packages.\n</code></pre>\n\n<p>if postgres-xc depends on postgres-xc-client, why is this dependency being ignored?</p>\n\n<p><strong>Update</strong>\nSlave is a VPS.  Was installed creating postgresql via\n<code>sudo apt-get install postgresql postgresql-contrib libpq-dev</code><br>\nOn the master (OS X 10.6.8 with postgre installed via homebrew)</p>\n\n<pre><code>psql -c \"select pg_start_backup('initial_backup');\"\nrsync -cva --inplace --exclude=*pg_xlog* /usr/local/var/postgres/ slave_IP_address:/var/lib/postgresql/9.3/main/\npsql -c \"select pg_stop_backup();\"\n</code></pre>\n\n<p>The slave then had its recovery.conf file created.  but the startup of the slave <code>service postgresql start</code> started choking  pg_log being excluded, that directory was then created.<br>\nThen:\n<code>PANIC: could not locate a valid checkpoint record</code></p>\n"},{"id":352539,"title":"Installing postgres on 13.04: no valid OpenPGP data found","body":"<p>Following the <a href=\"http://www.ubuntugeek.com/how-to-install-postgresql-9-2-on-ubuntu-13-04-server.html\" rel=\"nofollow\">UbuntuGeek instructions for installing Postgres on Ubuntu 13.04</a> (and <a href=\"http://askubuntu.com/a/289388/135095\">reinforced here</a>), I'm getting stuck at this command:</p>\n\n<pre><code>wget --quiet -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | sudo apt-key add -\n</code></pre>\n\n<p>My system is responding:</p>\n\n<pre><code>gpg: no valid OpenPGP data found.\n</code></pre>\n\n<p>In case it's relevant, my pgdg.list file contains only this line:</p>\n\n<pre><code>deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main\n</code></pre>\n\n<p>What do I need to do to move forward?</p>\n"},{"id":359126,"title":"Trying to install Postgres 9.3 in a non-LTS version of Ubuntu, how do I go?","body":"<p>I'm trying to install Postgres 9.3 with the instructions <a href=\"http://wiki.postgresql.org/wiki/Apt\" rel=\"nofollow\">here</a>. But the install is failing.</p>\n\n<pre><code>[ubuntu:~]$ lsb_release -c\nCodename:   raring\n[ubuntu:~]$ \n\n[ubuntu:~]$ cat /etc/apt/sources.list.d/pgdg.list \ndeb http://apt.postgresql.org/pub/repos/apt/ raring-pgdg main\n[ubuntu:~]$\n\n[ubuntu:~]$ sudo apt-get update\nHit http://us-west-2.ec2.archive.ubuntu.com raring Release.gpg\nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates Release.gpg                                     \nHit http://us-west-2.ec2.archive.ubuntu.com raring Release                                                 \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates Release                                                                                      \nHit http://us-west-2.ec2.archive.ubuntu.com raring/main Sources                                                                                         \nHit http://us-west-2.ec2.archive.ubuntu.com raring/universe Sources                                                                                     \nHit http://us-west-2.ec2.archive.ubuntu.com raring/main amd64 Packages                                                           \nHit http://us-west-2.ec2.archive.ubuntu.com raring/universe amd64 Packages                                                       \nHit http://us-west-2.ec2.archive.ubuntu.com raring/main Translation-en                                                           \nHit http://us-west-2.ec2.archive.ubuntu.com raring/universe Translation-en                                                       \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/main Sources                                                          \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/universe Sources                                                      \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/main amd64 Packages                                                   \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/universe amd64 Packages                                               \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/main Translation-en                                                   \nHit http://us-west-2.ec2.archive.ubuntu.com raring-updates/universe Translation-en                                               \nIgn http://us-west-2.ec2.archive.ubuntu.com raring/main Translation-en_US                                                        \nHit http://security.ubuntu.com raring-security Release.gpg                                                                       \nIgn http://us-west-2.ec2.archive.ubuntu.com raring/universe Translation-en_US\nIgn http://us-west-2.ec2.archive.ubuntu.com raring-updates/main Translation-en_US\nIgn http://us-west-2.ec2.archive.ubuntu.com raring-updates/universe Translation-en_US\nIgn http://apt.postgresql.org raring-pgdg Release.gpg\nHit http://security.ubuntu.com raring-security Release\nIgn http://apt.postgresql.org raring-pgdg Release\nHit http://security.ubuntu.com raring-security/main Sources\nHit http://security.ubuntu.com raring-security/universe Sources\nHit http://security.ubuntu.com raring-security/main amd64 Packages\nHit http://security.ubuntu.com raring-security/universe amd64 Packages\nHit http://security.ubuntu.com raring-security/main Translation-en\nHit http://security.ubuntu.com raring-security/universe Translation-en\nIgn http://security.ubuntu.com raring-security/main Translation-en_US\nIgn http://security.ubuntu.com raring-security/universe Translation-en_US\nErr http://apt.postgresql.org raring-pgdg/main amd64 Packages\n  404  Not Found [IP: 217.196.149.55 80]\nIgn http://apt.postgresql.org raring-pgdg/main Translation-en_US\nIgn http://apt.postgresql.org raring-pgdg/main Translation-en\nW: Failed to fetch http://apt.postgresql.org/pub/repos/apt/dists/raring-pgdg/main/binary-amd64/Packages  404  Not Found [IP: 217.196.149.55 80]\n\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n[ubuntu:~]$\n\n[ubuntu:~]$ sudo apt-get install postgresql-9.3 pgadmin3\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nE: Unable to locate package postgresql-9.3\nE: Couldn't find any package by regex 'postgresql-9.3'\n[ubuntu:~]$ \n</code></pre>\n\n<p>I've also tried putting these lines in /etc/apt/sources.list. But that doesn't work either.</p>\n\n<pre><code>deb mirror://mirrors.ubuntu.com/mirrors.txt precise main restricted universe multiverse\ndeb mirror://mirrors.ubuntu.com/mirrors.txt precise-updates main restricted universe multiverse\ndeb mirror://mirrors.ubuntu.com/mirrors.txt precise-backports main restricted universe multiverse\ndeb mirror://mirrors.ubuntu.com/mirrors.txt precise-security main restricted universe multiverse\n</code></pre>\n"},{"id":331608,"title":"Installing postgres removes rabbitmq and vice versa. How to make both stay?","body":"<p>I need both rabbitmq-server and postgresql to be installed on my machine and apt-get installing one removes the other. Here is the output from install commands:</p>\n\n<pre><code>    $ sudo apt-get install postgresql\n    Reading package lists... Done\n    Building dependency tree       \n    Reading state information... Done\n    The following packages were automatically installed and are no longer required:\n        erlang-asn1 erlang-base erlang-corba erlang-crypto erlang-diameter erlang-edoc erlang-eldap erlang-erl-docgen erlang-eunit erlang-      ic erlang-inets erlang-inviso erlang-mnesia   erlang-nox erlang-odbc erlang-os-mon erlang-parsetools erlang-percept erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssh       erlang-ssl erlang-syntax-tools erlang-tools erlang-webtool erlang-xmerl libkrb5-dev libodbc1 libossp-uuid16 libsctp1 lksctp-tools postgresql-client-9.1\n    Use 'apt-get autoremove' to remove them.\n    The following extra packages will be installed:\n        postgresql-9.2 postgresql-common\n    Suggested packages:\n        oidentd ident-server locales-all\n    The following packages will be REMOVED:\n        logrotate rabbitmq-server\n    The following NEW packages will be installed:\n        postgresql postgresql-9.2 postgresql-common\n    0 upgraded, 3 newly installed, 2 to remove and 1 not upgraded.\n    Need to get 0 B/3,971 kB of archives.\n    After this operation, 13.8 MB of additional disk space will be used.\n</code></pre>\n\n<p>and upon trying to install rabbitmq-server after installing postgres:</p>\n\n<pre><code>    $ sudo apt-get install rabbitmq-server\n    Reading package lists... Done\n    Building dependency tree       \n    Reading state information... Done\n    The following packages were automatically installed and are no longer required:\n    libkrb5-dev libossp-uuid16 postgresql-client-9.1\n    Use 'apt-get autoremove' to remove them.\n    The following extra packages will be installed:\n    logrotate\n    Suggested packages:\n    mailx\n    The following packages will be REMOVED:\n      postgresql postgresql-9.1 postgresql-9.2 postgresql-9.2-repmgr postgresql-9.2-slony1-2 postgresql-common postgresql-contrib-9.2 postgresql-plpython-9.2 postgresql-server-dev-9.2\n    The following NEW packages will be installed:\n    logrotate rabbitmq-server\n    0 upgraded, 2 newly installed, 9 to remove and 1 not upgraded.\n    Need to get 3,753 kB/3,795 kB of archives.\n    After this operation, 37.6 MB disk space will be freed.\n    Do you want to continue [Y/n]? \n    Get:1 http://in.archive.ubuntu.com/ubuntu/ raring/main rabbitmq-server all 3.0.2-1 [3,753 kB]\n    Fetched 3,524 kB in 19s (177 kB/s)                                                                                                                                                      \n    (Reading database ... 337129 files and directories currently installed.)\n    Removing postgresql ...\n    Removing postgresql-9.1 ...\n     * Stopping PostgreSQL 9.1 database server                                                                                                                                        [ OK ] \n    Removing postgresql-plpython-9.2 ...\n    Removing postgresql-contrib-9.2 ...\n    update-alternatives: warning: forcing reinstallation of alternative /usr/share/postgresql/9.2/man/man1/postmaster.1.gz because link group postmaster.1.gz is broken\n    Removing postgresql-9.2-slony1-2 ...\n    Removing postgresql-9.2-repmgr ...\n    Removing postgresql-9.2 ...\n     * Stopping PostgreSQL 9.2 database server                                                                                                                                        [ OK ] \n    Removing postgresql-server-dev-9.2 ...\n    Removing postgresql-common ...\n    Removing 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'\n    Processing triggers for ureadahead ...\n    ureadahead will be reprofiled on next reboot\n    Processing triggers for man-db ...\n    Selecting previously unselected package logrotate.\n    (Reading database ... 335927 files and directories currently installed.)\n    Unpacking logrotate (from .../logrotate_3.8.3-3ubuntu2_amd64.deb) ...\n    Selecting previously unselected package rabbitmq-server.\n    Unpacking rabbitmq-server (from .../rabbitmq-server_3.0.2-1_all.deb) ...\n    Processing triggers for man-db ...\n    Processing triggers for ureadahead ...\n    Setting up logrotate (3.8.3-3ubuntu2) ...\n    Setting up rabbitmq-server (3.0.2-1) ...\n    * Starting message broker rabbitmq-server\n</code></pre>\n\n<p>My django app is supposed to use postgres as the db and rabbitmq for celery ... and they both are behaving like envious girlfriends.</p>\n\n<p>UPDATE: apt-cache policy</p>\n\n<pre><code> # apt-cache policy\n Package files:\n 100 /var/lib/dpkg/status\n      release a=now\n 500 http://apt.postgresql.org/pub/repos/apt/ precise-pgdg/main amd64 Packages\n      release o=apt.postgresql.org,a=precise-pgdg,n=precise-pgdg,l=PostgreSQL for Debian/Ubuntu repository,c=main\n      origin apt.postgresql.org\n 500 http://security.ubuntu.com/ubuntu/ raring-security/main Translation-en\n 500 http://security.ubuntu.com/ubuntu/ raring-security/main amd64 Packages\n      release v=13.04,o=Ubuntu,a=raring-security,n=raring,l=Ubuntu,c=main\n      origin security.ubuntu.com\n 500 http://archive.ubuntu.com/ubuntu/ raring-updates/universe Translation-en\n 500 http://archive.ubuntu.com/ubuntu/ raring-updates/main Translation-en\n 500 http://archive.ubuntu.com/ubuntu/ raring-updates/universe amd64 Packages\n      release v=13.04,o=Ubuntu,a=raring-updates,n=raring,l=Ubuntu,c=universe\n      origin archive.ubuntu.com\n 500 http://archive.ubuntu.com/ubuntu/ raring-updates/main amd64 Packages\n      release v=13.04,o=Ubuntu,a=raring-updates,n=raring,l=Ubuntu,c=main\n      origin archive.ubuntu.com\n 500 http://archive.ubuntu.com/ubuntu/ raring/universe Translation-en\n 500 http://archive.ubuntu.com/ubuntu/ raring/main Translation-en\n 500 http://archive.ubuntu.com/ubuntu/ raring/universe amd64 Packages\n      release v=13.04,o=Ubuntu,a=raring,n=raring,l=Ubuntu,c=universe\n      origin archive.ubuntu.com\n 500 http://archive.ubuntu.com/ubuntu/ raring/main amd64 Packages\n      release v=13.04,o=Ubuntu,a=raring,n=raring,l=Ubuntu,c=main\n      origin archive.ubuntu.com\n Pinned packages:\n</code></pre>\n\n<p>apt-cache show rabbitmq-server:</p>\n\n<pre><code> # apt-cache show rabbitmq-server\n Package: rabbitmq-server\n Priority: extra\n Section: net\n Installed-Size: 4356\n Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;\n Original-Maintainer: RabbitMQ Team &lt;packaging@rabbitmq.com&gt;\n Architecture: all\n Version: 3.0.2-1\n Depends: erlang-nox (&gt;= 1:12.b.3), adduser, logrotate\n Filename: pool/main/r/rabbitmq-server/rabbitmq-server_3.0.2-1_all.deb\n Size: 3753308\n MD5sum: f89d5b663d67af38ea8f7948fc9ab61a\n SHA1: 30b7b865c42cd279e1194839d69fd522dc0ae12b\n SHA256: 981da016a32255f051fe43d5c6c8ed406b4f22cc8ac7c9dad01690bf42ea1959\n Description-en: AMQP server written in Erlang\n RabbitMQ is an implementation of AMQP, the emerging standard for high\n performance enterprise messaging. The RabbitMQ server is a robust and\n scalable implementation of an AMQP broker.\n Homepage: http://www.rabbitmq.com/\n Description-md5: 78e91bfb996ee4ae5d16c93298f5f6e8\n Bugs: https://bugs.launchpad.net/ubuntu/+filebug\n Origin: Ubuntu\n Supported: 9m\n</code></pre>\n"},{"id":249531,"title":"Postgres-xc won&#39;t uninstall (Fails on Stopping Co-ordinators)","body":"<p>I was doing some rails development and accidentally installed postres-xc instead of the normal postgres package. I immediately went to remove postgres-xc, but apt-get will not uninstall it. I also tried installing the regular postgres, but it fails the same way.</p>\n\n<p>sudo apt-get remove postgres-xc output:</p>\n\n<pre><code>  Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  comerr-dev krb5-multidev libgraphics-magick-perl libgraphicsmagick++1-dev libgraphicsmagick++3 libgraphicsmagick1-dev libgraphicsmagick3 libgssrpc4 libkadm5clnt-mit8 libkadm5srv-mit8\n  libkdb5-6 libkrb5-dev libpq-dev libpq5 libssl-dev libssl-doc linux-headers-3.5.0-17\nUse 'apt-get autoremove' to remove them.\nThe following packages will be REMOVED:\n  postgres-xc\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\n1 not fully installed or removed.\nAfter this operation, 17.1 MB disk space will be freed.\nDo you want to continue [Y/n]? Y\n(Reading database ... 217256 files and directories currently installed.)\nRemoving postgres-xc ...\n * Stopping Postgres-XC datanodes                                                                                                                                                  [ OK ] \n * Stopping Postgres-XC coordinators                                                                                                                                               [fail] \ninvoke-rc.d: initscript postgres-xc, action \"stop\" failed.\ndpkg: error processing postgres-xc (--remove):\n subprocess installed pre-removal script returned error exit status 1\n * Starting Postgres-XC global transaction management daemons                                                                                                                      [ OK ] \n * Starting Postgres-XC coordinators                                                                                                                                               [ OK ] \n * Starting Postgres-XC datanodes                                                                                                                                                  [ OK ] \ndpkg: error while cleaning up:\n subprocess installed post-installation script returned error exit status 1\nErrors were encountered while processing:\n postgres-xc\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've discovered that it is at least partially uninstalling, as I cannot install anything else without using apt-get -f install to repair it.</p>\n\n<p>Also seems to be a known issue </p>\n\n<p><a href=\"http://askubuntu.com/questions/249531/postgres-xc-wont-uninstall-fails-on-stopping-co-ordinators\">Postgres-xc won&#39;t uninstall (Fails on Stopping Co-ordinators)</a>\n<a href=\"https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849\">https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849</a></p>\n\n<p>Is there anyway I can manually get it off my install. </p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Fixed it. <strong>Solution is to dpkg --purge postgres-xc</strong></p>\n"}]}]
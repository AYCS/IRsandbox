[{"id":714972,"title":"Search and encrpyt single file in gpg encrypted folder","body":"<p>i have a huge gpg encrypted tar-gzip file ~100 GB. But only need a single folder from it.\nI can list/search the content by doing eg.</p>\n\n<pre><code>gpg -c file.tar.gz.gpg|tar -tz |grep \"filename\"|more\n</code></pre>\n\n<p>This is super fast and i can quickly find the folder i need.</p>\n\n<p>But if i try to decrypt this single folder it takes for ever (the file is on a network store :-/). I tried:</p>\n\n<pre><code>gpg -c file.tar.gz.gpg |tar xz /path/to/filename\n</code></pre>\n\n<p>Could it be that tar must stream through the complete folder? Or is it not working with gzip / gpg compressed files?</p>\n","related_questions":[{"id":686336,"title":"tar: gzip: stdin: unexpected and of file","body":"<p>Hi anybody has an idea about this error:</p>\n\n<pre><code>PLAY [Deploy to status servers] *********************************************** \n\nGATHERING FACTS *************************************************************** \nok: [prodstatus0]\n\nTASK: [nodejs_app | Put upstart script in place] ****************************** \nok: [prodstatus0]\n\nTASK: [nodejs_app | Create config directory] ********************************** \nok: [prodstatus0]\n\nTASK: [nodejs_app | Put config file in place] ********************************* \nok: [prodstatus0]\n\nTASK: [nodejs_app | Create code folder to store artifact] ********************* \nok: [prodstatus0]\n\nTASK: [nodejs_app | Pull down code] ******************************************* \nok: [prodstatus0]\n\nTASK: [nodejs_app | Explode source artifact] ********************************** \nfailed: [prodstatus0] =&gt; {\"changed\": true, \"cmd\": [\"tar\", \"-xvzf\", \"cs-system-status-.tar.gz\"], \"delta\": \"0:00:00.011398\", \"end\": \"2015-10-16 16:42:59.648071\", \"rc\": 2, \"start\": \"2015-10-16 16:42:59.636673\", \"warnings\": [\"Consider using unarchive module rather than running tar\"]}\nstderr: \ngzip: stdin: unexpected end of file\ntar: Child returned status 1\ntar: Error is not recoverable: exiting now\n\nFATAL: all hosts have already failed -- aborting\n\nPLAY RECAP ******************************************************************** \n           to retry, use: --limit @/root/deploy_system_status.retry\n\nprodstatus0                : ok=6    changed=0    unreachable=0    failed=1\n</code></pre>\n"},{"id":639789,"title":"How to create a zip file from contents of a folder with certain name pattern?","body":"<p>is it possible to create a <code>tar.gz</code> file from contents of a folder but only put the files with certain name pattern in the archive and ignore the rest? for example just put the files which their names are <em>log_</em>? </p>\n"},{"id":627335,"title":"Archiving a lot of files / one big file","body":"<p>I want to compress about 100'000 files (that's what <code>find . -type f | wc -l</code> says) with a total disk usage of 100 GB. Most of the files are small but just a handful of them makes up about 70 GB of the 100 GB.</p>\n\n<p>I don't want to use tar or tar.gz for this because if I want to access the archive, File Roller first has to read in the entire archive from the external HDD before I can even see the file list. Same thing if I try to list the files on the terminal.</p>\n\n<p>I don't need the rights management of tar because I can remember the few files which need other rights than the others. What compression algorithm should I use?</p>\n\n<p>And while I'm at it: I make full disk backups with this command:</p>\n\n<pre><code>dd if=/dev/sda bs=32M | gzip -9 &gt; /location/dateAndMachineName.gz\n</code></pre>\n\n<p>It does a pretty good compression. But do you know a better compression algorithm?</p>\n"},{"id":572091,"title":"Recover Huge and Broken Gzip file","body":"<p>I have a 50.9 GB file which is a backup of my home folder on Ubuntu 12.04. I compressed this file using tar on Terminal from my sda (ext4) drive to sdb (ext4). The command I used was </p>\n\n<p><code>tar cvfz /media/2ndHDD/home.tar /home/&lt;my_username&gt;</code></p>\n\n<p>I was getting this error after the compression: </p>\n\n<p><code>tar: Exiting with failure status due to previous errors</code>. </p>\n\n<p>I repeated the compression thrice but same error I'm getting when the compression is finished. Because I'm already too exhausted of this on the third attempt (especially that it took me whole day), I just disregarded the error and was hoping it won't affect when I decompress the file.</p>\n\n<p>After that, I installed a new OS which is Ubuntu 14.04 to my sda drive. After the installation, I attempted to untar the file I compressed a while ago by using this</p>\n\n<pre><code>tar xvf home.tar\n</code></pre>\n\n<p>but I'm getting this error: </p>\n\n<pre><code>gzip: stdin: invalid compressed data--format violated\ntar: Unexpected EOF in archive\ntar: Unexpected EOF in archive\ntar: Error is not recoverable: exiting now\n</code></pre>\n\n<p>So I tried to gzip the file using </p>\n\n<p><code>gzip home.tar</code> </p>\n\n<p>and waited for almost 1 hour to finish. And after that, I decompressed it again using gzip this time. </p>\n\n<pre><code>tar -xvzf home.tar.gz\n</code></pre>\n\n<p>The process just can't finish and will stop after 15 minutes which leaves the created 'home' folder incomplete of files I'm expecting. I repeated the process over and over again but won't really finish.</p>\n\n<p>Is there any way I can recover this huge compressed file? I already tried <code>gzrecover</code> (<a href=\"http://fosshelp.blogspot.com/2013/04/howto-recover-corrupted-targz-file.html\" rel=\"nofollow\">http://fosshelp.blogspot.com/2013/04/howto-recover-corrupted-targz-file.html</a>) but always fails. Could it also be possible that I already lost my files when I attempted to convert it to gzip? I really regret why I didn't just copy the home folder uncompressed. :(</p>\n\n<p>UPDATE: Just now, I attempted to convert it back to tar by using this command </p>\n\n<p><code>gzip -d home.tar.gz</code> </p>\n\n<p>and decompressed it by running </p>\n\n<p><code>tar xvf home.tar</code> </p>\n\n<p>now I'm getting this error:</p>\n\n<pre><code>gzip: stdin: invalid compressed data--format violated\ntar: Unexpected EOF in archive\ntar: Unexpected EOF in archive\ntar: Error is not recoverable: exiting now\n</code></pre>\n\n<p>And even just listing down the files inside the tar file won't finish processing</p>\n\n<pre><code>tar -tvf home.tar\n</code></pre>\n\n<p>I will still get the same error above</p>\n\n<p>UPDATE (01/11/2015):\nI tried to run <code>strace gunzip home.tar.gz</code> and after about 15-20 minutes I was getting these:</p>\n\n<pre><code>read(3, \"\\231\\300\\2678\\242p\\206\\371\\341\\322\\352\\312\\374\\271?\\252.\\1775sC\\330|D$PF$\\10r\\362V\"..., 32768) = 32768\nwrite(4, \"\\256Y\\341\\224\\362Nn\\315\\316\\373&gt;\\31\\202\\275c\\373\\266\\265\\345\\27 R\\312\\2\\221b'6\\263\\321\\10F\"..., 32768) = 32768\nread(3, \"[\\366\\\"\\r\\265\\244\\3s\\201\\223b\\n\\267\\364\\34\\247Ej\\210tF\\22\\255B\\254\\223\\216E\\26\\242\\321\\210\"..., 32768) = 32768\nwrite(4, \"\\n1g\\201\\\\m\\231\\364\\352@\\\"%\\207\\\"Q+\\37a^!8\\226\\233\\204\\244\\v\\334&amp;i\\361\\2a\"..., 32768) = 32768\nread(3, \"\\222\\327\\351\\337(\\376\\376?\\246AzC\\371\\231\\200${V\\361\\310W9.\\3571a\\362\\357\\251\\306o\\234\"..., 32768) = 32768\nwrite(4, \"\\346\\216sH\\250\\272\\264T\\335\\356&lt;?\\377\\266\\272o{\\32\\21\\264\\367\\34\\377w\\327\\220\\324\\313\\231\\2775\\337\"..., 32768) = 32768\nread(3, \"\\266\\276\\345\\213\\277}G\\235\\355\\360\\326\\232\\244\\353Z\\\\\\215\\222g\\354\\202\\356\\351\\303G~\\210\\363b\\31\\17P\"..., 32768) = 32768\nwrite(4, \"\\326!1\\332\\213\\253\\276\\327\\222&lt;\\345\\25\\210\\366\\266\\337uSkj&gt;\\345$\\257\\225\\2q\\321^8Jk\"..., 32768) = 32768\nread(3, \"~D\\212\\373\\372\\\"\\373\\367m0\\322%\\365S\\377\\335\\331\\336\\376RB\\037727e'\\371#S\\224\\223\"..., 32768) = 26366\nread(3, \"\", 6402)                       = 0\nwrite(4, \"\\23\\320\\\"\\0059\\24\\20\\\"\\5#M\\210I\\323\\320\\363T\\220N\\321\\301\\207\\\\\\327(I\\204\\362\\371\\377\\32!\"..., 32768) = 32768\nwrite(4, \" \\6\\325\\33\\246\\324\\35\\240h\\225B\\270\\312\\207\\211\\340)\\314\\27\\17\\\"pv\\2232?\\\"0Sez\\247\"..., 14402) = 14402\nclose(3)                                = 0\nutimensat(4, NULL, {{1420884866, 686801693}, {1420818997, 36136000}}, 0) = 0\nfchown32(4, 1000, 1000)                 = 0\nfchmod(4, 0666)                         = 0\nclose(4)                                = 0\nrt_sigprocmask(SIG_BLOCK, [HUP INT PIPE TERM XCPU XFSZ], [], 8) = 0\nunlink(\"home.tar.gz\")                   = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\n_llseek(0, 0, 0xbf8c86a0, SEEK_CUR)     = -1 ESPIPE (Illegal seek)\nclose(0)                                = 0\nclose(1)                                = 0\nclose(2)                                = 0\nexit_group(0)                           = ?\n+++ exited with 0 +++\n</code></pre>\n\n<p>With the output above, is it possible that I can still recover it? I just don't know where to start :(</p>\n"},{"id":564024,"title":"GPG Key/File Naming Confusion","body":"<p>When managing encryption keys in Ubuntu, I created a GPG key through the CLI with <code>gpg --gen-key</code>. Ubuntu provides a nice little GUI for managing keys called \"Passwords and Keys\". It however lists keys as PGP keys instead of GPG keys, under the GnuPG keys menu option as shown below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/7B8Ro.png\" alt=\"enter image description here\"></p>\n\n<p>I have come to understand that <a href=\"http://askubuntu.com/questions/186805/difference-between-pgp-and-gpg\">GPG is not the same as PGP</a>, but a completely rewritten piece of software that adheres to the OpenPGP standard that PGP also adheres to. <strong>So why does Ubuntu use the term PGP instead of GPG?</strong> Also, when using the the <code>seahorse-nautilus</code> package to encrypt files from within nautilus, my files come out with the <code>.pgp</code> extension rather than <code>.gpg</code>.</p>\n"},{"id":492331,"title":"Tar Gzip Every n Files in a Directory","body":"<p>I have a folder with 7,491 files in it. I'd like to tar gzip these in batches of 100, e.g.</p>\n\n<pre><code>first 100 files &gt; archive1.tar.gz\nfiles 101-200 &gt; archive2.tar.gz\nfiles 201-300 &gt; archive3.tar.gz\n</code></pre>\n\n<p>Is there a way to do this via the command line?</p>\n"},{"id":230602,"title":"How to uncompress separated tgz files?","body":"<p>I am receiving error message as:</p>\n\n<pre><code>tar -zxvf OVM_EL5U3_X86_EBIZ12.1.1_DB_VIS_PVM.tgz.1\n\ngzip: stdin: not in gzip format\ntar: Child returned status 1\ntar: Error is not recoverable: exiting now\n</code></pre>\n\n<p>file name is ending with. Tgz. 1.</p>\n\n<p>When file name is. Tgz. 0 it will unzip by tar -zxvf command.</p>\n"},{"id":455783,"title":"Compressing videos create even larger file","body":"<p>I have been using the GUI (right click => compress) to try and compress a .tar containing 3 videos totalling 1.7gb (.H264 MP4s). gzip, lrzip, 7z etc. all do nothing to the file size and the compressed folder is also 1.7 gb.</p>\n\n<p>I then tried running lrzip from the command line (in case it was a gui problem), and used the -z flag (extreme compression), and this was my output.</p>\n\n<p><img src=\"http://i.stack.imgur.com/sDEUl.png\" alt=\"enter image description here\"></p>\n\n<p>As the compression ratio shows, the actual size of the compressed folder is bigger than the original! I don't know why I am having no luck, lrzip in particular should be effective according to random reviews I have read and the official docs (files larger than 100mb, the larger the better) - see <a href=\"https://wiki.archlinux.org/index.php/Lrzip\">https://wiki.archlinux.org/index.php/Lrzip</a></p>\n\n<p>Why can't I compress my files?</p>\n"},{"id":144564,"title":"Which kind of installation files should you prefer - .deb or tarball files? And why?","body":"<p>I have just starting Ubuntu as my primary OS and everytime I have to install something I generally try to find .deb files as that seems convenient, but someone on another forum told me I should always use tarball files.</p>\n\n<p>So can you tell me what would be the ideal recommendation and why?</p>\n"},{"id":136456,"title":"Can I use gpg on both Ubuntu and Windows to encrypt my files","body":"<p>I have a private gpg key for Ubuntu. </p>\n\n<p>My question is: How can I use same encryption key for both Windows and Ubuntu?</p>\n\n<p>If I use gpg in Ubuntu, can I use that same gpg key with Windows or vice versa? Or more simply: If I sign a file with gpg in Ubuntu, how can i use that file in Windows?</p>\n"}]}]
[{"id":539187,"title":"How to make Postgres start automatically on boot","body":"<p>I am new to Ubuntu and I would like to know how to make postgresql start automatically on boot and how to configure my setup so that I can start the postgres server if need be.</p>\n\n<p>I am working on a small rails project and I have been having difficulties with postgres starting correctly. I have had to resort to uninstalling and reinstalling postgres to just get the project up and running just to get work done. I have been using these commands.</p>\n\n<pre><code>sudo apt-get -y update\nsudo apt-get purge postgresql* # ending * is important\nsudo apt-get install postgresql libpq-dev\n</code></pre>\n\n<p>from this post </p>\n\n<p><a href=\"http://stackoverflow.com/questions/17934055/postgresql-cannot-connect-to-server-locally\">http://stackoverflow.com/questions/17934055/postgresql-cannot-connect-to-server-locally</a></p>\n\n<p>skipping </p>\n\n<pre><code>sudo add-apt-repository ppa:pitti/postgresql\n</code></pre>\n\n<p>as it appears it is out of date and there's a comment below about not needing it.</p>\n\n<p>If it helps my pg_hba.conf file appears to be located at </p>\n\n<pre><code>/etc/postgresql/9.1/main\n</code></pre>\n\n<p>I am running Ubuntu 12.04 on top of chrome os </p>\n\n<p>Thanks all for the help and sorry for the newb question!</p>\n","related_questions":[{"id":633919,"title":"How install postgresql 9.4","body":"<p>After trying <code>apt-get install postgresql-9.4</code>, updating, trying again etc etc. It seems I can't install it:</p>\n\n<pre><code> Couldn't find any package by regex 'postgresql-9.4'\n</code></pre>\n\n<p>I know there is a similar question in askubuntu but the answer there doesn't work either.</p>\n\n<p>I need postgresql version 9.4 cause I'm doing a pg:backup from Heroku and I get <a href=\"http://stackoverflow.com/questions/12836312/postgresql-9-2-pg-dump-version-mismatch\">this</a> error if I don't have 9.4.</p>\n\n<p>Thanks a lot for your help.</p>\n"},{"id":83633,"title":"How do I install Postgres Graphical Installer?","body":"<p>I am a newbie in using Ubuntu (more precisely never used linux except the production deployment ). Now I choose to hold a grip on the system and intalled a latest 11.10 Ubuntu in my 32 bit Intel** desktop. In this machine **I have a 'administrator' user 'tusar'.</p>\n\n<p>I want to install the PostgreSQL graphical version so downloaded this file postgresql-8.4.9-1-linux.bin from <a href=\"http://www.postgresql.org/download/linux/#oneclick\" rel=\"nofollow\">here</a></p>\n\n<p>Now If run the file with <code>./filename</code> command (refuses if I am not root), it opens up the graphical interface and completes the installation (creates user postgres and ask for password, wont complete if I dont give valid password).</p>\n\n<p>I checked with <code>/etc/inint.d/postgresql-8.4 status</code> , that postgres is running.</p>\n\n<p>But the problem is I am unable to open the GUI (I installed it in <code>/opt/Postgresql</code> ), its telling permission denied even if I am logged in as 'tusar'. Then I tried using the <code>su postgres</code> command and it directly changed the user without password. Now if I run the psql , createdb , its prompting me to install the postgres-client-package but this utilies are already installed and I can view them in my <code>/opt/Postgresql/8.4/bin</code> folder.</p>\n\n<p>I can run query through my JDBC utility programs but unable to use neither terminal nor the graphical interface (although I can see pgAdmin3 is there ). Urgent help needed.</p>\n\n<p>I have used <a href=\"http://enterprisedb.com/resources-community/pginst-guide\" rel=\"nofollow\">this guide</a> for the installation.</p>\n"},{"id":474152,"title":"postgresql has different version in ubuntu minimal (server)","body":"<p>I bought an vps (virtual private server) and have installed ubuntu minimal (server) 12.04 32 bit on it for openerp use, and one of the openerp requirement is installing the postgresql</p>\n\n<p>I installed just simply like the usually</p>\n\n<pre><code>sudo apt-get install postgresql\n</code></pre>\n\n<p>but went I execute this command</p>\n\n<pre><code> createuser --createdb --username postgres --no-createrole --no-superuser --pwprompt openerp \n</code></pre>\n\n<p>in postgres user it said:</p>\n\n<pre><code>postgres@furnia:~$ createuser --createdb --username postgres --no-createrole --no-superuser --pwprompt openerp\nEnter password for new role: \nEnter it again: \ncreateuser: could not connect to database postgres: could not connect to server: No such file or directory\n    Is the server running locally and accepting\n    connections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n</code></pre>\n\n<p>and when I restart the postgresql with </p>\n\n<pre><code>/etc/init.d/postgresql restart\n</code></pre>\n\n<p>it just skipped to next line and do nothing</p>\n\n<p>I start to check the whole postgresql in my server, and I discover that it's different with the desktop version</p>\n\n<p>thanks for helping</p>\n"},{"id":463594,"title":"Starting PostgreSQL server, postgres user unknown","body":"<p>I am trying to start a PostgreSQL server (9.3) on Ubuntu 14.04. I am following this standard tutorial: <a href=\"https://help.ubuntu.com/community/PostgreSQL\">https://help.ubuntu.com/community/PostgreSQL</a></p>\n\n<p>After updating to from 13.10 to 14.04 I purged the PostgreSQL installation because of a variety of difficulties I had inside pgadmin after the update.</p>\n\n<p>Using this command after the fresh install:</p>\n\n<pre><code>    sudo -u postgres psql postgres\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>    sudo: unknown user: postgres\n    sudo: rule-plugin could not be initialized\n</code></pre>\n\n<p>I couldn't find any solution to this, but I have to admit I only use postgresql to house my GIS-databases and I am pretty overwhelmed since encountering all these problems.</p>\n\n<p>Edit:</p>\n\n<p>Output of <strong>ls -la /var/lib/postgresql</strong> is \"Can't access /var/lib/postgresql: File or directory not found\" (<em>translated from German</em>)</p>\n\n<p>Edit 2 (purged and reinstalled):</p>\n\n<pre><code>    Paketlisten werden gelesen... Fertig\n    Abhängigkeitsbaum wird aufgebaut.       \n    Statusinformationen werden eingelesen.... Fertig\n    Das folgende Paket wurde automatisch installiert und wird nicht mehr benötigt:\n      libossp-uuid16\n    Verwenden Sie »apt-get autoremove«, um es zu entfernen.\n    Vorgeschlagene Pakete:\n      oidentd ident-server locales-all\n    Die folgenden NEUEN Pakete werden installiert:\n      postgresql-9.3\n    0 aktualisiert, 1 neu installiert, 0 zu entfernen und 0 nicht aktualisiert.\n    Es müssen noch 0 B von 3.451 kB an Archiven heruntergeladen werden.\n    Nach dieser Operation werden 17,5 MB Plattenplatz zusätzlich benutzt.\n    Vormals nicht ausgewähltes Paket postgresql-9.3 wird gewählt.\n    (Lese Datenbank ... 457272 Dateien und Verzeichnisse sind derzeit installiert.)\n    Vorbereitung zum Entpacken von .../postgresql-9.3_9.3.4-1.pgdg14.04+1_amd64.deb ...\n    Entpacken von postgresql-9.3 (9.3.4-1.pgdg14.04+1) ...\n    Trigger für postgresql-common (154.pgdg14.04+1) werden verarbeitet ...\n    Building PostgreSQL dictionaries from installed myspell/hunspell packages...\n      de_at\n      de_ch\n      de_de\n      en_au\n      en_ca\n      en_gb\n      en_us\n      en_za\n    Removing obsolete dictionary files:\n    postgresql-9.3 (9.3.4-1.pgdg14.04+1) wird eingerichtet ...\n    Use of uninitialized value $owneruid in getpwuid at /usr/bin/pg_createcluster line 277.\n    Error: clusters must not be owned by root\n    Error: could not create default cluster. Please create it manually with\n\n      pg_createcluster 9.3 main --start\n\n    or a similar command (see 'man pg_createcluster').\n    update-alternatives: /usr/share/postgresql/9.3/man/man1/postmaster.1.gz wird verwendet, um /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) im Auto-Modus bereitzustellen\n     * No PostgreSQL clusters exist; see \"man pg_createcluster\"\n</code></pre>\n"},{"id":186610,"title":"How do I upgrade to Postgres 9.2?","body":"<p>Just recently, I've read that <strong>PostgreSQL 9.2</strong> is released. My Ubuntu 12.04 has PostgreSQL 9.1.5 installed. How can I update to 9.2 version? I tried <code>apt-get update</code> and <code>apt-get upgrade</code> but no updates for PostgreSQL.</p>\n"},{"id":372671,"title":"Attempt start postgres server fails and gives no response?","body":"<p>When I do on my local machine.</p>\n\n<pre><code>sudo service postgresql start\n</code></pre>\n\n<p>I usually get the following or some error.</p>\n\n<pre><code>* Starting PostgreSQL 9.1 database server                               [ OK ]\n</code></pre>\n\n<p>But when I do it on my server I get no response, not even an error message.\nBoth my local machine and the server are ubuntu 12.04 LTS and both have postgres installed through apt-get. The only difference between the two is that my local machine is 32-bit and the server is 64-bit, but that should not matter.\nI tried uninstalling and installing, but the same problem occurs. How to I start postgres?</p>\n"},{"id":249531,"title":"Postgres-xc won&#39;t uninstall (Fails on Stopping Co-ordinators)","body":"<p>I was doing some rails development and accidentally installed postres-xc instead of the normal postgres package. I immediately went to remove postgres-xc, but apt-get will not uninstall it. I also tried installing the regular postgres, but it fails the same way.</p>\n\n<p>sudo apt-get remove postgres-xc output:</p>\n\n<pre><code>  Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  comerr-dev krb5-multidev libgraphics-magick-perl libgraphicsmagick++1-dev libgraphicsmagick++3 libgraphicsmagick1-dev libgraphicsmagick3 libgssrpc4 libkadm5clnt-mit8 libkadm5srv-mit8\n  libkdb5-6 libkrb5-dev libpq-dev libpq5 libssl-dev libssl-doc linux-headers-3.5.0-17\nUse 'apt-get autoremove' to remove them.\nThe following packages will be REMOVED:\n  postgres-xc\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\n1 not fully installed or removed.\nAfter this operation, 17.1 MB disk space will be freed.\nDo you want to continue [Y/n]? Y\n(Reading database ... 217256 files and directories currently installed.)\nRemoving postgres-xc ...\n * Stopping Postgres-XC datanodes                                                                                                                                                  [ OK ] \n * Stopping Postgres-XC coordinators                                                                                                                                               [fail] \ninvoke-rc.d: initscript postgres-xc, action \"stop\" failed.\ndpkg: error processing postgres-xc (--remove):\n subprocess installed pre-removal script returned error exit status 1\n * Starting Postgres-XC global transaction management daemons                                                                                                                      [ OK ] \n * Starting Postgres-XC coordinators                                                                                                                                               [ OK ] \n * Starting Postgres-XC datanodes                                                                                                                                                  [ OK ] \ndpkg: error while cleaning up:\n subprocess installed post-installation script returned error exit status 1\nErrors were encountered while processing:\n postgres-xc\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've discovered that it is at least partially uninstalling, as I cannot install anything else without using apt-get -f install to repair it.</p>\n\n<p>Also seems to be a known issue </p>\n\n<p><a href=\"http://askubuntu.com/questions/249531/postgres-xc-wont-uninstall-fails-on-stopping-co-ordinators\">Postgres-xc won&#39;t uninstall (Fails on Stopping Co-ordinators)</a>\n<a href=\"https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849\">https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849</a></p>\n\n<p>Is there anyway I can manually get it off my install. </p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Fixed it. <strong>Solution is to dpkg --purge postgres-xc</strong></p>\n"},{"id":201638,"title":"Postgresql fails to start on Ubuntu 10.04.4 LTS","body":"<p>I installed postgresql 9.2 from <code>add-apt-repository ppa:pitti/postgresql</code> using <code>apt-get install postgresql-9.2</code></p>\n\n<p>At the end of the install and every time I try to launch postgresql by using the following command</p>\n\n<pre><code>/etc/init.d/postgresql start\n</code></pre>\n\n<p>or</p>\n\n<pre><code>service postgresql start\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Error: could not exec /usr/lib/postgresql/9.2/bin/pg_ctl    \n/usr/lib/postgresql/9.2/bin/pg_ctl start -D /var/lib/postgresql/9.2/main -l \n/var/log/postgresql/postgresql-9.2-main.log -s -o  -c \nconfig_file=\"/etc/postgresql/9.2/main/postgresql.conf\" :\n                                                                    [fail]\ninvoke-rc.d: initscript postgresql, action \"start\" failed.\ndpkg: error processing postgresql-9.2 (--configure):\nsubprocess installed post-installation script returned error exit status 1\nErrors were encountered while processing:\npostgresql-9.2\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n</code></pre>\n\n<p>I have tried everything found here: <a href=\"http://stackoverflow.com/questions/2748607/how-to-thoroughly-purge-and-reinstall-postgresql-on-ubuntu\">How to thoroughly purge and reinstall postgresql on ubuntu</a> and here: <a href=\"http://stackoverflow.com/questions/11874754/eliminating-non-working-postgresql-installations-on-ubuntu-10-04-and-starting-af\">Eliminating non working postgresql installations on ubuntu 10-04 and starting af</a>.</p>\n\n<p>I have also done</p>\n\n<pre><code>dpkg -P --force-remove-reinstreq postgresql-client-9.2\n</code></pre>\n\n<p>in my attempt to remove everything postgres related from my server.</p>\n\n<p>After removing postgresql I have used  </p>\n\n<pre><code>dpkg --get-selections | grep postg\n</code></pre>\n\n<p>To be sure there is nothing left and I can do a clean install.</p>\n\n<p>I have also made sure that the files and folders mentioned in the error message have the right permissions. The <code>/var/log/postgresql/postgresql-9.2-main.log</code> file is empty.\nI have tried installing every postgresql version from 8.3 to 9.2 and I get the same error on every time. I once managed to compile postgresql from the source provided on their website but then I encountered weird errors with psycopg2 so I figured I'd install postgresql this way and avoid those errors. Also when I type <code>apt-get install postgresql</code> it by default tries to install the 8.3 version even when I can find the package by typing  <code>apt-get install postgresql-9.2</code>.</p>\n"},{"id":97371,"title":"How do I install Davical?","body":"<p>i'm using ubuntu 11.4 oneiric ocelot and tried to set up the Davical Server. I have installed it and added the users davical_app and davical_dba. A tutorial on <a href=\"http://wiki.davical.org/w/Ubuntu_Maverick\" rel=\"nofollow\">http://wiki.davical.org/w/Ubuntu_Maverick</a>\ntold me to say no to all three questions. Then it said to add the following lines to <code>/etc/postgresql/main/9.1/pg_hba.conf</code>:</p>\n\n<pre><code>local   davical_app     trust\nlocal   davical_dba     trust\n</code></pre>\n\n<p>I tried to restart the postgresql server as the manual told me by the following init script:</p>\n\n<pre><code>/etc/init.d/postgresql restart\n</code></pre>\n\n<p>but this failed. The command told me that it couldn't load the pg_hba files because of line 77 and 78: the ones I've added. Then I restarted my computer because I thought then the postgresql server must restart too. I tried to run the shell script in</p>\n\n<pre><code>su postgres -c /usr/share/davical/dba/create-database.sh\n</code></pre>\n\n<p>anyway, but it said that it couldn't find the postgresqlserver.</p>\n\n<p>On <a href=\"http://mergy.org/2011/11/fixing-davical-and-postgresql-on-ubuntu-11-10/\" rel=\"nofollow\">http://mergy.org/2011/11/fixing-davical-and-postgresql-on-ubuntu-11-10/</a> I found a tutorial to fix davical and postgresql 9.1 but that didn't help. What can I do to get it run on my Ubuntu system?</p>\n"},{"id":66194,"title":"How do I migrate my postgres data from 8.4 to 9.1?","body":"<p>I have upgraded my ubuntu development machine from 11.04 to 11.10.\nIn the process my postgres was also upgraded from 8.4 to 9.1.</p>\n\n<p>But I seem to have lost all my data. If I look, I can see that my data for 8.4 is in folder <code>/var/lib/postgres/8.4/main</code> and my new database is in <code>/var/lib/postgres/9.1/main</code>.</p>\n\n<p>What is the best way to migrate my data to the new version? Can I just copy the files? </p>\n"}]}]
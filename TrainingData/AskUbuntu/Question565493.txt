[{"id":565493,"title":"USB Disk stuck in read only after dd an ISO","body":"<p>This has probably been asked before but I have not been able to find it so I'll ask again.\nHere's what I did:</p>\n\n<pre><code>sudo dd if=./windows.iso of=/dev/sdb\n</code></pre>\n\n<p>#sdb is a 64gb USB disk</p>\n\n<p>Afterwards I was unable to add to the disk so I formatted it to NTFS and tried to manually copy the files over at which point I got this error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/mkzqQ.png\" alt=\"enter image description here\"></p>\n\n<p>I don't think it is a problem with Ubuntu so much as it is a problem with dd, or my ability to use dd, because I have previously had the same problem with dd on both mint and cyanogenmod.</p>\n","related_questions":[{"id":522856,"title":"NTFS disk is read-only and I can&#39;t change to read &amp; write","body":"<p>I have used Windows 7 for a long time and thought to give Linux (Ubuntu) a try. I have two hard drives, one 120GB, other 1TB. First one is for OS and software, while the 1TB disk is for data and games. So I installed Ubuntu 14.04 on the 120GB disk (sda) and have done all those 10-things-you-should-do-after-installing-ubuntu. However, it did not want to mount the 1TB disk (sdb) at all saying that it's corrupted, but after two restarts it mounted (...?). I could access all my files but as a read-only disk. I installed GParted and got this message upon right-clicking <code>/dev/sdb1</code> and selecting information:</p>\n\n<blockquote>\n  <p>Unable to read the contents of this file system!</p>\n  \n  <p>Because of this some operations may be unavailable.</p>\n  \n  <p>The cause might be a missing software package.</p>\n  \n  <p>The following list of software packages is required for ntfs file system support:  ntfsprogs / ntfs-3g.</p>\n</blockquote>\n\n<p>Since I've been tackling this issue for about 5 hours now, I have heard and came across ntfsprogs and ntfs-3g but have only succeeded in installing ntfs-3g. ntfsprogs refuses to install for various reasons, e.g.</p>\n\n<p>command</p>\n\n<pre><code>sudo apt-get install ntfsprogs\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Reading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage ntfsprogs is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'ntfsprogs' has no installation candidate\n</code></pre>\n\n<p>What should I do? How can I make it read &amp; write? It's an NTFS file system, but it's about 50% full and I can not lose that data. Is NTFS absolutely useless in Ubuntu (or Linux generally)?</p>\n\n<p>Please help</p>\n\n<hr>\n\n<p>UPDATE: Windows' disk checker said everything is normal, disk has been about 1% fragmented, and therefore defragmented, but nonetheless, the problem persisted. So I took a few days off to compress everything I had on it and transfered that data to cloud storage (Apple's Time Capsule) via Windows. I formatted the disk (to NTFS) and now it's empty and it indeed IS read&amp;write in Ubuntu. But now I have a problem of being unable to access the Time Capsule from Ubuntu. I looked it up on the internet, but there are only solutions for earlier Ubuntu.</p>\n"},{"id":644226,"title":"Cannot format read-only USB; &#39;Error calling fsync(2) on /dev/sdb: Input/output error &#39; when I try to format the drive","body":"<p>I'm trying to format this USB, when I plug it in it mounts and I can read what's on it, but can't write to it or delete anything (read-only error).</p>\n\n<p>First I tried the normal 'Disk utility' - unmount - Format drive/volume, but I get:</p>\n\n<pre><code>Error calling fsync(2) on /dev/sdb: Input/output error\n</code></pre>\n\n<p>After that I've unmounted the device and tried using Gparted, it shows that there is 7.23 GB of unallocated space, and when I try 'Device --> Create Partition Table' it just exists with:</p>\n\n<pre><code>Error while creating partition table.\n</code></pre>\n\n<p>I've also followed instructions from <a href=\"https://linuxguruz.wordpress.com/2008/09/23/restoreformat-usb-flash-drive/\" rel=\"nofollow\">here</a> (using <code>fdisk</code> to create a new partition), but at the last step I get:</p>\n\n<pre><code>Command (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nError closing file\n</code></pre>\n\n<p>also instructions from <a href=\"http://askubuntu.com/questions/144852/help-me-i-cant-format-my-usb-i-have-already-tried-with-mkdosfs-and-gparted\">here</a>:</p>\n\n<pre><code>sudo dd if=/dev/zero of=/dev/sdb bs=1M count=40\n</code></pre>\n\n<p>I've also tried this version of <code>dd</code>:</p>\n\n<pre><code>sudo dd if=/dev/zero of=/dev/disk_name bs=512 count=1\n</code></pre>\n\n<p>both exited with no errors but didn't change a thing.</p>\n\n<p>Also <a href=\"http://askubuntu.com/questions/101637/usb-turn-write-protection-off/138051#138051\">this</a> answer, but I didn't know how to \"you should re-mount 'em as read-write in order to write data to them.\" ??</p>\n\n<p>Edit: I also watched <code>tail -f /var/log/syslog</code> when I plug in the usb, I get</p>\n\n<pre><code>[sdb] Mode Sense: 23 00 00 00\nsd 2:0:0:0: [sdb] Write cache: disabled, read cache: enabled, doesn't support DPO or FUA\n...\nFAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n</code></pre>\n\n<p>So I'm pretty desperate at this point, is there a way to gain control of the usb again?</p>\n"},{"id":563764,"title":"USB devices showing a read only","body":"<p>I have an 8gb FAT32 USB stick and a 500gb FAT32 HDD; both of these have suddenly become read only devices. </p>\n\n<p>I've tried deleting the directory inside /media and then creating it again, naming it,  then giving that directory full permissions. However, this didn't work and I can not understand why it has suddenly stopped letting me write to the drives, and I can't figure out how to solve it.</p>\n\n<p>If anyone could help that'll be great! Let me know if you need me to post any output from the terminal, I'm quite a Linux novice so I'll need my hand held through what code to use.</p>\n\n<p>Many thanks in advance!</p>\n\n<p>Results of <code>mount</code>:</p>\n\n<pre><code>simon@simon-VPCEH1L8E:~$ mount\n/dev/sda5 on / type ext4 (rw,errors=remount-ro) \nproc on /proc type proc (rw,noexec,nosuid,nodev) \nsysfs on /sys type sysfs (rw,noexec,nosuid,nodev) \nnone on /sys/fs/cgroup type tmpfs (rw)\nnone on /sys/fs/fuse/connections type fusectl (rw) \nnone on /sys/kernel/debug type debugfs (rw) \nnone on /sys/kernel/security type securityfs (rw)\nudev on /dev type devtmpfs (rw,mode=0755) \ndevpts on /dev/pts type devpts (rw,noexec,nosuid,gid=5,mode=0620) \ntmpfs on /run type tmpfs (rw,noexec,nosuid,size=10%,mode=0755) \nnone on /run/lock type tmpfs (rw,noexec,nosuid,nodev,size=5242880) \nnone on /run/shm type tmpfs (rw,nosuid,nodev)\nnone on /run/user type tmpfs (rw,noexec,nosuid,nodev,size=104857600,mode=0755) \nnone on /sys/fs/pstore type pstore (rw) \nbinfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,noexec,nosuid,nodev)\nsystemd on /sys/fs/cgroup/systemd type cgroup (rw,noexec,nosuid,nodev,none,name=systemd)\ngvfsd-fuse on /run/user/1000/gvfs type fuse.gvfsd-fuse (rw,nosuid,nodev,user=simon)\n</code></pre>\n\n<p>Results of <code>sudo parted -l</code>:</p>\n\n<pre><code>Model: ATA ST9500325AS (scsi)\nDisk /dev/sda: 500GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End    Size    Type      File system     Flags\n 4      1049kB  500GB  500GB   extended\n 5      2097kB  496GB  496GB   logical   ext4\n 6      496GB   500GB  4238MB  logical   linux-swap(v1)\n\n\nModel: Verbatim STORE N GO (scsi)\nDisk /dev/sdb: 8028MB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type     File system  Flags\n 1      24.6kB  8028MB  8028MB  primary  fat32        boot\n</code></pre>\n\n<p>Results of <code>lsblk</code>:</p>\n\n<pre><code>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nsda      8:0    0 465.8G  0 disk \n├─sda4   8:4    0     1K  0 part \n├─sda5   8:5    0 461.8G  0 part /\n└─sda6   8:6    0     4G  0 part [SWAP]\nsdb      8:16   1   7.5G  0 disk \n└─sdb1   8:17   1   7.5G  0 part /media/simon/LYDIA\nsr0     11:0    1  1024M  0 rom \n</code></pre>\n\n<p>USB write test:</p>\n\n<pre><code>simon@simon-VPCEH1L8E:~$ cd /media/simon/LYDIA\nsimon@simon-VPCEH1L8E:/media/simon/LYDIA$ touch newfile001\ntouch: cannot touch ‘newfile001’: Read-only file system\nsimon@simon-VPCEH1L8E:/media/simon/LYDIA$ \n</code></pre>\n\n<p>Results of <code>dmesg</code>:</p>\n\n<pre><code>[  159.366772] FAT-fs (sdb1): Volume was not properly unmounted. Some data may be       corrupt. Please run fsck.\n[  159.383252] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.383258] FAT-fs (sdb1): Filesystem has been set read-only\n[  159.383571] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.384251] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.384319] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.475111] systemd-hostnamed[2966]: Warning: nss-myhostname is not installed.\nChanging the local hostname might make it unresolveable. Please install nss-myhostname!\n[  159.480141] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.480224] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.480497] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[  159.480516] FAT-fs (sdb1): error, fat_get_cluster: invalid cluster chain (i_pos 0)\n[ 2893.091767] wlan0: deauthenticating from c0:3e:0f:31:21:05 by local choice   (reason=3)\n</code></pre>\n"},{"id":621839,"title":"thumb drive went in to read only mode, no idea why?","body":"<p>It's almost brand new, suddenly </p>\n\n<pre><code> sudo dd if=/dev/zero of=/dev/sdd bs=512 count=1\n</code></pre>\n\n<p>dd: failed to open ‘/dev/sdd’: Read-only file system</p>\n\n<p>tried with </p>\n\n<pre><code> sudo hdparm -r0 /dev/sdd\n</code></pre>\n\n<p>/dev/sdd:\n setting readonly to 0 (off)\n readonly      =  0 (off)</p>\n\n<p>but doesn't help, still gives the same error for dd</p>\n\n<p>same with gParted</p>\n\n<p>This is the 3rd thumb drive I have problems with since i'm on ubuntu.\n2 of them were brand new and had various problems resulting in being unusable now.\nI don't recall doing anything particular with them that might have caused it. Other than few benchmarks (from the Disks tool) and few reformattings.</p>\n"},{"id":356101,"title":"Ext4 constantly mounts as read-only","body":"<p>I'm at a complete loss, here. After only using my computer for short periods of time (often less than a minute), my root partition (Ext 4, <code>/dev/sda5</code>) become read-only without warning. This happens constantly, and I'm not sure why. I'm <strong>really</strong> hoping not to have to do a fresh install.</p>\n\n<p>I've tried rebooting, but the routine fsck that Ubuntu performs during boot fails to fix the partition. If I either let it boot and press <kbd>M</kbd> to manually recover, or boot in recovery mode and use a root terminal, I can usually fix the issue using <code>fsck -f -v -y /dev/sda5</code>. It's worth noting that I've also tried using a live USB stick (with Linux Mint on it), and running fsck from there. Also, I used the old version of Pared Magic that comes with version 15.0 of Hiren's Boot CD.</p>\n\n<p>However, the issue rears it's ugly head almost instantly when I reboot, regardless of how I run fsck. I even went so far as to reinstall some ext2/3/4 packages from the terminal: <code>sudo apt-get install --reinstall e2fslibs e2fsprogs &amp;&amp; sudo reboot</code>. Still no dice. I have also tried booting into multiple kernel versions, each gave me the same issue.</p>\n\n<p>This particular computer running Ubuntu 13.04, 32-bit version.</p>\n\n<p>Here's a the exact info bash displayed during of one of my attempts at fixing the partition using Linux Mint:</p>\n\n<pre><code>#fsck /dev/sda5 -y -v\nfsck from util-linux 2.20.1\ne2fsck 1.42.5 (29-Jul-2012)\nFreedom contains a file system with errors, check forced.\nPass 1: Checking inodes, blocks, and sizes\nDeleted inode 1324553 has zero dtime.  Fix? yes\n\nInodes that were part of a corrupted orphan linked list found.  Fix? yes\n\nInode 1324554 was part of the orphaned inode list.  FIXED.\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\nBlock bitmap differences:  -(11474858--11474863) -(11519854--11519861)\nFix? yes\n\nFree blocks count wrong for group #350 (25342, counted=25348).\nFix? yes\n\nFree blocks count wrong for group #351 (27260, counted=27268).\nFix? yes\n\nFree blocks count wrong (8929729, counted=8929743).\nFix? yes\n\nInode bitmap differences:  -(1324553--1324554)\nFix? yes\n\nFree inodes count wrong for group #162 (5151, counted=5153).\nFix? yes\n\nFree inodes count wrong (3000124, counted=3000126).\nFix? yes\n\n\nFreedom: ***** FILE SYSTEM WAS MODIFIED *****\n\n      392914 inodes used (11.58%, out of 3393040)\n        2999 non-contiguous files (0.8%)\n     676 non-contiguous directories (0.2%)\n         # of inodes with ind/dind/tind blocks: 7328/467/0\n         Extent depth histogram: 208561/63\n 4640048 blocks used (34.19%, out of 13569791)\n       0 bad blocks\n       1 large file\n\n  273494 regular files\n   39518 directories\n          57 character device files\n          25 block device files\n           1 fifo\n          32 links\n       79787 symbolic links (62924 fast symbolic links)\n          23 sockets\n------------\n      392937 files\n</code></pre>\n\n<p>If there's anything I can do to provide more detailed information, please let me know.</p>\n\n<p><strong>update #1:</strong> After using Hiren's Boot CD once again, I was able to boot into the \"Mini XP\" environment and run two disk checking utilities (Victoria, and HD Tune). Victoria gave me some interesting S.M.A.R.T results: <img src=\"http://i.imgur.com/bA0E41J.png\" alt=\"Victoria\"></p>\n\n<p>HDTune was a real letdown for me: <img src=\"http://i.imgur.com/opS3x3u.png\" alt=\"HD Tune\"></p>\n\n<p><strong>The question for me now is, is this an indicator of a hard drive about to die completely?</strong></p>\n\n<p><strong>Update #2:</strong> I had previously added some images to this post, but discovered they weren't viewable. However, I've just re-uploaded them to a different website, and re-posted them. Therefore, they should now be visible.</p>\n"},{"id":567124,"title":"Trying to use dd to write an iso to a usb stick to be used in Windows 7","body":"<p>I have a Win7/64 laptop without a DVD drive, and a copy of Office on a DVD I'd like to install.</p>\n\n<p>I figured I could use another machine running Xubuntu 14.04 to make an ISO of the disk, write that ISO to a USB stick, and then install that on the first machine</p>\n\n<p>My problem is this:  I use dd to write the ISO to the USB drive, and it looks like it took a good copy, but when I try to use it on the windows machine, I get a report that the USB stick's \"Disk structure is corrupted and unreadable\".</p>\n\n<p>Some more information: </p>\n\n<ul>\n<li><p>I start with the usb drive formatted to NTFS.  The Windows Machine <em>can</em> read it at this point</p></li>\n<li><p>I'm using the following command:\nsudo dd bs=4M if=office.iso of=/dev/sdb</p></li>\n<li><p>I've tried the above with the ISO on both my Linux machine's HDD, and ripping straight from the CD.</p></li>\n<li><p>I've tried formatting the USB stick on both Linux (with gparted) and on Windows, both with no luck.</p></li>\n</ul>\n\n<p>Am I using dd wrong?  Is there something else I should use?  At this point I can just download office onto that machine, but I'd like to figure this out for another time</p>\n\n<p>Thanks!</p>\n"},{"id":556589,"title":"File system went read only after adding ssh key","body":"<p>I followed <a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2\" rel=\"nofollow\">this guide</a> to set up ssh key on my digital ocean droplet, but since I made step 4 my file system went read-only. I changed <code>/etc/ssh/sshd_config</code> from <code>PermitRootLogin yes</code> to <code>PermitRootLogin without-password</code> and then <code>reload ssh</code>; and when I logged back in, I had no writing rights anymore.</p>\n\n<p>I can log in using <code>ssh root@123.45.67.89</code> but it does not ask me for any password, and I can not modify any file.</p>\n\n<p>Before doing this, I upgraded my ubuntu from 12.04 to 14.04, it asked me during the upgrade which setting did I want for <code>PermitRootLogin</code> and when I looked at <code>/etc/ssh/sshd_config</code> after the installation (and after adding my ssh key) it was set on <code>PermitRootLogin yes</code>.</p>\n\n<p>--- update ---</p>\n\n<p>After reading <a href=\"http://askubuntu.com/a/312216/220228\">this</a> answer I ran <code>dmesg | grep \"EXT4-fs error\"</code> to see if I have any issues related to the filesystem / journaling system itself.</p>\n\n<p>It returned many times:</p>\n\n<p><code>[68241.757233] EXT4-fs error (device vda): htree_dirblock_to_tree:892: inode #533953: block 2108070: comm updatedb.mlocat: bad entry in directory: rec_len is smaller than minimal - offset=0(0), inode=0, rec_len=0, name_len=0</code></p>\n\n<p>What should I do?</p>\n"},{"id":518014,"title":"Getting read-only file system after install Lubuntu 14.04","body":"<p>Sorry for my bad English.</p>\n\n<p>I am unable to use Ubuntu/Lubuntu after a fresh installation. Few seconds after boot the system is turned read-only.</p>\n\n<p>Previous searches indicates a bug with wubi in 14.04 ubuntu version, or a hard drive problem. After change my HD, I get the same error.</p>\n\n<p>I already tried:\nChange ro to rw during boot and run 'sudo update-grud' after boot.\nRun fsck (In my older and new HD, an it does not found any error).</p>\n\n<p>I would like to know if there is some type of solution for this situation, because I was using 14.04 (32-bit) with no problem, and now I need to use a 64 bits version.</p>\n"},{"id":515669,"title":"Read-only filesystem Recovery Mode not working","body":"<p>I have seen other posts of this before, but they didn't help. In short, today I was trying to play Colobot on my Ubuntu Trusty computer, when I tried to access the directory the game was in by terminal, bash warned me that the disk was in a read-only state. </p>\n\n<p>I reboot and boot into recovery mode, there I did <code>fsck</code>, it threw errors, but apparently failed to fix them. At that point I was getting annoyed and searched the internet, once I found an answer, I ran the grub and dpkg options in recovery mode, recovery mode said it was read/write, but when I boot in, I get the same thing, read-only. So I reboot into recovery mode, and tada! It's read-only again. I can't think of anything else to do, as the other people who had the same problems had them fixed by the steps I did. I got all my important files backed up to both a separate partition and a separate computer, so no worries there.</p>\n\n<p>I just need help getting this to work, as my computer might as well be a brick if I cant do f/a on it</p>\n"},{"id":509505,"title":"Secondary SSD stuck as read only","body":"<p>I am having trouble getting my second SSD to work with Linux. I recently switched from Windows to Ubuntu 14.04 and I am still learning Linux. I can see my second drive under Devices in the File Manager, but it is stuck as read-only. If I right click, go to Properties, then Permissions, all the options are greyed out. I tried searching for information and found a few posts about mounting drives. I tried adding this line to fstab, </p>\n\n<pre><code>UUID=\"502fd123-7748-463c-9155-ad5744a4804b\"  /media/Calvin  ext4  defaults,windows_names,locale=en_CA.utf8  0 0\n</code></pre>\n\n<p>but that doesn't help. I ran <code>fdisk -l</code> and got this output;</p>\n\n<pre><code>Disk /dev/sda: 120.0 GB, 120034123776 bytes\n255 heads, 63 sectors/track, 14593 cylinders, total 234441648 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x000bee68\n\nDevice Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   200988671   100493312   83  Linux\n/dev/sda2       200990718   234440703    16724993    5  Extended\n/dev/sda5       200990720   234440703    16724992   82  Linux swap / Solaris\n\nDisk /dev/sdb: 240.1 GB, 240057409536 bytes\n255 heads, 63 sectors/track, 29185 cylinders, total 468862128 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x000448ac\n\nDevice Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048   468860927   234429440    5  Extended\n/dev/sdb5            4096   468860927   234428416   83  Linux\n</code></pre>\n\n<p>The output of <code>mount | grep /dev/sdb</code> is;</p>\n\n<pre><code>/dev/sdb5 on /media/calvin/Storage type ext4 (rw,nosuid,nodev,uhelper=udisks2)\n</code></pre>\n\n<p>Any help would be greatly appreciated. If there is any other information I should have provided please let me know and I will add it as soon as I am able.</p>\n"}]}]